---
title: 完美解决 gcr.io 镜像下载
date: 2022-11-01 17:11
categories:
- k8s
tags:
- image
- gcr.io
---
  
  
摘要: desc
<!-- more -->


## 现成的镜像代理仓库

### k8s.gcr.io

这是 gcr.io/google-containers 的仓库，使用阿里云镜像

```bash
docker pull k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.3.0

# 换成

docker pull registry.aliyuncs.com/google_containers/csi-node-driver-registrar:v2.3.0

```

也可以使用 lank8s.cn，他们的对应关系 k8s.gcr.io –> lank8s.cn，gcr.io –> gcr.lank8s.cn

```bash
docker pull k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.3.0

# 换成

docker pull lank8s.cn/sig-storage/csi-node-driver-registrar:v2.3.0

```

### quay.io

这是Red Hat运营的镜像库，虽然没有被墙，但下载还是比较慢，可以使用中科大镜像

```bash
docker image pull quay.io/kubevirt/virt-api:v0.45.0

# 换成

docker pull quay.mirrors.ustc.edu.cn/kubevirt/virt-api:v0.45.0
```

## 使用自己的代理下载

使用梯子，并且是 http 和 https 协议的（sock5 的不行），可以先在自己的电脑上使用 docker 中配置代理

```JSON
{
 "proxies":
 {
   "default":
   {
     "httpProxy": "http://127.0.0.1:1080",
     "httpsProxy": "http://127.0.0.1:1080",
     "noProxy": "*.test.example.com,.example2.com"
   }
 }
}
```

有了代理后，就可以访问外面的镜像，下载完成后，使用 docker save 打包成 tar 包，再把 tar 上传到服务器上，最后使用 docker load 导入到服务器的镜像仓库中。
