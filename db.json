{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-volantis/source/js/aplayer.js","path":"js/aplayer.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/app.js","path":"js/app.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/issues.js","path":"js/issues.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/valine.js","path":"js/valine.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/css/first.styl","path":"css/first.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/search/google.js","path":"js/search/google.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/search/algolia.js","path":"js/search/algolia.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/search/azure.js","path":"js/search/azure.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/search/baidu.js","path":"js/search/baidu.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-volantis/source/js/search/hexo.js","path":"js/search/hexo.js","modified":1,"renderable":1}],"Cache":[{"_id":"source/Untitled.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1611735635736},{"_id":"source/404.md","hash":"a2831af51e0ff99ab592c07db840345f16b0e40a","modified":1611735635736},{"_id":"source/archives/index.md","hash":"5560a9d73298e04873c2a72860ee809f200e0142","modified":1611735635778},{"_id":"source/about/index.md","hash":"5c7ffa34c5c97ea45230ad4f2b444f9b74f1620c","modified":1611735635777},{"_id":"source/_posts/SpringBoot一.md","hash":"01a01239f9a23768cad2eb6891651a8399353f24","modified":1611735635740},{"_id":"source/_posts/CA证书服务.md","hash":"af7fb10012e259a919fc0b4a46a5b1f1a4fda988","modified":1611735635737},{"_id":"source/_posts/Centos7升级内核.md","hash":"919956bb666d4567414e81fc3d4ca1d453bd4b4b","modified":1611735635738},{"_id":"source/_posts/desc.md","hash":"e4b001514c46af5f10b811e112a7565f8f19438f","modified":1611739822399},{"_id":"source/_posts/SpringMVC一.md","hash":"2cf56130b9d16ce51705ea99fa255c5eb1857ef7","modified":1611735635741},{"_id":"source/_posts/centos7优化脚本.md","hash":"4f0126ac23a59cab50feee0cb8585985df88d064","modified":1611735635742},{"_id":"source/_posts/flume安装.md","hash":"522babee99979fa369a628b816f5e7790f5cb243","modified":1611735635746},{"_id":"source/_posts/flume.md","hash":"74369b98f6d5d10641ba750f03db7501cdb71bdc","modified":1611735635746},{"_id":"source/_posts/flume案例.md","hash":"437e8a9f0dabe4682f7e4c6f5379fe8c0461dc01","modified":1611735635747},{"_id":"source/_posts/gcc升级.md","hash":"7b852b77bac5ad2875024db7dc754d91007e7b53","modified":1611735635748},{"_id":"source/_posts/hello-world.md","hash":"acad91ace80b80295b11a9b7ad4c29a2dcfdd8fb","modified":1611735635750},{"_id":"source/_posts/hadoop.md","hash":"96aa6b90c04e3d49b305a1e26aaca5240a791b6d","modified":1611735635749},{"_id":"source/_posts/heox使用.md","hash":"cc5034b0f4f6a1b3aece06d069b5a4a2dd04c615","modified":1611735635750},{"_id":"source/_posts/kafaka安装.md","hash":"00e940f3d0651079de09bd02feb8574f74efbe45","modified":1611735635756},{"_id":"source/_posts/pipenv使用.md","hash":"bd9ca476e0082843adb3d8c29803e4d2a00ea698","modified":1611735635766},{"_id":"source/_posts/openresty编译安装.md","hash":"9834d71ad5572ed87733182eca8db1d964aaf90b","modified":1611735635765},{"_id":"source/_posts/proxmox超融合.md","hash":"8dfa0f08454e71a71bab8a144265da3554dca6bf","modified":1611735635769},{"_id":"source/_posts/代码补全.md","hash":"4eb1cc34b426a2522567c911a9ff69830c89e1f6","modified":1611735635776},{"_id":"source/friends/index.md","hash":"b6bcd97f243b004ee88126dda9ee276a28610c25","modified":1611735635782},{"_id":"source/tags/index.md","hash":"3cc46fb05c2a4023c603c658cde72c470ab4468d","modified":1611735635783},{"_id":"source/_posts/spark安装.md","hash":"084d1676a27c2a37c4cb37cb02130bb40583135a","modified":1611735635774},{"_id":"source/categories/index.md","hash":"bcbd5f0ff024207da43bd32b4b58cb8998f4db4c","modified":1611735635780},{"_id":"source/_posts/zookeeper安装.md","hash":"6d67c3a40b2d0de9faba1cb923bd33e48fd0a9f4","modified":1611735635776},{"_id":"source/_posts/elasticsearch/skywaking.md","hash":"f7a1620b5554f2aed8b802a9b403301f30e6af6f","modified":1611735635744},{"_id":"source/_posts/cmdb/hosts.md","hash":"00bf3344798969a633855b96c491dd41e715831b","modified":1611735635743},{"_id":"source/_posts/GO/go.md","hash":"0cd07c46ed1b64a24f61fe675760bf10b3ddded2","modified":1611735635739},{"_id":"source/_posts/GO/gomod.md","hash":"afd8f9594c85caada8e8c909edc884ea562c0b90","modified":1611735635739},{"_id":"source/_posts/ansible/Playbook支持任务结果回显.md","hash":"bc79611d940961bff4032b1401c52b9298e3acb6","modified":1611735635742},{"_id":"source/_posts/elasticsearch/部署es7x.md","hash":"a60377bd45fca2194f7bef86b52cf51226f3d289","modified":1611735635744},{"_id":"source/_posts/install/centos7安装python3.md","hash":"11e4de15bee302cd54bde6419c3d0bf7c038cc27","modified":1611735635752},{"_id":"source/_posts/flask/flask分页.md","hash":"48f2c34c5b75afc46f4f297fe820d700323e77d5","modified":1611735635745},{"_id":"source/_posts/install/centos7安装redis5.md","hash":"1968a55ae9c0a0f861354ecb0ebcec14dc2033f4","modified":1611735635753},{"_id":"source/_posts/k8s/k8s故障.md","hash":"6f38de77d6aed231839e90cf85708c3152dd12c4","modified":1611735635755},{"_id":"source/_posts/jenkins/jenkins.md","hash":"33a3cc3e3aa7f5108ed9d908fc397e5be9aa57c6","modified":1611735635754},{"_id":"source/_posts/ldap/ldap部署.md","hash":"c728143220172a6dfe938616e9cf223393d80b40","modified":1611735635759},{"_id":"source/_posts/minio/minio.md","hash":"8280cf1dd0bd21b23b1d7cc754c5a7e14a596f60","modified":1611735635760},{"_id":"source/_posts/mysql/MySQL审计工具Audit插件使用.md","hash":"7f09d682968630d6d9be7d133b0dd83c59c70583","modified":1611735635763},{"_id":"source/_posts/mysql/init_connect实现mysql审计.md","hash":"2b0f324c30548581a693515643fea3ddc3e71c8d","modified":1611735635764},{"_id":"source/_posts/prometheus/node_exporter配置.md","hash":"0666f620d453a26eddf5da7ec2939e10ca9c8a44","modified":1611735635768},{"_id":"source/_posts/mongodb/安装monogdb3.2.md","hash":"42ad9d10b796aa2ed97f0881939288186ce7de0b","modified":1611735635762},{"_id":"source/_posts/prometheus/node_exporter安装脚本.md","hash":"eb6a69465c3e320ee8fc42eb73dcaaade5b2ddb6","modified":1611735635767},{"_id":"source/_posts/prometheus/钉钉报警.md","hash":"a399d897b26fad850e1582419763d0f5abf905c4","modified":1611735635768},{"_id":"source/_posts/saltstack/salt-minion安装脚本.md","hash":"9f913e2acfb2ffbaf8c8212508f3191646f76234","modified":1611735635773},{"_id":"source/_posts/vue/vue教程一.md","hash":"8a4838e6990de6cf8e3fb5abeac7848dca3c3829","modified":1611735635775},{"_id":"source/_posts/saltstack/salt-master安装脚本.md","hash":"9813649c6352bf20bc13e2715f8c31b845565bcd","modified":1611735635772},{"_id":"source/_posts/saltstack/saltstack.md","hash":"fed0709501805b340868ce9e25f6d3dc1b77b532","modified":1611735635773},{"_id":"source/_posts/kafka-manager部署.md","hash":"3ade68a873709328d5489cc7e3a7ded19e014557","modified":1611735635758},{"_id":"node_modules/hexo-theme-volantis/layout/_cover/blank.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1611736574970},{"_id":"source/_posts/saltstack/install_salt.sh","hash":"ac2f3f751959d11e0abd578cc4ccd0382c4b413b","modified":1611735635771},{"_id":"node_modules/hexo-theme-volantis/LICENSE","hash":"13b0862f4ed1914abe887a47df2c3ca5adfa8f3f","modified":1611736574965},{"_id":"node_modules/hexo-theme-volantis/package.json","hash":"c1eecd44a21cc9f871d487fa1ee3c544ff1dcee8","modified":1611736575037},{"_id":"node_modules/hexo-theme-volantis/.eslintrc.json","hash":"3bd7212fee06c72474f08c2ed683c9d662fa314c","modified":1611736574964},{"_id":"node_modules/hexo-theme-volantis/layout/404.ejs","hash":"b12fd9790e0683de4de265142d789a4332d6efaf","modified":1611736574969},{"_id":"node_modules/hexo-theme-volantis/README.md","hash":"ceea1ea283f4e1fcea853f9a4f145c30742e9fbf","modified":1611736574965},{"_id":"node_modules/hexo-theme-volantis/_config.yml","hash":"f8f1c382ebb5e06d2c5db31ce6603d0b34de057a","modified":1611736574966},{"_id":"node_modules/hexo-theme-volantis/layout/artitalk.ejs","hash":"35095af0a8aa34409740e5bd61465ace162e9ee4","modified":1611736575031},{"_id":"node_modules/hexo-theme-volantis/layout/docs.ejs","hash":"f7ff6bf7764269518adf099b6ae60e422b3bcf13","modified":1611736575033},{"_id":"node_modules/hexo-theme-volantis/layout/bb.ejs","hash":"aa8b04f4be4c9f664aaaba57e2f38fe0165e55f1","modified":1611736575032},{"_id":"node_modules/hexo-theme-volantis/layout/archive.ejs","hash":"3f9282eead2742c006846c9572c76330f628ffe1","modified":1611736575031},{"_id":"node_modules/hexo-theme-volantis/layout/_pre.ejs","hash":"11d06fe4072db2a7b3bca20b4af2ec79d127cd06","modified":1611736574992},{"_id":"node_modules/hexo-theme-volantis/package-lock.json","hash":"48ee3f187b4d0c6b3d6ad6db900d2e20348db900","modified":1611736575037},{"_id":"node_modules/hexo-theme-volantis/layout/index.ejs","hash":"357f0574bcae7969bf423e72add5b697b9c73a9b","modified":1611736575034},{"_id":"node_modules/hexo-theme-volantis/layout/category.ejs","hash":"8763a774260ed5b3a49ab99cc8558c70ae364e3f","modified":1611736575032},{"_id":"node_modules/hexo-theme-volantis/layout/layout.ejs","hash":"b96a88cbb6a1e7e64eeec7ad2b15bc274cc6009d","modified":1611736575034},{"_id":"node_modules/hexo-theme-volantis/layout/page.ejs","hash":"f7ff6bf7764269518adf099b6ae60e422b3bcf13","modified":1611736575035},{"_id":"node_modules/hexo-theme-volantis/layout/post.ejs","hash":"f7ff6bf7764269518adf099b6ae60e422b3bcf13","modified":1611736575036},{"_id":"node_modules/hexo-theme-volantis/layout/friends.ejs","hash":"c4d5e04dabd54dc22776eab4b7f533cfbda2f05f","modified":1611736575033},{"_id":"node_modules/hexo-theme-volantis/layout/list.ejs","hash":"16088ee94e8355d308e64303f5f3b2786f113a53","modified":1611736575035},{"_id":"node_modules/hexo-theme-volantis/layout/tag.ejs","hash":"9b3e7c742daf3cf5e78a4621c3750fa3c82fdf65","modified":1611736575036},{"_id":"node_modules/hexo-theme-volantis/languages/zh-TW.yml","hash":"2f45bd80430c545caf578e0ac4eea656c4415b7a","modified":1611736574969},{"_id":"node_modules/hexo-theme-volantis/languages/en.yml","hash":"5e9e574cda894cb91cc34814f65af69b5adf61f2","modified":1611736574967},{"_id":"node_modules/hexo-theme-volantis/languages/zh-CN.yml","hash":"656f63749e79618433c128beb3e2e604a6f15bd1","modified":1611736574968},{"_id":"node_modules/hexo-theme-volantis/layout/_cover/focus.ejs","hash":"6059bb83b46835a1a69d2a2a1161907deac8e63c","modified":1611736574972},{"_id":"node_modules/hexo-theme-volantis/layout/_cover/search.ejs","hash":"bb645648d5141bb8c9aa68c813a83c881248fb2b","modified":1611736574972},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/author.ejs","hash":"626540d45f9ad1b399ad3a8f8728e697c4cc14f6","modified":1611736574973},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/category.ejs","hash":"87344f08ee5b902741ee15318576a80c44a38f2f","modified":1611736574974},{"_id":"node_modules/hexo-theme-volantis/layout/_cover/dock.ejs","hash":"6059bb83b46835a1a69d2a2a1161907deac8e63c","modified":1611736574971},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/date.ejs","hash":"95cc51ac8b413dae9c2559da358e67e83738cf74","modified":1611736574975},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/music.ejs","hash":"34914ca5a61133f534d3ef36e59329d6c0de1c41","modified":1611736574975},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/thumbnail.ejs","hash":"715f1e0838a95bfea000607f6c5f2cd8c24cd625","modified":1611736574977},{"_id":"node_modules/hexo-theme-volantis/layout/_cover/featured.ejs","hash":"6059bb83b46835a1a69d2a2a1161907deac8e63c","modified":1611736574971},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/share.ejs","hash":"da605bfce90fa4e56bad8a12b1c2f78af7227b97","modified":1611736574976},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/tags.ejs","hash":"e9e576c18a9c92f88a2cf93da3de5f3962502093","modified":1611736574976},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/updated.ejs","hash":"35b60195a900ec4c7b970e04d93a80a04fba9ea0","modified":1611736574977},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/wordcount.ejs","hash":"eebaab3821af95ee64d8d56f33ca6c9c60b9b6f0","modified":1611736574979},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/counter.ejs","hash":"7525a1b4bedbdab7deea0e8749e8797abfc3df7c","modified":1611736574974},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/walinecount.ejs","hash":"c276bb2f4e7333b7276880c883b80acfde7d6d9a","modified":1611736574978},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/categories.ejs","hash":"12b2fca703fa56da7a85045bf17499845c3fe5bb","modified":1611736574981},{"_id":"node_modules/hexo-theme-volantis/layout/_meta/valinecount.ejs","hash":"024f8e45ff9130e4c5afdabddb765f28310ff6b7","modified":1611736574978},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/archive.ejs","hash":"17e6293f05946a1a8d7f7d930feae4884ca65d26","modified":1611736574980},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/article.ejs","hash":"0db5d00c2166e98fe38c92f4c24ecc668bafa614","modified":1611736574980},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/cover.ejs","hash":"65dc41d6d4f27b5fa0b17954a38f1786ef3290f2","modified":1611736574981},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/footer.ejs","hash":"840b9ce4ac1fb251bb4c1230f9d0e5d8abeb0cb3","modified":1611736574982},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/meta.ejs","hash":"92661e47506a60e576ea860dff4c89d5cc8f4eeb","modified":1611736574983},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/head.ejs","hash":"bbb75c52bc569db7d1da9f55a6cfd5745b4492aa","modified":1611736574982},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/header.ejs","hash":"d7ca6c171bf366f36c3cae5505613ba9f1f3a39e","modified":1611736574983},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/side.ejs","hash":"b82978c85dc3f9db0979cc26e168f6ec8ee97cfc","modified":1611736574991},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/_pre.ejs","hash":"cc6927c01ec8c46b651d738512235694219dfb5b","modified":1611736575021},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/post.ejs","hash":"ed530efd48afef5d66d043972e4e5307f24c1806","modified":1611736574984},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/snackbar.ejs","hash":"dfe21318d5a9f2c634ba110509e323114f6f0345","modified":1611736574991},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/rightmenu.ejs","hash":"a083a87390e199b0949c3beb91d5d022bb7fa0fa","modified":1611736574985},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/blogger.ejs","hash":"1f6485ec2cb3a7367f637ea2d14a05200e1d682c","modified":1611736575022},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/copyright.ejs","hash":"5c134f20458ddfab02af440a12ce0f1948677dd1","modified":1611736575023},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/music.ejs","hash":"43ad06a136aa9a5522358e625c7598b6c4c32e2a","modified":1611736575026},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/category.ejs","hash":"3a748973bec2c62ecd0e0cfd09a168d1dc87e6dc","modified":1611736575022},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/header.ejs","hash":"b132e332ddf12d1bb1d99480200561d8c38edd04","modified":1611736575024},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/grid.ejs","hash":"7c6f2fea543236e904888f4ab9a9ca7b53ad8d5a","modified":1611736575023},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/load.ejs","hash":"093fe26657021debbe1c3e3acd14b03e9f90b6fe","modified":1611736575025},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/group.ejs","hash":"2eed9614049441b51e6819f393f80faf5441870b","modified":1611736575024},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/qrcode.ejs","hash":"94d97f9273a64d47f2aff2f68b59c4fd9cc2206b","modified":1611736575027},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/text.ejs","hash":"d9d8605900ef60e4e9e78da2a81e849a45749c2c","modified":1611736575029},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/references.ejs","hash":"8be0102cda29802e5517b3b9286fe71ca7c4c6bf","modified":1611736575027},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/list.ejs","hash":"446219f324d1316acf480bd4dc3af744833a566e","modified":1611736575025},{"_id":"node_modules/hexo-theme-volantis/scripts/related_posts/index.js","hash":"29ab8fbb7110b257cfc8c23e31c26d763250ac16","modified":1611736575040},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/toc.ejs","hash":"e4266873eb4ee7163dfd96069ff0e2ebe2cc6337","modified":1611736575029},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/page.ejs","hash":"07779b12dfa88860ec56fc3bae3540dba9aba4bf","modified":1611736575026},{"_id":"node_modules/hexo-theme-volantis/scripts/events/index.js","hash":"3d7f20c205f654832378cde24c49e79993fe27e7","modified":1611736575038},{"_id":"node_modules/hexo-theme-volantis/scripts/render/img.js","hash":"160732831bec5baf89fa07a85fec5229c3cb9cd7","modified":1611736575041},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/related_posts.ejs","hash":"1d3f03e9ab3683ebed5ee6a220276f96b5757456","modified":1611736575028},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/btns.js","hash":"6a257bbcfffbebed523796f5e7c649397bcb7014","modified":1611736575042},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/checkbox.js","hash":"b398969bd13fa37c90a323242f2d6be5c0dacbd1","modified":1611736575043},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/btn.js","hash":"f6210feb36158a85ad0f3ed28cbca95244010d45","modified":1611736575042},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/fancybox.js","hash":"5b2d1fa2cd7e84f0a0afe8b3ea5da742f668dcac","modified":1611736575044},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/tagcloud.ejs","hash":"527bcd61ccd8c6ac8f9e5c8a359a2f10c7fa0dc4","modified":1611736575028},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/dropmenu.js","hash":"1ee8e53286e1177348652ecdd0bc7a30f78aba4f","modified":1611736575043},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/folding.js","hash":"b8ab446028a473621af46ce9c90a3c34ddae7d04","modified":1611736575044},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/frame.js","hash":"9edd37e2a20926fcb76ee40e9f009654a58b25f1","modified":1611736575045},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/ghcard.js","hash":"2e0359ca4bc781b29bdd8c827f6349e7b369ea02","modified":1611736575045},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/inline-labels.js","hash":"08fbdc0ea622270e1236a28778f875c8ad2e5516","modified":1611736575046},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/link.js","hash":"3da403bcea083d5f5e806404d79beb80f925b1ba","modified":1611736575047},{"_id":"node_modules/hexo-theme-volantis/layout/_widget/webinfo.ejs","hash":"8e6506e10b3b741f52f30d04f938d1abd3e9cefa","modified":1611736575030},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/media.js","hash":"04434a1760ec70d23f726921ba3e74898af4b531","modified":1611736575048},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/issues.js","hash":"10972bbb5579aaf024b86d3e754d5a9a82a839c7","modified":1611736575047},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/image.js","hash":"d23c426ca0beb9528a00f0e4185eddd023889ee8","modified":1611736575046},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/site.js","hash":"56e270f7242570ab300ec933c9932300e3e3b8fa","modified":1611736575049},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/span.js","hash":"02bd46baade6a936695abb90a8360435e7ad9798","modified":1611736575050},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/note.js","hash":"f596bed648d8819b296efecb28625d0f2a447fbc","modified":1611736575049},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/table.js","hash":"ad82046fc64f932019d8a7b3e9a8ff07973a6c3b","modified":1611736575050},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/tabs.js","hash":"6b0025eb2fccfa50cf64410c081c90141c0ae10a","modified":1611736575051},{"_id":"node_modules/hexo-theme-volantis/scripts/tags/timeline.js","hash":"23aeacce94c359765347fb83ba7fdb637bcac723","modified":1611736575051},{"_id":"node_modules/hexo-theme-volantis/scripts/z-lazyload/index.js","hash":"00807c9898fff8f712fc8f311ed0bdd84c71b812","modified":1611736575052},{"_id":"node_modules/hexo-theme-volantis/source/js/aplayer.js","hash":"c19b26838cd47ec179100b006673788a98aa4577","modified":1611736575086},{"_id":"node_modules/hexo-theme-volantis/source/js/app.js","hash":"8257ceb59596e4aaef5f727de391d3b6687368bf","modified":1611736575086},{"_id":"node_modules/hexo-theme-volantis/source/css/first.styl","hash":"c8da6b4c3feddb1994f4a8592ecb7e44abfc088d","modified":1611736575085},{"_id":"node_modules/hexo-theme-volantis/source/css/style.styl","hash":"252921e8d4d20c16f9dd731f93ae25d27ab404fb","modified":1611736575085},{"_id":"node_modules/hexo-theme-volantis/source/js/issues.js","hash":"f9ad62c367eed45fd641202d0a574c7deacf645b","modified":1611736575087},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/cover.ejs","hash":"1c8364ff9eab5a5bc15757c7bc765015ab559ca6","modified":1611736574986},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/counter.ejs","hash":"ecad85a3d5776614335783e13a9497b1538731a3","modified":1611736574985},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/issues.ejs","hash":"550518b97c8238a77bef62abbe524c5c29d86f15","modified":1611736574989},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/darkmode.ejs","hash":"19405572c434b4e504f3617aa17d872ca15a43bb","modified":1611736574987},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/import.ejs","hash":"ec6b9f024a3760ed4140f6fd2f1d656aff24d83c","modified":1611736574988},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/coverCtrl.ejs","hash":"a7f6f87b643ab076acc0fcfcb747b07a72719c1b","modified":1611736574986},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/index.ejs","hash":"f1d26a03991fdd457aaff5fe25615067469447fa","modified":1611736574989},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/global.ejs","hash":"0de1ce34385923d4568343ce6a3fc7bf4ac6894b","modified":1611736574988},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/toc.ejs","hash":"291a53ecb97c121e922ad9ae1509e329ceef6ffe","modified":1611736574990},{"_id":"node_modules/hexo-theme-volantis/layout/_partial/scripts/search.ejs","hash":"33b7c2b46c283953fd4a40959d38087eb2d5a8c6","modified":1611736574990},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/aplayer/script.ejs","hash":"e789e2da9cc13cbf379d8b45791430cf610d4e77","modified":1611736574994},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/analytics/script.ejs","hash":"3c03ef1e8b022fcb9d5046fa0990aadcc271f9db","modified":1611736574993},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/aplayer/layout.ejs","hash":"51b4f54a165fbca56c9beec3ce19bc62f10097d9","modified":1611736574994},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/index.ejs","hash":"c7a2c7724c3a41d95bca2797ddc777c6b9a82cd4","modified":1611736575001},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/clipboard/script.ejs","hash":"0ee37af1e274ed251211d7209f0e0ccd1bf98e0f","modified":1611736574995},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/highlightjs/script.ejs","hash":"d8b65df904cc9066d1afe399ce6a17d881e61551","modified":1611736575013},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/end-of-support/script.ejs","hash":"4f8f1e3ee1f657c11419c860fa89d4fbf434359a","modified":1611736575011},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/fancybox/script.ejs","hash":"42e17172d186dcfcefb8c5da961e39f073dbce4d","modified":1611736575012},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/lazyload/script.ejs","hash":"ff04f6563ae8295295b3eb37042e74f5d4abb578","modified":1611736575014},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/pjax/pdata.ejs","hash":"4fe1878f1eb2b2c059729e4fe4c205e90249eeff","modified":1611736575017},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/tidio/script.ejs","hash":"e0e803dc4c2fb9f32cbad14e8c4ddd2075903793","modified":1611736575020},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/pjax/animate.ejs","hash":"06388047791e4e148672778a7a9ddac8b70f3f31","modified":1611736575016},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/preload/script.ejs","hash":"24fc00ce669d90c3ec265e4faf639bed613b75b2","modified":1611736575018},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/share/layout.ejs","hash":"bc2aeea593ddb818dc7596ca2f34640fbfb7b2f3","modified":1611736575020},{"_id":"node_modules/hexo-theme-volantis/scripts/events/lib/config.js","hash":"85c6d05613bfd701d8e2075a3523f4b26082e94b","modified":1611736575039},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/nodewaves/script.ejs","hash":"7e3104db8db2ade7e7c6c79cb2b3144ed284dff4","modified":1611736575015},{"_id":"node_modules/hexo-theme-volantis/scripts/z-lazyload/lib/process.js","hash":"5ac40483d0ad0ec353867da03f9628932279d1b1","modified":1611736575053},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/pjax/index.ejs","hash":"03783b8e90c4d72aaacb58906751ee284e318539","modified":1611736575017},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/scrollreveal/script.ejs","hash":"235a13bd37e53e865c22b96e204705a2b24a0e4c","modified":1611736575019},{"_id":"node_modules/hexo-theme-volantis/source/js/search/algolia.js","hash":"4c4984b0680b21fde8ca25d03e1896987fcac16f","modified":1611736575087},{"_id":"node_modules/hexo-theme-volantis/source/js/search/azure.js","hash":"fa03d312c25f120774ab2a6144c3e5949b7bf7f4","modified":1611736575088},{"_id":"node_modules/hexo-theme-volantis/source/js/search/google.js","hash":"000dc1848ba5ce6e9a3d2377b3fb15a4ab396760","modified":1611736575088},{"_id":"node_modules/hexo-theme-volantis/source/js/search/baidu.js","hash":"74ff709126fd9f9ef78e7aebde69c889ab9d5f53","modified":1611736575088},{"_id":"node_modules/hexo-theme-volantis/source/js/search/hexo.js","hash":"e7b9af393c9e0ef34ed585fbe26419e1298d9b26","modified":1611736575089},{"_id":"node_modules/hexo-theme-volantis/source/css/_base/index.styl","hash":"7dcad03f533010fd470dee03feaf1e4bca08b6c9","modified":1611736575054},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/color.styl","hash":"7daf9290bc32dd4040bf9616da2722247f6a5d5c","modified":1611736575055},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/fonts.styl","hash":"9bb83f05b286aa03d6c9652ec0b42921d049d3bf","modified":1611736575056},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/func.styl","hash":"487ce9f5770f173d8cb8610c3235413b4644811d","modified":1611736575057},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/effect.styl","hash":"f0ee405f536f6852db92385c62c32421ef4e163e","modified":1611736575056},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/cover.styl","hash":"2ff99b7c1aa0ee8dab2ac2d899e7b03d9f33beaf","modified":1611736575058},{"_id":"node_modules/hexo-theme-volantis/source/css/_defines/layout.styl","hash":"d1bdce2e7974b1feb585adcdf95e36a054a36ec4","modified":1611736575057},{"_id":"node_modules/hexo-theme-volantis/source/css/_highlight/index.styl","hash":"b12e2f04e1db2f5e653287797ff3f56bcff6c18e","modified":1611736575060},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/navbar.styl","hash":"394b397478ee2e1fa7a90c9c3bcd7f3ea365464d","modified":1611736575059},{"_id":"node_modules/hexo-theme-volantis/source/css/_first/search.styl","hash":"ef8568cd9d47e698fdd5137ccd55a0de6282c348","modified":1611736575059},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/aplayer.styl","hash":"4613afce3cd57e288e6a3bf91c967196fb0277bd","modified":1611736575068},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/clipboard.styl","hash":"b3e1b45144de8f68c8d8652f1d70f9e354ed7ffc","modified":1611736575069},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/darkmode.styl","hash":"ed2efcd8a54d08949abb8e933c99678769e8e429","modified":1611736575071},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/dark.styl","hash":"b33ab67d43d97470e249d8fcb43875cff7db6a63","modified":1611736575070},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/index.styl","hash":"7d58c7056af897b116cd50a51ac2d10c4a901c7e","modified":1611736575072},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/cursor.styl","hash":"13eef32b9e2998ad10133f3283b43f9f26a59803","modified":1611736575070},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/mathjax.styl","hash":"11ee86571f31f9aa61dcc48b40977dcd974d76a4","modified":1611736575073},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/fancybox.styl","hash":"284aed2ca59ae0544885daebb4393d9e5f76a33d","modified":1611736575071},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/gitalk.styl","hash":"c4c9950fd6654f87ca4f481cf3065ca4069fac48","modified":1611736575072},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/twikoo.styl","hash":"56bd90ec80836f7e78b6f820f3e35868723503b0","modified":1611736575075},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/pjaxanimate.styl","hash":"86c80d1d1c8a02c0eb4c0b5d29ff41c9a5dd5ac3","modified":1611736575074},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/rightmenu.styl","hash":"51cf19a6c2c8886c13e7f30db9c5c5f9db67676f","modified":1611736575074},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/archive.styl","hash":"a96709230abbc8d4fc40361b8fc02d4249abb4a1","modified":1611736575061},{"_id":"node_modules/hexo-theme-volantis/source/css/_plugins/valine.styl","hash":"06be2ad39dc6786842ac9ebc345e6c022ae96f8c","modified":1611736575075},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/article.styl","hash":"7091544bff230763eb3b0307de5a8c0bbba19fa6","modified":1611736575061},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/footer.styl","hash":"bb850b4707ee025e267e079fcf85484849cf4f41","modified":1611736575062},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/img.styl","hash":"55d79f07b717d3e28515b41401f656d1593be624","modified":1611736575063},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/friends.styl","hash":"74caf0cb9c1fe1b7e5b7a91a335857848b473203","modified":1611736575063},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/pagination.styl","hash":"08ec15af4b64dce67049ed332b77d87e4016bb0b","modified":1611736575065},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/md.styl","hash":"d9b25d8199d3d5260c89e8ad84f1a17531b85588","modified":1611736575064},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/main.styl","hash":"471b4ac8d05355277f625076474ff4409234c6d5","modified":1611736575064},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/snackbar.styl","hash":"752a7fea5284a61fd9305d3b0fcaa43f2e64862f","modified":1611736575066},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/posts.styl","hash":"000c17b4fca40df21f6d2c0bca1d7b01d5c25648","modified":1611736575065},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/sidebar.styl","hash":"7f704b5d9996ad82cfb25ba9ed7b34475a9baf8a","modified":1611736575066},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/btns.styl","hash":"bf592cd78c146bb671217f106632b9e5bcc7c145","modified":1611736575076},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/toc.styl","hash":"c92257d2555a8be022023c7442d3e042a2e2ebd0","modified":1611736575067},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/dropmenu.styl","hash":"a136ebb90bedef15c1d8b8d75e09b37c3873f5e8","modified":1611736575077},{"_id":"node_modules/hexo-theme-volantis/source/css/_layout/video.styl","hash":"680e8cf8fc5d62913dad4ccd06135caad2bb3e92","modified":1611736575068},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/folding.styl","hash":"253f13e60218e0d014a1df99933f5cdba507f3b1","modified":1611736575078},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/ghcard.styl","hash":"58adb206695a704b1f40df42e2dc10e9e9055aeb","modified":1611736575079},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/image.styl","hash":"bb4b07841602592e421597ba8dd7110edec789d8","modified":1611736575079},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/checkbox.styl","hash":"8c62dd38914d939069d9222c54787a24cb5c31f7","modified":1611736575076},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/frame.styl","hash":"6ffbb29514781aa4fa7d7653706554ce33f4525b","modified":1611736575078},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/link.styl","hash":"82cdcc537612eec3e1af40d00edf80b14116c191","modified":1611736575080},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/simpleuser.styl","hash":"40376e0ccc232a985c96bbd1b0b85f6d3a647160","modified":1611736575081},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/media.styl","hash":"576c9eede3a8f9ec2ba1a970e92a49154ec3acb3","modified":1611736575080},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/note.styl","hash":"005d3c55c2216d7c88661f79ad466ad89fad4784","modified":1611736575081},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/site-card.styl","hash":"b289c6beddc89a062bec0c9ecfb0dd7c24d64925","modified":1611736575082},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/span.styl","hash":"6e9f8b453244d9241d3fceed0a56e12c86a4b446","modified":1611736575083},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/table.styl","hash":"ef07ab4fe8a391ea9039fbe53333aaf58e3ce033","modified":1611736575083},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/tabs.styl","hash":"a2366f4fe1d9f06e47a7a994cfc80a1edbf6c535","modified":1611736575084},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/disqus/layout.ejs","hash":"2cee86351e5da45662c2972f56c76d98cd50e912","modified":1611736574996},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/disqus/script.ejs","hash":"5b8a0039f3f236690ce40bb94a37641e36d445da","modified":1611736574997},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/disqusjs/layout.ejs","hash":"4601c6b51f9a32a24a8e1699647c4a281d16b179","modified":1611736574998},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/hashover/layout.ejs","hash":"d854ca80765eb44baa3eaa685db888bbf238323d","modified":1611736575000},{"_id":"node_modules/hexo-theme-volantis/source/css/_tag-plugins/timeline.styl","hash":"f84f411a3b7dcdbfd4fb19ac4e0f91300c5e19be","modified":1611736575084},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/hashover/script.ejs","hash":"d36cfa0a96ad8e89306e43eb8080a98b0b17f6a5","modified":1611736575001},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/disqusjs/script.ejs","hash":"eb59c3ced4660f0437dbd5c6f34f72dc8372ab2b","modified":1611736574998},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/gitalk/layout.ejs","hash":"e487450c523b15aebba2e4c197eee3096fb43771","modified":1611736574999},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/livere/layout.ejs","hash":"c610eb41b79a24918dfe2be9d5a9e785eee0ee0d","modified":1611736575003},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/livere/script.ejs","hash":"0e8817c7d08fb65eba1d2b53d341ac83b495e5f5","modified":1611736575004},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/isso/layout.ejs","hash":"b267acebcd934eb7b766abc81c2686f6611aeaa9","modified":1611736575002},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/gitalk/script.ejs","hash":"b1a93824b123e6e8b5ec3056943e8577a4ec1501","modified":1611736574999},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/minivaline/layout.ejs","hash":"b8289eb42d54048b11986cdb1ab00dc2f450d482","modified":1611736575005},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/valine/layout.ejs","hash":"1681a941051d15701ca6293bb475ad3390ae6155","modified":1611736575007},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/isso/script.ejs","hash":"392db303e203e76fe89ed81b388649df10a2d567","modified":1611736575003},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/twikoo/layout.ejs","hash":"a54fad791dbb8a6ef800925d90d8bceb6e3a0a99","modified":1611736575006},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/waline/layout.ejs","hash":"6a02585a157df87b09529da3d031818fd48fb4b5","modified":1611736575010},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/minivaline/script.ejs","hash":"edc5d8dd667269b7e7f06abd950acf837f8327dc","modified":1611736575005},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/twikoo/script.ejs","hash":"dba1b32915008d4f2f474ee8eb995fd1d5cbfef2","modified":1611736575007},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/valine/script.ejs","hash":"78d7cfda99bfba5b3aa5c4013e073d8e46425952","modified":1611736575008},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/vssue/layout.ejs","hash":"0f130f44e80b13a45e3ad695f808cb282e89dc21","modified":1611736575009},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/waline/script.ejs","hash":"98989d32730dfb27e7d75674ca8f8b49a9fad75d","modified":1611736575011},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/comments/vssue/script.ejs","hash":"e0bac119a3d2e4234b99115e92659f452ae5449b","modified":1611736575009},{"_id":"node_modules/hexo-theme-volantis/layout/_third-party/math/mathjax/script.ejs","hash":"6084d881f4b1fc4e8ba3aaf457ade7e18e997232","modified":1611736575015},{"_id":"node_modules/hexo-theme-volantis/source/js/valine.js","hash":"63916e2be7d378e9d32271371c588e75e69c871e","modified":1611736575091},{"_id":"public/Untitled.html","hash":"707d84f66a5552efdbfd796a639803176762fa10","modified":1611821867481},{"_id":"public/404.html","hash":"f3a3735818a7de337020baa244a80a17f46ee046","modified":1611821867481},{"_id":"public/archives/index.html","hash":"dc6a088dd6b388aef810b87cd0720bb219f46909","modified":1611821867481},{"_id":"public/friends/index.html","hash":"7f855d2e0d45df5c5bcd9623918e66b945d7b453","modified":1611821867481},{"_id":"public/about/index.html","hash":"742ec1bfc64971f0f7f0274f5502b022dbb23d6b","modified":1611821867481},{"_id":"public/tags/index.html","hash":"4dd243f3e21e5dfa3e20e62eb8cbd5a318991c80","modified":1611821867481},{"_id":"public/categories/index.html","hash":"4a27d79d723cd301c60adc7238284106b6059f10","modified":1611821867481},{"_id":"public/2021/01/27/desc/index.html","hash":"d4fd7f4eccbe70f2f7d03b9dfaecc8553efb836e","modified":1611821867481},{"_id":"public/2021/01/27/hello-world/index.html","hash":"0749f58c641925c7d6b9073391ee888f81ed514b","modified":1611821867481},{"_id":"public/2021/01/27/elasticsearch/skywaking/index.html","hash":"9b5557e498d58e148d5740a9dfd0a8f65200c82d","modified":1611821867481},{"_id":"public/2021/01/14/install/centos7安装redis5/index.html","hash":"08d0735af4a81e26dc8aa63520472f286c1fc5e4","modified":1611821867481},{"_id":"public/2020/12/12/install/centos7安装python3/index.html","hash":"4ffe39f26534e596f3be040836722dff27cf5a72","modified":1611821867481},{"_id":"public/2020/10/13/GO/go/index.html","hash":"58f6ffd36ec324743630f45d01f4d2ae02937ea6","modified":1611821867481},{"_id":"public/2020/10/13/GO/gomod/index.html","hash":"7143fec7017ea1631a1a3cf9b25a967e37da6e3a","modified":1611821867481},{"_id":"public/2020/10/13/cmdb/hosts/index.html","hash":"33c0819eeb96391c52af45f77d495bb09e32e3fc","modified":1611821867481},{"_id":"public/2020/10/09/ansible/Playbook支持任务结果回显/index.html","hash":"7def1c65529951f65a96abf0fab82b4c452c5b75","modified":1611821867481},{"_id":"public/2020/09/29/vue/vue教程一/index.html","hash":"c5c129bf7f826cb85b7f1ca49db609f99b1110d0","modified":1611821867481},{"_id":"public/2020/09/21/prometheus/node_exporter安装脚本/index.html","hash":"ad9c8f89ce4b9674caf514ce708377a39dd764b8","modified":1611821867481},{"_id":"public/2020/09/28/prometheus/钉钉报警/index.html","hash":"3ea14d90bac9e4ebfccdbd892fcb26856bf76583","modified":1611821867481},{"_id":"public/2020/09/21/gcc升级/index.html","hash":"63bc987fc056b99b9b0ae91b54cd179e28b439af","modified":1611821867481},{"_id":"public/2020/09/21/prometheus/node_exporter配置/index.html","hash":"17571644a527a1316706747239a8b800d503a474","modified":1611821867481},{"_id":"public/2020/09/21/elasticsearch/部署es7x/index.html","hash":"f714d0dacb88ca44ee5ec5168695f3a8be3422c2","modified":1611821867481},{"_id":"public/2020/09/21/mongodb/安装monogdb3.2/index.html","hash":"14313ac8c444cfca1551ebabb20dcb2a61838d1a","modified":1611821867481},{"_id":"public/2020/09/21/saltstack/saltstack/index.html","hash":"86f7f99e58cbacc2e5c76bb7f646aac39a7e9817","modified":1611821867481},{"_id":"public/2020/09/21/saltstack/salt-minion安装脚本/index.html","hash":"5220a5ca89c2ae2207bf04ee4509639b249e696f","modified":1611821867481},{"_id":"public/2020/09/21/saltstack/salt-master安装脚本/index.html","hash":"49214e6a2c0aaf0fccc585651d619da99100fdb2","modified":1611821867481},{"_id":"public/2020/09/21/centos7优化脚本/index.html","hash":"0f9f2d10f4c63cec1f6600ae8c88d66413a82ffc","modified":1611821867481},{"_id":"public/2020/09/21/代码补全/index.html","hash":"50a1b53f37efd81f3acce6d3b4a24ccba5db01a1","modified":1611821867481},{"_id":"public/2020/05/11/proxmox超融合/index.html","hash":"23811c818ea515be4bd54ab679862f804d155dea","modified":1611821867481},{"_id":"public/2020/04/01/Centos7升级内核/index.html","hash":"687e731bc995764303d1f44684fa5e2d78ad6c63","modified":1611821867481},{"_id":"public/2020/04/01/openresty编译安装/index.html","hash":"62baeb082567b802dab73e092b7374a9e3a7c836","modified":1611821867481},{"_id":"public/2020/03/02/ldap/ldap部署/index.html","hash":"48acb8d75c37b74806b4914678c7b337fc864c30","modified":1611821867481},{"_id":"public/2020/02/13/flask/flask分页/index.html","hash":"49b64344d676e02c77063cf8b1c68140f183f27f","modified":1611821867481},{"_id":"public/2020/01/09/k8s/k8s故障/index.html","hash":"f8c15129baf2a5761884a63219e958bbbbf6242b","modified":1611821867481},{"_id":"public/2019/12/18/jenkins/jenkins/index.html","hash":"30b433b821ba8addb789f750a7d262bd4c03b5ee","modified":1611821867481},{"_id":"public/2019/12/18/CA证书服务/index.html","hash":"497074b45349da315a475cd165af4e0bbeebec4b","modified":1611821867481},{"_id":"public/2019/12/13/SpringBoot一/index.html","hash":"fc9f45c553e9c51943b28b793d6ffa1c6fd01612","modified":1611821867481},{"_id":"public/2019/12/13/SpringMVC一/index.html","hash":"56cd30379a2a9b4f56617becb84a8be58fb83a47","modified":1611821867481},{"_id":"public/2019/12/13/flume/index.html","hash":"ebbf5cafd8c849846decaa906c47334e1baba5ec","modified":1611821867481},{"_id":"public/2019/12/13/flume安装/index.html","hash":"00229b0d84e5872d2dccddb92653519d5b3b694f","modified":1611821867481},{"_id":"public/2019/12/13/flume案例/index.html","hash":"c3f3d8d3be581ed514d478f86a53a30b46357ded","modified":1611821867481},{"_id":"public/2019/12/13/hadoop/index.html","hash":"ed208ce8e0ef1d49e63c013c3640e54a30550fd5","modified":1611821867481},{"_id":"public/2019/12/13/kafaka安装/index.html","hash":"9677535b78718fb853d849d7f779d29d52337fb4","modified":1611821867481},{"_id":"public/2019/12/13/spark安装/index.html","hash":"559817f69f0f67d28834f510b0d9d9d64a4f70a1","modified":1611821867481},{"_id":"public/2019/12/13/pipenv使用/index.html","hash":"eefb0b404ea17b14abc8211fff3a6c15cf3cd5e8","modified":1611821867481},{"_id":"public/2019/12/13/zookeeper安装/index.html","hash":"12efc48581cd531b495ff5a9cd8e30c4f4007a89","modified":1611821867481},{"_id":"public/2019/12/13/minio/minio/index.html","hash":"7222c3763b638dec35a679e2080570213809c2f5","modified":1611821867481},{"_id":"public/2019/12/13/mysql/MySQL审计工具Audit插件使用/index.html","hash":"4da5c4bbbbf8e99b56520785eabdddf4fe4a56b8","modified":1611821867481},{"_id":"public/2019/12/13/mysql/init_connect实现mysql审计/index.html","hash":"909accc26bf232c688eda7e18b3e169b2eacabf3","modified":1611821867481},{"_id":"public/2019/12/13/kafka-manager部署/index.html","hash":"63ca26b40ca5bf6c1e96e026a5fc37f24279fc1c","modified":1611821867481},{"_id":"public/2019/10/09/heox使用/index.html","hash":"2937bcafa9f962535c52c99d4afd06903084248b","modified":1611821867481},{"_id":"public/archives/page/2/index.html","hash":"dc6a088dd6b388aef810b87cd0720bb219f46909","modified":1611821867481},{"_id":"public/archives/page/3/index.html","hash":"dc6a088dd6b388aef810b87cd0720bb219f46909","modified":1611821867481},{"_id":"public/archives/page/4/index.html","hash":"dc6a088dd6b388aef810b87cd0720bb219f46909","modified":1611821867481},{"_id":"public/archives/page/5/index.html","hash":"dc6a088dd6b388aef810b87cd0720bb219f46909","modified":1611821867481},{"_id":"public/archives/2019/index.html","hash":"6f946c94de2f57c95f7128e34afe68e24c3ecf78","modified":1611821867481},{"_id":"public/archives/2019/page/2/index.html","hash":"eca909bb0d5775ec2315bbdb090f1fcab5ae2b41","modified":1611821867481},{"_id":"public/archives/2019/12/index.html","hash":"fe343bcbb92d373a065df539944b9a5bc15b201b","modified":1611821867481},{"_id":"public/archives/2019/10/index.html","hash":"d446b978e4e9063c19f15784f2d5f511fbd5ec6f","modified":1611821867481},{"_id":"public/archives/2019/12/page/2/index.html","hash":"55872f3fe7de27191d4351e5df9f53652dcae0c3","modified":1611821867481},{"_id":"public/archives/2020/index.html","hash":"c5e6281240949d366594ac50b32610bc3ac03b42","modified":1611821867481},{"_id":"public/archives/2020/page/2/index.html","hash":"22e3f6c59f1d149daf09798fd052d13168f4e4b3","modified":1611821867481},{"_id":"public/archives/2020/page/3/index.html","hash":"bc905e7a2b35bcd01f456770c601aad04d705f8a","modified":1611821867481},{"_id":"public/archives/2020/01/index.html","hash":"403b46c3f3ac37ff14e42bd1f677caf76065e8fe","modified":1611821867481},{"_id":"public/archives/2020/02/index.html","hash":"0a9833a1ad5a129634658c0614c6b3e7ede14c97","modified":1611821867481},{"_id":"public/archives/2020/03/index.html","hash":"5f2538ce8870a151e24f44ff5e2db53c3ca9071f","modified":1611821867481},{"_id":"public/archives/2020/04/index.html","hash":"37fed42ad4c8a850c1fe6e1b1820037eedaa8ddf","modified":1611821867481},{"_id":"public/archives/2020/05/index.html","hash":"90a7ea66d3e72e1baf5b71ad336f1be31537f80d","modified":1611821867481},{"_id":"public/archives/2020/09/index.html","hash":"7e8cc1cf4aef08fbb8d8fef33c9d4dd9e7e3b0b5","modified":1611821867481},{"_id":"public/archives/2020/09/page/2/index.html","hash":"2b10f7d60cc27fa2fffbdb886f42f4057ae198c1","modified":1611821867481},{"_id":"public/archives/2020/10/index.html","hash":"e96ec913661bad1da804011eba226edcef960cd4","modified":1611821867481},{"_id":"public/archives/2020/12/index.html","hash":"b38d2dfab3cb39204afca570cb969cf1bb028675","modified":1611821867481},{"_id":"public/archives/2021/index.html","hash":"39fd53e268b117b3f5c2cbc96b896ea7b93be573","modified":1611821867481},{"_id":"public/archives/2021/01/index.html","hash":"443b937fa392dae6921814f21350cf5c7bd0107a","modified":1611821867481},{"_id":"public/categories/java/index.html","hash":"8ab07d44586dee9aac47930a2a02b1fa439517ad","modified":1611821867481},{"_id":"public/categories/linux/index.html","hash":"8796085c2a722160117e77bca6eb233d75f61215","modified":1611821867481},{"_id":"public/categories/test/index.html","hash":"da6e3789d3668e9379cc3fcca553c06b2a34570c","modified":1611821867481},{"_id":"public/categories/bigdata/index.html","hash":"8fb7357970939c30d3f4ded30ac7a92a5fec5045","modified":1611821867481},{"_id":"public/categories/gcc/index.html","hash":"1c4dd74d3b03338897479f633f32a57155a5a308","modified":1611821867481},{"_id":"public/categories/hexo/index.html","hash":"3fa69e74330b39e9f79d00f1b7fd71013a4ba6ad","modified":1611821867481},{"_id":"public/categories/openresty/index.html","hash":"baa466212082febd116627607d40ff5a3334bf97","modified":1611821867481},{"_id":"public/categories/python/index.html","hash":"61075e977e0a92d0671f2c761b4528ce1b6f2008","modified":1611821867481},{"_id":"public/categories/cmdb/index.html","hash":"2bedcbdaee74efe21219c445b3dbfc3df9fff7bd","modified":1611821867481},{"_id":"public/categories/go/index.html","hash":"e39504eafbd9467f4f092847d5805650d2461b6a","modified":1611821867481},{"_id":"public/categories/ansible/index.html","hash":"bd86747b8990fd3ebb81e092b6d7c3fea0697a7a","modified":1611821867481},{"_id":"public/categories/elasticsearch/index.html","hash":"b43efb316749a554a31603c29c057729788ecfc6","modified":1611821867481},{"_id":"public/categories/flask/index.html","hash":"1b4d3e9c9d4cd2054ce7e916c6ea47be428941ca","modified":1611821867481},{"_id":"public/categories/python3/index.html","hash":"d262771a34b9be41dc67dbc710cb4a3bf61e5f4a","modified":1611821867481},{"_id":"public/categories/k8s/index.html","hash":"b0127513508c6805b91416455e6a446001855dac","modified":1611821867481},{"_id":"public/categories/centos/index.html","hash":"36853625f81227fa1510075f40ec5b3fc799d97c","modified":1611821867481},{"_id":"public/categories/ldap/index.html","hash":"5d724ed0f57505a419f4683be68714caa029b80f","modified":1611821867481},{"_id":"public/categories/jenkins/index.html","hash":"7e0cc62bd9f2813ca6bab7dd0341a44c9e3150f6","modified":1611821867481},{"_id":"public/categories/minio/index.html","hash":"d7545426a7ea4e4a3164b8f844c9faf937e26ba5","modified":1611821867481},{"_id":"public/categories/mysql/index.html","hash":"763d55eda921d428605db9f6ef5d6077354d2baa","modified":1611821867481},{"_id":"public/categories/prometheus/index.html","hash":"5b34e82414a69f088584ef9c1c0ac180f7c4cbc9","modified":1611821867481},{"_id":"public/categories/mongodb/index.html","hash":"a0bcb6236ca7194644e52278705ff244ff1c5a73","modified":1611821867481},{"_id":"public/categories/salt/index.html","hash":"62560136932cb609c60149f5e9439504f407ef39","modified":1611821867481},{"_id":"public/categories/vue/index.html","hash":"7f739f2631cc968c38950d9fe88b29cc5e478d10","modified":1611821867481},{"_id":"public/categories/Linux/index.html","hash":"339fde71918f9eb91a438cb1a046bca8752c520e","modified":1611821867481},{"_id":"public/index.html","hash":"13788dc725b10075daa9f05ed81045dc76506372","modified":1611821867481},{"_id":"public/page/2/index.html","hash":"57f9aa72e51b0f46ebdb0be6b6aacf19dd4f0267","modified":1611821867481},{"_id":"public/page/3/index.html","hash":"3579e3178ad5380eb08e4f83e462b46fe7c44e4c","modified":1611821867481},{"_id":"public/page/4/index.html","hash":"20d27eb0e9c0501143a573b9e14f3da8dc2d5bd3","modified":1611821867481},{"_id":"public/page/5/index.html","hash":"5a179acc647adc838dc2f712c12660a84ac7a3a0","modified":1611821867481},{"_id":"public/tags/linux/index.html","hash":"edb4e4f0e5627e7fc1a4ac0eb478f20bf81cebd6","modified":1611821867481},{"_id":"public/tags/SpringBoot/index.html","hash":"f3b158aae0c8ad6bc65b290d58f682a104f4d8b7","modified":1611821867481},{"_id":"public/tags/java/index.html","hash":"5e1260f87ee6d4071eaedd4202b5ca94e40d54c9","modified":1611821867481},{"_id":"public/tags/centos7优化/index.html","hash":"732b918d2f46067ab6b60816dcc77ec6a201155c","modified":1611821867481},{"_id":"public/tags/springMVC/index.html","hash":"8620e81c1ba557af063c87e984a978fa4ebdc309","modified":1611821867481},{"_id":"public/tags/test/index.html","hash":"f753720280e128fefb880bae9b21f8aac83b3257","modified":1611821867481},{"_id":"public/tags/flume/index.html","hash":"bf2cc043649b1c8c42f57b1783e4d08ec33cbd86","modified":1611821867481},{"_id":"public/tags/gcc/index.html","hash":"829ff0fc82c051c1e8310597ceb38c77e566d5ff","modified":1611821867481},{"_id":"public/tags/hadoop/index.html","hash":"9e0d476a0df3d328436733f91351016aaf77c7b1","modified":1611821867481},{"_id":"public/tags/hexo/index.html","hash":"82a75ae267342b273f6c4412e8eb830f592aa7dd","modified":1611821867481},{"_id":"public/tags/kafka/index.html","hash":"e864b59d6d5228bfa5c2e9875f99b3db49ba3169","modified":1611821867481},{"_id":"public/tags/nginx/index.html","hash":"430fa1605b36827defef60bc72e330bd7396b060","modified":1611821867481},{"_id":"public/tags/proxmox/index.html","hash":"bb77faf80401299ad510efa0c552e5f74f450d82","modified":1611821867481},{"_id":"public/tags/spark/index.html","hash":"a93818c1b67bee0e7993fcf47f7618de280a5690","modified":1611821867481},{"_id":"public/tags/pipenv/index.html","hash":"e16c17143563933a601f4362338397439223becc","modified":1611821867481},{"_id":"public/tags/python/index.html","hash":"f598cf42c2605dda64ebb10dae1d10dcc6e668c9","modified":1611821867481},{"_id":"public/tags/tag/index.html","hash":"f46ec586425d1ea02d9544e6ca6e0209b269c443","modified":1611821867481},{"_id":"public/tags/Kite/index.html","hash":"8fede827567ce26e2c72c52f263031046570e48e","modified":1611821867481},{"_id":"public/tags/tabnine/index.html","hash":"a978f76a93c2406df04b994309b91d7107862afb","modified":1611821867481},{"_id":"public/tags/cmdb/index.html","hash":"5cfaca8e4d2db39fb7d86b82eb9a5abd1fec16a8","modified":1611821867481},{"_id":"public/tags/zookeeper/index.html","hash":"16de868493580cb5ee4a906ef15e40f5257a7a79","modified":1611821867481},{"_id":"public/tags/go/index.html","hash":"70cd8d0983503e26e24aa0ccc9fdc20c7833b2de","modified":1611821867481},{"_id":"public/tags/go-mod/index.html","hash":"644f4dab39308802c6939f078e0f4813a3561b6d","modified":1611821867481},{"_id":"public/tags/ansible/index.html","hash":"4048067f6740e0ff13c0142cbc3382d720ab2918","modified":1611821867481},{"_id":"public/tags/es/index.html","hash":"3e587e01334ab7717aff1fc1b9462bf4bda9f750","modified":1611821867481},{"_id":"public/tags/elasticsearch/index.html","hash":"06e58b5ac12f6ae0f68ced748ed96ff9053ae942","modified":1611821867481},{"_id":"public/tags/flask/index.html","hash":"f0d1d5a7ea4ea6dffa47ab48ea3fa614ae133bd2","modified":1611821867481},{"_id":"public/tags/k8s/index.html","hash":"b97122783e41b82afae2710d11c99286263744d2","modified":1611821867481},{"_id":"public/tags/redis/index.html","hash":"e25bed7174c8d848cd8932eff764ea2704d430cb","modified":1611821867481},{"_id":"public/tags/ldap/index.html","hash":"8ea9015d9d64d2455ba3761db1ce4937651f4ce9","modified":1611821867481},{"_id":"public/tags/jenkins/index.html","hash":"54cb102f230e2d75ea0bbbb3627f28802daede6d","modified":1611821867481},{"_id":"public/tags/minio/index.html","hash":"575ea1046672575ab20b17e69d2a7a42d92c33e9","modified":1611821867481},{"_id":"public/tags/mysql/index.html","hash":"47df8d6bb7413c33d670b9e5af985a5c52ed8ace","modified":1611821867481},{"_id":"public/tags/prometheus/index.html","hash":"ab6371fe853a4d74dd5aa49e0e73172a251d3edf","modified":1611821867481},{"_id":"public/tags/node-exporter/index.html","hash":"351acf020f6782188d5e64ef7404fb43e9363eef","modified":1611821867481},{"_id":"public/tags/mongodb/index.html","hash":"58ef105ee4c758cd36e07317b05858d43cc8b8f7","modified":1611821867481},{"_id":"public/tags/auth/index.html","hash":"8bdd16da8c1d0cc387401672e7ef40798a3b1fa7","modified":1611821867481},{"_id":"public/tags/dingding/index.html","hash":"096124568ffe09a6b9ad5d758cada556d9980a50","modified":1611821867481},{"_id":"public/tags/salt/index.html","hash":"c305b1c9b215ed1538d1bcf0f7654fc6c724ba9c","modified":1611821867481},{"_id":"public/tags/vue3/index.html","hash":"20d798a1d2fdb1ff1fbfaec74bfece9cca4d8023","modified":1611821867481},{"_id":"public/tags/ca/index.html","hash":"d8810eb50fb606da2a6b6a3f7f9ba09d38a8da51","modified":1611821867481},{"_id":"public/tags/ssl/index.html","hash":"89b5b8a2a2f9599e2acb6b336728074db0a06815","modified":1611821867481},{"_id":"public/js/aplayer.js","hash":"c19b26838cd47ec179100b006673788a98aa4577","modified":1611821867481},{"_id":"public/js/issues.js","hash":"f9ad62c367eed45fd641202d0a574c7deacf645b","modified":1611821867481},{"_id":"public/js/app.js","hash":"8257ceb59596e4aaef5f727de391d3b6687368bf","modified":1611821867481},{"_id":"public/css/style.css","hash":"a072aa8518e5ef54958289515aabc19c95da8f12","modified":1611821867481},{"_id":"public/js/search/algolia.js","hash":"4c4984b0680b21fde8ca25d03e1896987fcac16f","modified":1611821867481},{"_id":"public/css/first.css","hash":"d62bf6e5aaa5e31a241144722d830988a609d42f","modified":1611821867481},{"_id":"public/js/search/google.js","hash":"000dc1848ba5ce6e9a3d2377b3fb15a4ab396760","modified":1611821867481},{"_id":"public/js/search/azure.js","hash":"fa03d312c25f120774ab2a6144c3e5949b7bf7f4","modified":1611821867481},{"_id":"public/js/search/baidu.js","hash":"74ff709126fd9f9ef78e7aebde69c889ab9d5f53","modified":1611821867481},{"_id":"public/js/search/hexo.js","hash":"e7b9af393c9e0ef34ed585fbe26419e1298d9b26","modified":1611821867481},{"_id":"public/js/valine.js","hash":"63916e2be7d378e9d32271371c588e75e69c871e","modified":1611821867481}],"Category":[{"name":"linux","_id":"ckkgl4h1s0005q0usduf0f0si"},{"name":"java","_id":"ckkgl4h1x000dq0ushq5ic4ha"},{"name":"test","_id":"ckkgl4h26000uq0us88sm9xow"},{"name":"bigdata","_id":"ckkgl4h280012q0us27sca3ci"},{"name":"gcc","_id":"ckkgl4h2a0017q0us2gt04bp1"},{"name":"hexo","_id":"ckkgl4h2m001zq0usalyb6sns"},{"name":"openresty","_id":"ckkgl4h2r002cq0us9q8339j1"},{"name":"python","_id":"ckkgl4h2t002jq0us9jeu9bby"},{"name":"cmdb","_id":"ckkgl4h2x002uq0useg2r18f2"},{"name":"go","_id":"ckkgl4h2z0033q0us95frgow9"},{"name":"ansible","_id":"ckkgl4h34003gq0usdelfhq18"},{"name":"elasticsearch","_id":"ckkgl4h35003kq0us7t07atps"},{"name":"flask","_id":"ckkgl4h36003oq0us4iyd4anp"},{"name":"python3","_id":"ckkgl4h36003sq0usgxzja3wo"},{"name":"k8s","_id":"ckkgl4h37003vq0us642kdjev"},{"name":"centos","_id":"ckkgl4h38003zq0usanh69r7y"},{"name":"ldap","_id":"ckkgl4h390044q0usflu241vr"},{"name":"jenkins","_id":"ckkgl4h3a0049q0ush13x6juy"},{"name":"minio","_id":"ckkgl4h3a004dq0us4gw78ocf"},{"name":"mysql","_id":"ckkgl4h3b004hq0usb1qweqs8"},{"name":"prometheus","_id":"ckkgl4h3c004lq0us73h19qyy"},{"name":"mongodb","_id":"ckkgl4h3d004oq0usgn7scp01"},{"name":"salt","_id":"ckkgl4h3f004yq0us3inogz1z"},{"name":"vue","_id":"ckkgl4h3h0057q0us8gjtheli"},{"name":"Linux","_id":"ckkgl4h40006aq0us49l3d7po"}],"Data":[],"Page":[{"_content":"","source":"Untitled.md","raw":"","date":"2021-01-27T08:20:35.736Z","updated":"2021-01-27T08:20:35.736Z","path":"Untitled.html","title":"","comments":1,"layout":"page","_id":"ckkgl4h180000q0usf58pgzv2","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"page","title":"404 Not Found","body":["article","comments"],"meta":{"header":false,"footer":false},"sidebar":false,"valine":{"path":"/404.html","placeholder":"请留言告诉我您要访问哪个页面找不到了"},"_content":"\n# <center>**404 Not Found**</center>\n\n<br>\n\n<center>**很抱歉，您访问的页面不存在**</center>\n<center>可能是输入地址有误或该地址已被删除</center>\n\n<br>\n<br>","source":"404.md","raw":"---\nlayout: page\ntitle: 404 Not Found\nbody: [article, comments]\nmeta:\n  header: false\n  footer: false\nsidebar: false\nvaline:\n  path: /404.html\n  placeholder: 请留言告诉我您要访问哪个页面找不到了\n---\n\n# <center>**404 Not Found**</center>\n\n<br>\n\n<center>**很抱歉，您访问的页面不存在**</center>\n<center>可能是输入地址有误或该地址已被删除</center>\n\n<br>\n<br>","date":"2021-01-27T08:20:35.736Z","updated":"2021-01-27T08:20:35.736Z","path":"404.html","comments":1,"_id":"ckkgl4h1m0001q0us1zjl1cko","content":"<h1 id=\"404-Not-Found\"><a href=\"#404-Not-Found\" class=\"headerlink\" title=\"404 Not Found\"></a><center><strong>404 Not Found</strong></center></h1><br>\n\n<center>**很抱歉，您访问的页面不存在**</center>\n<center>可能是输入地址有误或该地址已被删除</center>\n\n<br>\n<br>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"404-Not-Found\"><a href=\"#404-Not-Found\" class=\"headerlink\" title=\"404 Not Found\"></a><center><strong>404 Not Found</strong></center></h1><br>\n\n<center>**很抱歉，您访问的页面不存在**</center>\n<center>可能是输入地址有误或该地址已被删除</center>\n\n<br>\n<br>"},{"layout":"tag","index":true,"title":"所有归档","_content":"","source":"archives/index.md","raw":"---\nlayout: tag\nindex: true\ntitle: 所有归档\n---\n","date":"2021-01-27T08:20:35.778Z","updated":"2021-01-27T08:20:35.778Z","path":"archives/index.html","comments":1,"_id":"ckkgl4h1q0003q0usfblv4j57","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"friends","index":true,"title":"所有友链","_content":"","source":"friends/index.md","raw":"---\nlayout: friends\nindex: true\ntitle: 所有友链\n---\n","date":"2021-01-27T08:20:35.782Z","updated":"2021-01-27T08:20:35.782Z","path":"friends/index.html","comments":1,"_id":"ckkgl4h1t0007q0us1lrp3g18","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"page","title":"关于","date":"2019-12-13T10:33:26.000Z","body":["article","grid","comments"],"valine":{"placeholder":"有什么想对我说的呢？"},"sidebar":false,"_content":"","source":"about/index.md","raw":"---\nlayout: page\ntitle: 关于\ndate: 2019-12-13 18:33:26\nbody: [article, grid, comments]\nvaline:\n  placeholder: 有什么想对我说的呢？\nsidebar: false\n---","updated":"2021-01-27T08:20:35.777Z","path":"about/index.html","comments":1,"_id":"ckkgl4h1v0009q0usey2455yj","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"tag","index":true,"title":"所有标签","_content":"","source":"tags/index.md","raw":"---\nlayout: tag\nindex: true\ntitle: 所有标签\n---\n","date":"2021-01-27T08:20:35.783Z","updated":"2021-01-27T08:20:35.783Z","path":"tags/index.html","comments":1,"_id":"ckkgl4h1w000bq0usbe9d3qv1","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"category","index":true,"title":"所有分类","_content":"","source":"categories/index.md","raw":"---\nlayout: category\nindex: true\ntitle: 所有分类\n---","date":"2021-01-27T08:20:35.780Z","updated":"2021-01-27T08:20:35.780Z","path":"categories/index.html","comments":1,"_id":"ckkgl4h1y000gq0us7rgm2civ","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Centos7内核升级","date":"2020-04-01T06:00:00.000Z","_content":"\n\n\n**安装ELRepo到CentOS**\n\n```\nrpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\nyum install https://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm\n```\n\n\n\n**添加 repository 后, 列出可以使用的kernel包版本**\n\n```\nyum --disablerepo=\"*\" --enablerepo=\"elrepo-kernel\" list available\n```\n\n**安装需要的kernel版本，这里安装 kernel-lt**\n\n```\nyum --enablerepo=elrepo-kernel install kernel-lt\n```\n\n内核版本介绍：\n\n- **lt**:longterm的缩写：长期维护版；\n- **ml**:mainline的缩写：最新稳定版；\n\n\n\n方式一：\n\n**检查kernel启动顺序**\n\n默认启动的顺序是从0开始，新内核是从头插入（目前位置在0，而4.4.4的是在1），所以需要选择0。\n\n```\ngrub2-set-default 0\n```\n\n\n\n### 删除老内核以及内核工具\n\n```\nrpm -qa|grep kernel|grep 3.10\nrpm -qa|grep kernel|grep 3.10|xargs yum remove -y\n```\n\n### 安装新版本工具包\n\n```\nyum --disablerepo=\\* --enablerepo=elrepo-kernel install -y kernel-ml-tools.x86_64\n\nrpm -qa|grep kernel\n```\n\n**重新创建kernel配置**\n\n```\n grub2-mkconfig -o /boot/grub2/grub.cfg\n \n \n reboot   # 重启\n```\n\n\n\n方式二：\n\n####  查看系统上的所有可以内核：\n\n```\n# sudo awk -F\\' '$1==\"menuentry \" {print i++ \" : \" $2}' /etc/grub2.cfg\n0 : CentOS Linux (4.15.6-1.el7.elrepo.x86_64) 7 (Core)\n1 : CentOS Linux (3.10.0-514.26.2.el7.x86_64) 7 (Core)\n2 : CentOS Linux (3.10.0-327.el7.x86_64) 7 (Core)\n3 : CentOS Linux (0-rescue-f9d400c5e1e8c3a8209e990d887d4ac1) 7 (Core)\n```\n\n#### 通过 `grub2-set-default 0` 命令设置：\n\n```\ngrub2-set-default 0\n\n\nreboot  #重启\n```\n\n\n\n\n\n## 删除旧内核\n\n#### 方式一，通过 `yum remove` 命令\n\n```\n查看系统中全部的内核：\n\n# rpm -qa | grep kernel\n\nkernel-tools-libs-3.10.0-514.26.2.el7.x86_64\nkernel-ml-4.15.6-1.el7.elrepo.x86_64\nkernel-3.10.0-327.el7.x86_64\nkernel-tools-3.10.0-514.26.2.el7.x86_64\nkernel-headers-3.10.0-514.26.2.el7.x86_64\nkernel-3.10.0-514.26.2.el7.x86_64\n```\n\n删除旧内核的 RPM 包\n\n```\nyum remove kernel-tools-libs-3.10.0-514.26.2.el7.x86_64 kernel-3.10.0-327.el7.x86_64 kernel-tools-3.10.0-514.26.2.el7.x86_64 kernel-headers-3.10.0-514.26.2.el7.x86_64 kernel-3.10.0-514.26.2.el7.x86_64\n```\n\n\n\n#### 方式二，通过 `yum-utils` 工具\n\n````\nyum install yum-utils\n````\n\n\n\n#### 删除\n\n```\npackage-cleanup --oldkernels\n```","source":"_posts/Centos7升级内核.md","raw":"---\ntitle: Centos7内核升级\ndate: 2020-04-1 14:00:00\ncategories: \n- linux\ntags:\n- linux\n---\n\n\n\n**安装ELRepo到CentOS**\n\n```\nrpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\nyum install https://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm\n```\n\n\n\n**添加 repository 后, 列出可以使用的kernel包版本**\n\n```\nyum --disablerepo=\"*\" --enablerepo=\"elrepo-kernel\" list available\n```\n\n**安装需要的kernel版本，这里安装 kernel-lt**\n\n```\nyum --enablerepo=elrepo-kernel install kernel-lt\n```\n\n内核版本介绍：\n\n- **lt**:longterm的缩写：长期维护版；\n- **ml**:mainline的缩写：最新稳定版；\n\n\n\n方式一：\n\n**检查kernel启动顺序**\n\n默认启动的顺序是从0开始，新内核是从头插入（目前位置在0，而4.4.4的是在1），所以需要选择0。\n\n```\ngrub2-set-default 0\n```\n\n\n\n### 删除老内核以及内核工具\n\n```\nrpm -qa|grep kernel|grep 3.10\nrpm -qa|grep kernel|grep 3.10|xargs yum remove -y\n```\n\n### 安装新版本工具包\n\n```\nyum --disablerepo=\\* --enablerepo=elrepo-kernel install -y kernel-ml-tools.x86_64\n\nrpm -qa|grep kernel\n```\n\n**重新创建kernel配置**\n\n```\n grub2-mkconfig -o /boot/grub2/grub.cfg\n \n \n reboot   # 重启\n```\n\n\n\n方式二：\n\n####  查看系统上的所有可以内核：\n\n```\n# sudo awk -F\\' '$1==\"menuentry \" {print i++ \" : \" $2}' /etc/grub2.cfg\n0 : CentOS Linux (4.15.6-1.el7.elrepo.x86_64) 7 (Core)\n1 : CentOS Linux (3.10.0-514.26.2.el7.x86_64) 7 (Core)\n2 : CentOS Linux (3.10.0-327.el7.x86_64) 7 (Core)\n3 : CentOS Linux (0-rescue-f9d400c5e1e8c3a8209e990d887d4ac1) 7 (Core)\n```\n\n#### 通过 `grub2-set-default 0` 命令设置：\n\n```\ngrub2-set-default 0\n\n\nreboot  #重启\n```\n\n\n\n\n\n## 删除旧内核\n\n#### 方式一，通过 `yum remove` 命令\n\n```\n查看系统中全部的内核：\n\n# rpm -qa | grep kernel\n\nkernel-tools-libs-3.10.0-514.26.2.el7.x86_64\nkernel-ml-4.15.6-1.el7.elrepo.x86_64\nkernel-3.10.0-327.el7.x86_64\nkernel-tools-3.10.0-514.26.2.el7.x86_64\nkernel-headers-3.10.0-514.26.2.el7.x86_64\nkernel-3.10.0-514.26.2.el7.x86_64\n```\n\n删除旧内核的 RPM 包\n\n```\nyum remove kernel-tools-libs-3.10.0-514.26.2.el7.x86_64 kernel-3.10.0-327.el7.x86_64 kernel-tools-3.10.0-514.26.2.el7.x86_64 kernel-headers-3.10.0-514.26.2.el7.x86_64 kernel-3.10.0-514.26.2.el7.x86_64\n```\n\n\n\n#### 方式二，通过 `yum-utils` 工具\n\n````\nyum install yum-utils\n````\n\n\n\n#### 删除\n\n```\npackage-cleanup --oldkernels\n```","slug":"Centos7升级内核","published":1,"updated":"2021-01-27T08:20:35.738Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h1n0002q0us9nm23t0s","content":"<p><strong>安装ELRepo到CentOS</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm --import https:&#x2F;&#x2F;www.elrepo.org&#x2F;RPM-GPG-KEY-elrepo.org</span><br><span class=\"line\">yum install https:&#x2F;&#x2F;www.elrepo.org&#x2F;elrepo-release-7.0-3.el7.elrepo.noarch.rpm</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>添加 repository 后, 列出可以使用的kernel包版本</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum --disablerepo&#x3D;&quot;*&quot; --enablerepo&#x3D;&quot;elrepo-kernel&quot; list available</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装需要的kernel版本，这里安装 kernel-lt</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum --enablerepo&#x3D;elrepo-kernel install kernel-lt</span><br></pre></td></tr></table></figure>\n\n<p>内核版本介绍：</p>\n<ul>\n<li><strong>lt</strong>:longterm的缩写：长期维护版；</li>\n<li><strong>ml</strong>:mainline的缩写：最新稳定版；</li>\n</ul>\n<p>方式一：</p>\n<p><strong>检查kernel启动顺序</strong></p>\n<p>默认启动的顺序是从0开始，新内核是从头插入（目前位置在0，而4.4.4的是在1），所以需要选择0。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grub2-set-default 0</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"删除老内核以及内核工具\"><a href=\"#删除老内核以及内核工具\" class=\"headerlink\" title=\"删除老内核以及内核工具\"></a>删除老内核以及内核工具</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -qa|grep kernel|grep 3.10</span><br><span class=\"line\">rpm -qa|grep kernel|grep 3.10|xargs yum remove -y</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装新版本工具包\"><a href=\"#安装新版本工具包\" class=\"headerlink\" title=\"安装新版本工具包\"></a>安装新版本工具包</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum --disablerepo&#x3D;\\* --enablerepo&#x3D;elrepo-kernel install -y kernel-ml-tools.x86_64</span><br><span class=\"line\"></span><br><span class=\"line\">rpm -qa|grep kernel</span><br></pre></td></tr></table></figure>\n\n<p><strong>重新创建kernel配置</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grub2-mkconfig -o &#x2F;boot&#x2F;grub2&#x2F;grub.cfg</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">reboot   # 重启</span><br></pre></td></tr></table></figure>\n\n\n\n<p>方式二：</p>\n<h4 id=\"查看系统上的所有可以内核：\"><a href=\"#查看系统上的所有可以内核：\" class=\"headerlink\" title=\"查看系统上的所有可以内核：\"></a>查看系统上的所有可以内核：</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># sudo awk -F\\&#39; &#39;$1&#x3D;&#x3D;&quot;menuentry &quot; &#123;print i++ &quot; : &quot; $2&#125;&#39; &#x2F;etc&#x2F;grub2.cfg</span><br><span class=\"line\">0 : CentOS Linux (4.15.6-1.el7.elrepo.x86_64) 7 (Core)</span><br><span class=\"line\">1 : CentOS Linux (3.10.0-514.26.2.el7.x86_64) 7 (Core)</span><br><span class=\"line\">2 : CentOS Linux (3.10.0-327.el7.x86_64) 7 (Core)</span><br><span class=\"line\">3 : CentOS Linux (0-rescue-f9d400c5e1e8c3a8209e990d887d4ac1) 7 (Core)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"通过-grub2-set-default-0-命令设置：\"><a href=\"#通过-grub2-set-default-0-命令设置：\" class=\"headerlink\" title=\"通过 grub2-set-default 0 命令设置：\"></a>通过 <code>grub2-set-default 0</code> 命令设置：</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grub2-set-default 0</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">reboot  #重启</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"删除旧内核\"><a href=\"#删除旧内核\" class=\"headerlink\" title=\"删除旧内核\"></a>删除旧内核</h2><h4 id=\"方式一，通过-yum-remove-命令\"><a href=\"#方式一，通过-yum-remove-命令\" class=\"headerlink\" title=\"方式一，通过 yum remove 命令\"></a>方式一，通过 <code>yum remove</code> 命令</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">查看系统中全部的内核：</span><br><span class=\"line\"></span><br><span class=\"line\"># rpm -qa | grep kernel</span><br><span class=\"line\"></span><br><span class=\"line\">kernel-tools-libs-3.10.0-514.26.2.el7.x86_64</span><br><span class=\"line\">kernel-ml-4.15.6-1.el7.elrepo.x86_64</span><br><span class=\"line\">kernel-3.10.0-327.el7.x86_64</span><br><span class=\"line\">kernel-tools-3.10.0-514.26.2.el7.x86_64</span><br><span class=\"line\">kernel-headers-3.10.0-514.26.2.el7.x86_64</span><br><span class=\"line\">kernel-3.10.0-514.26.2.el7.x86_64</span><br></pre></td></tr></table></figure>\n\n<p>删除旧内核的 RPM 包</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum remove kernel-tools-libs-3.10.0-514.26.2.el7.x86_64 kernel-3.10.0-327.el7.x86_64 kernel-tools-3.10.0-514.26.2.el7.x86_64 kernel-headers-3.10.0-514.26.2.el7.x86_64 kernel-3.10.0-514.26.2.el7.x86_64</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"方式二，通过-yum-utils-工具\"><a href=\"#方式二，通过-yum-utils-工具\" class=\"headerlink\" title=\"方式二，通过 yum-utils 工具\"></a>方式二，通过 <code>yum-utils</code> 工具</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install yum-utils</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package-cleanup --oldkernels</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p><strong>安装ELRepo到CentOS</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm --import https:&#x2F;&#x2F;www.elrepo.org&#x2F;RPM-GPG-KEY-elrepo.org</span><br><span class=\"line\">yum install https:&#x2F;&#x2F;www.elrepo.org&#x2F;elrepo-release-7.0-3.el7.elrepo.noarch.rpm</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>添加 repository 后, 列出可以使用的kernel包版本</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum --disablerepo&#x3D;&quot;*&quot; --enablerepo&#x3D;&quot;elrepo-kernel&quot; list available</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装需要的kernel版本，这里安装 kernel-lt</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum --enablerepo&#x3D;elrepo-kernel install kernel-lt</span><br></pre></td></tr></table></figure>\n\n<p>内核版本介绍：</p>\n<ul>\n<li><strong>lt</strong>:longterm的缩写：长期维护版；</li>\n<li><strong>ml</strong>:mainline的缩写：最新稳定版；</li>\n</ul>\n<p>方式一：</p>\n<p><strong>检查kernel启动顺序</strong></p>\n<p>默认启动的顺序是从0开始，新内核是从头插入（目前位置在0，而4.4.4的是在1），所以需要选择0。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grub2-set-default 0</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"删除老内核以及内核工具\"><a href=\"#删除老内核以及内核工具\" class=\"headerlink\" title=\"删除老内核以及内核工具\"></a>删除老内核以及内核工具</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -qa|grep kernel|grep 3.10</span><br><span class=\"line\">rpm -qa|grep kernel|grep 3.10|xargs yum remove -y</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装新版本工具包\"><a href=\"#安装新版本工具包\" class=\"headerlink\" title=\"安装新版本工具包\"></a>安装新版本工具包</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum --disablerepo&#x3D;\\* --enablerepo&#x3D;elrepo-kernel install -y kernel-ml-tools.x86_64</span><br><span class=\"line\"></span><br><span class=\"line\">rpm -qa|grep kernel</span><br></pre></td></tr></table></figure>\n\n<p><strong>重新创建kernel配置</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grub2-mkconfig -o &#x2F;boot&#x2F;grub2&#x2F;grub.cfg</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">reboot   # 重启</span><br></pre></td></tr></table></figure>\n\n\n\n<p>方式二：</p>\n<h4 id=\"查看系统上的所有可以内核：\"><a href=\"#查看系统上的所有可以内核：\" class=\"headerlink\" title=\"查看系统上的所有可以内核：\"></a>查看系统上的所有可以内核：</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># sudo awk -F\\&#39; &#39;$1&#x3D;&#x3D;&quot;menuentry &quot; &#123;print i++ &quot; : &quot; $2&#125;&#39; &#x2F;etc&#x2F;grub2.cfg</span><br><span class=\"line\">0 : CentOS Linux (4.15.6-1.el7.elrepo.x86_64) 7 (Core)</span><br><span class=\"line\">1 : CentOS Linux (3.10.0-514.26.2.el7.x86_64) 7 (Core)</span><br><span class=\"line\">2 : CentOS Linux (3.10.0-327.el7.x86_64) 7 (Core)</span><br><span class=\"line\">3 : CentOS Linux (0-rescue-f9d400c5e1e8c3a8209e990d887d4ac1) 7 (Core)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"通过-grub2-set-default-0-命令设置：\"><a href=\"#通过-grub2-set-default-0-命令设置：\" class=\"headerlink\" title=\"通过 grub2-set-default 0 命令设置：\"></a>通过 <code>grub2-set-default 0</code> 命令设置：</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grub2-set-default 0</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">reboot  #重启</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"删除旧内核\"><a href=\"#删除旧内核\" class=\"headerlink\" title=\"删除旧内核\"></a>删除旧内核</h2><h4 id=\"方式一，通过-yum-remove-命令\"><a href=\"#方式一，通过-yum-remove-命令\" class=\"headerlink\" title=\"方式一，通过 yum remove 命令\"></a>方式一，通过 <code>yum remove</code> 命令</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">查看系统中全部的内核：</span><br><span class=\"line\"></span><br><span class=\"line\"># rpm -qa | grep kernel</span><br><span class=\"line\"></span><br><span class=\"line\">kernel-tools-libs-3.10.0-514.26.2.el7.x86_64</span><br><span class=\"line\">kernel-ml-4.15.6-1.el7.elrepo.x86_64</span><br><span class=\"line\">kernel-3.10.0-327.el7.x86_64</span><br><span class=\"line\">kernel-tools-3.10.0-514.26.2.el7.x86_64</span><br><span class=\"line\">kernel-headers-3.10.0-514.26.2.el7.x86_64</span><br><span class=\"line\">kernel-3.10.0-514.26.2.el7.x86_64</span><br></pre></td></tr></table></figure>\n\n<p>删除旧内核的 RPM 包</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum remove kernel-tools-libs-3.10.0-514.26.2.el7.x86_64 kernel-3.10.0-327.el7.x86_64 kernel-tools-3.10.0-514.26.2.el7.x86_64 kernel-headers-3.10.0-514.26.2.el7.x86_64 kernel-3.10.0-514.26.2.el7.x86_64</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"方式二，通过-yum-utils-工具\"><a href=\"#方式二，通过-yum-utils-工具\" class=\"headerlink\" title=\"方式二，通过 yum-utils 工具\"></a>方式二，通过 <code>yum-utils</code> 工具</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install yum-utils</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package-cleanup --oldkernels</span><br></pre></td></tr></table></figure>"},{"title":"MVC 概要与环境配置","date":"2019-12-13T06:00:00.000Z","_content":"\n\n\n[TOC]\n\n\n\n## Spring Boot 简介\n\nSpring boot 来简化Spring 应用开发的一个框架\n\n整个Spring技术栈的一个大整合\n\nJ2EE 开发的一站式解决方案\n\n\n\n解决\n\n","source":"_posts/SpringBoot一.md","raw":"---\ntitle: MVC 概要与环境配置\ndate: 2019-12-13 14:00:00\ncategories: \n- java\ntags:\n- SpringBoot\n- java\n---\n\n\n\n[TOC]\n\n\n\n## Spring Boot 简介\n\nSpring boot 来简化Spring 应用开发的一个框架\n\n整个Spring技术栈的一个大整合\n\nJ2EE 开发的一站式解决方案\n\n\n\n解决\n\n","slug":"SpringBoot一","published":1,"updated":"2021-01-27T08:20:35.740Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h1q0004q0us4k1c9mgl","content":"<p>[TOC]</p>\n<h2 id=\"Spring-Boot-简介\"><a href=\"#Spring-Boot-简介\" class=\"headerlink\" title=\"Spring Boot 简介\"></a>Spring Boot 简介</h2><p>Spring boot 来简化Spring 应用开发的一个框架</p>\n<p>整个Spring技术栈的一个大整合</p>\n<p>J2EE 开发的一站式解决方案</p>\n<p>解决</p>\n","site":{"data":{}},"excerpt":"","more":"<p>[TOC]</p>\n<h2 id=\"Spring-Boot-简介\"><a href=\"#Spring-Boot-简介\" class=\"headerlink\" title=\"Spring Boot 简介\"></a>Spring Boot 简介</h2><p>Spring boot 来简化Spring 应用开发的一个框架</p>\n<p>整个Spring技术栈的一个大整合</p>\n<p>J2EE 开发的一站式解决方案</p>\n<p>解决</p>\n"},{"title":"Centos7系统优化脚本","date":"2020-09-21T04:40:00.000Z","_content":"\n```bash\n#!/bin/bash\n\nset -e\n\ninit_yum(){\necho -e \"\\033[1;32m ###########  初始化yum 源 ############# \\033[0m\"\ncd /etc/yum.repos.d/\n[[ ! -d repo ]] && mkdir -p repo || echo \"已存在\"\n\\mv -f Cent* repo\n# aliyun\ncurl -s -O  http://mirrors.aliyun.com/repo/Centos-7.repo\n# 163\ncurl -s -O http://mirrors.163.com/.help/CentOS7-Base-163.repo\n\n# 安装epel源\nyum install -y epel-release\n# 安装aliyun epel源\ncurl -o /etc/yum.repos.d/epel-7.repo http://mirrors.aliyun.com/repo/epel-7.repo\n\n# 清除系统所有的yum缓存\nyum clean all\n# 生成yum缓存\nyum makecache\n\n# 查看系统可用的yum源和所有的yum源\nyum repolist enabled\ncd -\n\nsleep 1\necho -e \"\\033[1;32m ###########  初始化yum 源 完成 ############# \\033[0m\"\n}\n\ninit_ntp(){\necho -e \"\\033[1;32m ###########  时间同步  ############# \\033[0m\"\nif [ !$(rpm -qa | grep ntp-) ];then\nyum install ntp -y\nfi\n\ncat >/etc/ntp.conf<<EOF\ndriftfile /var/lib/ntp/drift\nrestrict default nomodify notrap nopeer noquery\nrestrict 127.0.0.1 \nrestrict ::1\nserver cn.ntp.org.cn iburst\nserver ntp.aliyun.com iburst\nincludefile /etc/ntp/crypto/pw\nkeys /etc/ntp/keys\ndisable monitor\nEOF\n\nsystemctl start ntpd\nsystemctl enable ntpd\nsystemctl status ntpd\n}\n\n\nfunction ulimits(){\ncat > /etc/security/limits.conf <<EOF\n* soft noproc 20480\n* hard noproc 20480\nroot soft nofile 65536\nroot hard nofile 65536\n* soft nofile 65536\n* hard nofile 65536\nEOF\nulimit -n 65536\nulimit -u 20480\n#echo \"[ulimits 配置] ==> OK\"\n}\n\ninit_selinux(){\necho -e \"\\033[1;32m 禁用SELinux / 关闭防火墙  ############# \\033[0m\"\nsed -i '/SELINUX/s/enforcing/disabled/' /etc/selinux/config\nsetenforce 0\n\nsed -i 's/^GSSAPIAuthentication yes$/GSSAPIAuthentication no/' /etc/ssh/sshd_config\nsed -i 's/#UseDNS yes/UseDNS no/' /etc/ssh/sshd_config\n\nyum install -y openssl openssh bash\n\nsystemctl  restart sshd.service\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\n}\n\ninit_sysctl(){\necho -e \"\\033[1;32m ###########  内核参数优化  ############# \\033[0m\"\n\ncat >> /etc/sysctl.conf << EOF\n#CTCDN系统优化参数\n#关闭ipv6\nnet.ipv6.conf.all.disable_ipv6 = 1\nnet.ipv6.conf.default.disable_ipv6 = 1\n#决定检查过期多久邻居条目\nnet.ipv4.neigh.default.gc_stale_time=120\n#使用arp_announce / arp_ignore解决ARP映射问题\nnet.ipv4.conf.default.arp_announce = 2\nnet.ipv4.conf.all.arp_announce=2\nnet.ipv4.conf.lo.arp_announce=2\n# 避免放大攻击\nnet.ipv4.icmp_echo_ignore_broadcasts = 1\n# 开启恶意icmp错误消息保护\nnet.ipv4.icmp_ignore_bogus_error_responses = 1\n#关闭路由转发\nnet.ipv4.ip_forward = 0\nnet.ipv4.conf.all.send_redirects = 0\nnet.ipv4.conf.default.send_redirects = 0\n#开启反向路径过滤\nnet.ipv4.conf.all.rp_filter = 1\nnet.ipv4.conf.default.rp_filter = 1\n#处理无源路由的包\nnet.ipv4.conf.all.accept_source_route = 0\nnet.ipv4.conf.default.accept_source_route = 0\n#关闭sysrq功能\nkernel.sysrq = 0\n#core文件名中添加pid作为扩展名\nkernel.core_uses_pid = 1\n# 开启SYN洪水攻击保护\nnet.ipv4.tcp_syncookies = 1\n#修改消息队列长度\nkernel.msgmnb = 65536\nkernel.msgmax = 65536\n#设置最大内存共享段大小bytes\nkernel.shmmax = 68719476736\nkernel.shmall = 4294967296\n#timewait的数量，默认180000\nnet.ipv4.tcp_max_tw_buckets = 6000\nnet.ipv4.tcp_sack = 1\nnet.ipv4.tcp_window_scaling = 1\nnet.ipv4.tcp_rmem = 4096        87380   4194304\nnet.ipv4.tcp_wmem = 4096        16384   4194304\nnet.core.wmem_default = 8388608\nnet.core.rmem_default = 8388608\nnet.core.rmem_max = 16777216\nnet.core.wmem_max = 16777216\n#每个网络接口接收数据包的速率比内核处理这些包的速率快时，允许送到队列的数据包的最大数目\nnet.core.netdev_max_backlog = 262144\n#限制仅仅是为了防止简单的DoS 攻击\nnet.ipv4.tcp_max_orphans = 3276800\n#未收到客户端确认信息的连接请求的最大值\nnet.ipv4.tcp_max_syn_backlog = 262144\nnet.ipv4.tcp_timestamps = 0\n#内核放弃建立连接之前发送SYNACK 包的数量\nnet.ipv4.tcp_synack_retries = 1\n#内核放弃建立连接之前发送SYN 包的数量\nnet.ipv4.tcp_syn_retries = 1\n#启用timewait 快速回收\nnet.ipv4.tcp_tw_recycle = 1\n#开启重用。允许将TIME-WAIT sockets 重新用于新的TCP 连接\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_mem = 94500000 915000000 927000000\nnet.ipv4.tcp_fin_timeout = 1\n#当keepalive 起用的时候，TCP 发送keepalive 消息的频度。缺省是2 小时\nnet.ipv4.tcp_keepalive_time = 1800\nnet.ipv4.tcp_keepalive_probes = 3\nnet.ipv4.tcp_keepalive_intvl = 15\n#允许系统打开的端口范围\nnet.ipv4.ip_local_port_range = 1024    65000\n# 确保无人能修改路由表\nnet.ipv4.conf.all.accept_redirects = 0\nnet.ipv4.conf.default.accept_redirects = 0\nnet.ipv4.conf.all.secure_redirects = 0\nnet.ipv4.conf.default.secure_redirects = 0\nEOF\n/sbin/sysctl -p\n\n}\n\ninit_vim(){\necho -e \"\\033[1;32m ###########  初始化vim 配置  ############# \\033[0m\"\n\nif [ !$(rpm -q vim-common) ];then\nyum install vim -y\nfi\necho 'alias vi=vim' >> /etc/profile\necho 'stty erase ^H' >> /etc/profile\ncat >> /root/.vimrc << EOF\nset tabstop=4\nset shiftwidth=4\nset expandtab\nsyntax on\n\"set number\nEOF\n\n}\n\n\nfunction other(){\nyum groupinstall Development tools -y >/dev/null 2>&1\nyum install -y vim wget lrzsz telnet traceroute iotop tree >/dev/null 2>&1\nyum install -y ncftp axel git zlib-devel openssl-devel unzip xz libxslt-devel libxml2-devel libcurl-devel >/dev/null 2>&1\n}\n\nfunction history(){\nif ! grep \"HISTTIMEFORMAT\" /etc/profile >/dev/null 2>&1\nthen echo '\nUserIP=$(who -u am i | cut -d\"(\"  -f 2 | sed -e \"s/[()]//g\")\nexport HISTTIMEFORMAT=\"[%F %T] [`whoami`] [${UserIP}] \" ' >> /etc/profile;\nfi\n#echo \"[history 优化] ==> OK\"\n}\n\nplatform=$(uname -i)\nif [ ${platform} != \"x86_64\" ];then\necho \"这个脚本只能优化 64位系统\"\nexit 1\nfi\n\ninit_yum\ninit_ntp\ninit_selinux\nulimits\nother\nhistory\ninit_vim\ninit_sysctl\n\ncat << EOF\n+-------------------------------------------------+\n|                优 化 已 完 成             |\n|             5s 后 重启 这台服务器 !       |\n+-------------------------------------------------+\nEOF\n\nsleep 5\n\nreboot\n```\n\n\n\njdk 环境变量\n\n```\n/etc/profile.d/jdk.sh\n\nJAVA_HOME=/opt/jdk1.8.0_221\nCLASSPATH=${JAVA_HOME}/lib/\nPATH=$PATH:${JAVA_HOME}/bin\nexport PATH JAVA_HOME CLASSPAT\n```\n\n","source":"_posts/centos7优化脚本.md","raw":"---\ntitle: Centos7系统优化脚本\ndate: 2020-09-21 12:40\ncategories:\n- linux\ntags:\n- centos7优化\n---\n\n```bash\n#!/bin/bash\n\nset -e\n\ninit_yum(){\necho -e \"\\033[1;32m ###########  初始化yum 源 ############# \\033[0m\"\ncd /etc/yum.repos.d/\n[[ ! -d repo ]] && mkdir -p repo || echo \"已存在\"\n\\mv -f Cent* repo\n# aliyun\ncurl -s -O  http://mirrors.aliyun.com/repo/Centos-7.repo\n# 163\ncurl -s -O http://mirrors.163.com/.help/CentOS7-Base-163.repo\n\n# 安装epel源\nyum install -y epel-release\n# 安装aliyun epel源\ncurl -o /etc/yum.repos.d/epel-7.repo http://mirrors.aliyun.com/repo/epel-7.repo\n\n# 清除系统所有的yum缓存\nyum clean all\n# 生成yum缓存\nyum makecache\n\n# 查看系统可用的yum源和所有的yum源\nyum repolist enabled\ncd -\n\nsleep 1\necho -e \"\\033[1;32m ###########  初始化yum 源 完成 ############# \\033[0m\"\n}\n\ninit_ntp(){\necho -e \"\\033[1;32m ###########  时间同步  ############# \\033[0m\"\nif [ !$(rpm -qa | grep ntp-) ];then\nyum install ntp -y\nfi\n\ncat >/etc/ntp.conf<<EOF\ndriftfile /var/lib/ntp/drift\nrestrict default nomodify notrap nopeer noquery\nrestrict 127.0.0.1 \nrestrict ::1\nserver cn.ntp.org.cn iburst\nserver ntp.aliyun.com iburst\nincludefile /etc/ntp/crypto/pw\nkeys /etc/ntp/keys\ndisable monitor\nEOF\n\nsystemctl start ntpd\nsystemctl enable ntpd\nsystemctl status ntpd\n}\n\n\nfunction ulimits(){\ncat > /etc/security/limits.conf <<EOF\n* soft noproc 20480\n* hard noproc 20480\nroot soft nofile 65536\nroot hard nofile 65536\n* soft nofile 65536\n* hard nofile 65536\nEOF\nulimit -n 65536\nulimit -u 20480\n#echo \"[ulimits 配置] ==> OK\"\n}\n\ninit_selinux(){\necho -e \"\\033[1;32m 禁用SELinux / 关闭防火墙  ############# \\033[0m\"\nsed -i '/SELINUX/s/enforcing/disabled/' /etc/selinux/config\nsetenforce 0\n\nsed -i 's/^GSSAPIAuthentication yes$/GSSAPIAuthentication no/' /etc/ssh/sshd_config\nsed -i 's/#UseDNS yes/UseDNS no/' /etc/ssh/sshd_config\n\nyum install -y openssl openssh bash\n\nsystemctl  restart sshd.service\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\n}\n\ninit_sysctl(){\necho -e \"\\033[1;32m ###########  内核参数优化  ############# \\033[0m\"\n\ncat >> /etc/sysctl.conf << EOF\n#CTCDN系统优化参数\n#关闭ipv6\nnet.ipv6.conf.all.disable_ipv6 = 1\nnet.ipv6.conf.default.disable_ipv6 = 1\n#决定检查过期多久邻居条目\nnet.ipv4.neigh.default.gc_stale_time=120\n#使用arp_announce / arp_ignore解决ARP映射问题\nnet.ipv4.conf.default.arp_announce = 2\nnet.ipv4.conf.all.arp_announce=2\nnet.ipv4.conf.lo.arp_announce=2\n# 避免放大攻击\nnet.ipv4.icmp_echo_ignore_broadcasts = 1\n# 开启恶意icmp错误消息保护\nnet.ipv4.icmp_ignore_bogus_error_responses = 1\n#关闭路由转发\nnet.ipv4.ip_forward = 0\nnet.ipv4.conf.all.send_redirects = 0\nnet.ipv4.conf.default.send_redirects = 0\n#开启反向路径过滤\nnet.ipv4.conf.all.rp_filter = 1\nnet.ipv4.conf.default.rp_filter = 1\n#处理无源路由的包\nnet.ipv4.conf.all.accept_source_route = 0\nnet.ipv4.conf.default.accept_source_route = 0\n#关闭sysrq功能\nkernel.sysrq = 0\n#core文件名中添加pid作为扩展名\nkernel.core_uses_pid = 1\n# 开启SYN洪水攻击保护\nnet.ipv4.tcp_syncookies = 1\n#修改消息队列长度\nkernel.msgmnb = 65536\nkernel.msgmax = 65536\n#设置最大内存共享段大小bytes\nkernel.shmmax = 68719476736\nkernel.shmall = 4294967296\n#timewait的数量，默认180000\nnet.ipv4.tcp_max_tw_buckets = 6000\nnet.ipv4.tcp_sack = 1\nnet.ipv4.tcp_window_scaling = 1\nnet.ipv4.tcp_rmem = 4096        87380   4194304\nnet.ipv4.tcp_wmem = 4096        16384   4194304\nnet.core.wmem_default = 8388608\nnet.core.rmem_default = 8388608\nnet.core.rmem_max = 16777216\nnet.core.wmem_max = 16777216\n#每个网络接口接收数据包的速率比内核处理这些包的速率快时，允许送到队列的数据包的最大数目\nnet.core.netdev_max_backlog = 262144\n#限制仅仅是为了防止简单的DoS 攻击\nnet.ipv4.tcp_max_orphans = 3276800\n#未收到客户端确认信息的连接请求的最大值\nnet.ipv4.tcp_max_syn_backlog = 262144\nnet.ipv4.tcp_timestamps = 0\n#内核放弃建立连接之前发送SYNACK 包的数量\nnet.ipv4.tcp_synack_retries = 1\n#内核放弃建立连接之前发送SYN 包的数量\nnet.ipv4.tcp_syn_retries = 1\n#启用timewait 快速回收\nnet.ipv4.tcp_tw_recycle = 1\n#开启重用。允许将TIME-WAIT sockets 重新用于新的TCP 连接\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_mem = 94500000 915000000 927000000\nnet.ipv4.tcp_fin_timeout = 1\n#当keepalive 起用的时候，TCP 发送keepalive 消息的频度。缺省是2 小时\nnet.ipv4.tcp_keepalive_time = 1800\nnet.ipv4.tcp_keepalive_probes = 3\nnet.ipv4.tcp_keepalive_intvl = 15\n#允许系统打开的端口范围\nnet.ipv4.ip_local_port_range = 1024    65000\n# 确保无人能修改路由表\nnet.ipv4.conf.all.accept_redirects = 0\nnet.ipv4.conf.default.accept_redirects = 0\nnet.ipv4.conf.all.secure_redirects = 0\nnet.ipv4.conf.default.secure_redirects = 0\nEOF\n/sbin/sysctl -p\n\n}\n\ninit_vim(){\necho -e \"\\033[1;32m ###########  初始化vim 配置  ############# \\033[0m\"\n\nif [ !$(rpm -q vim-common) ];then\nyum install vim -y\nfi\necho 'alias vi=vim' >> /etc/profile\necho 'stty erase ^H' >> /etc/profile\ncat >> /root/.vimrc << EOF\nset tabstop=4\nset shiftwidth=4\nset expandtab\nsyntax on\n\"set number\nEOF\n\n}\n\n\nfunction other(){\nyum groupinstall Development tools -y >/dev/null 2>&1\nyum install -y vim wget lrzsz telnet traceroute iotop tree >/dev/null 2>&1\nyum install -y ncftp axel git zlib-devel openssl-devel unzip xz libxslt-devel libxml2-devel libcurl-devel >/dev/null 2>&1\n}\n\nfunction history(){\nif ! grep \"HISTTIMEFORMAT\" /etc/profile >/dev/null 2>&1\nthen echo '\nUserIP=$(who -u am i | cut -d\"(\"  -f 2 | sed -e \"s/[()]//g\")\nexport HISTTIMEFORMAT=\"[%F %T] [`whoami`] [${UserIP}] \" ' >> /etc/profile;\nfi\n#echo \"[history 优化] ==> OK\"\n}\n\nplatform=$(uname -i)\nif [ ${platform} != \"x86_64\" ];then\necho \"这个脚本只能优化 64位系统\"\nexit 1\nfi\n\ninit_yum\ninit_ntp\ninit_selinux\nulimits\nother\nhistory\ninit_vim\ninit_sysctl\n\ncat << EOF\n+-------------------------------------------------+\n|                优 化 已 完 成             |\n|             5s 后 重启 这台服务器 !       |\n+-------------------------------------------------+\nEOF\n\nsleep 5\n\nreboot\n```\n\n\n\njdk 环境变量\n\n```\n/etc/profile.d/jdk.sh\n\nJAVA_HOME=/opt/jdk1.8.0_221\nCLASSPATH=${JAVA_HOME}/lib/\nPATH=$PATH:${JAVA_HOME}/bin\nexport PATH JAVA_HOME CLASSPAT\n```\n\n","slug":"centos7优化脚本","published":1,"updated":"2021-01-27T08:20:35.742Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h1u0008q0us79km6rgb","content":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">set</span> -e</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">init_yum</span></span>()&#123;</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  初始化yum 源 ############# \\033[0m&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /etc/yum.repos.d/</span><br><span class=\"line\">[[ ! -d repo ]] &amp;&amp; mkdir -p repo || <span class=\"built_in\">echo</span> <span class=\"string\">&quot;已存在&quot;</span></span><br><span class=\"line\">\\mv -f Cent* repo</span><br><span class=\"line\"><span class=\"comment\"># aliyun</span></span><br><span class=\"line\">curl -s -O  http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class=\"line\"><span class=\"comment\"># 163</span></span><br><span class=\"line\">curl -s -O http://mirrors.163.com/.<span class=\"built_in\">help</span>/CentOS7-Base-163.repo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装epel源</span></span><br><span class=\"line\">yum install -y epel-release</span><br><span class=\"line\"><span class=\"comment\"># 安装aliyun epel源</span></span><br><span class=\"line\">curl -o /etc/yum.repos.d/epel-7.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 清除系统所有的yum缓存</span></span><br><span class=\"line\">yum clean all</span><br><span class=\"line\"><span class=\"comment\"># 生成yum缓存</span></span><br><span class=\"line\">yum makecache</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看系统可用的yum源和所有的yum源</span></span><br><span class=\"line\">yum repolist enabled</span><br><span class=\"line\"><span class=\"built_in\">cd</span> -</span><br><span class=\"line\"></span><br><span class=\"line\">sleep 1</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  初始化yum 源 完成 ############# \\033[0m&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">init_ntp</span></span>()&#123;</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  时间同步  ############# \\033[0m&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ !$(rpm -qa | grep ntp-) ];<span class=\"keyword\">then</span></span><br><span class=\"line\">yum install ntp -y</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">cat &gt;/etc/ntp.conf&lt;&lt;EOF</span><br><span class=\"line\">driftfile /var/lib/ntp/drift</span><br><span class=\"line\">restrict default nomodify notrap nopeer noquery</span><br><span class=\"line\">restrict 127.0.0.1 </span><br><span class=\"line\">restrict ::1</span><br><span class=\"line\">server cn.ntp.org.cn iburst</span><br><span class=\"line\">server ntp.aliyun.com iburst</span><br><span class=\"line\">includefile /etc/ntp/crypto/pw</span><br><span class=\"line\">keys /etc/ntp/keys</span><br><span class=\"line\"><span class=\"built_in\">disable</span> monitor</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">systemctl start ntpd</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> ntpd</span><br><span class=\"line\">systemctl status ntpd</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">ulimits</span></span>()&#123;</span><br><span class=\"line\">cat &gt; /etc/security/limits.conf &lt;&lt;EOF</span><br><span class=\"line\">* soft noproc 20480</span><br><span class=\"line\">* hard noproc 20480</span><br><span class=\"line\">root soft nofile 65536</span><br><span class=\"line\">root hard nofile 65536</span><br><span class=\"line\">* soft nofile 65536</span><br><span class=\"line\">* hard nofile 65536</span><br><span class=\"line\">EOF</span><br><span class=\"line\"><span class=\"built_in\">ulimit</span> -n 65536</span><br><span class=\"line\"><span class=\"built_in\">ulimit</span> -u 20480</span><br><span class=\"line\"><span class=\"comment\">#echo &quot;[ulimits 配置] ==&gt; OK&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">init_selinux</span></span>()&#123;</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m 禁用SELinux / 关闭防火墙  ############# \\033[0m&quot;</span></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;/SELINUX/s/enforcing/disabled/&#x27;</span> /etc/selinux/config</span><br><span class=\"line\">setenforce 0</span><br><span class=\"line\"></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;s/^GSSAPIAuthentication yes$/GSSAPIAuthentication no/&#x27;</span> /etc/ssh/sshd_config</span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;s/#UseDNS yes/UseDNS no/&#x27;</span> /etc/ssh/sshd_config</span><br><span class=\"line\"></span><br><span class=\"line\">yum install -y openssl openssh bash</span><br><span class=\"line\"></span><br><span class=\"line\">systemctl  restart sshd.service</span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld.service</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">init_sysctl</span></span>()&#123;</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  内核参数优化  ############# \\033[0m&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">cat &gt;&gt; /etc/sysctl.conf &lt;&lt; EOF</span><br><span class=\"line\"><span class=\"comment\">#CTCDN系统优化参数</span></span><br><span class=\"line\"><span class=\"comment\">#关闭ipv6</span></span><br><span class=\"line\">net.ipv6.conf.all.disable_ipv6 = 1</span><br><span class=\"line\">net.ipv6.conf.default.disable_ipv6 = 1</span><br><span class=\"line\"><span class=\"comment\">#决定检查过期多久邻居条目</span></span><br><span class=\"line\">net.ipv4.neigh.default.gc_stale_time=120</span><br><span class=\"line\"><span class=\"comment\">#使用arp_announce / arp_ignore解决ARP映射问题</span></span><br><span class=\"line\">net.ipv4.conf.default.arp_announce = 2</span><br><span class=\"line\">net.ipv4.conf.all.arp_announce=2</span><br><span class=\"line\">net.ipv4.conf.lo.arp_announce=2</span><br><span class=\"line\"><span class=\"comment\"># 避免放大攻击</span></span><br><span class=\"line\">net.ipv4.icmp_echo_ignore_broadcasts = 1</span><br><span class=\"line\"><span class=\"comment\"># 开启恶意icmp错误消息保护</span></span><br><span class=\"line\">net.ipv4.icmp_ignore_bogus_error_responses = 1</span><br><span class=\"line\"><span class=\"comment\">#关闭路由转发</span></span><br><span class=\"line\">net.ipv4.ip_forward = 0</span><br><span class=\"line\">net.ipv4.conf.all.send_redirects = 0</span><br><span class=\"line\">net.ipv4.conf.default.send_redirects = 0</span><br><span class=\"line\"><span class=\"comment\">#开启反向路径过滤</span></span><br><span class=\"line\">net.ipv4.conf.all.rp_filter = 1</span><br><span class=\"line\">net.ipv4.conf.default.rp_filter = 1</span><br><span class=\"line\"><span class=\"comment\">#处理无源路由的包</span></span><br><span class=\"line\">net.ipv4.conf.all.accept_source_route = 0</span><br><span class=\"line\">net.ipv4.conf.default.accept_source_route = 0</span><br><span class=\"line\"><span class=\"comment\">#关闭sysrq功能</span></span><br><span class=\"line\">kernel.sysrq = 0</span><br><span class=\"line\"><span class=\"comment\">#core文件名中添加pid作为扩展名</span></span><br><span class=\"line\">kernel.core_uses_pid = 1</span><br><span class=\"line\"><span class=\"comment\"># 开启SYN洪水攻击保护</span></span><br><span class=\"line\">net.ipv4.tcp_syncookies = 1</span><br><span class=\"line\"><span class=\"comment\">#修改消息队列长度</span></span><br><span class=\"line\">kernel.msgmnb = 65536</span><br><span class=\"line\">kernel.msgmax = 65536</span><br><span class=\"line\"><span class=\"comment\">#设置最大内存共享段大小bytes</span></span><br><span class=\"line\">kernel.shmmax = 68719476736</span><br><span class=\"line\">kernel.shmall = 4294967296</span><br><span class=\"line\"><span class=\"comment\">#timewait的数量，默认180000</span></span><br><span class=\"line\">net.ipv4.tcp_max_tw_buckets = 6000</span><br><span class=\"line\">net.ipv4.tcp_sack = 1</span><br><span class=\"line\">net.ipv4.tcp_window_scaling = 1</span><br><span class=\"line\">net.ipv4.tcp_rmem = 4096        87380   4194304</span><br><span class=\"line\">net.ipv4.tcp_wmem = 4096        16384   4194304</span><br><span class=\"line\">net.core.wmem_default = 8388608</span><br><span class=\"line\">net.core.rmem_default = 8388608</span><br><span class=\"line\">net.core.rmem_max = 16777216</span><br><span class=\"line\">net.core.wmem_max = 16777216</span><br><span class=\"line\"><span class=\"comment\">#每个网络接口接收数据包的速率比内核处理这些包的速率快时，允许送到队列的数据包的最大数目</span></span><br><span class=\"line\">net.core.netdev_max_backlog = 262144</span><br><span class=\"line\"><span class=\"comment\">#限制仅仅是为了防止简单的DoS 攻击</span></span><br><span class=\"line\">net.ipv4.tcp_max_orphans = 3276800</span><br><span class=\"line\"><span class=\"comment\">#未收到客户端确认信息的连接请求的最大值</span></span><br><span class=\"line\">net.ipv4.tcp_max_syn_backlog = 262144</span><br><span class=\"line\">net.ipv4.tcp_timestamps = 0</span><br><span class=\"line\"><span class=\"comment\">#内核放弃建立连接之前发送SYNACK 包的数量</span></span><br><span class=\"line\">net.ipv4.tcp_synack_retries = 1</span><br><span class=\"line\"><span class=\"comment\">#内核放弃建立连接之前发送SYN 包的数量</span></span><br><span class=\"line\">net.ipv4.tcp_syn_retries = 1</span><br><span class=\"line\"><span class=\"comment\">#启用timewait 快速回收</span></span><br><span class=\"line\">net.ipv4.tcp_tw_recycle = 1</span><br><span class=\"line\"><span class=\"comment\">#开启重用。允许将TIME-WAIT sockets 重新用于新的TCP 连接</span></span><br><span class=\"line\">net.ipv4.tcp_tw_reuse = 1</span><br><span class=\"line\">net.ipv4.tcp_mem = 94500000 915000000 927000000</span><br><span class=\"line\">net.ipv4.tcp_fin_timeout = 1</span><br><span class=\"line\"><span class=\"comment\">#当keepalive 起用的时候，TCP 发送keepalive 消息的频度。缺省是2 小时</span></span><br><span class=\"line\">net.ipv4.tcp_keepalive_time = 1800</span><br><span class=\"line\">net.ipv4.tcp_keepalive_probes = 3</span><br><span class=\"line\">net.ipv4.tcp_keepalive_intvl = 15</span><br><span class=\"line\"><span class=\"comment\">#允许系统打开的端口范围</span></span><br><span class=\"line\">net.ipv4.ip_local_port_range = 1024    65000</span><br><span class=\"line\"><span class=\"comment\"># 确保无人能修改路由表</span></span><br><span class=\"line\">net.ipv4.conf.all.accept_redirects = 0</span><br><span class=\"line\">net.ipv4.conf.default.accept_redirects = 0</span><br><span class=\"line\">net.ipv4.conf.all.secure_redirects = 0</span><br><span class=\"line\">net.ipv4.conf.default.secure_redirects = 0</span><br><span class=\"line\">EOF</span><br><span class=\"line\">/sbin/sysctl -p</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">init_vim</span></span>()&#123;</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  初始化vim 配置  ############# \\033[0m&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ !$(rpm -q vim-common) ];<span class=\"keyword\">then</span></span><br><span class=\"line\">yum install vim -y</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;alias vi=vim&#x27;</span> &gt;&gt; /etc/profile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;stty erase ^H&#x27;</span> &gt;&gt; /etc/profile</span><br><span class=\"line\">cat &gt;&gt; /root/.vimrc &lt;&lt; EOF</span><br><span class=\"line\"><span class=\"built_in\">set</span> tabstop=4</span><br><span class=\"line\"><span class=\"built_in\">set</span> shiftwidth=4</span><br><span class=\"line\"><span class=\"built_in\">set</span> expandtab</span><br><span class=\"line\">syntax on</span><br><span class=\"line\"><span class=\"string\">&quot;set number</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">function other()&#123;</span></span><br><span class=\"line\"><span class=\"string\">yum groupinstall Development tools -y &gt;/dev/null 2&gt;&amp;1</span></span><br><span class=\"line\"><span class=\"string\">yum install -y vim wget lrzsz telnet traceroute iotop tree &gt;/dev/null 2&gt;&amp;1</span></span><br><span class=\"line\"><span class=\"string\">yum install -y ncftp axel git zlib-devel openssl-devel unzip xz libxslt-devel libxml2-devel libcurl-devel &gt;/dev/null 2&gt;&amp;1</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">function history()&#123;</span></span><br><span class=\"line\"><span class=\"string\">if ! grep &quot;</span>HISTTIMEFORMAT<span class=\"string\">&quot; /etc/profile &gt;/dev/null 2&gt;&amp;1</span></span><br><span class=\"line\"><span class=\"string\">then echo &#x27;</span></span><br><span class=\"line\"><span class=\"string\">UserIP=<span class=\"subst\">$(who -u am i | cut -d<span class=\"string\">&quot;(&quot;</span>  -f 2 | sed -e <span class=\"string\">&quot;s/[()]//g&quot;</span>)</span></span></span><br><span class=\"line\"><span class=\"string\">export HISTTIMEFORMAT=&quot;</span>[%F %T] [`whoami`] [<span class=\"variable\">$&#123;UserIP&#125;</span>] <span class=\"string\">&quot; &#x27; &gt;&gt; /etc/profile;</span></span><br><span class=\"line\"><span class=\"string\">fi</span></span><br><span class=\"line\"><span class=\"string\">#echo &quot;</span>[<span class=\"built_in\">history</span> 优化] ==&gt; OK<span class=\"string\">&quot;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">platform=<span class=\"subst\">$(uname -i)</span></span></span><br><span class=\"line\"><span class=\"string\">if [ <span class=\"variable\">$&#123;platform&#125;</span> != &quot;</span>x86_64<span class=\"string\">&quot; ];then</span></span><br><span class=\"line\"><span class=\"string\">echo &quot;</span>这个脚本只能优化 64位系统<span class=\"string\">&quot;</span></span><br><span class=\"line\"><span class=\"string\">exit 1</span></span><br><span class=\"line\"><span class=\"string\">fi</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">init_yum</span></span><br><span class=\"line\"><span class=\"string\">init_ntp</span></span><br><span class=\"line\"><span class=\"string\">init_selinux</span></span><br><span class=\"line\"><span class=\"string\">ulimits</span></span><br><span class=\"line\"><span class=\"string\">other</span></span><br><span class=\"line\"><span class=\"string\">history</span></span><br><span class=\"line\"><span class=\"string\">init_vim</span></span><br><span class=\"line\"><span class=\"string\">init_sysctl</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">cat &lt;&lt; EOF</span></span><br><span class=\"line\"><span class=\"string\">+-------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"string\">|                优 化 已 完 成             |</span></span><br><span class=\"line\"><span class=\"string\">|             5s 后 重启 这台服务器 !       |</span></span><br><span class=\"line\"><span class=\"string\">+-------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">sleep 5</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">reboot</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>jdk 环境变量</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;etc&#x2F;profile.d&#x2F;jdk.sh</span><br><span class=\"line\"></span><br><span class=\"line\">JAVA_HOME&#x3D;&#x2F;opt&#x2F;jdk1.8.0_221</span><br><span class=\"line\">CLASSPATH&#x3D;$&#123;JAVA_HOME&#125;&#x2F;lib&#x2F;</span><br><span class=\"line\">PATH&#x3D;$PATH:$&#123;JAVA_HOME&#125;&#x2F;bin</span><br><span class=\"line\">export PATH JAVA_HOME CLASSPAT</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">set</span> -e</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">init_yum</span></span>()&#123;</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  初始化yum 源 ############# \\033[0m&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /etc/yum.repos.d/</span><br><span class=\"line\">[[ ! -d repo ]] &amp;&amp; mkdir -p repo || <span class=\"built_in\">echo</span> <span class=\"string\">&quot;已存在&quot;</span></span><br><span class=\"line\">\\mv -f Cent* repo</span><br><span class=\"line\"><span class=\"comment\"># aliyun</span></span><br><span class=\"line\">curl -s -O  http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class=\"line\"><span class=\"comment\"># 163</span></span><br><span class=\"line\">curl -s -O http://mirrors.163.com/.<span class=\"built_in\">help</span>/CentOS7-Base-163.repo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装epel源</span></span><br><span class=\"line\">yum install -y epel-release</span><br><span class=\"line\"><span class=\"comment\"># 安装aliyun epel源</span></span><br><span class=\"line\">curl -o /etc/yum.repos.d/epel-7.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 清除系统所有的yum缓存</span></span><br><span class=\"line\">yum clean all</span><br><span class=\"line\"><span class=\"comment\"># 生成yum缓存</span></span><br><span class=\"line\">yum makecache</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看系统可用的yum源和所有的yum源</span></span><br><span class=\"line\">yum repolist enabled</span><br><span class=\"line\"><span class=\"built_in\">cd</span> -</span><br><span class=\"line\"></span><br><span class=\"line\">sleep 1</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  初始化yum 源 完成 ############# \\033[0m&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">init_ntp</span></span>()&#123;</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  时间同步  ############# \\033[0m&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ !$(rpm -qa | grep ntp-) ];<span class=\"keyword\">then</span></span><br><span class=\"line\">yum install ntp -y</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">cat &gt;/etc/ntp.conf&lt;&lt;EOF</span><br><span class=\"line\">driftfile /var/lib/ntp/drift</span><br><span class=\"line\">restrict default nomodify notrap nopeer noquery</span><br><span class=\"line\">restrict 127.0.0.1 </span><br><span class=\"line\">restrict ::1</span><br><span class=\"line\">server cn.ntp.org.cn iburst</span><br><span class=\"line\">server ntp.aliyun.com iburst</span><br><span class=\"line\">includefile /etc/ntp/crypto/pw</span><br><span class=\"line\">keys /etc/ntp/keys</span><br><span class=\"line\"><span class=\"built_in\">disable</span> monitor</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">systemctl start ntpd</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> ntpd</span><br><span class=\"line\">systemctl status ntpd</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">ulimits</span></span>()&#123;</span><br><span class=\"line\">cat &gt; /etc/security/limits.conf &lt;&lt;EOF</span><br><span class=\"line\">* soft noproc 20480</span><br><span class=\"line\">* hard noproc 20480</span><br><span class=\"line\">root soft nofile 65536</span><br><span class=\"line\">root hard nofile 65536</span><br><span class=\"line\">* soft nofile 65536</span><br><span class=\"line\">* hard nofile 65536</span><br><span class=\"line\">EOF</span><br><span class=\"line\"><span class=\"built_in\">ulimit</span> -n 65536</span><br><span class=\"line\"><span class=\"built_in\">ulimit</span> -u 20480</span><br><span class=\"line\"><span class=\"comment\">#echo &quot;[ulimits 配置] ==&gt; OK&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">init_selinux</span></span>()&#123;</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m 禁用SELinux / 关闭防火墙  ############# \\033[0m&quot;</span></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;/SELINUX/s/enforcing/disabled/&#x27;</span> /etc/selinux/config</span><br><span class=\"line\">setenforce 0</span><br><span class=\"line\"></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;s/^GSSAPIAuthentication yes$/GSSAPIAuthentication no/&#x27;</span> /etc/ssh/sshd_config</span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;s/#UseDNS yes/UseDNS no/&#x27;</span> /etc/ssh/sshd_config</span><br><span class=\"line\"></span><br><span class=\"line\">yum install -y openssl openssh bash</span><br><span class=\"line\"></span><br><span class=\"line\">systemctl  restart sshd.service</span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld.service</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">init_sysctl</span></span>()&#123;</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  内核参数优化  ############# \\033[0m&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">cat &gt;&gt; /etc/sysctl.conf &lt;&lt; EOF</span><br><span class=\"line\"><span class=\"comment\">#CTCDN系统优化参数</span></span><br><span class=\"line\"><span class=\"comment\">#关闭ipv6</span></span><br><span class=\"line\">net.ipv6.conf.all.disable_ipv6 = 1</span><br><span class=\"line\">net.ipv6.conf.default.disable_ipv6 = 1</span><br><span class=\"line\"><span class=\"comment\">#决定检查过期多久邻居条目</span></span><br><span class=\"line\">net.ipv4.neigh.default.gc_stale_time=120</span><br><span class=\"line\"><span class=\"comment\">#使用arp_announce / arp_ignore解决ARP映射问题</span></span><br><span class=\"line\">net.ipv4.conf.default.arp_announce = 2</span><br><span class=\"line\">net.ipv4.conf.all.arp_announce=2</span><br><span class=\"line\">net.ipv4.conf.lo.arp_announce=2</span><br><span class=\"line\"><span class=\"comment\"># 避免放大攻击</span></span><br><span class=\"line\">net.ipv4.icmp_echo_ignore_broadcasts = 1</span><br><span class=\"line\"><span class=\"comment\"># 开启恶意icmp错误消息保护</span></span><br><span class=\"line\">net.ipv4.icmp_ignore_bogus_error_responses = 1</span><br><span class=\"line\"><span class=\"comment\">#关闭路由转发</span></span><br><span class=\"line\">net.ipv4.ip_forward = 0</span><br><span class=\"line\">net.ipv4.conf.all.send_redirects = 0</span><br><span class=\"line\">net.ipv4.conf.default.send_redirects = 0</span><br><span class=\"line\"><span class=\"comment\">#开启反向路径过滤</span></span><br><span class=\"line\">net.ipv4.conf.all.rp_filter = 1</span><br><span class=\"line\">net.ipv4.conf.default.rp_filter = 1</span><br><span class=\"line\"><span class=\"comment\">#处理无源路由的包</span></span><br><span class=\"line\">net.ipv4.conf.all.accept_source_route = 0</span><br><span class=\"line\">net.ipv4.conf.default.accept_source_route = 0</span><br><span class=\"line\"><span class=\"comment\">#关闭sysrq功能</span></span><br><span class=\"line\">kernel.sysrq = 0</span><br><span class=\"line\"><span class=\"comment\">#core文件名中添加pid作为扩展名</span></span><br><span class=\"line\">kernel.core_uses_pid = 1</span><br><span class=\"line\"><span class=\"comment\"># 开启SYN洪水攻击保护</span></span><br><span class=\"line\">net.ipv4.tcp_syncookies = 1</span><br><span class=\"line\"><span class=\"comment\">#修改消息队列长度</span></span><br><span class=\"line\">kernel.msgmnb = 65536</span><br><span class=\"line\">kernel.msgmax = 65536</span><br><span class=\"line\"><span class=\"comment\">#设置最大内存共享段大小bytes</span></span><br><span class=\"line\">kernel.shmmax = 68719476736</span><br><span class=\"line\">kernel.shmall = 4294967296</span><br><span class=\"line\"><span class=\"comment\">#timewait的数量，默认180000</span></span><br><span class=\"line\">net.ipv4.tcp_max_tw_buckets = 6000</span><br><span class=\"line\">net.ipv4.tcp_sack = 1</span><br><span class=\"line\">net.ipv4.tcp_window_scaling = 1</span><br><span class=\"line\">net.ipv4.tcp_rmem = 4096        87380   4194304</span><br><span class=\"line\">net.ipv4.tcp_wmem = 4096        16384   4194304</span><br><span class=\"line\">net.core.wmem_default = 8388608</span><br><span class=\"line\">net.core.rmem_default = 8388608</span><br><span class=\"line\">net.core.rmem_max = 16777216</span><br><span class=\"line\">net.core.wmem_max = 16777216</span><br><span class=\"line\"><span class=\"comment\">#每个网络接口接收数据包的速率比内核处理这些包的速率快时，允许送到队列的数据包的最大数目</span></span><br><span class=\"line\">net.core.netdev_max_backlog = 262144</span><br><span class=\"line\"><span class=\"comment\">#限制仅仅是为了防止简单的DoS 攻击</span></span><br><span class=\"line\">net.ipv4.tcp_max_orphans = 3276800</span><br><span class=\"line\"><span class=\"comment\">#未收到客户端确认信息的连接请求的最大值</span></span><br><span class=\"line\">net.ipv4.tcp_max_syn_backlog = 262144</span><br><span class=\"line\">net.ipv4.tcp_timestamps = 0</span><br><span class=\"line\"><span class=\"comment\">#内核放弃建立连接之前发送SYNACK 包的数量</span></span><br><span class=\"line\">net.ipv4.tcp_synack_retries = 1</span><br><span class=\"line\"><span class=\"comment\">#内核放弃建立连接之前发送SYN 包的数量</span></span><br><span class=\"line\">net.ipv4.tcp_syn_retries = 1</span><br><span class=\"line\"><span class=\"comment\">#启用timewait 快速回收</span></span><br><span class=\"line\">net.ipv4.tcp_tw_recycle = 1</span><br><span class=\"line\"><span class=\"comment\">#开启重用。允许将TIME-WAIT sockets 重新用于新的TCP 连接</span></span><br><span class=\"line\">net.ipv4.tcp_tw_reuse = 1</span><br><span class=\"line\">net.ipv4.tcp_mem = 94500000 915000000 927000000</span><br><span class=\"line\">net.ipv4.tcp_fin_timeout = 1</span><br><span class=\"line\"><span class=\"comment\">#当keepalive 起用的时候，TCP 发送keepalive 消息的频度。缺省是2 小时</span></span><br><span class=\"line\">net.ipv4.tcp_keepalive_time = 1800</span><br><span class=\"line\">net.ipv4.tcp_keepalive_probes = 3</span><br><span class=\"line\">net.ipv4.tcp_keepalive_intvl = 15</span><br><span class=\"line\"><span class=\"comment\">#允许系统打开的端口范围</span></span><br><span class=\"line\">net.ipv4.ip_local_port_range = 1024    65000</span><br><span class=\"line\"><span class=\"comment\"># 确保无人能修改路由表</span></span><br><span class=\"line\">net.ipv4.conf.all.accept_redirects = 0</span><br><span class=\"line\">net.ipv4.conf.default.accept_redirects = 0</span><br><span class=\"line\">net.ipv4.conf.all.secure_redirects = 0</span><br><span class=\"line\">net.ipv4.conf.default.secure_redirects = 0</span><br><span class=\"line\">EOF</span><br><span class=\"line\">/sbin/sysctl -p</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">init_vim</span></span>()&#123;</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  初始化vim 配置  ############# \\033[0m&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ !$(rpm -q vim-common) ];<span class=\"keyword\">then</span></span><br><span class=\"line\">yum install vim -y</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;alias vi=vim&#x27;</span> &gt;&gt; /etc/profile</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;stty erase ^H&#x27;</span> &gt;&gt; /etc/profile</span><br><span class=\"line\">cat &gt;&gt; /root/.vimrc &lt;&lt; EOF</span><br><span class=\"line\"><span class=\"built_in\">set</span> tabstop=4</span><br><span class=\"line\"><span class=\"built_in\">set</span> shiftwidth=4</span><br><span class=\"line\"><span class=\"built_in\">set</span> expandtab</span><br><span class=\"line\">syntax on</span><br><span class=\"line\"><span class=\"string\">&quot;set number</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">function other()&#123;</span></span><br><span class=\"line\"><span class=\"string\">yum groupinstall Development tools -y &gt;/dev/null 2&gt;&amp;1</span></span><br><span class=\"line\"><span class=\"string\">yum install -y vim wget lrzsz telnet traceroute iotop tree &gt;/dev/null 2&gt;&amp;1</span></span><br><span class=\"line\"><span class=\"string\">yum install -y ncftp axel git zlib-devel openssl-devel unzip xz libxslt-devel libxml2-devel libcurl-devel &gt;/dev/null 2&gt;&amp;1</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">function history()&#123;</span></span><br><span class=\"line\"><span class=\"string\">if ! grep &quot;</span>HISTTIMEFORMAT<span class=\"string\">&quot; /etc/profile &gt;/dev/null 2&gt;&amp;1</span></span><br><span class=\"line\"><span class=\"string\">then echo &#x27;</span></span><br><span class=\"line\"><span class=\"string\">UserIP=<span class=\"subst\">$(who -u am i | cut -d<span class=\"string\">&quot;(&quot;</span>  -f 2 | sed -e <span class=\"string\">&quot;s/[()]//g&quot;</span>)</span></span></span><br><span class=\"line\"><span class=\"string\">export HISTTIMEFORMAT=&quot;</span>[%F %T] [`whoami`] [<span class=\"variable\">$&#123;UserIP&#125;</span>] <span class=\"string\">&quot; &#x27; &gt;&gt; /etc/profile;</span></span><br><span class=\"line\"><span class=\"string\">fi</span></span><br><span class=\"line\"><span class=\"string\">#echo &quot;</span>[<span class=\"built_in\">history</span> 优化] ==&gt; OK<span class=\"string\">&quot;</span></span><br><span class=\"line\"><span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">platform=<span class=\"subst\">$(uname -i)</span></span></span><br><span class=\"line\"><span class=\"string\">if [ <span class=\"variable\">$&#123;platform&#125;</span> != &quot;</span>x86_64<span class=\"string\">&quot; ];then</span></span><br><span class=\"line\"><span class=\"string\">echo &quot;</span>这个脚本只能优化 64位系统<span class=\"string\">&quot;</span></span><br><span class=\"line\"><span class=\"string\">exit 1</span></span><br><span class=\"line\"><span class=\"string\">fi</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">init_yum</span></span><br><span class=\"line\"><span class=\"string\">init_ntp</span></span><br><span class=\"line\"><span class=\"string\">init_selinux</span></span><br><span class=\"line\"><span class=\"string\">ulimits</span></span><br><span class=\"line\"><span class=\"string\">other</span></span><br><span class=\"line\"><span class=\"string\">history</span></span><br><span class=\"line\"><span class=\"string\">init_vim</span></span><br><span class=\"line\"><span class=\"string\">init_sysctl</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">cat &lt;&lt; EOF</span></span><br><span class=\"line\"><span class=\"string\">+-------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"string\">|                优 化 已 完 成             |</span></span><br><span class=\"line\"><span class=\"string\">|             5s 后 重启 这台服务器 !       |</span></span><br><span class=\"line\"><span class=\"string\">+-------------------------------------------------+</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">sleep 5</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">reboot</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>jdk 环境变量</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;etc&#x2F;profile.d&#x2F;jdk.sh</span><br><span class=\"line\"></span><br><span class=\"line\">JAVA_HOME&#x3D;&#x2F;opt&#x2F;jdk1.8.0_221</span><br><span class=\"line\">CLASSPATH&#x3D;$&#123;JAVA_HOME&#125;&#x2F;lib&#x2F;</span><br><span class=\"line\">PATH&#x3D;$PATH:$&#123;JAVA_HOME&#125;&#x2F;bin</span><br><span class=\"line\">export PATH JAVA_HOME CLASSPAT</span><br></pre></td></tr></table></figure>\n\n"},{"title":"MVC 概要与环境配置","date":"2019-12-13T06:00:00.000Z","_content":"\n\n\n[TOC]\n\n\n\n## 一、MVC 概要\n\nMVC 是模型(Model)、视图(View)、控制器(Controller)的简写、是一张软件设计的规范，用一种将业务逻辑、数据、显示分离的方法组织代码，MVC主要作用是降低了视图与业务逻辑间的双向耦合。MVC 不是一种设计模式，MVC 是一种架构模式。当然不同的MVC 存在差异。\n\n![image][mvc]\n\n\n\n\n\n## 二、Spring MVC 介绍\n\nSpring MVC是Spring Framework的一部分，是基于Java实现MVC的轻量级Web框架。Spring MVC的特点：\n\n1、 轻量\n2、 高效\n3、 与Spring兼容性好\n4、 功能强大\n  RESTful、数据验证、格式化、绑定机制、本地化、主题等\n5、 简洁灵活\n\n\n\nSpring的web框架围绕DispatcherServlet设计。 DispatcherServlet的作用是将请求分发到不同的处理器。从Spring 2.5开始，使用Java 5或者以上版本的用户可以采用基于注解的controller声明方式。官网上说Spring的web模块提供了大量独特的功能，包括:\n**清晰的角色划分**：控制器（controller）、验证器（validator）、 命令对象（command object）、表单对象（form object）、模型对象（model object）、 Servlet分发器（DispatcherServlet）、 处理器映射（handler mapping）、视图解析器（view resolver）等等。 每一个角色都可以由一个专门的对象来实现。\n\n**强大而直接的配置方式**：将框架类和应用程序类都能作为JavaBean配置，支持跨多个context的引用，例如，在web控制器中对业务对象和验证器（validator）的引用。\n\n**可适配、非侵入**：可以根据不同的应用场景，选择合适的控制器子类 （simple型、command型、form型、wizard型、multi-action型或者自定义），而不是从单一控制器 （比如Action/ActionForm）继承。\n\n**可重用的业务代码**：可以使用现有的业务对象作为命令或表单对象，而不需要去扩展某个特定框架的基类。\n\n**可定制的绑定（binding） 和验证（validation）**：比如将类型不匹配作为应用级的验证错误， 这可以保存错误的值。再比如本地化的日期和数字绑定等等。在其他某些框架中，你只能使用字符串表单对象， 需要手动解析它并转换到业务对象。\n\n**可定制的handler mapping和view resolution**：Spring提供从最简单的URL映射， 到复杂的、专用的定制策略。与某些web MVC框架强制开发人员使用单一特定技术相比，Spring显得更加灵活。\n\n**灵活的model转换**：在Springweb框架中，使用基于Map的 键/值对来达到轻易地与各种视图技术的集成。\n\n**可定制的本地化和主题（theme）解析**：支持在JSP中可选择地使用Spring标签库、支持JSTL、支持Velocity（不需要额外的中间层）等等。\n\n**简单而强大的JSP标签库（Spring Tag Library）**：支持包括诸如数据绑定和主题（theme） 之类的许多功能。它提供在标记方面的最大灵活性。\n\n**JSP表单标签库**：在Spring2.0中引入的表单标签库，使得在JSP中编写 表单更加容易。\n\n**Spring Bean的生命周期可以被限制在当前的HTTP Request或者HTTP Session**。 准确的说，这并非Spring MVC框架本身特性，而应归属于Sping MVC使用的WebApplicationContext容器。\n\n\n\n## 三、创建Spring MVC 项目\n\n\n\n\n\n## 图片\n\n[mvc]:data:image/png;base64,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","source":"_posts/SpringMVC一.md","raw":"---\ntitle: MVC 概要与环境配置\ndate: 2019-12-13 14:00:00\ncategories: \n- java\ntags:\n- springMVC\n- java\n---\n\n\n\n[TOC]\n\n\n\n## 一、MVC 概要\n\nMVC 是模型(Model)、视图(View)、控制器(Controller)的简写、是一张软件设计的规范，用一种将业务逻辑、数据、显示分离的方法组织代码，MVC主要作用是降低了视图与业务逻辑间的双向耦合。MVC 不是一种设计模式，MVC 是一种架构模式。当然不同的MVC 存在差异。\n\n![image][mvc]\n\n\n\n\n\n## 二、Spring MVC 介绍\n\nSpring MVC是Spring Framework的一部分，是基于Java实现MVC的轻量级Web框架。Spring MVC的特点：\n\n1、 轻量\n2、 高效\n3、 与Spring兼容性好\n4、 功能强大\n  RESTful、数据验证、格式化、绑定机制、本地化、主题等\n5、 简洁灵活\n\n\n\nSpring的web框架围绕DispatcherServlet设计。 DispatcherServlet的作用是将请求分发到不同的处理器。从Spring 2.5开始，使用Java 5或者以上版本的用户可以采用基于注解的controller声明方式。官网上说Spring的web模块提供了大量独特的功能，包括:\n**清晰的角色划分**：控制器（controller）、验证器（validator）、 命令对象（command object）、表单对象（form object）、模型对象（model object）、 Servlet分发器（DispatcherServlet）、 处理器映射（handler mapping）、视图解析器（view resolver）等等。 每一个角色都可以由一个专门的对象来实现。\n\n**强大而直接的配置方式**：将框架类和应用程序类都能作为JavaBean配置，支持跨多个context的引用，例如，在web控制器中对业务对象和验证器（validator）的引用。\n\n**可适配、非侵入**：可以根据不同的应用场景，选择合适的控制器子类 （simple型、command型、form型、wizard型、multi-action型或者自定义），而不是从单一控制器 （比如Action/ActionForm）继承。\n\n**可重用的业务代码**：可以使用现有的业务对象作为命令或表单对象，而不需要去扩展某个特定框架的基类。\n\n**可定制的绑定（binding） 和验证（validation）**：比如将类型不匹配作为应用级的验证错误， 这可以保存错误的值。再比如本地化的日期和数字绑定等等。在其他某些框架中，你只能使用字符串表单对象， 需要手动解析它并转换到业务对象。\n\n**可定制的handler mapping和view resolution**：Spring提供从最简单的URL映射， 到复杂的、专用的定制策略。与某些web MVC框架强制开发人员使用单一特定技术相比，Spring显得更加灵活。\n\n**灵活的model转换**：在Springweb框架中，使用基于Map的 键/值对来达到轻易地与各种视图技术的集成。\n\n**可定制的本地化和主题（theme）解析**：支持在JSP中可选择地使用Spring标签库、支持JSTL、支持Velocity（不需要额外的中间层）等等。\n\n**简单而强大的JSP标签库（Spring Tag Library）**：支持包括诸如数据绑定和主题（theme） 之类的许多功能。它提供在标记方面的最大灵活性。\n\n**JSP表单标签库**：在Spring2.0中引入的表单标签库，使得在JSP中编写 表单更加容易。\n\n**Spring Bean的生命周期可以被限制在当前的HTTP Request或者HTTP Session**。 准确的说，这并非Spring MVC框架本身特性，而应归属于Sping MVC使用的WebApplicationContext容器。\n\n\n\n## 三、创建Spring MVC 项目\n\n\n\n\n\n## 图片\n\n[mvc]:data:image/png;base64,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","slug":"SpringMVC一","published":1,"updated":"2021-01-27T08:20:35.741Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h1v000aq0us5dvogdh1","content":"<p>[TOC]</p>\n<h2 id=\"一、MVC-概要\"><a href=\"#一、MVC-概要\" class=\"headerlink\" title=\"一、MVC 概要\"></a>一、MVC 概要</h2><p>MVC 是模型(Model)、视图(View)、控制器(Controller)的简写、是一张软件设计的规范，用一种将业务逻辑、数据、显示分离的方法组织代码，MVC主要作用是降低了视图与业务逻辑间的双向耦合。MVC 不是一种设计模式，MVC 是一种架构模式。当然不同的MVC 存在差异。</p>\n<p><img src=\"data:image/png;base64,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\" alt=\"image\"></p>\n<h2 id=\"二、Spring-MVC-介绍\"><a href=\"#二、Spring-MVC-介绍\" class=\"headerlink\" title=\"二、Spring MVC 介绍\"></a>二、Spring MVC 介绍</h2><p>Spring MVC是Spring Framework的一部分，是基于Java实现MVC的轻量级Web框架。Spring MVC的特点：</p>\n<p>1、 轻量<br>2、 高效<br>3、 与Spring兼容性好<br>4、 功能强大<br>  RESTful、数据验证、格式化、绑定机制、本地化、主题等<br>5、 简洁灵活</p>\n<p>Spring的web框架围绕DispatcherServlet设计。 DispatcherServlet的作用是将请求分发到不同的处理器。从Spring 2.5开始，使用Java 5或者以上版本的用户可以采用基于注解的controller声明方式。官网上说Spring的web模块提供了大量独特的功能，包括:<br><strong>清晰的角色划分</strong>：控制器（controller）、验证器（validator）、 命令对象（command object）、表单对象（form object）、模型对象（model object）、 Servlet分发器（DispatcherServlet）、 处理器映射（handler mapping）、视图解析器（view resolver）等等。 每一个角色都可以由一个专门的对象来实现。</p>\n<p><strong>强大而直接的配置方式</strong>：将框架类和应用程序类都能作为JavaBean配置，支持跨多个context的引用，例如，在web控制器中对业务对象和验证器（validator）的引用。</p>\n<p><strong>可适配、非侵入</strong>：可以根据不同的应用场景，选择合适的控制器子类 （simple型、command型、form型、wizard型、multi-action型或者自定义），而不是从单一控制器 （比如Action/ActionForm）继承。</p>\n<p><strong>可重用的业务代码</strong>：可以使用现有的业务对象作为命令或表单对象，而不需要去扩展某个特定框架的基类。</p>\n<p><strong>可定制的绑定（binding） 和验证（validation）</strong>：比如将类型不匹配作为应用级的验证错误， 这可以保存错误的值。再比如本地化的日期和数字绑定等等。在其他某些框架中，你只能使用字符串表单对象， 需要手动解析它并转换到业务对象。</p>\n<p><strong>可定制的handler mapping和view resolution</strong>：Spring提供从最简单的URL映射， 到复杂的、专用的定制策略。与某些web MVC框架强制开发人员使用单一特定技术相比，Spring显得更加灵活。</p>\n<p><strong>灵活的model转换</strong>：在Springweb框架中，使用基于Map的 键/值对来达到轻易地与各种视图技术的集成。</p>\n<p><strong>可定制的本地化和主题（theme）解析</strong>：支持在JSP中可选择地使用Spring标签库、支持JSTL、支持Velocity（不需要额外的中间层）等等。</p>\n<p><strong>简单而强大的JSP标签库（Spring Tag Library）</strong>：支持包括诸如数据绑定和主题（theme） 之类的许多功能。它提供在标记方面的最大灵活性。</p>\n<p><strong>JSP表单标签库</strong>：在Spring2.0中引入的表单标签库，使得在JSP中编写 表单更加容易。</p>\n<p><strong>Spring Bean的生命周期可以被限制在当前的HTTP Request或者HTTP Session</strong>。 准确的说，这并非Spring MVC框架本身特性，而应归属于Sping MVC使用的WebApplicationContext容器。</p>\n<h2 id=\"三、创建Spring-MVC-项目\"><a href=\"#三、创建Spring-MVC-项目\" class=\"headerlink\" title=\"三、创建Spring MVC 项目\"></a>三、创建Spring MVC 项目</h2><h2 id=\"图片\"><a href=\"#图片\" class=\"headerlink\" title=\"图片\"></a>图片</h2>","site":{"data":{}},"excerpt":"","more":"<p>[TOC]</p>\n<h2 id=\"一、MVC-概要\"><a href=\"#一、MVC-概要\" class=\"headerlink\" title=\"一、MVC 概要\"></a>一、MVC 概要</h2><p>MVC 是模型(Model)、视图(View)、控制器(Controller)的简写、是一张软件设计的规范，用一种将业务逻辑、数据、显示分离的方法组织代码，MVC主要作用是降低了视图与业务逻辑间的双向耦合。MVC 不是一种设计模式，MVC 是一种架构模式。当然不同的MVC 存在差异。</p>\n<p><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAegAAAEFCAMAAAAfVIRiAAABdFBMVEX8/vwEulT8WgQEuvwUwvz////8UgQcwmQGtVL8+fX8SAQKmUj8ilTfSgQEruzMPwSsMgRExnzxUQT0wqyU1rTs/vz7XhTq6Of0spQ0n8X0+PYEcjSs5sRMyoQEiL4ouGBk0pQEbpQGei48yvwctuy0Rgz8mG4EntQkxvwEksQEVnyc3fzs3tRUemS8ckzU9vy46fx0KgzkjmTcXiT81sRksozb9eTcxrx81vzcu6wsxnRc0vysUiwXt1+9u7172aLG7dQkvmzfVQ/kooTa3tWv6sSW4bPkfkzcajRUwnzEflyk4vy35sfsbizE7vy8YjTMnoQMhkS01uzsuqTM8vzH8tfEimzUqpT0rozMVhyEQhyczuRmxon8ZiSK3aeEvpykyuy87tHptJm8loTUkmz8ejxIp96ms7LU1NTcdkTG0szErqSIoZxEhpzX6/Zou9xRpndgyPxsjoSQ1PrU7dw8vmwpolxwcHAUfDjc5rwMTGJ8lkSg1vOlAAAYuklEQVR42uzRMQEAMAjAMJ75t7wXDTSxkOGutwx3iY4QHSE6QnSE6AjREaIjREeIjhAdITpCdIToCNERn/0ydmkYiOLw3Q0v1zvClaQ2kmRwcqpDbVSQiiIOUnAoLlIoHUQUFSkO1T/f5jAX2iHJlh+03wtvDv3yHde96B1hL3pHaCI6Cg+BeLyIGCw3aQ+I9C5uLroTvswFKZwJxO1kwBA5v770JBR6tThoKDp7IIEGKX8CWHV6xfHQetFIdCaE6As0iMwYLuojybnncY/jkL+L/F126kU/BcJBKM96CWXGYE0veS7ZPjCTI+V0WSt6MCJn2S6QTdZ0zIDoSc6hai6K5lInn50a0ffkEioWtb7/jfvdZ4ZDpDnnSDGvx315OnmvFh36JMpfmBBaLr83MrMvBsNCAhbtFU0n39WiT4lECUrRJCwUdD8YCvFKSsyi85E6iapERyMlaGPab3m9i3cJuj8dBkI6BQyae8XSyWuV6IGvtnpuvWXa+Is1i1mrRJE7uTVk0HZ59uyuEv1mbD7lYBRdvEvrojPRP3ai8Yq2rq3pOtGhoe2gEe7e7gQ3w3aP7lCRmocs5wyvaIu7jZ1Uic6M2g4a4e7tpJthzFol/OPWfFvTiMEAft6LnMkWcj5Sb8gE35yvxLFTlIrD7sQ/COJg1LaDDdZtsLKPsC+/50nujKtbXboyb31K9ZJLTuF3v+RJvJoQ4kuPQBfP6J187BDogRJ7Qhcg986YE2jvyMFbNSZYi/OiGk1vh42u/jxHF8dofKUA9fTY0XovGBN+taBG69fDRvdCxm4JXYTVtCXNxHGDPt/XX0MW0mh8cTfaBCuA0fifc64dO97XGNH+8r2IRtN/4DBHW8KF2B9jdh39MuLH/ePVL6h17VLP0UX75credoez7lsTdBH2x+yXMMkYP+ZfqyZ0LlbErNvedO5GF2F/jBVnHc3fC7264oVcR9Nd5zBH7xt91P0xS5sdf3lVFeL9MzrQoAsnNMF2z7ot7offH2NM4Du9Hmxv77gCGB21aNS2oP9ewYcW2iXr/rXRjLgI8SDzNZtfTlYC942vk5Td2dJ+m0IYrcOC/vsYBg/ps+MczfaNJv1E92mSJCspDtt9wFNWQy3eKpjjJ94Ale9oj2FL8mVhHiZC0M46NhrDrA8ibjSC0vTFyaz0gEI7Zd0U+0aLVVUPWrydyEMrawY1YHfNud3I804VJHi9jjTo71hB099jMDp44XknlazQpIdIAw9rhscyetfj7RGbc+RsYiIPGF2rtntd+L3vGWiZcA0a48+MLsCPGrdAu+k2JbhZpw943Bh6GAj63xtdVYz9ymi20pTrkZZa3W00S7DNUjL/gNHSGG0u9tiNJhBk8bm1+0UpmPb7H44xR1PW/cs5Ggb0VMJmNBq9qXuRApM4g8jTJMHyMlZogEuFNb4AU+9vO1CPn41m5hw19fWxafm4jDYgTrCfKZPL0zKKlxOysGyNfXcQ2sHo/axbUNrUfhcqqdToYqOQYG3eqr5N5gB6XL9MoNvqXScrRFpLqh5ynExWUGtdLlKsn4PPsMPb09YcRG0L+mluNKySt9UJnWNsdTlJu5fV6wXsG+3/t0YbEOfYb6zLMzNmVz7Mhln6PT0/nzYDOprNTGUjew/Gs3Hg4PP9d8aM0JsQ8AhAKQAxj7IOXWz0niM3TsUIYaGnJiI5wZc2DfldueqZ6t5CMtZtE2iRGc1w5zi7GPiA7dqcY0MJtR2ji7GOvm/WbSIbu6ncxyyMFM/KwdTT8aJiGk21/6aNvikaJQeh77/X3eVILJS6khHuFrfPjQJb2fGUL+RkeyrOD+vrOef58QKM0WE+R0PVXkzQPaWbtq/g0czROYttlt3Agw9Yj7zP9IxNJ+r0EmjAL7Au8AhwPp3/E6PZik7FsM2PunWasi9O6e1UikVdk/lGlr9R3dM2lQZfN6EB/ZW3Y111oVtU1c9zNCSE+NMnanKhDPX6AM+DX3ij3YS2efeYGFrQlIKPh0NyGZfVH2lYp8psoMe35y5C33+vm80NAz9PvZ5xJPouDNeRdnhBun4LwxFHmkqqDpkaxsrI3XkXx589aoAtiOaNrGnQwhidRnr+D+MeXuxKDgj7CPuken39qIwuZSgDZNkvWdAn9FYulc90ddMA1qP51BQbLj7ff68bEq3qNg0GQhMqAEUAl4pAn4YqVVUarxksCCCe1qA/hVLqE6M4BbXEms/KDN0GtFpQo/iqe/UGQa8VDd2dUILEzyr8zpiD0TbvxnyLJM2G7DNTnFYalQa5HJQqVNQ3gVZ7+kdrbXejf/HEgUi00dtHeroI9oJGcnHDNTdOPMGXbxFSDGJO+CX4gkCPlM9SFHmgczm6J66VScYg4QSaWtc5/apP3Qh0O0x9E49tji6da2oNerVGj72dMMn5CbUh1BUayc8cPsJ1jt4dwNmNPsVy0itOghtudAcgPSxj0YAGDZrKGnRKHbiZc5lBvDtHK2rEuU7BqNhD0DFkX6Do62hHofOU+iOR/C1os/ZqoPTYbkq6jx2Eds26KWzWrXPobRZ8Q6CpJTOIu3UzspPRUQ5asgw0MLYyBuvNzz3Qn+niWQxiOSDQ4lEZvcMj8GgaPqGcOx+6yxr0dKxjVsly8tkUbW7i6Qpp7ebz/Y2WkUGnq5kwnPRGCqLaqG5mtB26d42WZuiuxrAdDFKTjNmhu/NOxSqOVSjT6v9ktIvQNu8+o/SqnBl9XjZgbROdnPXxP2ig+c/x2EFohzl632hDrL2WgjFYXV8q5BRdScbktUmnjOEadH07dDOm5+grMBsu9TV1mHA6la2jbTJ2gYRBYrBUG52nhI9hZ8ziyPe7iXW2422OzALa/j49zdoMTUI2021djT6cde8bDeSsFyXd1fyScx4S38ECUsLWDuXiZ6OZRqduVjKfo2GSdUiwZRTL7o7RUrYpE5cgce80AbjbaLuOnp65ojmO0TZs3k3z9HaOLptJuj9uNsfnXoWu2cj4lp9nmTfFoc9wz7r3jWZyw+k0xyBpr+pUiDjXSgKBzo2OEHTKddu2AQ352M95RCc2sUx3f72SS33pNm18DhT82Rx9VimXXUkfw+h9IuceRWBBm/c8mlRf0YcNyt3yvbQgcPDZ4QmT20Kpz7bRJ6WS+rYQA6ywlGfdHtqoR3RSVw/dtHMql1xXYbyJBa3PrNEgLzwdnJJB2fsDo/vNcvlJue8dIRyz7ttEMnb9QJeGeuimQ8KvTxh7qXhC9Z5ZcVM4+OzwhMltoUCtBxG1iAajUGLpK6dCr4MFlqKMG+UzQP49hARXtDnKT8OEa2ik9HpAHept6uDLqsffhLR1Gq0lA7Ukmz0enY6kvNArsTuN/vAKMVfcOR/b6JL5p8iwm6PsJ6rprKmLwW4bCnMZB58dnjDZEwqkGnUwRqECAhevlxsshAA+gu2sY13b6cSSKhSeXcdSrjsjLLOdDrHtALBejpRuHq87G7q2BEjpGnYj9vbOGN7gr1Hn4UfveGFBOwltgNmifdv3/heVDj67PGGyLxQga/WDvTN4jRoIo/h4iRPHsmm26yFJWSnsrQpK9SAWbRFBESQKgvVQBA8qPXiw6J9vvgzu2+aNSWY76GD3ZeebzDeTXdjHL5nNZjeTrWPbbBuT47wdIxNmyUothtvePLftVondQJp2oBicT3Lb/t2Zt6+SA+ikS/THXW201tv/XIdmLZ4loLOzgibb7Af02CtMmGhp5HlDJ67lBG7tus0tXUnwZZdNJTZnk3RdWC59VrxDwTH6RFuZCB7aC2hp4AdS8B5toIsk0UyL2/2xV5gw0cktpGxcKbAPrmAMMryhjRjeWWGin55r0yxH86Oj+fz6fP7PohjtAzQ8QQtW81i20y23+eudGWMG0cEjYRcKelCQscHWNEWgWXcl/5t8Xik1mxVq1oRiVtjV4i/GMbNuB9DLGkRLhOVYwxa+QEt+eNaNNxiGd1jmDiSwRo6SzeR3Mky0TN2fHBqtb0c/63b/Rh0G8/5ZHijo8TxEexDt/vGsi2ieHjPAGOi2Gs1hopXo+67W5noEn6PHH6DhXNdK9JLV2MQX6LHHaOYUHjLRjB4D7CQ68Se6UK2qc62fqXAKTzT5wZMwpEG4m2hPnj2u6x7iFJaw4cgzqey9P9FWVaUCKjzRPUCvUmqrbiSiPXkeQ3THBTjkINpN3tjpGAE9RHSEFwd68Iw07GCUyXXUY4H2OdfNnIp6iUYT2b7pWIdnAt9J9FZsX1N68cxE03zclksRPfJcd36BLBg2imjI4ap7Ko6IV+0jeqYikRjtxzMDTR+wCWh/osed695vjAZRxLOTaG79kehOEljzxM9JdJ49VrHolIj25hlDiGiM8SIaMuVZn9HF6xtknNSBiEaSj9MMNBO9lf1QsejrTwNU1+KZ/KIP0Z5EYxn8v251N7tBxkkdhmjksIJ6xVIn0bLnjucf+Ge1uSa6JM8MNMasT/R1vVcWvUbvZzne3+BEIxDRzDMTnWcnEd0Q6bTURHRQntcnWoC+o3qNTl9OthIYEJroJZtENB2gaRcuQEd1l5zaGCfQl+bZxvWJlqkY3SWHkF6I062S0ETDWyaagCbHk0lEUzHRTmn0IND+PIuGge61X9flmRowOp2K0x2awhIN69hy5hmXuNw7+ayi0uleTd9gEdBr8Iza80w3eL5TkNGkt4tskicdR4ITnTiIJnex5MeLLLY7Fir1oAbUxBinXUDTOTGIeR51fZE2ZXlWjLrb7Jcsa7COSZNFlr2LzmelKlOWtTFG2wIhh7xG3RlEQaMHa1xcqsuyHrjbLDS9/36RhdBiEeZ5Hr/+FKHNSqXFzre63ivLsi2rkjbyNoG6M6gJdfs8yxQ2xRNxYdX1tx2fO8Kn+wfTt9PLSv7behpABwdpNF9mkB5+r6o3zyvRh4th55UttmkTEppKUliXoPWj1SY2R1ICiuTpJauPD5XyMrpZxiltFzTtwybTmzeS1LlNr1IaEa/N9vcrEmx1Idga/W3EJlhvitbb0lwOk0qKEmHblbIMeEmJHkaHU2N01B5FJG12VQBtjI5dWm+MvhLS+oVSG6P/fx1udt1XQ1pvK7Ux+v/X5hh9RbSZdV8RbXbdv9ixAxoAYBiGYQCGafxpFYhjDu+jIZpuxF8vmtCLRnQwQVTdiKob0R+N6NaNaLoRVTei6kY03YiqG1F1I5puRNWNqLoRTTei6kZU3YimG1F1I6puRNONqLoRVTei6UZU3YiqG9F0I8ZuHcgAAAAACPO3DqQfouW6J1z3hHRPuO4J1z0h3ROue8J1T0j3hOuecN0T0j3huidc94R0T7juCdc9Id0TrnvCdU9I94TrnnDdE9I94bonXPeEdE+47gnXPSHdE657wnVPSPeE655w3RPSPeG6J1z3hHRPuO4J1z0h3ROue8J1T0j3hOuecN0T0j3huidc94R0T7juCdc9Id0TrnvCdU9I94TrnnDdE9I94bonXPeEdMfOub04DURhPJqwNq0UROJq0VqJuNkNkoCyBII3UF8W+7D0QfD64AXEC17wwb/eOXMmOfGcoVIdaYJz0kwyk9kt9NfvnC/T7v4n4V13G+Xnz1enPdrefDqeeddNoJ1hDqMw6lOE070LT2Kfup2Cjj+HmnLYr5jufzj0rtsh6NkbgznqzwYNkP7oXbc70IZzr0jDQ5Gef4h96nYF+ngaQpiXtzc7kr7yxbtuR6B3pwiZmn4c4aEc2cHMu243oI/3Wj1vHW5zpG1v/j72qdsJ6AtTwznql6abKn195l23E9D7WKKJsmq3fqT33f7BO++6XYHuvsBbV3KL2OTug3c+dbsAfV+BRjH1qk43BwX6rXfdLkCXGjTpuUeJ2yj6tnfdzhQd0SPafgKPaEAr2qduF6CP96e/vr5hDxI47NCgor3rdlqjYSfk20/csKGivet2VKNJTOxOetuO2yjap253iibALINu0XFD37tupzVaOm482VripoN33a5rNLHm1nt7jhsV/dKnblc1mr+80G7LgeNuBrzrdl6jbWp24MBD63j4u8RNAwDau253NVqwJi3/naJZ8cdHmoW/d9zYetftVNHkwKCxsOmeUp8Ea8ccVqukzFgBCLMyKWqY8DvHHZka7V23y7XuiBjyF5yYVOXRskpbLGm+LI9SQ9yWiI/UE6Q8V6RqMLc5ezbi17pdK5peY8YKGyKeBToa0qnuFZ03CUvECJopXf9YJZ8okpbQL5j8w/toUrRIxAjayBExQkR2L2cUnaQhI50m8CvMELXSccOJd91/Bzp+fJ7dR9s9Lw2RorWGodYmCqMBbSbTD2CgomkAjiZ1y2+0yGdnNfrBncS77g3j/Hj8+izVaP7RVXejIQ16hexUtzY981NZWtdp1v4O1Yu6ioarJnUnmLqJNR0EcVL03UujycKn7g1j99x4vHN6l+6jecaUmdsoGkRa6v5KnZSqh7OqQos9N5hLRXNV50EwS0Por/TVKiQzJp7HagUb0MliNJqcuOhd96YRn95RqK/FMdZofhdrB58BIsU2gUvQqRX2mQZbBCaWOscn2EkQdJQ3V3Oj6FxUCPs6ewP64a3RZHTm23/sunfjPwn4sbPPdnbGz84qRa+5i226pOiqBsCqWymOWaPoAqgutWyP1Ex9ksyMR8ckn1dAPzOuW9YI+XZra/TFe6PR6NbzIElmsz96JINP3eM/j5M7KsbjRx+molqSnttRUnSUIMwCUvgSQAN06CDRAFEmtcrfAdZoNbWAX5nArK7rFnWZ6xpAv1iMJmpTMcF9wxb2Yafua+O/CyR94wK9sLphD3YfXYWAL9MwU33eLoyogH6teX8NwZfr8agpyksNPMUukeUn7RHN2PcRxqTZN2txH7Si42sYp9W2aaPiNXA+94q5blIX15xRtMaYA9IZoIM2A8nqGSleM9zRdWu9r5blsixUl1y3rMtmxJxjR33x4OLliUJ16s7i6WIB+4Yt7vCX1kMFreOP7dj5ZztgvD+i6242IszQt6lbC3SZ6fxrFJ3BCEzE+qsTeoigwYzlQSdI0cwRiNUTWhk7XECNvhP0Kn4B3d84+0zl7tc343YJNCSqRJjQU+pGnWKONjU6SxC0gYigaQkUFJ0UOpKKu25b8pDfMLl7BjT9MOhRDAP0TYX53OMYl0ARqVit4CvdRtFguXSssCYb0EUGs3Ks4saYd0DXUQabmkSu27pAwk7blbGLlxXqPpEeBuizcA9NS6DyFebi6qZuMNyIHGs0HExRXiFZc7VG152iJ2+CXLdpKJFIF0grY/Gd0eh50J8YBujg5i77uu/6T54jSt0R6BgiaxWNyVmJFhS8RM0GVVY199EFfl4VRXWZUY0myOJtZv8C/+HdPv1btYGAFl8logeVTTwS+4yUCjabFA0o1VkDNiqDNpLUzJ8VhzFcRddNkBlhtmnQvYyhgT42qVvUZmmEETQMFKbMGjOG8JBrrfGZbm3Ak+9O2X00X6Lh3zLzoP+hook0E1yUV0f4GUWeVxmcVHmVN18+SWbJKs+MP/9aBEmehnhZaTovZsqq5zVYOvgt7D1EG3GnrxL1MoYGmmo0oeUVk8YJQHcEW+WpI+pm2mFTRDCAV2Xxl28zc+pTt0tF26ojQ8ynyDuiNrr97iQaYTx5icbW1+jAeY3miyUMrFCc/ZQrlagRZ8lTJu/uNV+j3dZoqo72DwylkO1jdm1il56AGrbILoyYr9Gua7T1a93sSONsrpwuNporWNMU+Tbzrtu565ZSlCsmcOSnApvM3BI9NWvrtK/R/+o+WgrRjFMrZ0qelsxNB9bw+d2Hd90Qzl03k6L9fkc6sUgC5KP2g7B89vrva7TbGr1GWnZSQo2yaFsvMdbySKfedf8b182kaKVHE/gY9ZjlknPZu0Vipqs+dbu+j7YJkHG3o7AvfrABImphLU/pV/rU7S4OW0XrXd4HS+Y8cdvrOhOqnTU3Ar9M9anbZezOp/LTQklX6Foab9llk9fqGlqpaPzvvr2MoYEO5nu/W8agRpAWE6gr3z5rDDafRN35wf2glzE40G/2p4yvSKn2xC0beQF2Cd+ua2poAv5j9l7G4EAfX9kja7zusyQpZ2sOsFkzdsPGcHYP7JlV5n4f9DMGBzq4oCQtmRApqWu7EJkWWcOmsY2VeFoAnf/oaeYeIOiPV/j/q7H77l/5rFm2tjsxNo1dtmaMaDo/eBv0NIYHOnhyZW/KMHIO1k+hpGjNkSkUO/woXZ0YUZx/tmPGKADCMBT94O7uEnAq6u5BXN27aQcnb283xRShuCQkL1AoP51eaUs3oTe0StFI/RBe2r5O7jstL3r9jHO3ufhzgG+okD3PkIpG0ZiopyG0NTT3yCOeN4WebwLRmCAXlaKxJ8quy8UmP6qqOS4QjE7RwHyk2MkhxvWEaLSKdly046IN46KN4KKN4KKN4KKN8BR9AZ/2sFhYO/P7AAAAAElFTkSuQmCC\" alt=\"image\"></p>\n<h2 id=\"二、Spring-MVC-介绍\"><a href=\"#二、Spring-MVC-介绍\" class=\"headerlink\" title=\"二、Spring MVC 介绍\"></a>二、Spring MVC 介绍</h2><p>Spring MVC是Spring Framework的一部分，是基于Java实现MVC的轻量级Web框架。Spring MVC的特点：</p>\n<p>1、 轻量<br>2、 高效<br>3、 与Spring兼容性好<br>4、 功能强大<br>  RESTful、数据验证、格式化、绑定机制、本地化、主题等<br>5、 简洁灵活</p>\n<p>Spring的web框架围绕DispatcherServlet设计。 DispatcherServlet的作用是将请求分发到不同的处理器。从Spring 2.5开始，使用Java 5或者以上版本的用户可以采用基于注解的controller声明方式。官网上说Spring的web模块提供了大量独特的功能，包括:<br><strong>清晰的角色划分</strong>：控制器（controller）、验证器（validator）、 命令对象（command object）、表单对象（form object）、模型对象（model object）、 Servlet分发器（DispatcherServlet）、 处理器映射（handler mapping）、视图解析器（view resolver）等等。 每一个角色都可以由一个专门的对象来实现。</p>\n<p><strong>强大而直接的配置方式</strong>：将框架类和应用程序类都能作为JavaBean配置，支持跨多个context的引用，例如，在web控制器中对业务对象和验证器（validator）的引用。</p>\n<p><strong>可适配、非侵入</strong>：可以根据不同的应用场景，选择合适的控制器子类 （simple型、command型、form型、wizard型、multi-action型或者自定义），而不是从单一控制器 （比如Action/ActionForm）继承。</p>\n<p><strong>可重用的业务代码</strong>：可以使用现有的业务对象作为命令或表单对象，而不需要去扩展某个特定框架的基类。</p>\n<p><strong>可定制的绑定（binding） 和验证（validation）</strong>：比如将类型不匹配作为应用级的验证错误， 这可以保存错误的值。再比如本地化的日期和数字绑定等等。在其他某些框架中，你只能使用字符串表单对象， 需要手动解析它并转换到业务对象。</p>\n<p><strong>可定制的handler mapping和view resolution</strong>：Spring提供从最简单的URL映射， 到复杂的、专用的定制策略。与某些web MVC框架强制开发人员使用单一特定技术相比，Spring显得更加灵活。</p>\n<p><strong>灵活的model转换</strong>：在Springweb框架中，使用基于Map的 键/值对来达到轻易地与各种视图技术的集成。</p>\n<p><strong>可定制的本地化和主题（theme）解析</strong>：支持在JSP中可选择地使用Spring标签库、支持JSTL、支持Velocity（不需要额外的中间层）等等。</p>\n<p><strong>简单而强大的JSP标签库（Spring Tag Library）</strong>：支持包括诸如数据绑定和主题（theme） 之类的许多功能。它提供在标记方面的最大灵活性。</p>\n<p><strong>JSP表单标签库</strong>：在Spring2.0中引入的表单标签库，使得在JSP中编写 表单更加容易。</p>\n<p><strong>Spring Bean的生命周期可以被限制在当前的HTTP Request或者HTTP Session</strong>。 准确的说，这并非Spring MVC框架本身特性，而应归属于Sping MVC使用的WebApplicationContext容器。</p>\n<h2 id=\"三、创建Spring-MVC-项目\"><a href=\"#三、创建Spring-MVC-项目\" class=\"headerlink\" title=\"三、创建Spring MVC 项目\"></a>三、创建Spring MVC 项目</h2><h2 id=\"图片\"><a href=\"#图片\" class=\"headerlink\" title=\"图片\"></a>图片</h2>"},{"title":"测试文件","date":"2021-01-27T09:11:00.000Z","_content":"  \n  \n摘要: 测试描述\n<!-- more -->\n\n\n## Hello gitee blog \n\n这是一个测试文件\n","source":"_posts/desc.md","raw":"---\ntitle: 测试文件\ndate: 2021-01-27 17:11\ncategories:\n- test\ntags:\n- test\n---\n  \n  \n摘要: 测试描述\n<!-- more -->\n\n\n## Hello gitee blog \n\n这是一个测试文件\n","slug":"desc","published":1,"updated":"2021-01-27T09:30:22.399Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h1w000cq0us9joj5lql","content":"<p>摘要: 测试描述</p>\n<a id=\"more\"></a>\n\n\n<h2 id=\"Hello-gitee-blog\"><a href=\"#Hello-gitee-blog\" class=\"headerlink\" title=\"Hello gitee blog\"></a>Hello gitee blog</h2><p>这是一个测试文件</p>\n","site":{"data":{}},"excerpt":"<p>摘要: 测试描述</p>","more":"<h2 id=\"Hello-gitee-blog\"><a href=\"#Hello-gitee-blog\" class=\"headerlink\" title=\"Hello gitee blog\"></a>Hello gitee blog</h2><p>这是一个测试文件</p>"},{"title":"Flume配置文件说明","date":"2019-12-13T06:00:00.000Z","_content":"\nFlume目录结构\n\n| 文件夹 | 描述                    |\n| ------ | ----------------------- |\n| bin    | 存放了启动脚本          |\n| lib    | 启动所需的所有组件jar包 |\n| conf   | 提供了几个测试配置文件  |\n| docs   | 文档                    |\n\n### Flume Agent组件\n\nFlume内部有一个或者多个Agent,然而对于每一个Agent来说,它就是一共独立的守护进程(JVM),它从客户端哪儿接收收集,或者从其他的 Agent哪儿接收,然后迅速的将获取的数据传给下一个目的节点sink,或者agent\n\n#### Source\n\nsource 负责数据的产生或搜集，一般是对接一些RPC的程序或者是其他的flume节点的sink，从数据发生器接收数据,并将接收的数据以Flume的event格式传递给一个或者多个通道Channel,Flume提供多种数据接收的方式,比如包括avro、thrift、exec、jms、spooling directory、netcat、sequence generator、syslog、http、legacy、自定义\n\n| **类型**           | **描述**                                                  |\n| ------------------ | --------------------------------------------------------- |\n| Avro               | 监听Avro端口并接收Avro Client的流数据                     |\n| Thrift             | 监听Thrift端口并接收Thrift Client的流数据                 |\n| Exec               | 基于Unix的command在标准输出上生产数据                     |\n| JMS                | 从JMS（Java消息服务）采集数据                             |\n| Spooling Directory | 监听指定目录                                              |\n| Twitter 1%         | 通过API持续下载Twitter数据（实验阶段）                    |\n| Kafka              | 采集Kafka topic中的message                                |\n| NetCat             | 监听端口（要求所提供的数据是换行符分隔的文本）            |\n| Sequence Generator | 序列产生器，连续不断产生event，用于测试                   |\n| Syslog             | 采集syslog日志消息，支持单端口TCP、多端口TCP和UDP日志采集 |\n| HTTP               | 接收HTTP POST和GET数据                                    |\n| Stress             | 用于source压力测试                                        |\n| Legacy             | 向下兼容，接收低版本Flume的数据                           |\n| Custom             | 自定义source的接口                                        |\n| Scribe             | 从facebook Scribe采集数据                                 |\n\n### channel\n\nChannel 是一种短暂的存储容器,负责数据的存储持久化，可以持久化到jdbc,file,memory，将从source处接收到的event格式的数据缓存起来,直到它们被sinks消费掉,可以把channel看成是一个队列，队列的优点是先进先出，放好后尾部一个个event出来，Flume比较看重数据的传输，因此几乎没有数据的解析预处理。仅仅是数据的产生，封装成event然后传输。数据只有存储在下一个存储位置（可能是最终的存储位置，如HDFS；也可能是下一个Flume节点的channel），数据才会从当前的channel中删除。这个过程是通过事务来控制的，这样就保证了数据的可靠性。\n\n不过flume的持久化也是有容量限制的，比如内存如果超过一定的量，不够分配，也一样会爆掉。\n\n| **类型**                   | **描述**                                                     |\n| -------------------------- | ------------------------------------------------------------ |\n| Memory                     | Event数据存储在内存中                                        |\n| JDBC                       | Event数据存储在持久化存储中，当前Flume Channel内置支持Derby  |\n| Kafka                      | Event存储在kafka集群                                         |\n| File Channel               | Event数据存储在磁盘文件中                                    |\n| Spillable Memory Channel   | Event数据存储在内存中和磁盘上，当内存队列满了，会持久化到磁盘文件（当前试验性的，不建议生产环境使用） |\n| Pseudo Transaction Channel | 测试用途                                                     |\n| Custom Channel             | 自定义Channel实现                                            |\n\n### sink\n\nsink 负责数据的转发，将数据存储到集中存储器比如Hbase和HDFS,它从channel消费数据(events)并将其传递给目标地。目标地可能是另一个sink,也可能是hdfs、logger、avro、thrift、ipc、file、null、Hbase、solr、自定义等\n\n| **类型**       | **描述**                                            |\n| -------------- | --------------------------------------------------- |\n| HDFS           | 数据写入HDFS                                        |\n| HIVE           | 数据导入到HIVE中                                    |\n| Logger         | 数据写入日志文件                                    |\n| Avro           | 数据被转换成Avro Event，然后发送到配置的RPC端口上   |\n| Thrift         | 数据被转换成Thrift Event，然后发送到配置的RPC端口上 |\n| IRC            | 数据在IRC上进行回放                                 |\n| File Roll      | 存储数据到本地文件系统                              |\n| Null           | 丢弃到所有数据                                      |\n| Hive           | 数据写入Hive                                        |\n| HBase          | 数据写入HBase数据库                                 |\n| Morphline Solr | 数据发送到Solr搜索服务器（集群）                    |\n| ElasticSearch  | 数据发送到Elastic Search搜索服务器（集群）          |\n| Kite Dataset   | 写数据到Kite Dataset，试验性质的                    |\n| Kafka          | 数据写到Kafka Topic                                 |\n| Custom         | 自定义Sink实现                                      |\n\n**Flume有哪些优缺点**\n\n####优点\n\n- Flume可以将应用产生的数据存储到任何集中存储器中，比如HDFS,HBase\n\n- 当收集数据的速度超过将写入数据的时候，也就是当收集信息遇到峰值时，这时候收集的信息非常大，甚至超过了系统的写入数据能力，这时候，Flume会在数据生产者和数据收容器间做出调整，保证其能够在两者之间提供一共平稳的数据.\n\n- 提供上下文路由特征\n- Flume的管道是基于事务，保证了数据在传送和接收时的一致性.\n- Flume是可靠的，容错性高的，可升级的，易管理的,并且可定制的。\n- 实时性，Flume有一个好处可以实时的将分析数据并将数据保存在数据库或者其他系统中\n\n#### 缺点\n\nFlume的配置很繁琐，source，channel，sink的关系在配置文件里面交织在一起，不便于管理\n\n\n\n### Flume启动参数\n\n```\nUsage: ./flume-ng <command> [options]...  \n  \ncommands:  \n  help                  display this help text  \n  agent                 run a Flume agent  \n  avro-client           run an avro Flume client  \n  version               show Flume version info  \n  \nglobal options:  \n  --conf,-c <conf>      use configs in <conf> directory  \n  --classpath,-C <cp>   append to the classpath  \n  --dryrun,-d           do not actually start Flume, just print the command  \n  --plugins-path <dirs> colon-separated list of plugins.d directories. See the  \n                        plugins.d section in the user guide for more details.  \n                        Default: $FLUME_HOME/plugins.d  \n  -Dproperty=value      sets a Java system property value  \n  -Xproperty=value      sets a Java -X option  \n  \nagent options:  \n  --conf-file,-f <file> specify a config file (required)  \n  --name,-n <name>      the name of this agent (required)  \n  --help,-h             display help text  \n  \navro-client options:  \n  --rpcProps,-P <file>   RPC client properties file with server connection params  \n  --host,-H <host>       hostname to which events will be sent  \n  --port,-p <port>       port of the avro source  \n  --dirname <dir>        directory to stream to avro source  \n  --filename,-F <file>   text file to stream to avro source (default: std input)  \n  --headerFile,-R <file> File containing event headers as key/value pairs on each new line  \n  --help,-h              display help text  \n  \n  Either --rpcProps or both --host and --port must be specified.  \n  \nNote that if <conf> directory is specified, then it is always included first  \nin the classpath. \n```\n\n#### 命令\n\n| 参数        | 描述                      |\n| ----------- | ------------------------- |\n| help        | 打印帮助信息              |\n| agent       | 运行一个Flume Agent       |\n| avro-client | 运行一个Avro Flume 客户端 |\n| version     | 显示Flume版本。           |\n\n#### 全局选项\n\n| 参数                  | 描述                                               |\n| --------------------- | -------------------------------------------------- |\n| --conf,-c <conf>      | 在<conf>目录使用配置文件。指定配置文件放在什么目录 |\n| --classpath,-C <cp>   | 追加一个classpath     |\n| --dryrun,-d           | 不真正运行Agent，而只是打印命令一些信息。          |\n| --plugins-path <dirs> | 插件目录列表。默认：$FLUME_HOME/plugins.d          |\n| -Dproperty=value      | 设置一个JAVA系统属性值。        |\n| -Xproperty=value      | 设置一个JAVA -X的选项。     |\n\n#### Agent选项\n\n| 参数                  | 描述                                                         |\n| --------------------- | ------------------------------------------------------------ |\n| --conf-file,-f <file> | 指定配置文件，这个配置文件必须在**全局选项**的--conf参数定义的目录下。（必填） |\n| --name,-n <name>      | Agent的名称（必填）             |\n| --help,-h             | 帮助                |\n\n#### Avro客户端选项\n\n| 参数                   | 描述                        |\n| ---------------------- | --------------------------- |\n| --rpcProps,-P <file>   | 连接参数的配置文件。        |\n| --host,-H <host>       | Event所要发送到的Hostname。 |\n| --port,-p <port>       | Avro Source的端口。         |\n| --dirname <dir>        | Avro Source流到达的目录。   |\n| --filename,-F <file>   | Avro Source流到达的文件名。 |\n| --headerFile,-R <file> | 设置一个JAVA -X的选项。     |\n\n启动Avro客户端要么指定--rpcProps，要么指定--host和--port。\n\n\n\n### 启动脚本\n\n```\n#!/bin/bash\nif [ ! -d \"/data/\" ];then\nmkdir /var/log/flume/\nfi\nname=$2\nconf=$1\ndir=`find / -name \"flume\" | awk -F \"docs\" 'NR==1{print $1\"conf\"}'`\nconfdir=$dir\"conf\"\ncmd=$dir\"bin/flume-ng\"\nnohup $cmd agent --conf $confdir -f conf/$conf -Dflume.root.logger=DEBUG,console -n $name  > /var/log/flume/flume.out 2>&1 &\n```\n\n### 停止脚本\n\n```\n#!/bin/bash\nkill -9 $(lsof -i:12306 | awk '{print $2}' | tail -n 1)\n```\n\n### 报错\n\n#### 文件名相同，导致flume停止\n\n```\nFile name has been re-used with different files. Spooling assumptions violated for /data/yfanglog/host-manager.2018-04-17.log.COMPLETED\n```\n\n这种情况下后进来的 host-manager.2018-04-17.log，在flume读取完成后会对其进行重命名，但是该文件名已经被占用了，flume就会抛出如下的异常信息,停止处理该监控目录下的其他文件。\n\n跟踪抛出异常的源码，SpoolDirectorySource 会启动一个线程轮询监控目录下的目标文件，当读取完该文件(readEvents)之后会对该文件进行重名(rollCurrentFile)，当重命名失败时会抛出IllegalStateException，被SpoolDirectoryRunnable catch重新抛出RuntimeException，导致当前线程退出，从源码看SpoolDirectoryRunnable 是单线程执行的，因此线程结束后，监控目录下其他文件不再被处理\n\n现在基本清楚了异常栈的调用逻辑，那么和前面自定义解析器一样，我们可以重写ReliableSpoolingFileEventReader以及SpoolDirectorySource的相关实现,也就是自定义一个spooling source，在rollCurrentFile()重命名失败时，做些处理措施，比如将该文件重新命名为access_2015_10_01_16_30.log(2).COMPLETED(此时文件内容已经读取完毕了)继续处理(注意要是.COMPLETED结尾，不然flume会再次读取该文件)。","source":"_posts/flume.md","raw":"---\ntitle: Flume配置文件说明\ndate: 2019-12-13 14:00:00\ncategories: \n- bigdata\ntags:\n- flume\n---\n\nFlume目录结构\n\n| 文件夹 | 描述                    |\n| ------ | ----------------------- |\n| bin    | 存放了启动脚本          |\n| lib    | 启动所需的所有组件jar包 |\n| conf   | 提供了几个测试配置文件  |\n| docs   | 文档                    |\n\n### Flume Agent组件\n\nFlume内部有一个或者多个Agent,然而对于每一个Agent来说,它就是一共独立的守护进程(JVM),它从客户端哪儿接收收集,或者从其他的 Agent哪儿接收,然后迅速的将获取的数据传给下一个目的节点sink,或者agent\n\n#### Source\n\nsource 负责数据的产生或搜集，一般是对接一些RPC的程序或者是其他的flume节点的sink，从数据发生器接收数据,并将接收的数据以Flume的event格式传递给一个或者多个通道Channel,Flume提供多种数据接收的方式,比如包括avro、thrift、exec、jms、spooling directory、netcat、sequence generator、syslog、http、legacy、自定义\n\n| **类型**           | **描述**                                                  |\n| ------------------ | --------------------------------------------------------- |\n| Avro               | 监听Avro端口并接收Avro Client的流数据                     |\n| Thrift             | 监听Thrift端口并接收Thrift Client的流数据                 |\n| Exec               | 基于Unix的command在标准输出上生产数据                     |\n| JMS                | 从JMS（Java消息服务）采集数据                             |\n| Spooling Directory | 监听指定目录                                              |\n| Twitter 1%         | 通过API持续下载Twitter数据（实验阶段）                    |\n| Kafka              | 采集Kafka topic中的message                                |\n| NetCat             | 监听端口（要求所提供的数据是换行符分隔的文本）            |\n| Sequence Generator | 序列产生器，连续不断产生event，用于测试                   |\n| Syslog             | 采集syslog日志消息，支持单端口TCP、多端口TCP和UDP日志采集 |\n| HTTP               | 接收HTTP POST和GET数据                                    |\n| Stress             | 用于source压力测试                                        |\n| Legacy             | 向下兼容，接收低版本Flume的数据                           |\n| Custom             | 自定义source的接口                                        |\n| Scribe             | 从facebook Scribe采集数据                                 |\n\n### channel\n\nChannel 是一种短暂的存储容器,负责数据的存储持久化，可以持久化到jdbc,file,memory，将从source处接收到的event格式的数据缓存起来,直到它们被sinks消费掉,可以把channel看成是一个队列，队列的优点是先进先出，放好后尾部一个个event出来，Flume比较看重数据的传输，因此几乎没有数据的解析预处理。仅仅是数据的产生，封装成event然后传输。数据只有存储在下一个存储位置（可能是最终的存储位置，如HDFS；也可能是下一个Flume节点的channel），数据才会从当前的channel中删除。这个过程是通过事务来控制的，这样就保证了数据的可靠性。\n\n不过flume的持久化也是有容量限制的，比如内存如果超过一定的量，不够分配，也一样会爆掉。\n\n| **类型**                   | **描述**                                                     |\n| -------------------------- | ------------------------------------------------------------ |\n| Memory                     | Event数据存储在内存中                                        |\n| JDBC                       | Event数据存储在持久化存储中，当前Flume Channel内置支持Derby  |\n| Kafka                      | Event存储在kafka集群                                         |\n| File Channel               | Event数据存储在磁盘文件中                                    |\n| Spillable Memory Channel   | Event数据存储在内存中和磁盘上，当内存队列满了，会持久化到磁盘文件（当前试验性的，不建议生产环境使用） |\n| Pseudo Transaction Channel | 测试用途                                                     |\n| Custom Channel             | 自定义Channel实现                                            |\n\n### sink\n\nsink 负责数据的转发，将数据存储到集中存储器比如Hbase和HDFS,它从channel消费数据(events)并将其传递给目标地。目标地可能是另一个sink,也可能是hdfs、logger、avro、thrift、ipc、file、null、Hbase、solr、自定义等\n\n| **类型**       | **描述**                                            |\n| -------------- | --------------------------------------------------- |\n| HDFS           | 数据写入HDFS                                        |\n| HIVE           | 数据导入到HIVE中                                    |\n| Logger         | 数据写入日志文件                                    |\n| Avro           | 数据被转换成Avro Event，然后发送到配置的RPC端口上   |\n| Thrift         | 数据被转换成Thrift Event，然后发送到配置的RPC端口上 |\n| IRC            | 数据在IRC上进行回放                                 |\n| File Roll      | 存储数据到本地文件系统                              |\n| Null           | 丢弃到所有数据                                      |\n| Hive           | 数据写入Hive                                        |\n| HBase          | 数据写入HBase数据库                                 |\n| Morphline Solr | 数据发送到Solr搜索服务器（集群）                    |\n| ElasticSearch  | 数据发送到Elastic Search搜索服务器（集群）          |\n| Kite Dataset   | 写数据到Kite Dataset，试验性质的                    |\n| Kafka          | 数据写到Kafka Topic                                 |\n| Custom         | 自定义Sink实现                                      |\n\n**Flume有哪些优缺点**\n\n####优点\n\n- Flume可以将应用产生的数据存储到任何集中存储器中，比如HDFS,HBase\n\n- 当收集数据的速度超过将写入数据的时候，也就是当收集信息遇到峰值时，这时候收集的信息非常大，甚至超过了系统的写入数据能力，这时候，Flume会在数据生产者和数据收容器间做出调整，保证其能够在两者之间提供一共平稳的数据.\n\n- 提供上下文路由特征\n- Flume的管道是基于事务，保证了数据在传送和接收时的一致性.\n- Flume是可靠的，容错性高的，可升级的，易管理的,并且可定制的。\n- 实时性，Flume有一个好处可以实时的将分析数据并将数据保存在数据库或者其他系统中\n\n#### 缺点\n\nFlume的配置很繁琐，source，channel，sink的关系在配置文件里面交织在一起，不便于管理\n\n\n\n### Flume启动参数\n\n```\nUsage: ./flume-ng <command> [options]...  \n  \ncommands:  \n  help                  display this help text  \n  agent                 run a Flume agent  \n  avro-client           run an avro Flume client  \n  version               show Flume version info  \n  \nglobal options:  \n  --conf,-c <conf>      use configs in <conf> directory  \n  --classpath,-C <cp>   append to the classpath  \n  --dryrun,-d           do not actually start Flume, just print the command  \n  --plugins-path <dirs> colon-separated list of plugins.d directories. See the  \n                        plugins.d section in the user guide for more details.  \n                        Default: $FLUME_HOME/plugins.d  \n  -Dproperty=value      sets a Java system property value  \n  -Xproperty=value      sets a Java -X option  \n  \nagent options:  \n  --conf-file,-f <file> specify a config file (required)  \n  --name,-n <name>      the name of this agent (required)  \n  --help,-h             display help text  \n  \navro-client options:  \n  --rpcProps,-P <file>   RPC client properties file with server connection params  \n  --host,-H <host>       hostname to which events will be sent  \n  --port,-p <port>       port of the avro source  \n  --dirname <dir>        directory to stream to avro source  \n  --filename,-F <file>   text file to stream to avro source (default: std input)  \n  --headerFile,-R <file> File containing event headers as key/value pairs on each new line  \n  --help,-h              display help text  \n  \n  Either --rpcProps or both --host and --port must be specified.  \n  \nNote that if <conf> directory is specified, then it is always included first  \nin the classpath. \n```\n\n#### 命令\n\n| 参数        | 描述                      |\n| ----------- | ------------------------- |\n| help        | 打印帮助信息              |\n| agent       | 运行一个Flume Agent       |\n| avro-client | 运行一个Avro Flume 客户端 |\n| version     | 显示Flume版本。           |\n\n#### 全局选项\n\n| 参数                  | 描述                                               |\n| --------------------- | -------------------------------------------------- |\n| --conf,-c <conf>      | 在<conf>目录使用配置文件。指定配置文件放在什么目录 |\n| --classpath,-C <cp>   | 追加一个classpath     |\n| --dryrun,-d           | 不真正运行Agent，而只是打印命令一些信息。          |\n| --plugins-path <dirs> | 插件目录列表。默认：$FLUME_HOME/plugins.d          |\n| -Dproperty=value      | 设置一个JAVA系统属性值。        |\n| -Xproperty=value      | 设置一个JAVA -X的选项。     |\n\n#### Agent选项\n\n| 参数                  | 描述                                                         |\n| --------------------- | ------------------------------------------------------------ |\n| --conf-file,-f <file> | 指定配置文件，这个配置文件必须在**全局选项**的--conf参数定义的目录下。（必填） |\n| --name,-n <name>      | Agent的名称（必填）             |\n| --help,-h             | 帮助                |\n\n#### Avro客户端选项\n\n| 参数                   | 描述                        |\n| ---------------------- | --------------------------- |\n| --rpcProps,-P <file>   | 连接参数的配置文件。        |\n| --host,-H <host>       | Event所要发送到的Hostname。 |\n| --port,-p <port>       | Avro Source的端口。         |\n| --dirname <dir>        | Avro Source流到达的目录。   |\n| --filename,-F <file>   | Avro Source流到达的文件名。 |\n| --headerFile,-R <file> | 设置一个JAVA -X的选项。     |\n\n启动Avro客户端要么指定--rpcProps，要么指定--host和--port。\n\n\n\n### 启动脚本\n\n```\n#!/bin/bash\nif [ ! -d \"/data/\" ];then\nmkdir /var/log/flume/\nfi\nname=$2\nconf=$1\ndir=`find / -name \"flume\" | awk -F \"docs\" 'NR==1{print $1\"conf\"}'`\nconfdir=$dir\"conf\"\ncmd=$dir\"bin/flume-ng\"\nnohup $cmd agent --conf $confdir -f conf/$conf -Dflume.root.logger=DEBUG,console -n $name  > /var/log/flume/flume.out 2>&1 &\n```\n\n### 停止脚本\n\n```\n#!/bin/bash\nkill -9 $(lsof -i:12306 | awk '{print $2}' | tail -n 1)\n```\n\n### 报错\n\n#### 文件名相同，导致flume停止\n\n```\nFile name has been re-used with different files. Spooling assumptions violated for /data/yfanglog/host-manager.2018-04-17.log.COMPLETED\n```\n\n这种情况下后进来的 host-manager.2018-04-17.log，在flume读取完成后会对其进行重命名，但是该文件名已经被占用了，flume就会抛出如下的异常信息,停止处理该监控目录下的其他文件。\n\n跟踪抛出异常的源码，SpoolDirectorySource 会启动一个线程轮询监控目录下的目标文件，当读取完该文件(readEvents)之后会对该文件进行重名(rollCurrentFile)，当重命名失败时会抛出IllegalStateException，被SpoolDirectoryRunnable catch重新抛出RuntimeException，导致当前线程退出，从源码看SpoolDirectoryRunnable 是单线程执行的，因此线程结束后，监控目录下其他文件不再被处理\n\n现在基本清楚了异常栈的调用逻辑，那么和前面自定义解析器一样，我们可以重写ReliableSpoolingFileEventReader以及SpoolDirectorySource的相关实现,也就是自定义一个spooling source，在rollCurrentFile()重命名失败时，做些处理措施，比如将该文件重新命名为access_2015_10_01_16_30.log(2).COMPLETED(此时文件内容已经读取完毕了)继续处理(注意要是.COMPLETED结尾，不然flume会再次读取该文件)。","slug":"flume","published":1,"updated":"2021-01-27T08:20:35.746Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h1y000hq0uschg6gnkm","content":"<p>Flume目录结构</p>\n<table>\n<thead>\n<tr>\n<th>文件夹</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>bin</td>\n<td>存放了启动脚本</td>\n</tr>\n<tr>\n<td>lib</td>\n<td>启动所需的所有组件jar包</td>\n</tr>\n<tr>\n<td>conf</td>\n<td>提供了几个测试配置文件</td>\n</tr>\n<tr>\n<td>docs</td>\n<td>文档</td>\n</tr>\n</tbody></table>\n<h3 id=\"Flume-Agent组件\"><a href=\"#Flume-Agent组件\" class=\"headerlink\" title=\"Flume Agent组件\"></a>Flume Agent组件</h3><p>Flume内部有一个或者多个Agent,然而对于每一个Agent来说,它就是一共独立的守护进程(JVM),它从客户端哪儿接收收集,或者从其他的 Agent哪儿接收,然后迅速的将获取的数据传给下一个目的节点sink,或者agent</p>\n<h4 id=\"Source\"><a href=\"#Source\" class=\"headerlink\" title=\"Source\"></a>Source</h4><p>source 负责数据的产生或搜集，一般是对接一些RPC的程序或者是其他的flume节点的sink，从数据发生器接收数据,并将接收的数据以Flume的event格式传递给一个或者多个通道Channel,Flume提供多种数据接收的方式,比如包括avro、thrift、exec、jms、spooling directory、netcat、sequence generator、syslog、http、legacy、自定义</p>\n<table>\n<thead>\n<tr>\n<th><strong>类型</strong></th>\n<th><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Avro</td>\n<td>监听Avro端口并接收Avro Client的流数据</td>\n</tr>\n<tr>\n<td>Thrift</td>\n<td>监听Thrift端口并接收Thrift Client的流数据</td>\n</tr>\n<tr>\n<td>Exec</td>\n<td>基于Unix的command在标准输出上生产数据</td>\n</tr>\n<tr>\n<td>JMS</td>\n<td>从JMS（Java消息服务）采集数据</td>\n</tr>\n<tr>\n<td>Spooling Directory</td>\n<td>监听指定目录</td>\n</tr>\n<tr>\n<td>Twitter 1%</td>\n<td>通过API持续下载Twitter数据（实验阶段）</td>\n</tr>\n<tr>\n<td>Kafka</td>\n<td>采集Kafka topic中的message</td>\n</tr>\n<tr>\n<td>NetCat</td>\n<td>监听端口（要求所提供的数据是换行符分隔的文本）</td>\n</tr>\n<tr>\n<td>Sequence Generator</td>\n<td>序列产生器，连续不断产生event，用于测试</td>\n</tr>\n<tr>\n<td>Syslog</td>\n<td>采集syslog日志消息，支持单端口TCP、多端口TCP和UDP日志采集</td>\n</tr>\n<tr>\n<td>HTTP</td>\n<td>接收HTTP POST和GET数据</td>\n</tr>\n<tr>\n<td>Stress</td>\n<td>用于source压力测试</td>\n</tr>\n<tr>\n<td>Legacy</td>\n<td>向下兼容，接收低版本Flume的数据</td>\n</tr>\n<tr>\n<td>Custom</td>\n<td>自定义source的接口</td>\n</tr>\n<tr>\n<td>Scribe</td>\n<td>从facebook Scribe采集数据</td>\n</tr>\n</tbody></table>\n<h3 id=\"channel\"><a href=\"#channel\" class=\"headerlink\" title=\"channel\"></a>channel</h3><p>Channel 是一种短暂的存储容器,负责数据的存储持久化，可以持久化到jdbc,file,memory，将从source处接收到的event格式的数据缓存起来,直到它们被sinks消费掉,可以把channel看成是一个队列，队列的优点是先进先出，放好后尾部一个个event出来，Flume比较看重数据的传输，因此几乎没有数据的解析预处理。仅仅是数据的产生，封装成event然后传输。数据只有存储在下一个存储位置（可能是最终的存储位置，如HDFS；也可能是下一个Flume节点的channel），数据才会从当前的channel中删除。这个过程是通过事务来控制的，这样就保证了数据的可靠性。</p>\n<p>不过flume的持久化也是有容量限制的，比如内存如果超过一定的量，不够分配，也一样会爆掉。</p>\n<table>\n<thead>\n<tr>\n<th><strong>类型</strong></th>\n<th><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Memory</td>\n<td>Event数据存储在内存中</td>\n</tr>\n<tr>\n<td>JDBC</td>\n<td>Event数据存储在持久化存储中，当前Flume Channel内置支持Derby</td>\n</tr>\n<tr>\n<td>Kafka</td>\n<td>Event存储在kafka集群</td>\n</tr>\n<tr>\n<td>File Channel</td>\n<td>Event数据存储在磁盘文件中</td>\n</tr>\n<tr>\n<td>Spillable Memory Channel</td>\n<td>Event数据存储在内存中和磁盘上，当内存队列满了，会持久化到磁盘文件（当前试验性的，不建议生产环境使用）</td>\n</tr>\n<tr>\n<td>Pseudo Transaction Channel</td>\n<td>测试用途</td>\n</tr>\n<tr>\n<td>Custom Channel</td>\n<td>自定义Channel实现</td>\n</tr>\n</tbody></table>\n<h3 id=\"sink\"><a href=\"#sink\" class=\"headerlink\" title=\"sink\"></a>sink</h3><p>sink 负责数据的转发，将数据存储到集中存储器比如Hbase和HDFS,它从channel消费数据(events)并将其传递给目标地。目标地可能是另一个sink,也可能是hdfs、logger、avro、thrift、ipc、file、null、Hbase、solr、自定义等</p>\n<table>\n<thead>\n<tr>\n<th><strong>类型</strong></th>\n<th><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>HDFS</td>\n<td>数据写入HDFS</td>\n</tr>\n<tr>\n<td>HIVE</td>\n<td>数据导入到HIVE中</td>\n</tr>\n<tr>\n<td>Logger</td>\n<td>数据写入日志文件</td>\n</tr>\n<tr>\n<td>Avro</td>\n<td>数据被转换成Avro Event，然后发送到配置的RPC端口上</td>\n</tr>\n<tr>\n<td>Thrift</td>\n<td>数据被转换成Thrift Event，然后发送到配置的RPC端口上</td>\n</tr>\n<tr>\n<td>IRC</td>\n<td>数据在IRC上进行回放</td>\n</tr>\n<tr>\n<td>File Roll</td>\n<td>存储数据到本地文件系统</td>\n</tr>\n<tr>\n<td>Null</td>\n<td>丢弃到所有数据</td>\n</tr>\n<tr>\n<td>Hive</td>\n<td>数据写入Hive</td>\n</tr>\n<tr>\n<td>HBase</td>\n<td>数据写入HBase数据库</td>\n</tr>\n<tr>\n<td>Morphline Solr</td>\n<td>数据发送到Solr搜索服务器（集群）</td>\n</tr>\n<tr>\n<td>ElasticSearch</td>\n<td>数据发送到Elastic Search搜索服务器（集群）</td>\n</tr>\n<tr>\n<td>Kite Dataset</td>\n<td>写数据到Kite Dataset，试验性质的</td>\n</tr>\n<tr>\n<td>Kafka</td>\n<td>数据写到Kafka Topic</td>\n</tr>\n<tr>\n<td>Custom</td>\n<td>自定义Sink实现</td>\n</tr>\n</tbody></table>\n<p><strong>Flume有哪些优缺点</strong></p>\n<p>####优点</p>\n<ul>\n<li><p>Flume可以将应用产生的数据存储到任何集中存储器中，比如HDFS,HBase</p>\n</li>\n<li><p>当收集数据的速度超过将写入数据的时候，也就是当收集信息遇到峰值时，这时候收集的信息非常大，甚至超过了系统的写入数据能力，这时候，Flume会在数据生产者和数据收容器间做出调整，保证其能够在两者之间提供一共平稳的数据.</p>\n</li>\n<li><p>提供上下文路由特征</p>\n</li>\n<li><p>Flume的管道是基于事务，保证了数据在传送和接收时的一致性.</p>\n</li>\n<li><p>Flume是可靠的，容错性高的，可升级的，易管理的,并且可定制的。</p>\n</li>\n<li><p>实时性，Flume有一个好处可以实时的将分析数据并将数据保存在数据库或者其他系统中</p>\n</li>\n</ul>\n<h4 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h4><p>Flume的配置很繁琐，source，channel，sink的关系在配置文件里面交织在一起，不便于管理</p>\n<h3 id=\"Flume启动参数\"><a href=\"#Flume启动参数\" class=\"headerlink\" title=\"Flume启动参数\"></a>Flume启动参数</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Usage: .&#x2F;flume-ng &lt;command&gt; [options]...  </span><br><span class=\"line\">  </span><br><span class=\"line\">commands:  </span><br><span class=\"line\">  help                  display this help text  </span><br><span class=\"line\">  agent                 run a Flume agent  </span><br><span class=\"line\">  avro-client           run an avro Flume client  </span><br><span class=\"line\">  version               show Flume version info  </span><br><span class=\"line\">  </span><br><span class=\"line\">global options:  </span><br><span class=\"line\">  --conf,-c &lt;conf&gt;      use configs in &lt;conf&gt; directory  </span><br><span class=\"line\">  --classpath,-C &lt;cp&gt;   append to the classpath  </span><br><span class=\"line\">  --dryrun,-d           do not actually start Flume, just print the command  </span><br><span class=\"line\">  --plugins-path &lt;dirs&gt; colon-separated list of plugins.d directories. See the  </span><br><span class=\"line\">                        plugins.d section in the user guide for more details.  </span><br><span class=\"line\">                        Default: $FLUME_HOME&#x2F;plugins.d  </span><br><span class=\"line\">  -Dproperty&#x3D;value      sets a Java system property value  </span><br><span class=\"line\">  -Xproperty&#x3D;value      sets a Java -X option  </span><br><span class=\"line\">  </span><br><span class=\"line\">agent options:  </span><br><span class=\"line\">  --conf-file,-f &lt;file&gt; specify a config file (required)  </span><br><span class=\"line\">  --name,-n &lt;name&gt;      the name of this agent (required)  </span><br><span class=\"line\">  --help,-h             display help text  </span><br><span class=\"line\">  </span><br><span class=\"line\">avro-client options:  </span><br><span class=\"line\">  --rpcProps,-P &lt;file&gt;   RPC client properties file with server connection params  </span><br><span class=\"line\">  --host,-H &lt;host&gt;       hostname to which events will be sent  </span><br><span class=\"line\">  --port,-p &lt;port&gt;       port of the avro source  </span><br><span class=\"line\">  --dirname &lt;dir&gt;        directory to stream to avro source  </span><br><span class=\"line\">  --filename,-F &lt;file&gt;   text file to stream to avro source (default: std input)  </span><br><span class=\"line\">  --headerFile,-R &lt;file&gt; File containing event headers as key&#x2F;value pairs on each new line  </span><br><span class=\"line\">  --help,-h              display help text  </span><br><span class=\"line\">  </span><br><span class=\"line\">  Either --rpcProps or both --host and --port must be specified.  </span><br><span class=\"line\">  </span><br><span class=\"line\">Note that if &lt;conf&gt; directory is specified, then it is always included first  </span><br><span class=\"line\">in the classpath. </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"命令\"><a href=\"#命令\" class=\"headerlink\" title=\"命令\"></a>命令</h4><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>help</td>\n<td>打印帮助信息</td>\n</tr>\n<tr>\n<td>agent</td>\n<td>运行一个Flume Agent</td>\n</tr>\n<tr>\n<td>avro-client</td>\n<td>运行一个Avro Flume 客户端</td>\n</tr>\n<tr>\n<td>version</td>\n<td>显示Flume版本。</td>\n</tr>\n</tbody></table>\n<h4 id=\"全局选项\"><a href=\"#全局选项\" class=\"headerlink\" title=\"全局选项\"></a>全局选项</h4><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>–conf,-c <conf></td>\n<td>在<conf>目录使用配置文件。指定配置文件放在什么目录</td>\n</tr>\n<tr>\n<td>–classpath,-C <cp></td>\n<td>追加一个classpath</td>\n</tr>\n<tr>\n<td>–dryrun,-d</td>\n<td>不真正运行Agent，而只是打印命令一些信息。</td>\n</tr>\n<tr>\n<td>–plugins-path <dirs></td>\n<td>插件目录列表。默认：$FLUME_HOME/plugins.d</td>\n</tr>\n<tr>\n<td>-Dproperty=value</td>\n<td>设置一个JAVA系统属性值。</td>\n</tr>\n<tr>\n<td>-Xproperty=value</td>\n<td>设置一个JAVA -X的选项。</td>\n</tr>\n</tbody></table>\n<h4 id=\"Agent选项\"><a href=\"#Agent选项\" class=\"headerlink\" title=\"Agent选项\"></a>Agent选项</h4><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>–conf-file,-f <file></td>\n<td>指定配置文件，这个配置文件必须在<strong>全局选项</strong>的–conf参数定义的目录下。（必填）</td>\n</tr>\n<tr>\n<td>–name,-n <name></td>\n<td>Agent的名称（必填）</td>\n</tr>\n<tr>\n<td>–help,-h</td>\n<td>帮助</td>\n</tr>\n</tbody></table>\n<h4 id=\"Avro客户端选项\"><a href=\"#Avro客户端选项\" class=\"headerlink\" title=\"Avro客户端选项\"></a>Avro客户端选项</h4><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>–rpcProps,-P <file></td>\n<td>连接参数的配置文件。</td>\n</tr>\n<tr>\n<td>–host,-H <host></td>\n<td>Event所要发送到的Hostname。</td>\n</tr>\n<tr>\n<td>–port,-p <port></td>\n<td>Avro Source的端口。</td>\n</tr>\n<tr>\n<td>–dirname <dir></td>\n<td>Avro Source流到达的目录。</td>\n</tr>\n<tr>\n<td>–filename,-F <file></td>\n<td>Avro Source流到达的文件名。</td>\n</tr>\n<tr>\n<td>–headerFile,-R <file></td>\n<td>设置一个JAVA -X的选项。</td>\n</tr>\n</tbody></table>\n<p>启动Avro客户端要么指定–rpcProps，要么指定–host和–port。</p>\n<h3 id=\"启动脚本\"><a href=\"#启动脚本\" class=\"headerlink\" title=\"启动脚本\"></a>启动脚本</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!&#x2F;bin&#x2F;bash</span><br><span class=\"line\">if [ ! -d &quot;&#x2F;data&#x2F;&quot; ];then</span><br><span class=\"line\">mkdir &#x2F;var&#x2F;log&#x2F;flume&#x2F;</span><br><span class=\"line\">fi</span><br><span class=\"line\">name&#x3D;$2</span><br><span class=\"line\">conf&#x3D;$1</span><br><span class=\"line\">dir&#x3D;&#96;find &#x2F; -name &quot;flume&quot; | awk -F &quot;docs&quot; &#39;NR&#x3D;&#x3D;1&#123;print $1&quot;conf&quot;&#125;&#39;&#96;</span><br><span class=\"line\">confdir&#x3D;$dir&quot;conf&quot;</span><br><span class=\"line\">cmd&#x3D;$dir&quot;bin&#x2F;flume-ng&quot;</span><br><span class=\"line\">nohup $cmd agent --conf $confdir -f conf&#x2F;$conf -Dflume.root.logger&#x3D;DEBUG,console -n $name  &gt; &#x2F;var&#x2F;log&#x2F;flume&#x2F;flume.out 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"停止脚本\"><a href=\"#停止脚本\" class=\"headerlink\" title=\"停止脚本\"></a>停止脚本</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!&#x2F;bin&#x2F;bash</span><br><span class=\"line\">kill -9 $(lsof -i:12306 | awk &#39;&#123;print $2&#125;&#39; | tail -n 1)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"报错\"><a href=\"#报错\" class=\"headerlink\" title=\"报错\"></a>报错</h3><h4 id=\"文件名相同，导致flume停止\"><a href=\"#文件名相同，导致flume停止\" class=\"headerlink\" title=\"文件名相同，导致flume停止\"></a>文件名相同，导致flume停止</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">File name has been re-used with different files. Spooling assumptions violated for &#x2F;data&#x2F;yfanglog&#x2F;host-manager.2018-04-17.log.COMPLETED</span><br></pre></td></tr></table></figure>\n\n<p>这种情况下后进来的 host-manager.2018-04-17.log，在flume读取完成后会对其进行重命名，但是该文件名已经被占用了，flume就会抛出如下的异常信息,停止处理该监控目录下的其他文件。</p>\n<p>跟踪抛出异常的源码，SpoolDirectorySource 会启动一个线程轮询监控目录下的目标文件，当读取完该文件(readEvents)之后会对该文件进行重名(rollCurrentFile)，当重命名失败时会抛出IllegalStateException，被SpoolDirectoryRunnable catch重新抛出RuntimeException，导致当前线程退出，从源码看SpoolDirectoryRunnable 是单线程执行的，因此线程结束后，监控目录下其他文件不再被处理</p>\n<p>现在基本清楚了异常栈的调用逻辑，那么和前面自定义解析器一样，我们可以重写ReliableSpoolingFileEventReader以及SpoolDirectorySource的相关实现,也就是自定义一个spooling source，在rollCurrentFile()重命名失败时，做些处理措施，比如将该文件重新命名为access_2015_10_01_16_30.log(2).COMPLETED(此时文件内容已经读取完毕了)继续处理(注意要是.COMPLETED结尾，不然flume会再次读取该文件)。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Flume目录结构</p>\n<table>\n<thead>\n<tr>\n<th>文件夹</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>bin</td>\n<td>存放了启动脚本</td>\n</tr>\n<tr>\n<td>lib</td>\n<td>启动所需的所有组件jar包</td>\n</tr>\n<tr>\n<td>conf</td>\n<td>提供了几个测试配置文件</td>\n</tr>\n<tr>\n<td>docs</td>\n<td>文档</td>\n</tr>\n</tbody></table>\n<h3 id=\"Flume-Agent组件\"><a href=\"#Flume-Agent组件\" class=\"headerlink\" title=\"Flume Agent组件\"></a>Flume Agent组件</h3><p>Flume内部有一个或者多个Agent,然而对于每一个Agent来说,它就是一共独立的守护进程(JVM),它从客户端哪儿接收收集,或者从其他的 Agent哪儿接收,然后迅速的将获取的数据传给下一个目的节点sink,或者agent</p>\n<h4 id=\"Source\"><a href=\"#Source\" class=\"headerlink\" title=\"Source\"></a>Source</h4><p>source 负责数据的产生或搜集，一般是对接一些RPC的程序或者是其他的flume节点的sink，从数据发生器接收数据,并将接收的数据以Flume的event格式传递给一个或者多个通道Channel,Flume提供多种数据接收的方式,比如包括avro、thrift、exec、jms、spooling directory、netcat、sequence generator、syslog、http、legacy、自定义</p>\n<table>\n<thead>\n<tr>\n<th><strong>类型</strong></th>\n<th><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Avro</td>\n<td>监听Avro端口并接收Avro Client的流数据</td>\n</tr>\n<tr>\n<td>Thrift</td>\n<td>监听Thrift端口并接收Thrift Client的流数据</td>\n</tr>\n<tr>\n<td>Exec</td>\n<td>基于Unix的command在标准输出上生产数据</td>\n</tr>\n<tr>\n<td>JMS</td>\n<td>从JMS（Java消息服务）采集数据</td>\n</tr>\n<tr>\n<td>Spooling Directory</td>\n<td>监听指定目录</td>\n</tr>\n<tr>\n<td>Twitter 1%</td>\n<td>通过API持续下载Twitter数据（实验阶段）</td>\n</tr>\n<tr>\n<td>Kafka</td>\n<td>采集Kafka topic中的message</td>\n</tr>\n<tr>\n<td>NetCat</td>\n<td>监听端口（要求所提供的数据是换行符分隔的文本）</td>\n</tr>\n<tr>\n<td>Sequence Generator</td>\n<td>序列产生器，连续不断产生event，用于测试</td>\n</tr>\n<tr>\n<td>Syslog</td>\n<td>采集syslog日志消息，支持单端口TCP、多端口TCP和UDP日志采集</td>\n</tr>\n<tr>\n<td>HTTP</td>\n<td>接收HTTP POST和GET数据</td>\n</tr>\n<tr>\n<td>Stress</td>\n<td>用于source压力测试</td>\n</tr>\n<tr>\n<td>Legacy</td>\n<td>向下兼容，接收低版本Flume的数据</td>\n</tr>\n<tr>\n<td>Custom</td>\n<td>自定义source的接口</td>\n</tr>\n<tr>\n<td>Scribe</td>\n<td>从facebook Scribe采集数据</td>\n</tr>\n</tbody></table>\n<h3 id=\"channel\"><a href=\"#channel\" class=\"headerlink\" title=\"channel\"></a>channel</h3><p>Channel 是一种短暂的存储容器,负责数据的存储持久化，可以持久化到jdbc,file,memory，将从source处接收到的event格式的数据缓存起来,直到它们被sinks消费掉,可以把channel看成是一个队列，队列的优点是先进先出，放好后尾部一个个event出来，Flume比较看重数据的传输，因此几乎没有数据的解析预处理。仅仅是数据的产生，封装成event然后传输。数据只有存储在下一个存储位置（可能是最终的存储位置，如HDFS；也可能是下一个Flume节点的channel），数据才会从当前的channel中删除。这个过程是通过事务来控制的，这样就保证了数据的可靠性。</p>\n<p>不过flume的持久化也是有容量限制的，比如内存如果超过一定的量，不够分配，也一样会爆掉。</p>\n<table>\n<thead>\n<tr>\n<th><strong>类型</strong></th>\n<th><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Memory</td>\n<td>Event数据存储在内存中</td>\n</tr>\n<tr>\n<td>JDBC</td>\n<td>Event数据存储在持久化存储中，当前Flume Channel内置支持Derby</td>\n</tr>\n<tr>\n<td>Kafka</td>\n<td>Event存储在kafka集群</td>\n</tr>\n<tr>\n<td>File Channel</td>\n<td>Event数据存储在磁盘文件中</td>\n</tr>\n<tr>\n<td>Spillable Memory Channel</td>\n<td>Event数据存储在内存中和磁盘上，当内存队列满了，会持久化到磁盘文件（当前试验性的，不建议生产环境使用）</td>\n</tr>\n<tr>\n<td>Pseudo Transaction Channel</td>\n<td>测试用途</td>\n</tr>\n<tr>\n<td>Custom Channel</td>\n<td>自定义Channel实现</td>\n</tr>\n</tbody></table>\n<h3 id=\"sink\"><a href=\"#sink\" class=\"headerlink\" title=\"sink\"></a>sink</h3><p>sink 负责数据的转发，将数据存储到集中存储器比如Hbase和HDFS,它从channel消费数据(events)并将其传递给目标地。目标地可能是另一个sink,也可能是hdfs、logger、avro、thrift、ipc、file、null、Hbase、solr、自定义等</p>\n<table>\n<thead>\n<tr>\n<th><strong>类型</strong></th>\n<th><strong>描述</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>HDFS</td>\n<td>数据写入HDFS</td>\n</tr>\n<tr>\n<td>HIVE</td>\n<td>数据导入到HIVE中</td>\n</tr>\n<tr>\n<td>Logger</td>\n<td>数据写入日志文件</td>\n</tr>\n<tr>\n<td>Avro</td>\n<td>数据被转换成Avro Event，然后发送到配置的RPC端口上</td>\n</tr>\n<tr>\n<td>Thrift</td>\n<td>数据被转换成Thrift Event，然后发送到配置的RPC端口上</td>\n</tr>\n<tr>\n<td>IRC</td>\n<td>数据在IRC上进行回放</td>\n</tr>\n<tr>\n<td>File Roll</td>\n<td>存储数据到本地文件系统</td>\n</tr>\n<tr>\n<td>Null</td>\n<td>丢弃到所有数据</td>\n</tr>\n<tr>\n<td>Hive</td>\n<td>数据写入Hive</td>\n</tr>\n<tr>\n<td>HBase</td>\n<td>数据写入HBase数据库</td>\n</tr>\n<tr>\n<td>Morphline Solr</td>\n<td>数据发送到Solr搜索服务器（集群）</td>\n</tr>\n<tr>\n<td>ElasticSearch</td>\n<td>数据发送到Elastic Search搜索服务器（集群）</td>\n</tr>\n<tr>\n<td>Kite Dataset</td>\n<td>写数据到Kite Dataset，试验性质的</td>\n</tr>\n<tr>\n<td>Kafka</td>\n<td>数据写到Kafka Topic</td>\n</tr>\n<tr>\n<td>Custom</td>\n<td>自定义Sink实现</td>\n</tr>\n</tbody></table>\n<p><strong>Flume有哪些优缺点</strong></p>\n<p>####优点</p>\n<ul>\n<li><p>Flume可以将应用产生的数据存储到任何集中存储器中，比如HDFS,HBase</p>\n</li>\n<li><p>当收集数据的速度超过将写入数据的时候，也就是当收集信息遇到峰值时，这时候收集的信息非常大，甚至超过了系统的写入数据能力，这时候，Flume会在数据生产者和数据收容器间做出调整，保证其能够在两者之间提供一共平稳的数据.</p>\n</li>\n<li><p>提供上下文路由特征</p>\n</li>\n<li><p>Flume的管道是基于事务，保证了数据在传送和接收时的一致性.</p>\n</li>\n<li><p>Flume是可靠的，容错性高的，可升级的，易管理的,并且可定制的。</p>\n</li>\n<li><p>实时性，Flume有一个好处可以实时的将分析数据并将数据保存在数据库或者其他系统中</p>\n</li>\n</ul>\n<h4 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h4><p>Flume的配置很繁琐，source，channel，sink的关系在配置文件里面交织在一起，不便于管理</p>\n<h3 id=\"Flume启动参数\"><a href=\"#Flume启动参数\" class=\"headerlink\" title=\"Flume启动参数\"></a>Flume启动参数</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Usage: .&#x2F;flume-ng &lt;command&gt; [options]...  </span><br><span class=\"line\">  </span><br><span class=\"line\">commands:  </span><br><span class=\"line\">  help                  display this help text  </span><br><span class=\"line\">  agent                 run a Flume agent  </span><br><span class=\"line\">  avro-client           run an avro Flume client  </span><br><span class=\"line\">  version               show Flume version info  </span><br><span class=\"line\">  </span><br><span class=\"line\">global options:  </span><br><span class=\"line\">  --conf,-c &lt;conf&gt;      use configs in &lt;conf&gt; directory  </span><br><span class=\"line\">  --classpath,-C &lt;cp&gt;   append to the classpath  </span><br><span class=\"line\">  --dryrun,-d           do not actually start Flume, just print the command  </span><br><span class=\"line\">  --plugins-path &lt;dirs&gt; colon-separated list of plugins.d directories. See the  </span><br><span class=\"line\">                        plugins.d section in the user guide for more details.  </span><br><span class=\"line\">                        Default: $FLUME_HOME&#x2F;plugins.d  </span><br><span class=\"line\">  -Dproperty&#x3D;value      sets a Java system property value  </span><br><span class=\"line\">  -Xproperty&#x3D;value      sets a Java -X option  </span><br><span class=\"line\">  </span><br><span class=\"line\">agent options:  </span><br><span class=\"line\">  --conf-file,-f &lt;file&gt; specify a config file (required)  </span><br><span class=\"line\">  --name,-n &lt;name&gt;      the name of this agent (required)  </span><br><span class=\"line\">  --help,-h             display help text  </span><br><span class=\"line\">  </span><br><span class=\"line\">avro-client options:  </span><br><span class=\"line\">  --rpcProps,-P &lt;file&gt;   RPC client properties file with server connection params  </span><br><span class=\"line\">  --host,-H &lt;host&gt;       hostname to which events will be sent  </span><br><span class=\"line\">  --port,-p &lt;port&gt;       port of the avro source  </span><br><span class=\"line\">  --dirname &lt;dir&gt;        directory to stream to avro source  </span><br><span class=\"line\">  --filename,-F &lt;file&gt;   text file to stream to avro source (default: std input)  </span><br><span class=\"line\">  --headerFile,-R &lt;file&gt; File containing event headers as key&#x2F;value pairs on each new line  </span><br><span class=\"line\">  --help,-h              display help text  </span><br><span class=\"line\">  </span><br><span class=\"line\">  Either --rpcProps or both --host and --port must be specified.  </span><br><span class=\"line\">  </span><br><span class=\"line\">Note that if &lt;conf&gt; directory is specified, then it is always included first  </span><br><span class=\"line\">in the classpath. </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"命令\"><a href=\"#命令\" class=\"headerlink\" title=\"命令\"></a>命令</h4><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>help</td>\n<td>打印帮助信息</td>\n</tr>\n<tr>\n<td>agent</td>\n<td>运行一个Flume Agent</td>\n</tr>\n<tr>\n<td>avro-client</td>\n<td>运行一个Avro Flume 客户端</td>\n</tr>\n<tr>\n<td>version</td>\n<td>显示Flume版本。</td>\n</tr>\n</tbody></table>\n<h4 id=\"全局选项\"><a href=\"#全局选项\" class=\"headerlink\" title=\"全局选项\"></a>全局选项</h4><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>–conf,-c <conf></td>\n<td>在<conf>目录使用配置文件。指定配置文件放在什么目录</td>\n</tr>\n<tr>\n<td>–classpath,-C <cp></td>\n<td>追加一个classpath</td>\n</tr>\n<tr>\n<td>–dryrun,-d</td>\n<td>不真正运行Agent，而只是打印命令一些信息。</td>\n</tr>\n<tr>\n<td>–plugins-path <dirs></td>\n<td>插件目录列表。默认：$FLUME_HOME/plugins.d</td>\n</tr>\n<tr>\n<td>-Dproperty=value</td>\n<td>设置一个JAVA系统属性值。</td>\n</tr>\n<tr>\n<td>-Xproperty=value</td>\n<td>设置一个JAVA -X的选项。</td>\n</tr>\n</tbody></table>\n<h4 id=\"Agent选项\"><a href=\"#Agent选项\" class=\"headerlink\" title=\"Agent选项\"></a>Agent选项</h4><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>–conf-file,-f <file></td>\n<td>指定配置文件，这个配置文件必须在<strong>全局选项</strong>的–conf参数定义的目录下。（必填）</td>\n</tr>\n<tr>\n<td>–name,-n <name></td>\n<td>Agent的名称（必填）</td>\n</tr>\n<tr>\n<td>–help,-h</td>\n<td>帮助</td>\n</tr>\n</tbody></table>\n<h4 id=\"Avro客户端选项\"><a href=\"#Avro客户端选项\" class=\"headerlink\" title=\"Avro客户端选项\"></a>Avro客户端选项</h4><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>–rpcProps,-P <file></td>\n<td>连接参数的配置文件。</td>\n</tr>\n<tr>\n<td>–host,-H <host></td>\n<td>Event所要发送到的Hostname。</td>\n</tr>\n<tr>\n<td>–port,-p <port></td>\n<td>Avro Source的端口。</td>\n</tr>\n<tr>\n<td>–dirname <dir></td>\n<td>Avro Source流到达的目录。</td>\n</tr>\n<tr>\n<td>–filename,-F <file></td>\n<td>Avro Source流到达的文件名。</td>\n</tr>\n<tr>\n<td>–headerFile,-R <file></td>\n<td>设置一个JAVA -X的选项。</td>\n</tr>\n</tbody></table>\n<p>启动Avro客户端要么指定–rpcProps，要么指定–host和–port。</p>\n<h3 id=\"启动脚本\"><a href=\"#启动脚本\" class=\"headerlink\" title=\"启动脚本\"></a>启动脚本</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!&#x2F;bin&#x2F;bash</span><br><span class=\"line\">if [ ! -d &quot;&#x2F;data&#x2F;&quot; ];then</span><br><span class=\"line\">mkdir &#x2F;var&#x2F;log&#x2F;flume&#x2F;</span><br><span class=\"line\">fi</span><br><span class=\"line\">name&#x3D;$2</span><br><span class=\"line\">conf&#x3D;$1</span><br><span class=\"line\">dir&#x3D;&#96;find &#x2F; -name &quot;flume&quot; | awk -F &quot;docs&quot; &#39;NR&#x3D;&#x3D;1&#123;print $1&quot;conf&quot;&#125;&#39;&#96;</span><br><span class=\"line\">confdir&#x3D;$dir&quot;conf&quot;</span><br><span class=\"line\">cmd&#x3D;$dir&quot;bin&#x2F;flume-ng&quot;</span><br><span class=\"line\">nohup $cmd agent --conf $confdir -f conf&#x2F;$conf -Dflume.root.logger&#x3D;DEBUG,console -n $name  &gt; &#x2F;var&#x2F;log&#x2F;flume&#x2F;flume.out 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"停止脚本\"><a href=\"#停止脚本\" class=\"headerlink\" title=\"停止脚本\"></a>停止脚本</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!&#x2F;bin&#x2F;bash</span><br><span class=\"line\">kill -9 $(lsof -i:12306 | awk &#39;&#123;print $2&#125;&#39; | tail -n 1)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"报错\"><a href=\"#报错\" class=\"headerlink\" title=\"报错\"></a>报错</h3><h4 id=\"文件名相同，导致flume停止\"><a href=\"#文件名相同，导致flume停止\" class=\"headerlink\" title=\"文件名相同，导致flume停止\"></a>文件名相同，导致flume停止</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">File name has been re-used with different files. Spooling assumptions violated for &#x2F;data&#x2F;yfanglog&#x2F;host-manager.2018-04-17.log.COMPLETED</span><br></pre></td></tr></table></figure>\n\n<p>这种情况下后进来的 host-manager.2018-04-17.log，在flume读取完成后会对其进行重命名，但是该文件名已经被占用了，flume就会抛出如下的异常信息,停止处理该监控目录下的其他文件。</p>\n<p>跟踪抛出异常的源码，SpoolDirectorySource 会启动一个线程轮询监控目录下的目标文件，当读取完该文件(readEvents)之后会对该文件进行重名(rollCurrentFile)，当重命名失败时会抛出IllegalStateException，被SpoolDirectoryRunnable catch重新抛出RuntimeException，导致当前线程退出，从源码看SpoolDirectoryRunnable 是单线程执行的，因此线程结束后，监控目录下其他文件不再被处理</p>\n<p>现在基本清楚了异常栈的调用逻辑，那么和前面自定义解析器一样，我们可以重写ReliableSpoolingFileEventReader以及SpoolDirectorySource的相关实现,也就是自定义一个spooling source，在rollCurrentFile()重命名失败时，做些处理措施，比如将该文件重新命名为access_2015_10_01_16_30.log(2).COMPLETED(此时文件内容已经读取完毕了)继续处理(注意要是.COMPLETED结尾，不然flume会再次读取该文件)。</p>\n"},{"title":"gcc 升级","date":"2020-09-21T08:34:00.000Z","_content":"\n```\ngcc -v\n\n使用内建 specs。\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/4.8.5/lto-wrapper\n目标：x86_64-redhat-linux\n配置为：../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --disable-libgcj --with-isl=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/isl-install --with-cloog=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/cloog-install --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linux\n线程模型：posix\ngcc 版本 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC)\n```\n\n**安装\\**RHEL/C\\*\\*entos\\*\\*7\\**默认的开发工具，包含gcc，g++,make等等一系列工具**\n\n```\nyum groupinstall \"Development Tools\"\n```\n\n**查看默认动态库：** \n\n```\nstrings /usr/lib64/libstdc++.so.6 | grep GLIBC\n\nGLIBCXX_3.4\nGLIBCXX_3.4.1\nGLIBCXX_3.4.2\nGLIBCXX_3.4.3\nGLIBCXX_3.4.4\nGLIBCXX_3.4.5\nGLIBCXX_3.4.6\nGLIBCXX_3.4.7\nGLIBCXX_3.4.8\nGLIBCXX_3.4.9\nGLIBCXX_3.4.10\nGLIBCXX_3.4.11\nGLIBCXX_3.4.12\nGLIBCXX_3.4.13\nGLIBCXX_3.4.14\nGLIBCXX_3.4.15\nGLIBCXX_3.4.16\nGLIBCXX_3.4.17\nGLIBCXX_3.4.18\nGLIBCXX_3.4.19\nGLIBC_2.3\nGLIBC_2.2.5\nGLIBC_2.14\nGLIBC_2.4\nGLIBC_2.3.2\nGLIBCXX_DEBUG_MESSAGE_LENGTH\n\n```\n\n**获取安装包并解压：**\n\n```\nhttp://ftp.gnu.org/gnu/gcc/\n```\n\n**安装gcc的依赖软件，gcc的软件包内提供了自动下载需要软件的脚本\\**./contrib/download_prerequisites\\****   这个过程会持续很久，根据网络情况\n\n```\n./contrib/download_prerequisites\n\n\n2020-05-15 10:48:52 URL: ftp://gcc.gnu.org/pub/gcc/infrastructure/gmp-6.1.0.tar.bz2 [2383840] -> \"./gmp-6.1.0.tar.bz2\" [1]\n2020-05-15 10:50:14 URL: ftp://gcc.gnu.org/pub/gcc/infrastructure/mpfr-3.1.4.tar.bz2 [1279284] -> \"./mpfr-3.1.4.tar.bz2\" [1]\n2020-05-15 10:50:52 URL: ftp://gcc.gnu.org/pub/gcc/infrastructure/mpc-1.0.3.tar.gz [669925] -> \"./mpc-1.0.3.tar.gz\" [1]\n2020-05-15 10:53:09 URL: ftp://gcc.gnu.org/pub/gcc/infrastructure/isl-0.18.tar.bz2 [1658291] -> \"./isl-0.18.tar.bz2\" [1]\ngmp-6.1.0.tar.bz2: 确定\nmpfr-3.1.4.tar.bz2: 确定\nmpc-1.0.3.tar.gz: 确定\nisl-0.18.tar.bz2: 确定\nAll prerequisites downloaded successfully.\n\n```\n\n**生成Makefile文件**\n\n```\n./configure --prefix=/usr/local -enable-checking=release -enable-languages=c,c++ -disable-multilib\n\n```\n\n**编译gcc**\n\n```\nmake -j4    #多核电脑可以添加 “-j4” ：make对多核处理器的优化选项，此步骤非常耗时\n\nls /usr/local/bin | grep gcc\n```\n\n**安装gcc**\n\n```\n make install\n```\n\n**配置gcc**\n\n```\ncd ~\nfind /usr/local/src/gcc-9.2.0/ -name \"libstdc++.so*\"\n\n/usr/local/src/gcc-9.2.0/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.24\n/usr/local/src/gcc-9.2.0/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6\n/usr/local/src/gcc-9.2.0/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so\n/usr/local/src/gcc-9.2.0/prev-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.24\n/usr/local/src/gcc-9.2.0/prev-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6\n/usr/local/src/gcc-9.2.0/prev-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so\n/usr/local/src/gcc-9.2.0/x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.24\n/usr/local/src/gcc-9.2.0/x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6\n/usr/local/src/gcc-9.2.0/x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so\n\ncd /usr/lib64\ncp /usr/local/src/gcc-9.2.0/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.27 .\nmv libstdc++.so.6 libstdc++.so.6.old\nln -sv libstdc++.so.6.0.27 libstdc++.so.6\n\"libstdc++.so.6\" -> \"libstdc++.so.6.0.27\"\n```\n\n\n\n重启系统\n\n```\nreboot\n\n\n\ngcc -v\n\n```\n\n","source":"_posts/gcc升级.md","raw":"---\ntitle: gcc 升级\ndate: 2020-09-21 16:34\ncategories:\n- gcc\ntags:\n- gcc\n- linux\n---\n\n```\ngcc -v\n\n使用内建 specs。\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/4.8.5/lto-wrapper\n目标：x86_64-redhat-linux\n配置为：../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --disable-libgcj --with-isl=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/isl-install --with-cloog=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/cloog-install --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linux\n线程模型：posix\ngcc 版本 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC)\n```\n\n**安装\\**RHEL/C\\*\\*entos\\*\\*7\\**默认的开发工具，包含gcc，g++,make等等一系列工具**\n\n```\nyum groupinstall \"Development Tools\"\n```\n\n**查看默认动态库：** \n\n```\nstrings /usr/lib64/libstdc++.so.6 | grep GLIBC\n\nGLIBCXX_3.4\nGLIBCXX_3.4.1\nGLIBCXX_3.4.2\nGLIBCXX_3.4.3\nGLIBCXX_3.4.4\nGLIBCXX_3.4.5\nGLIBCXX_3.4.6\nGLIBCXX_3.4.7\nGLIBCXX_3.4.8\nGLIBCXX_3.4.9\nGLIBCXX_3.4.10\nGLIBCXX_3.4.11\nGLIBCXX_3.4.12\nGLIBCXX_3.4.13\nGLIBCXX_3.4.14\nGLIBCXX_3.4.15\nGLIBCXX_3.4.16\nGLIBCXX_3.4.17\nGLIBCXX_3.4.18\nGLIBCXX_3.4.19\nGLIBC_2.3\nGLIBC_2.2.5\nGLIBC_2.14\nGLIBC_2.4\nGLIBC_2.3.2\nGLIBCXX_DEBUG_MESSAGE_LENGTH\n\n```\n\n**获取安装包并解压：**\n\n```\nhttp://ftp.gnu.org/gnu/gcc/\n```\n\n**安装gcc的依赖软件，gcc的软件包内提供了自动下载需要软件的脚本\\**./contrib/download_prerequisites\\****   这个过程会持续很久，根据网络情况\n\n```\n./contrib/download_prerequisites\n\n\n2020-05-15 10:48:52 URL: ftp://gcc.gnu.org/pub/gcc/infrastructure/gmp-6.1.0.tar.bz2 [2383840] -> \"./gmp-6.1.0.tar.bz2\" [1]\n2020-05-15 10:50:14 URL: ftp://gcc.gnu.org/pub/gcc/infrastructure/mpfr-3.1.4.tar.bz2 [1279284] -> \"./mpfr-3.1.4.tar.bz2\" [1]\n2020-05-15 10:50:52 URL: ftp://gcc.gnu.org/pub/gcc/infrastructure/mpc-1.0.3.tar.gz [669925] -> \"./mpc-1.0.3.tar.gz\" [1]\n2020-05-15 10:53:09 URL: ftp://gcc.gnu.org/pub/gcc/infrastructure/isl-0.18.tar.bz2 [1658291] -> \"./isl-0.18.tar.bz2\" [1]\ngmp-6.1.0.tar.bz2: 确定\nmpfr-3.1.4.tar.bz2: 确定\nmpc-1.0.3.tar.gz: 确定\nisl-0.18.tar.bz2: 确定\nAll prerequisites downloaded successfully.\n\n```\n\n**生成Makefile文件**\n\n```\n./configure --prefix=/usr/local -enable-checking=release -enable-languages=c,c++ -disable-multilib\n\n```\n\n**编译gcc**\n\n```\nmake -j4    #多核电脑可以添加 “-j4” ：make对多核处理器的优化选项，此步骤非常耗时\n\nls /usr/local/bin | grep gcc\n```\n\n**安装gcc**\n\n```\n make install\n```\n\n**配置gcc**\n\n```\ncd ~\nfind /usr/local/src/gcc-9.2.0/ -name \"libstdc++.so*\"\n\n/usr/local/src/gcc-9.2.0/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.24\n/usr/local/src/gcc-9.2.0/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6\n/usr/local/src/gcc-9.2.0/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so\n/usr/local/src/gcc-9.2.0/prev-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.24\n/usr/local/src/gcc-9.2.0/prev-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6\n/usr/local/src/gcc-9.2.0/prev-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so\n/usr/local/src/gcc-9.2.0/x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.24\n/usr/local/src/gcc-9.2.0/x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6\n/usr/local/src/gcc-9.2.0/x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so\n\ncd /usr/lib64\ncp /usr/local/src/gcc-9.2.0/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.27 .\nmv libstdc++.so.6 libstdc++.so.6.old\nln -sv libstdc++.so.6.0.27 libstdc++.so.6\n\"libstdc++.so.6\" -> \"libstdc++.so.6.0.27\"\n```\n\n\n\n重启系统\n\n```\nreboot\n\n\n\ngcc -v\n\n```\n\n","slug":"gcc升级","published":1,"updated":"2021-01-27T08:20:35.748Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h20000iq0us9rcnea4e","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gcc -v</span><br><span class=\"line\"></span><br><span class=\"line\">使用内建 specs。</span><br><span class=\"line\">COLLECT_GCC&#x3D;gcc</span><br><span class=\"line\">COLLECT_LTO_WRAPPER&#x3D;&#x2F;usr&#x2F;libexec&#x2F;gcc&#x2F;x86_64-redhat-linux&#x2F;4.8.5&#x2F;lto-wrapper</span><br><span class=\"line\">目标：x86_64-redhat-linux</span><br><span class=\"line\">配置为：..&#x2F;configure --prefix&#x3D;&#x2F;usr --mandir&#x3D;&#x2F;usr&#x2F;share&#x2F;man --infodir&#x3D;&#x2F;usr&#x2F;share&#x2F;info --with-bugurl&#x3D;http:&#x2F;&#x2F;bugzilla.redhat.com&#x2F;bugzilla --enable-bootstrap --enable-shared --enable-threads&#x3D;posix --enable-checking&#x3D;release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style&#x3D;gnu --enable-languages&#x3D;c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --disable-libgcj --with-isl&#x3D;&#x2F;builddir&#x2F;build&#x2F;BUILD&#x2F;gcc-4.8.5-20150702&#x2F;obj-x86_64-redhat-linux&#x2F;isl-install --with-cloog&#x3D;&#x2F;builddir&#x2F;build&#x2F;BUILD&#x2F;gcc-4.8.5-20150702&#x2F;obj-x86_64-redhat-linux&#x2F;cloog-install --enable-gnu-indirect-function --with-tune&#x3D;generic --with-arch_32&#x3D;x86-64 --build&#x3D;x86_64-redhat-linux</span><br><span class=\"line\">线程模型：posix</span><br><span class=\"line\">gcc 版本 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC)</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装\\</strong>RHEL/C**entos**7**默认的开发工具，包含gcc，g++,make等等一系列工具**</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum groupinstall &quot;Development Tools&quot;</span><br></pre></td></tr></table></figure>\n\n<p><strong>查看默认动态库：</strong> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">strings &#x2F;usr&#x2F;lib64&#x2F;libstdc++.so.6 | grep GLIBC</span><br><span class=\"line\"></span><br><span class=\"line\">GLIBCXX_3.4</span><br><span class=\"line\">GLIBCXX_3.4.1</span><br><span class=\"line\">GLIBCXX_3.4.2</span><br><span class=\"line\">GLIBCXX_3.4.3</span><br><span class=\"line\">GLIBCXX_3.4.4</span><br><span class=\"line\">GLIBCXX_3.4.5</span><br><span class=\"line\">GLIBCXX_3.4.6</span><br><span class=\"line\">GLIBCXX_3.4.7</span><br><span class=\"line\">GLIBCXX_3.4.8</span><br><span class=\"line\">GLIBCXX_3.4.9</span><br><span class=\"line\">GLIBCXX_3.4.10</span><br><span class=\"line\">GLIBCXX_3.4.11</span><br><span class=\"line\">GLIBCXX_3.4.12</span><br><span class=\"line\">GLIBCXX_3.4.13</span><br><span class=\"line\">GLIBCXX_3.4.14</span><br><span class=\"line\">GLIBCXX_3.4.15</span><br><span class=\"line\">GLIBCXX_3.4.16</span><br><span class=\"line\">GLIBCXX_3.4.17</span><br><span class=\"line\">GLIBCXX_3.4.18</span><br><span class=\"line\">GLIBCXX_3.4.19</span><br><span class=\"line\">GLIBC_2.3</span><br><span class=\"line\">GLIBC_2.2.5</span><br><span class=\"line\">GLIBC_2.14</span><br><span class=\"line\">GLIBC_2.4</span><br><span class=\"line\">GLIBC_2.3.2</span><br><span class=\"line\">GLIBCXX_DEBUG_MESSAGE_LENGTH</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>获取安装包并解压：</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:&#x2F;&#x2F;ftp.gnu.org&#x2F;gnu&#x2F;gcc&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装gcc的依赖软件，gcc的软件包内提供了自动下载需要软件的脚本\\</strong>./contrib/download_prerequisites****   这个过程会持续很久，根据网络情况</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;contrib&#x2F;download_prerequisites</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">2020-05-15 10:48:52 URL: ftp:&#x2F;&#x2F;gcc.gnu.org&#x2F;pub&#x2F;gcc&#x2F;infrastructure&#x2F;gmp-6.1.0.tar.bz2 [2383840] -&gt; &quot;.&#x2F;gmp-6.1.0.tar.bz2&quot; [1]</span><br><span class=\"line\">2020-05-15 10:50:14 URL: ftp:&#x2F;&#x2F;gcc.gnu.org&#x2F;pub&#x2F;gcc&#x2F;infrastructure&#x2F;mpfr-3.1.4.tar.bz2 [1279284] -&gt; &quot;.&#x2F;mpfr-3.1.4.tar.bz2&quot; [1]</span><br><span class=\"line\">2020-05-15 10:50:52 URL: ftp:&#x2F;&#x2F;gcc.gnu.org&#x2F;pub&#x2F;gcc&#x2F;infrastructure&#x2F;mpc-1.0.3.tar.gz [669925] -&gt; &quot;.&#x2F;mpc-1.0.3.tar.gz&quot; [1]</span><br><span class=\"line\">2020-05-15 10:53:09 URL: ftp:&#x2F;&#x2F;gcc.gnu.org&#x2F;pub&#x2F;gcc&#x2F;infrastructure&#x2F;isl-0.18.tar.bz2 [1658291] -&gt; &quot;.&#x2F;isl-0.18.tar.bz2&quot; [1]</span><br><span class=\"line\">gmp-6.1.0.tar.bz2: 确定</span><br><span class=\"line\">mpfr-3.1.4.tar.bz2: 确定</span><br><span class=\"line\">mpc-1.0.3.tar.gz: 确定</span><br><span class=\"line\">isl-0.18.tar.bz2: 确定</span><br><span class=\"line\">All prerequisites downloaded successfully.</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>生成Makefile文件</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local -enable-checking&#x3D;release -enable-languages&#x3D;c,c++ -disable-multilib</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>编译gcc</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make -j4    #多核电脑可以添加 “-j4” ：make对多核处理器的优化选项，此步骤非常耗时</span><br><span class=\"line\"></span><br><span class=\"line\">ls &#x2F;usr&#x2F;local&#x2F;bin | grep gcc</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装gcc</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n<p><strong>配置gcc</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~</span><br><span class=\"line\">find &#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F; -name &quot;libstdc++.so*&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;stage1-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6.0.24</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;stage1-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;stage1-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;prev-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6.0.24</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;prev-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;prev-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6.0.24</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so</span><br><span class=\"line\"></span><br><span class=\"line\">cd &#x2F;usr&#x2F;lib64</span><br><span class=\"line\">cp &#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;stage1-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6.0.27 .</span><br><span class=\"line\">mv libstdc++.so.6 libstdc++.so.6.old</span><br><span class=\"line\">ln -sv libstdc++.so.6.0.27 libstdc++.so.6</span><br><span class=\"line\">&quot;libstdc++.so.6&quot; -&gt; &quot;libstdc++.so.6.0.27&quot;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>重启系统</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reboot</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">gcc -v</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gcc -v</span><br><span class=\"line\"></span><br><span class=\"line\">使用内建 specs。</span><br><span class=\"line\">COLLECT_GCC&#x3D;gcc</span><br><span class=\"line\">COLLECT_LTO_WRAPPER&#x3D;&#x2F;usr&#x2F;libexec&#x2F;gcc&#x2F;x86_64-redhat-linux&#x2F;4.8.5&#x2F;lto-wrapper</span><br><span class=\"line\">目标：x86_64-redhat-linux</span><br><span class=\"line\">配置为：..&#x2F;configure --prefix&#x3D;&#x2F;usr --mandir&#x3D;&#x2F;usr&#x2F;share&#x2F;man --infodir&#x3D;&#x2F;usr&#x2F;share&#x2F;info --with-bugurl&#x3D;http:&#x2F;&#x2F;bugzilla.redhat.com&#x2F;bugzilla --enable-bootstrap --enable-shared --enable-threads&#x3D;posix --enable-checking&#x3D;release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style&#x3D;gnu --enable-languages&#x3D;c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --disable-libgcj --with-isl&#x3D;&#x2F;builddir&#x2F;build&#x2F;BUILD&#x2F;gcc-4.8.5-20150702&#x2F;obj-x86_64-redhat-linux&#x2F;isl-install --with-cloog&#x3D;&#x2F;builddir&#x2F;build&#x2F;BUILD&#x2F;gcc-4.8.5-20150702&#x2F;obj-x86_64-redhat-linux&#x2F;cloog-install --enable-gnu-indirect-function --with-tune&#x3D;generic --with-arch_32&#x3D;x86-64 --build&#x3D;x86_64-redhat-linux</span><br><span class=\"line\">线程模型：posix</span><br><span class=\"line\">gcc 版本 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC)</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装\\</strong>RHEL/C**entos**7**默认的开发工具，包含gcc，g++,make等等一系列工具**</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum groupinstall &quot;Development Tools&quot;</span><br></pre></td></tr></table></figure>\n\n<p><strong>查看默认动态库：</strong> </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">strings &#x2F;usr&#x2F;lib64&#x2F;libstdc++.so.6 | grep GLIBC</span><br><span class=\"line\"></span><br><span class=\"line\">GLIBCXX_3.4</span><br><span class=\"line\">GLIBCXX_3.4.1</span><br><span class=\"line\">GLIBCXX_3.4.2</span><br><span class=\"line\">GLIBCXX_3.4.3</span><br><span class=\"line\">GLIBCXX_3.4.4</span><br><span class=\"line\">GLIBCXX_3.4.5</span><br><span class=\"line\">GLIBCXX_3.4.6</span><br><span class=\"line\">GLIBCXX_3.4.7</span><br><span class=\"line\">GLIBCXX_3.4.8</span><br><span class=\"line\">GLIBCXX_3.4.9</span><br><span class=\"line\">GLIBCXX_3.4.10</span><br><span class=\"line\">GLIBCXX_3.4.11</span><br><span class=\"line\">GLIBCXX_3.4.12</span><br><span class=\"line\">GLIBCXX_3.4.13</span><br><span class=\"line\">GLIBCXX_3.4.14</span><br><span class=\"line\">GLIBCXX_3.4.15</span><br><span class=\"line\">GLIBCXX_3.4.16</span><br><span class=\"line\">GLIBCXX_3.4.17</span><br><span class=\"line\">GLIBCXX_3.4.18</span><br><span class=\"line\">GLIBCXX_3.4.19</span><br><span class=\"line\">GLIBC_2.3</span><br><span class=\"line\">GLIBC_2.2.5</span><br><span class=\"line\">GLIBC_2.14</span><br><span class=\"line\">GLIBC_2.4</span><br><span class=\"line\">GLIBC_2.3.2</span><br><span class=\"line\">GLIBCXX_DEBUG_MESSAGE_LENGTH</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>获取安装包并解压：</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:&#x2F;&#x2F;ftp.gnu.org&#x2F;gnu&#x2F;gcc&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装gcc的依赖软件，gcc的软件包内提供了自动下载需要软件的脚本\\</strong>./contrib/download_prerequisites****   这个过程会持续很久，根据网络情况</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;contrib&#x2F;download_prerequisites</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">2020-05-15 10:48:52 URL: ftp:&#x2F;&#x2F;gcc.gnu.org&#x2F;pub&#x2F;gcc&#x2F;infrastructure&#x2F;gmp-6.1.0.tar.bz2 [2383840] -&gt; &quot;.&#x2F;gmp-6.1.0.tar.bz2&quot; [1]</span><br><span class=\"line\">2020-05-15 10:50:14 URL: ftp:&#x2F;&#x2F;gcc.gnu.org&#x2F;pub&#x2F;gcc&#x2F;infrastructure&#x2F;mpfr-3.1.4.tar.bz2 [1279284] -&gt; &quot;.&#x2F;mpfr-3.1.4.tar.bz2&quot; [1]</span><br><span class=\"line\">2020-05-15 10:50:52 URL: ftp:&#x2F;&#x2F;gcc.gnu.org&#x2F;pub&#x2F;gcc&#x2F;infrastructure&#x2F;mpc-1.0.3.tar.gz [669925] -&gt; &quot;.&#x2F;mpc-1.0.3.tar.gz&quot; [1]</span><br><span class=\"line\">2020-05-15 10:53:09 URL: ftp:&#x2F;&#x2F;gcc.gnu.org&#x2F;pub&#x2F;gcc&#x2F;infrastructure&#x2F;isl-0.18.tar.bz2 [1658291] -&gt; &quot;.&#x2F;isl-0.18.tar.bz2&quot; [1]</span><br><span class=\"line\">gmp-6.1.0.tar.bz2: 确定</span><br><span class=\"line\">mpfr-3.1.4.tar.bz2: 确定</span><br><span class=\"line\">mpc-1.0.3.tar.gz: 确定</span><br><span class=\"line\">isl-0.18.tar.bz2: 确定</span><br><span class=\"line\">All prerequisites downloaded successfully.</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>生成Makefile文件</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local -enable-checking&#x3D;release -enable-languages&#x3D;c,c++ -disable-multilib</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>编译gcc</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make -j4    #多核电脑可以添加 “-j4” ：make对多核处理器的优化选项，此步骤非常耗时</span><br><span class=\"line\"></span><br><span class=\"line\">ls &#x2F;usr&#x2F;local&#x2F;bin | grep gcc</span><br></pre></td></tr></table></figure>\n\n<p><strong>安装gcc</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n<p><strong>配置gcc</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~</span><br><span class=\"line\">find &#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F; -name &quot;libstdc++.so*&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;stage1-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6.0.24</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;stage1-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;stage1-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;prev-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6.0.24</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;prev-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;prev-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6.0.24</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6</span><br><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so</span><br><span class=\"line\"></span><br><span class=\"line\">cd &#x2F;usr&#x2F;lib64</span><br><span class=\"line\">cp &#x2F;usr&#x2F;local&#x2F;src&#x2F;gcc-9.2.0&#x2F;stage1-x86_64-pc-linux-gnu&#x2F;libstdc++-v3&#x2F;src&#x2F;.libs&#x2F;libstdc++.so.6.0.27 .</span><br><span class=\"line\">mv libstdc++.so.6 libstdc++.so.6.old</span><br><span class=\"line\">ln -sv libstdc++.so.6.0.27 libstdc++.so.6</span><br><span class=\"line\">&quot;libstdc++.so.6&quot; -&gt; &quot;libstdc++.so.6.0.27&quot;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>重启系统</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reboot</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">gcc -v</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n"},{"title":"Flume安装","date":"2019-12-13T06:00:00.000Z","_content":"### 准备 flume\n\n安装jdk\n\n官方文档\n\n`http://flume.apache.org/FlumeUserGuide.html`\n\n下载地址\n\n```\nhttp://mirrors.tuna.tsinghua.edu.cn/apache/flume/1.8.0/apache-flume-1.8.0-bin.tar.gz\n\nhttp://mirrors.hust.edu.cn/apache/flume/1.8.0/apache-flume-1.8.0-bin.tar.gz \n\nhttp://mirrors.shu.edu.cn/apache/flume/1.8.0/apache-flume-1.8.0-bin.tar.gz \n\nhttp://mirrors.tuna.tsinghua.edu.cn/apache/flume/1.8.0/apache-flume-1.8.0-bin.tar.gz \n```\n\n修改hosts\n\n`vim /etc/hots`\n\n```\n192.168.1.12 node1\n192.168.1.12 node2\n192.168.1.12 node3\n```\n\n\n\n准备目录\n\n```\nmkdir -p /data/{aboutyunlog,flume_data/{checkpoint,data,log}}\n```\n\n\n\n### 安装flume\n\n```\ncd /usr/local/\ntar xf  apache-flume-1.8.0-bin.tar.gz \ncd  apache-flume-1.8.0-bin\n```\n\n### 修改配置文件\n\n```\n# set source\na1.sources.source1.type = spooldir\na1.sources.source1.spoolDir=/data/aboutyunlog\na1sources.source1.fileHeader = flase\n\n# set sink\na1.sinks.sink1.channel = channel1\na1.sinks.sink1.type = org.apache.flume.sink.kafka.KafkaSink\na1.sinks.sink1.kafka.topic = aboutyunlog\na1.sinks.sink1.kafka.bootstrap.servers = 192.168.1.12:9091,192.168.1.12:9092,192.168.1.12:9093\na1.sinks.sink1.kafka.flumeBatchSize = 20\na1.sinks.sink1.kafka.producer.acks = 1\na1.sinks.sink1.kafka.producer.linger.ms = 1\na1.sinks.sink1.kafka.producer.compression.type = snappy\n\n# set channel\na1.channels.channel1.type = file\na1.channels.channel1.checkpointDir = /data/flume_data/checkpoint\na1.channels.channel1.dataDirs= /data/flume_data/data\n\n# bind\na1.sources.source1.channels = channel1\na1.sinks.sink1.channel = channel1\n```\n\n### 启动 fulme\n\n```\nflume-ng agent --conf-file /usr/local/apache-flume-1.8.0-bin/conf/single_agent.conf --name a1 -Dflume.root.logger=INFO,console\n```\n\n### 测试\n\n在kafka上创建名为aboutyunlog的topic\n\n```\nkafka-topics.sh --zookeeper master:2181,slave1:2181,slave2:2181 --create --topic aboutyunlog --replication-factor 1 --partitions 3\n```\n\n启动flume\n\n```\nflume-ng agent --conf-file /usr/local/apache-flume-1.8.0-bin/conf/single_agent.conf --name a1 -Dflume.root.logger=INFO,console\n```\n\n创建一个kafka的consumer\n\nflume启动其实是启动了产生着，所以这里创建一个消费者。那么这个消费者创建到什么地方。\n\n我这里创建在node1 上。\n\n```\n/usr/local/kafka/kafka03/bin/kafka-console-consumer.sh --zookeeper node1:2181 --topic aboutyunlog --from-beginning\n```\n\n添加文件到flume source目录\n\n```\necho -e \"this is a test file! \\nhttp://www.aboutyun.com\\n20170710\">log.1\nmv log.1 /data/aboutyunlog/\n```\n\n在node1 上收到\n\n```\nthis is a test file! 666 \nhttp://www.aboutyun.com\n20170710\n\n```\n\n\n\n### supervisor 管理flume\n\n```\n[program:flume]  \ncommand=/usr/local/apache-flume-1.8.0-bin/bin/flume-ng agent --conf /usr/local/apache-flume-1.8.0-bin/conf --conf-file /usr/local/apache-flume-1.8.0-bin/conf/single_agent.conf  --name a1 -Dflume.root.logger=INFO,console   \ndirectory=/usr/local/apache-flume-1.8.0-bin  \nautostart = false\nautorestart = false\nredirect_stderr=true\nstdout_logfile=/data/flume_data/log/flume_dir.log\nstdout_logfile_maxbytes=100MB  \nstdout_logfile_backups=10  \n\n```\n\n主要参数说明:\n\n```\ncommand：启动程序使用的命令，可以是绝对路径或者相对路径\nprocess_name：一个python字符串表达式，用来表示supervisor进程启动的这个的名称，默认值是%(program_name)s\nnumprocs：Supervisor启动这个程序的多个实例，如果numprocs>1，则process_name的表达式必须包含%(process_num)s，默认是1\nnumprocs_start：一个int偏移值，当启动实例的时候用来计算numprocs的值\npriority：权重，可以控制程序启动和关闭时的顺序，权重越低：越早启动，越晚关闭。默认值是999\nautostart：如果设置为true，当supervisord启动的时候，进程会自动重启。\nautorestart：值可以是false、true、unexpected。false：进程不会自动重启，unexpected：当程序退出时的退出码不是exitcodes中定义的时，进程会重启，true：进程会无条件重启当退出的时候。\nstartsecs：程序启动后等待多长时间后才认为程序启动成功\nstartretries：supervisord尝试启动一个程序时尝试的次数。默认是3\nexitcodes：一个预期的退出返回码，默认是0,2。\nstopsignal：当收到stop请求的时候，发送信号给程序，默认是TERM信号，也可以是 HUP, INT, QUIT, KILL, USR1, or USR2。\nstopwaitsecs：在操作系统给supervisord发送SIGCHILD信号时等待的时间\nstopasgroup：如果设置为true，则会使supervisor发送停止信号到整个进程组\nkillasgroup：如果设置为true，则在给程序发送SIGKILL信号的时候，会发送到整个进程组，它的子进程也会受到影响。\nuser：如果supervisord以root运行，则会使用这个设置用户启动子程序\nredirect_stderr：如果设置为true，进程则会把标准错误输出到supervisord后台的标准输出文件描述符。\nstdout_logfile：把进程的标准输出写入文件中，如果stdout_logfile没有设置或者设置为AUTO，则supervisor会自动选择一个文件位置。\nstdout_logfile_maxbytes：标准输出log文件达到多少后自动进行轮转，单位是KB、MB、GB。如果设置为0则表示不限制日志文件大小\nstdout_logfile_backups：标准输出日志轮转备份的数量，默认是10，如果设置为0，则不备份\nstdout_capture_maxbytes：当进程处于stderr capture mode模式的时候，写入FIFO队列的最大bytes值，单位可以是KB、MB、GB\nstdout_events_enabled：如果设置为true，当进程在写它的stderr到文件描述符的时候，PROCESS_LOG_STDERR事件会被触发\nstderr_logfile：把进程的错误日志输出一个文件中，除非redirect_stderr参数被设置为true\nstderr_logfile_maxbytes：错误log文件达到多少后自动进行轮转，单位是KB、MB、GB。如果设置为0则表示不限制日志文件大小\nstderr_logfile_backups：错误日志轮转备份的数量，默认是10，如果设置为0，则不备份\nstderr_capture_maxbytes：当进程处于stderr capture mode模式的时候，写入FIFO队列的最大bytes值，单位可以是KB、MB、GB\nstderr_events_enabled：如果设置为true，当进程在写它的stderr到文件描述符的时候，PROCESS_LOG_STDERR事件会被触发\nenvironment：一个k/v对的list列表\ndirectory：supervisord在生成子进程的时候会切换到该目录\numask：设置进程的umask\nserverurl：是否允许子进程和内部的HTTP服务通讯，如果设置为AUTO，supervisor会自动的构造一个url\n```\n\n\n\n","source":"_posts/flume安装.md","raw":"---\ntitle: Flume安装\ndate: 2019-12-13 14:00:00\ncategories: \n- bigdata\ntags:\n- flume\n---\n### 准备 flume\n\n安装jdk\n\n官方文档\n\n`http://flume.apache.org/FlumeUserGuide.html`\n\n下载地址\n\n```\nhttp://mirrors.tuna.tsinghua.edu.cn/apache/flume/1.8.0/apache-flume-1.8.0-bin.tar.gz\n\nhttp://mirrors.hust.edu.cn/apache/flume/1.8.0/apache-flume-1.8.0-bin.tar.gz \n\nhttp://mirrors.shu.edu.cn/apache/flume/1.8.0/apache-flume-1.8.0-bin.tar.gz \n\nhttp://mirrors.tuna.tsinghua.edu.cn/apache/flume/1.8.0/apache-flume-1.8.0-bin.tar.gz \n```\n\n修改hosts\n\n`vim /etc/hots`\n\n```\n192.168.1.12 node1\n192.168.1.12 node2\n192.168.1.12 node3\n```\n\n\n\n准备目录\n\n```\nmkdir -p /data/{aboutyunlog,flume_data/{checkpoint,data,log}}\n```\n\n\n\n### 安装flume\n\n```\ncd /usr/local/\ntar xf  apache-flume-1.8.0-bin.tar.gz \ncd  apache-flume-1.8.0-bin\n```\n\n### 修改配置文件\n\n```\n# set source\na1.sources.source1.type = spooldir\na1.sources.source1.spoolDir=/data/aboutyunlog\na1sources.source1.fileHeader = flase\n\n# set sink\na1.sinks.sink1.channel = channel1\na1.sinks.sink1.type = org.apache.flume.sink.kafka.KafkaSink\na1.sinks.sink1.kafka.topic = aboutyunlog\na1.sinks.sink1.kafka.bootstrap.servers = 192.168.1.12:9091,192.168.1.12:9092,192.168.1.12:9093\na1.sinks.sink1.kafka.flumeBatchSize = 20\na1.sinks.sink1.kafka.producer.acks = 1\na1.sinks.sink1.kafka.producer.linger.ms = 1\na1.sinks.sink1.kafka.producer.compression.type = snappy\n\n# set channel\na1.channels.channel1.type = file\na1.channels.channel1.checkpointDir = /data/flume_data/checkpoint\na1.channels.channel1.dataDirs= /data/flume_data/data\n\n# bind\na1.sources.source1.channels = channel1\na1.sinks.sink1.channel = channel1\n```\n\n### 启动 fulme\n\n```\nflume-ng agent --conf-file /usr/local/apache-flume-1.8.0-bin/conf/single_agent.conf --name a1 -Dflume.root.logger=INFO,console\n```\n\n### 测试\n\n在kafka上创建名为aboutyunlog的topic\n\n```\nkafka-topics.sh --zookeeper master:2181,slave1:2181,slave2:2181 --create --topic aboutyunlog --replication-factor 1 --partitions 3\n```\n\n启动flume\n\n```\nflume-ng agent --conf-file /usr/local/apache-flume-1.8.0-bin/conf/single_agent.conf --name a1 -Dflume.root.logger=INFO,console\n```\n\n创建一个kafka的consumer\n\nflume启动其实是启动了产生着，所以这里创建一个消费者。那么这个消费者创建到什么地方。\n\n我这里创建在node1 上。\n\n```\n/usr/local/kafka/kafka03/bin/kafka-console-consumer.sh --zookeeper node1:2181 --topic aboutyunlog --from-beginning\n```\n\n添加文件到flume source目录\n\n```\necho -e \"this is a test file! \\nhttp://www.aboutyun.com\\n20170710\">log.1\nmv log.1 /data/aboutyunlog/\n```\n\n在node1 上收到\n\n```\nthis is a test file! 666 \nhttp://www.aboutyun.com\n20170710\n\n```\n\n\n\n### supervisor 管理flume\n\n```\n[program:flume]  \ncommand=/usr/local/apache-flume-1.8.0-bin/bin/flume-ng agent --conf /usr/local/apache-flume-1.8.0-bin/conf --conf-file /usr/local/apache-flume-1.8.0-bin/conf/single_agent.conf  --name a1 -Dflume.root.logger=INFO,console   \ndirectory=/usr/local/apache-flume-1.8.0-bin  \nautostart = false\nautorestart = false\nredirect_stderr=true\nstdout_logfile=/data/flume_data/log/flume_dir.log\nstdout_logfile_maxbytes=100MB  \nstdout_logfile_backups=10  \n\n```\n\n主要参数说明:\n\n```\ncommand：启动程序使用的命令，可以是绝对路径或者相对路径\nprocess_name：一个python字符串表达式，用来表示supervisor进程启动的这个的名称，默认值是%(program_name)s\nnumprocs：Supervisor启动这个程序的多个实例，如果numprocs>1，则process_name的表达式必须包含%(process_num)s，默认是1\nnumprocs_start：一个int偏移值，当启动实例的时候用来计算numprocs的值\npriority：权重，可以控制程序启动和关闭时的顺序，权重越低：越早启动，越晚关闭。默认值是999\nautostart：如果设置为true，当supervisord启动的时候，进程会自动重启。\nautorestart：值可以是false、true、unexpected。false：进程不会自动重启，unexpected：当程序退出时的退出码不是exitcodes中定义的时，进程会重启，true：进程会无条件重启当退出的时候。\nstartsecs：程序启动后等待多长时间后才认为程序启动成功\nstartretries：supervisord尝试启动一个程序时尝试的次数。默认是3\nexitcodes：一个预期的退出返回码，默认是0,2。\nstopsignal：当收到stop请求的时候，发送信号给程序，默认是TERM信号，也可以是 HUP, INT, QUIT, KILL, USR1, or USR2。\nstopwaitsecs：在操作系统给supervisord发送SIGCHILD信号时等待的时间\nstopasgroup：如果设置为true，则会使supervisor发送停止信号到整个进程组\nkillasgroup：如果设置为true，则在给程序发送SIGKILL信号的时候，会发送到整个进程组，它的子进程也会受到影响。\nuser：如果supervisord以root运行，则会使用这个设置用户启动子程序\nredirect_stderr：如果设置为true，进程则会把标准错误输出到supervisord后台的标准输出文件描述符。\nstdout_logfile：把进程的标准输出写入文件中，如果stdout_logfile没有设置或者设置为AUTO，则supervisor会自动选择一个文件位置。\nstdout_logfile_maxbytes：标准输出log文件达到多少后自动进行轮转，单位是KB、MB、GB。如果设置为0则表示不限制日志文件大小\nstdout_logfile_backups：标准输出日志轮转备份的数量，默认是10，如果设置为0，则不备份\nstdout_capture_maxbytes：当进程处于stderr capture mode模式的时候，写入FIFO队列的最大bytes值，单位可以是KB、MB、GB\nstdout_events_enabled：如果设置为true，当进程在写它的stderr到文件描述符的时候，PROCESS_LOG_STDERR事件会被触发\nstderr_logfile：把进程的错误日志输出一个文件中，除非redirect_stderr参数被设置为true\nstderr_logfile_maxbytes：错误log文件达到多少后自动进行轮转，单位是KB、MB、GB。如果设置为0则表示不限制日志文件大小\nstderr_logfile_backups：错误日志轮转备份的数量，默认是10，如果设置为0，则不备份\nstderr_capture_maxbytes：当进程处于stderr capture mode模式的时候，写入FIFO队列的最大bytes值，单位可以是KB、MB、GB\nstderr_events_enabled：如果设置为true，当进程在写它的stderr到文件描述符的时候，PROCESS_LOG_STDERR事件会被触发\nenvironment：一个k/v对的list列表\ndirectory：supervisord在生成子进程的时候会切换到该目录\numask：设置进程的umask\nserverurl：是否允许子进程和内部的HTTP服务通讯，如果设置为AUTO，supervisor会自动的构造一个url\n```\n\n\n\n","slug":"flume安装","published":1,"updated":"2021-01-27T08:20:35.746Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h22000mq0us2sh63hvq","content":"<h3 id=\"准备-flume\"><a href=\"#准备-flume\" class=\"headerlink\" title=\"准备 flume\"></a>准备 flume</h3><p>安装jdk</p>\n<p>官方文档</p>\n<p><code>http://flume.apache.org/FlumeUserGuide.html</code></p>\n<p>下载地址</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;flume&#x2F;1.8.0&#x2F;apache-flume-1.8.0-bin.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.hust.edu.cn&#x2F;apache&#x2F;flume&#x2F;1.8.0&#x2F;apache-flume-1.8.0-bin.tar.gz </span><br><span class=\"line\"></span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.shu.edu.cn&#x2F;apache&#x2F;flume&#x2F;1.8.0&#x2F;apache-flume-1.8.0-bin.tar.gz </span><br><span class=\"line\"></span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;flume&#x2F;1.8.0&#x2F;apache-flume-1.8.0-bin.tar.gz </span><br></pre></td></tr></table></figure>\n\n<p>修改hosts</p>\n<p><code>vim /etc/hots</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.1.12 node1</span><br><span class=\"line\">192.168.1.12 node2</span><br><span class=\"line\">192.168.1.12 node3</span><br></pre></td></tr></table></figure>\n\n\n\n<p>准备目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p &#x2F;data&#x2F;&#123;aboutyunlog,flume_data&#x2F;&#123;checkpoint,data,log&#125;&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"安装flume\"><a href=\"#安装flume\" class=\"headerlink\" title=\"安装flume\"></a>安装flume</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;usr&#x2F;local&#x2F;</span><br><span class=\"line\">tar xf  apache-flume-1.8.0-bin.tar.gz </span><br><span class=\"line\">cd  apache-flume-1.8.0-bin</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># set source</span><br><span class=\"line\">a1.sources.source1.type &#x3D; spooldir</span><br><span class=\"line\">a1.sources.source1.spoolDir&#x3D;&#x2F;data&#x2F;aboutyunlog</span><br><span class=\"line\">a1sources.source1.fileHeader &#x3D; flase</span><br><span class=\"line\"></span><br><span class=\"line\"># set sink</span><br><span class=\"line\">a1.sinks.sink1.channel &#x3D; channel1</span><br><span class=\"line\">a1.sinks.sink1.type &#x3D; org.apache.flume.sink.kafka.KafkaSink</span><br><span class=\"line\">a1.sinks.sink1.kafka.topic &#x3D; aboutyunlog</span><br><span class=\"line\">a1.sinks.sink1.kafka.bootstrap.servers &#x3D; 192.168.1.12:9091,192.168.1.12:9092,192.168.1.12:9093</span><br><span class=\"line\">a1.sinks.sink1.kafka.flumeBatchSize &#x3D; 20</span><br><span class=\"line\">a1.sinks.sink1.kafka.producer.acks &#x3D; 1</span><br><span class=\"line\">a1.sinks.sink1.kafka.producer.linger.ms &#x3D; 1</span><br><span class=\"line\">a1.sinks.sink1.kafka.producer.compression.type &#x3D; snappy</span><br><span class=\"line\"></span><br><span class=\"line\"># set channel</span><br><span class=\"line\">a1.channels.channel1.type &#x3D; file</span><br><span class=\"line\">a1.channels.channel1.checkpointDir &#x3D; &#x2F;data&#x2F;flume_data&#x2F;checkpoint</span><br><span class=\"line\">a1.channels.channel1.dataDirs&#x3D; &#x2F;data&#x2F;flume_data&#x2F;data</span><br><span class=\"line\"></span><br><span class=\"line\"># bind</span><br><span class=\"line\">a1.sources.source1.channels &#x3D; channel1</span><br><span class=\"line\">a1.sinks.sink1.channel &#x3D; channel1</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动-fulme\"><a href=\"#启动-fulme\" class=\"headerlink\" title=\"启动 fulme\"></a>启动 fulme</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flume-ng agent --conf-file &#x2F;usr&#x2F;local&#x2F;apache-flume-1.8.0-bin&#x2F;conf&#x2F;single_agent.conf --name a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h3><p>在kafka上创建名为aboutyunlog的topic</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kafka-topics.sh --zookeeper master:2181,slave1:2181,slave2:2181 --create --topic aboutyunlog --replication-factor 1 --partitions 3</span><br></pre></td></tr></table></figure>\n\n<p>启动flume</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flume-ng agent --conf-file &#x2F;usr&#x2F;local&#x2F;apache-flume-1.8.0-bin&#x2F;conf&#x2F;single_agent.conf --name a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n<p>创建一个kafka的consumer</p>\n<p>flume启动其实是启动了产生着，所以这里创建一个消费者。那么这个消费者创建到什么地方。</p>\n<p>我这里创建在node1 上。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;bin&#x2F;kafka-console-consumer.sh --zookeeper node1:2181 --topic aboutyunlog --from-beginning</span><br></pre></td></tr></table></figure>\n\n<p>添加文件到flume source目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo -e &quot;this is a test file! \\nhttp:&#x2F;&#x2F;www.aboutyun.com\\n20170710&quot;&gt;log.1</span><br><span class=\"line\">mv log.1 &#x2F;data&#x2F;aboutyunlog&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>在node1 上收到</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">this is a test file! 666 </span><br><span class=\"line\">http:&#x2F;&#x2F;www.aboutyun.com</span><br><span class=\"line\">20170710</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"supervisor-管理flume\"><a href=\"#supervisor-管理flume\" class=\"headerlink\" title=\"supervisor 管理flume\"></a>supervisor 管理flume</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[program:flume]  </span><br><span class=\"line\">command&#x3D;&#x2F;usr&#x2F;local&#x2F;apache-flume-1.8.0-bin&#x2F;bin&#x2F;flume-ng agent --conf &#x2F;usr&#x2F;local&#x2F;apache-flume-1.8.0-bin&#x2F;conf --conf-file &#x2F;usr&#x2F;local&#x2F;apache-flume-1.8.0-bin&#x2F;conf&#x2F;single_agent.conf  --name a1 -Dflume.root.logger&#x3D;INFO,console   </span><br><span class=\"line\">directory&#x3D;&#x2F;usr&#x2F;local&#x2F;apache-flume-1.8.0-bin  </span><br><span class=\"line\">autostart &#x3D; false</span><br><span class=\"line\">autorestart &#x3D; false</span><br><span class=\"line\">redirect_stderr&#x3D;true</span><br><span class=\"line\">stdout_logfile&#x3D;&#x2F;data&#x2F;flume_data&#x2F;log&#x2F;flume_dir.log</span><br><span class=\"line\">stdout_logfile_maxbytes&#x3D;100MB  </span><br><span class=\"line\">stdout_logfile_backups&#x3D;10  </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>主要参数说明:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">command：启动程序使用的命令，可以是绝对路径或者相对路径</span><br><span class=\"line\">process_name：一个python字符串表达式，用来表示supervisor进程启动的这个的名称，默认值是%(program_name)s</span><br><span class=\"line\">numprocs：Supervisor启动这个程序的多个实例，如果numprocs&gt;1，则process_name的表达式必须包含%(process_num)s，默认是1</span><br><span class=\"line\">numprocs_start：一个int偏移值，当启动实例的时候用来计算numprocs的值</span><br><span class=\"line\">priority：权重，可以控制程序启动和关闭时的顺序，权重越低：越早启动，越晚关闭。默认值是999</span><br><span class=\"line\">autostart：如果设置为true，当supervisord启动的时候，进程会自动重启。</span><br><span class=\"line\">autorestart：值可以是false、true、unexpected。false：进程不会自动重启，unexpected：当程序退出时的退出码不是exitcodes中定义的时，进程会重启，true：进程会无条件重启当退出的时候。</span><br><span class=\"line\">startsecs：程序启动后等待多长时间后才认为程序启动成功</span><br><span class=\"line\">startretries：supervisord尝试启动一个程序时尝试的次数。默认是3</span><br><span class=\"line\">exitcodes：一个预期的退出返回码，默认是0,2。</span><br><span class=\"line\">stopsignal：当收到stop请求的时候，发送信号给程序，默认是TERM信号，也可以是 HUP, INT, QUIT, KILL, USR1, or USR2。</span><br><span class=\"line\">stopwaitsecs：在操作系统给supervisord发送SIGCHILD信号时等待的时间</span><br><span class=\"line\">stopasgroup：如果设置为true，则会使supervisor发送停止信号到整个进程组</span><br><span class=\"line\">killasgroup：如果设置为true，则在给程序发送SIGKILL信号的时候，会发送到整个进程组，它的子进程也会受到影响。</span><br><span class=\"line\">user：如果supervisord以root运行，则会使用这个设置用户启动子程序</span><br><span class=\"line\">redirect_stderr：如果设置为true，进程则会把标准错误输出到supervisord后台的标准输出文件描述符。</span><br><span class=\"line\">stdout_logfile：把进程的标准输出写入文件中，如果stdout_logfile没有设置或者设置为AUTO，则supervisor会自动选择一个文件位置。</span><br><span class=\"line\">stdout_logfile_maxbytes：标准输出log文件达到多少后自动进行轮转，单位是KB、MB、GB。如果设置为0则表示不限制日志文件大小</span><br><span class=\"line\">stdout_logfile_backups：标准输出日志轮转备份的数量，默认是10，如果设置为0，则不备份</span><br><span class=\"line\">stdout_capture_maxbytes：当进程处于stderr capture mode模式的时候，写入FIFO队列的最大bytes值，单位可以是KB、MB、GB</span><br><span class=\"line\">stdout_events_enabled：如果设置为true，当进程在写它的stderr到文件描述符的时候，PROCESS_LOG_STDERR事件会被触发</span><br><span class=\"line\">stderr_logfile：把进程的错误日志输出一个文件中，除非redirect_stderr参数被设置为true</span><br><span class=\"line\">stderr_logfile_maxbytes：错误log文件达到多少后自动进行轮转，单位是KB、MB、GB。如果设置为0则表示不限制日志文件大小</span><br><span class=\"line\">stderr_logfile_backups：错误日志轮转备份的数量，默认是10，如果设置为0，则不备份</span><br><span class=\"line\">stderr_capture_maxbytes：当进程处于stderr capture mode模式的时候，写入FIFO队列的最大bytes值，单位可以是KB、MB、GB</span><br><span class=\"line\">stderr_events_enabled：如果设置为true，当进程在写它的stderr到文件描述符的时候，PROCESS_LOG_STDERR事件会被触发</span><br><span class=\"line\">environment：一个k&#x2F;v对的list列表</span><br><span class=\"line\">directory：supervisord在生成子进程的时候会切换到该目录</span><br><span class=\"line\">umask：设置进程的umask</span><br><span class=\"line\">serverurl：是否允许子进程和内部的HTTP服务通讯，如果设置为AUTO，supervisor会自动的构造一个url</span><br></pre></td></tr></table></figure>\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"准备-flume\"><a href=\"#准备-flume\" class=\"headerlink\" title=\"准备 flume\"></a>准备 flume</h3><p>安装jdk</p>\n<p>官方文档</p>\n<p><code>http://flume.apache.org/FlumeUserGuide.html</code></p>\n<p>下载地址</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;flume&#x2F;1.8.0&#x2F;apache-flume-1.8.0-bin.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.hust.edu.cn&#x2F;apache&#x2F;flume&#x2F;1.8.0&#x2F;apache-flume-1.8.0-bin.tar.gz </span><br><span class=\"line\"></span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.shu.edu.cn&#x2F;apache&#x2F;flume&#x2F;1.8.0&#x2F;apache-flume-1.8.0-bin.tar.gz </span><br><span class=\"line\"></span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;flume&#x2F;1.8.0&#x2F;apache-flume-1.8.0-bin.tar.gz </span><br></pre></td></tr></table></figure>\n\n<p>修改hosts</p>\n<p><code>vim /etc/hots</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.1.12 node1</span><br><span class=\"line\">192.168.1.12 node2</span><br><span class=\"line\">192.168.1.12 node3</span><br></pre></td></tr></table></figure>\n\n\n\n<p>准备目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p &#x2F;data&#x2F;&#123;aboutyunlog,flume_data&#x2F;&#123;checkpoint,data,log&#125;&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"安装flume\"><a href=\"#安装flume\" class=\"headerlink\" title=\"安装flume\"></a>安装flume</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;usr&#x2F;local&#x2F;</span><br><span class=\"line\">tar xf  apache-flume-1.8.0-bin.tar.gz </span><br><span class=\"line\">cd  apache-flume-1.8.0-bin</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># set source</span><br><span class=\"line\">a1.sources.source1.type &#x3D; spooldir</span><br><span class=\"line\">a1.sources.source1.spoolDir&#x3D;&#x2F;data&#x2F;aboutyunlog</span><br><span class=\"line\">a1sources.source1.fileHeader &#x3D; flase</span><br><span class=\"line\"></span><br><span class=\"line\"># set sink</span><br><span class=\"line\">a1.sinks.sink1.channel &#x3D; channel1</span><br><span class=\"line\">a1.sinks.sink1.type &#x3D; org.apache.flume.sink.kafka.KafkaSink</span><br><span class=\"line\">a1.sinks.sink1.kafka.topic &#x3D; aboutyunlog</span><br><span class=\"line\">a1.sinks.sink1.kafka.bootstrap.servers &#x3D; 192.168.1.12:9091,192.168.1.12:9092,192.168.1.12:9093</span><br><span class=\"line\">a1.sinks.sink1.kafka.flumeBatchSize &#x3D; 20</span><br><span class=\"line\">a1.sinks.sink1.kafka.producer.acks &#x3D; 1</span><br><span class=\"line\">a1.sinks.sink1.kafka.producer.linger.ms &#x3D; 1</span><br><span class=\"line\">a1.sinks.sink1.kafka.producer.compression.type &#x3D; snappy</span><br><span class=\"line\"></span><br><span class=\"line\"># set channel</span><br><span class=\"line\">a1.channels.channel1.type &#x3D; file</span><br><span class=\"line\">a1.channels.channel1.checkpointDir &#x3D; &#x2F;data&#x2F;flume_data&#x2F;checkpoint</span><br><span class=\"line\">a1.channels.channel1.dataDirs&#x3D; &#x2F;data&#x2F;flume_data&#x2F;data</span><br><span class=\"line\"></span><br><span class=\"line\"># bind</span><br><span class=\"line\">a1.sources.source1.channels &#x3D; channel1</span><br><span class=\"line\">a1.sinks.sink1.channel &#x3D; channel1</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动-fulme\"><a href=\"#启动-fulme\" class=\"headerlink\" title=\"启动 fulme\"></a>启动 fulme</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flume-ng agent --conf-file &#x2F;usr&#x2F;local&#x2F;apache-flume-1.8.0-bin&#x2F;conf&#x2F;single_agent.conf --name a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h3><p>在kafka上创建名为aboutyunlog的topic</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kafka-topics.sh --zookeeper master:2181,slave1:2181,slave2:2181 --create --topic aboutyunlog --replication-factor 1 --partitions 3</span><br></pre></td></tr></table></figure>\n\n<p>启动flume</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flume-ng agent --conf-file &#x2F;usr&#x2F;local&#x2F;apache-flume-1.8.0-bin&#x2F;conf&#x2F;single_agent.conf --name a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n<p>创建一个kafka的consumer</p>\n<p>flume启动其实是启动了产生着，所以这里创建一个消费者。那么这个消费者创建到什么地方。</p>\n<p>我这里创建在node1 上。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;bin&#x2F;kafka-console-consumer.sh --zookeeper node1:2181 --topic aboutyunlog --from-beginning</span><br></pre></td></tr></table></figure>\n\n<p>添加文件到flume source目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo -e &quot;this is a test file! \\nhttp:&#x2F;&#x2F;www.aboutyun.com\\n20170710&quot;&gt;log.1</span><br><span class=\"line\">mv log.1 &#x2F;data&#x2F;aboutyunlog&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>在node1 上收到</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">this is a test file! 666 </span><br><span class=\"line\">http:&#x2F;&#x2F;www.aboutyun.com</span><br><span class=\"line\">20170710</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"supervisor-管理flume\"><a href=\"#supervisor-管理flume\" class=\"headerlink\" title=\"supervisor 管理flume\"></a>supervisor 管理flume</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[program:flume]  </span><br><span class=\"line\">command&#x3D;&#x2F;usr&#x2F;local&#x2F;apache-flume-1.8.0-bin&#x2F;bin&#x2F;flume-ng agent --conf &#x2F;usr&#x2F;local&#x2F;apache-flume-1.8.0-bin&#x2F;conf --conf-file &#x2F;usr&#x2F;local&#x2F;apache-flume-1.8.0-bin&#x2F;conf&#x2F;single_agent.conf  --name a1 -Dflume.root.logger&#x3D;INFO,console   </span><br><span class=\"line\">directory&#x3D;&#x2F;usr&#x2F;local&#x2F;apache-flume-1.8.0-bin  </span><br><span class=\"line\">autostart &#x3D; false</span><br><span class=\"line\">autorestart &#x3D; false</span><br><span class=\"line\">redirect_stderr&#x3D;true</span><br><span class=\"line\">stdout_logfile&#x3D;&#x2F;data&#x2F;flume_data&#x2F;log&#x2F;flume_dir.log</span><br><span class=\"line\">stdout_logfile_maxbytes&#x3D;100MB  </span><br><span class=\"line\">stdout_logfile_backups&#x3D;10  </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>主要参数说明:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">command：启动程序使用的命令，可以是绝对路径或者相对路径</span><br><span class=\"line\">process_name：一个python字符串表达式，用来表示supervisor进程启动的这个的名称，默认值是%(program_name)s</span><br><span class=\"line\">numprocs：Supervisor启动这个程序的多个实例，如果numprocs&gt;1，则process_name的表达式必须包含%(process_num)s，默认是1</span><br><span class=\"line\">numprocs_start：一个int偏移值，当启动实例的时候用来计算numprocs的值</span><br><span class=\"line\">priority：权重，可以控制程序启动和关闭时的顺序，权重越低：越早启动，越晚关闭。默认值是999</span><br><span class=\"line\">autostart：如果设置为true，当supervisord启动的时候，进程会自动重启。</span><br><span class=\"line\">autorestart：值可以是false、true、unexpected。false：进程不会自动重启，unexpected：当程序退出时的退出码不是exitcodes中定义的时，进程会重启，true：进程会无条件重启当退出的时候。</span><br><span class=\"line\">startsecs：程序启动后等待多长时间后才认为程序启动成功</span><br><span class=\"line\">startretries：supervisord尝试启动一个程序时尝试的次数。默认是3</span><br><span class=\"line\">exitcodes：一个预期的退出返回码，默认是0,2。</span><br><span class=\"line\">stopsignal：当收到stop请求的时候，发送信号给程序，默认是TERM信号，也可以是 HUP, INT, QUIT, KILL, USR1, or USR2。</span><br><span class=\"line\">stopwaitsecs：在操作系统给supervisord发送SIGCHILD信号时等待的时间</span><br><span class=\"line\">stopasgroup：如果设置为true，则会使supervisor发送停止信号到整个进程组</span><br><span class=\"line\">killasgroup：如果设置为true，则在给程序发送SIGKILL信号的时候，会发送到整个进程组，它的子进程也会受到影响。</span><br><span class=\"line\">user：如果supervisord以root运行，则会使用这个设置用户启动子程序</span><br><span class=\"line\">redirect_stderr：如果设置为true，进程则会把标准错误输出到supervisord后台的标准输出文件描述符。</span><br><span class=\"line\">stdout_logfile：把进程的标准输出写入文件中，如果stdout_logfile没有设置或者设置为AUTO，则supervisor会自动选择一个文件位置。</span><br><span class=\"line\">stdout_logfile_maxbytes：标准输出log文件达到多少后自动进行轮转，单位是KB、MB、GB。如果设置为0则表示不限制日志文件大小</span><br><span class=\"line\">stdout_logfile_backups：标准输出日志轮转备份的数量，默认是10，如果设置为0，则不备份</span><br><span class=\"line\">stdout_capture_maxbytes：当进程处于stderr capture mode模式的时候，写入FIFO队列的最大bytes值，单位可以是KB、MB、GB</span><br><span class=\"line\">stdout_events_enabled：如果设置为true，当进程在写它的stderr到文件描述符的时候，PROCESS_LOG_STDERR事件会被触发</span><br><span class=\"line\">stderr_logfile：把进程的错误日志输出一个文件中，除非redirect_stderr参数被设置为true</span><br><span class=\"line\">stderr_logfile_maxbytes：错误log文件达到多少后自动进行轮转，单位是KB、MB、GB。如果设置为0则表示不限制日志文件大小</span><br><span class=\"line\">stderr_logfile_backups：错误日志轮转备份的数量，默认是10，如果设置为0，则不备份</span><br><span class=\"line\">stderr_capture_maxbytes：当进程处于stderr capture mode模式的时候，写入FIFO队列的最大bytes值，单位可以是KB、MB、GB</span><br><span class=\"line\">stderr_events_enabled：如果设置为true，当进程在写它的stderr到文件描述符的时候，PROCESS_LOG_STDERR事件会被触发</span><br><span class=\"line\">environment：一个k&#x2F;v对的list列表</span><br><span class=\"line\">directory：supervisord在生成子进程的时候会切换到该目录</span><br><span class=\"line\">umask：设置进程的umask</span><br><span class=\"line\">serverurl：是否允许子进程和内部的HTTP服务通讯，如果设置为AUTO，supervisor会自动的构造一个url</span><br></pre></td></tr></table></figure>\n\n\n\n"},{"title":"Flume 案例","date":"2019-12-13T06:00:00.000Z","_content":"\nSpool监测配置的目录下新增的文件，并将文件中的数据读取出来。需要注意两点：\n\n- 拷贝到 spool 目录下的文件不可以再打开编辑。\n- spool 目录下不可包含相应的子目录。\n\n在 `/opt` 创建 agent 的配置文件 spool.conf。\n\n```\nhadoop@907b3dc56edb:/opt$ sudo vi apache-flume-1.6.0-bin/conf/spool.conf\n# 添加如下内容\n```\n\n```\n# Describe the agent\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe/configure the source\na1.sources.r1.type = spooldir\na1.sources.r1.channels = c1\na1.sources.r1.spoolDir = /opt/apache-flume-1.6.0-bin/logs\na1.sources.r1.fileHeader = true\n\n# Describe the sink\na1.sinks.k1.type = logger\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n```\n\n启动 Flume 代理。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$ bin/flume-ng agent -c conf -f conf/spool.conf -n a1 -Dflume.root.logger=INFO,console\n```\n\n另外开启一个终端，追加文件到 apache-flume-1.6.0-bin/logs 目录。\n\n```\nhadoop@907b3dc56edb:/opt$ echo \"Hello World\" > apache-flume-1.6.0-bin/logs/spool.log\n```\n\n### 案例二之 ExecEXEC \n\n执行一个给定的命令获得输出的源。\n\n在 `/opt` 创建 agent 的配置文件 exec.conf。\n\n```\nhadoop@907b3dc56edb:/opt$ sudo vi apache-flume-1.6.0-bin/conf/exec.conf\n# 添加如下内容\n```\n\n```\n# Describe the agent\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe the source\na1.sources.r1.type = exec\na1.sources.r1.channels = c1\na1.sources.r1.command = tail -F /opt/apache-flume-1.6.0-bin/logs/log_exec_tail\n\n# Describe the sink\na1.sinks.k1.type = logger\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n```\n\n启动 Flume 代理。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$ bin/flume-ng agent -c conf -f conf/exec.conf -n a1 -Dflume.root.logger=INFO,console\n```\n\n\n\n另外开启一个终端，用脚本输出信息到 /opt/apache-flume-1.6.0-bin/log_exec_tail\n\n```\nfor i in {1..1000}\ndo\necho \"exec tail$i\" >> /opt/apache-flume-1.6.0-bin/logs/log_exec_tail\ndone\n```\n\n\n\n### 案例三之 JSONHandler\n\n从远程客户端接收数据。\n\n在 `/opt` 创建 agent 的配置文件 json.conf。\n\n```\nhadoop@907b3dc56edb:/opt$ sudo vi apache-flume-1.6.0-bin/conf/json.conf\n# 添加如下内容\n```\n\n```\n# Describe the agent\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe the source\na1.sources.r1.type = org.apache.flume.source.http.HTTPSource\na1.sources.r1.port = 8888\na1.sources.r1.channels = c1\n\n\n# Describe the sink\na1.sinks.k1.type = logger\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n```\n\n启动 Flume 代理。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$ bin/flume-ng agent -c conf -f conf/json.conf -n a1 -Dflume.root.logger=INFO,console\n```\n\n生成 JSON 格式的POST request。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$  curl -X POST -d '[{ \"headers\" :{\"a\" : \"a1\",\"b\" : \"b1\"},\"body\" : \"shiyanlou.org_body\"}]' http://localhost:8888\n```\n\n### 案例四之 Syslogtcp\n\n接下来，我们将要介绍如何把数据写入HDFS。\n\n在 `/opt` 创建 agent 配置文件 syslogtcp.conf。\n\n```\nhadoop@907b3dc56edb:/opt$ sudo vi apache-flume-1.6.0-bin/conf/syslogtcp.conf\n# 添加如下内容\n```\n\n```\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe/configure the source\na1.sources.r1.type = syslogtcp\na1.sources.r1.port = 4444\na1.sources.r1.host = localhost\na1.sources.r1.channels = c1\n\n# Describe the sink\na1.sinks.k1.type = hdfs\na1.sinks.k1.channel = c1\na1.sinks.k1.hdfs.path = hdfs://localhost:9000/user/hadoop/syslogtcp\na1.sinks.k1.hdfs.filePrefix = Syslog\na1.sinks.k1.hdfs.round = true\na1.sinks.k1.hdfs.roundValue = 10\na1.sinks.k1.hdfs.roundUnit = minute\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n```\n\n启动 Flume 代理。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$ bin/flume-ng agent -c conf -f conf/syslogtcp.conf -n a1 -Dflume.root.logger=INFO,console\n```\n\n测试产生 syslog。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$  echo \"hello  flume\" | nc localhost 4444\n```\n\n再次打开一个 Xfce 终端，检查 hdfs 上是否生成文件。\n\n\n\n### 案例五之 File Roll Sink\n\n接下来，我们将要介绍写入稍微复杂的文件数据，把动态生成的时间戳和数据一同写入 HDFS。\n\n在 `/opt` 创建 agent 的配置文件 file_roll.conf。\n\n```\nhadoop@907b3dc56edb:/opt$ sudo vi apache-flume-1.6.0-bin/conf/file_roll.conf\n# 添加如下内容\n```\n\n```\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe/configure the source\na1.sources.r1.type = syslogtcp\na1.sources.r1.port = 5555\na1.sources.r1.host = localhost\na1.sources.r1.channels = c1\n\n# Describe the sinkmior\n\na1.sinks.k1.type = file_roll\na1.sinks.k1.sink.directory = /opt/apache-flume-1.6.0-bin/logs\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n```\n\n启动 Flume 代理。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$ bin/flume-ng agent -c conf -f conf/file_roll.conf -n a1 -Dflume.root.logger=INFO,console\n```\n\n另外开启一个 Xfce 终端中，测试产生 log。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$ echo \"Hello world!\"|nc localhost 5555\n```\n\n再次打开一个 Xfce 终端，查看 /opt/apache-flume-1.6.0-bin/logs 下是否生成文件，默认每30秒生成一个新文件。","source":"_posts/flume案例.md","raw":"---\ntitle: Flume 案例\ndate: 2019-12-13 14:00:00\ncategories: \n- bigdata\ntags:\n- flume\n---\n\nSpool监测配置的目录下新增的文件，并将文件中的数据读取出来。需要注意两点：\n\n- 拷贝到 spool 目录下的文件不可以再打开编辑。\n- spool 目录下不可包含相应的子目录。\n\n在 `/opt` 创建 agent 的配置文件 spool.conf。\n\n```\nhadoop@907b3dc56edb:/opt$ sudo vi apache-flume-1.6.0-bin/conf/spool.conf\n# 添加如下内容\n```\n\n```\n# Describe the agent\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe/configure the source\na1.sources.r1.type = spooldir\na1.sources.r1.channels = c1\na1.sources.r1.spoolDir = /opt/apache-flume-1.6.0-bin/logs\na1.sources.r1.fileHeader = true\n\n# Describe the sink\na1.sinks.k1.type = logger\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n```\n\n启动 Flume 代理。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$ bin/flume-ng agent -c conf -f conf/spool.conf -n a1 -Dflume.root.logger=INFO,console\n```\n\n另外开启一个终端，追加文件到 apache-flume-1.6.0-bin/logs 目录。\n\n```\nhadoop@907b3dc56edb:/opt$ echo \"Hello World\" > apache-flume-1.6.0-bin/logs/spool.log\n```\n\n### 案例二之 ExecEXEC \n\n执行一个给定的命令获得输出的源。\n\n在 `/opt` 创建 agent 的配置文件 exec.conf。\n\n```\nhadoop@907b3dc56edb:/opt$ sudo vi apache-flume-1.6.0-bin/conf/exec.conf\n# 添加如下内容\n```\n\n```\n# Describe the agent\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe the source\na1.sources.r1.type = exec\na1.sources.r1.channels = c1\na1.sources.r1.command = tail -F /opt/apache-flume-1.6.0-bin/logs/log_exec_tail\n\n# Describe the sink\na1.sinks.k1.type = logger\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n```\n\n启动 Flume 代理。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$ bin/flume-ng agent -c conf -f conf/exec.conf -n a1 -Dflume.root.logger=INFO,console\n```\n\n\n\n另外开启一个终端，用脚本输出信息到 /opt/apache-flume-1.6.0-bin/log_exec_tail\n\n```\nfor i in {1..1000}\ndo\necho \"exec tail$i\" >> /opt/apache-flume-1.6.0-bin/logs/log_exec_tail\ndone\n```\n\n\n\n### 案例三之 JSONHandler\n\n从远程客户端接收数据。\n\n在 `/opt` 创建 agent 的配置文件 json.conf。\n\n```\nhadoop@907b3dc56edb:/opt$ sudo vi apache-flume-1.6.0-bin/conf/json.conf\n# 添加如下内容\n```\n\n```\n# Describe the agent\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe the source\na1.sources.r1.type = org.apache.flume.source.http.HTTPSource\na1.sources.r1.port = 8888\na1.sources.r1.channels = c1\n\n\n# Describe the sink\na1.sinks.k1.type = logger\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n```\n\n启动 Flume 代理。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$ bin/flume-ng agent -c conf -f conf/json.conf -n a1 -Dflume.root.logger=INFO,console\n```\n\n生成 JSON 格式的POST request。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$  curl -X POST -d '[{ \"headers\" :{\"a\" : \"a1\",\"b\" : \"b1\"},\"body\" : \"shiyanlou.org_body\"}]' http://localhost:8888\n```\n\n### 案例四之 Syslogtcp\n\n接下来，我们将要介绍如何把数据写入HDFS。\n\n在 `/opt` 创建 agent 配置文件 syslogtcp.conf。\n\n```\nhadoop@907b3dc56edb:/opt$ sudo vi apache-flume-1.6.0-bin/conf/syslogtcp.conf\n# 添加如下内容\n```\n\n```\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe/configure the source\na1.sources.r1.type = syslogtcp\na1.sources.r1.port = 4444\na1.sources.r1.host = localhost\na1.sources.r1.channels = c1\n\n# Describe the sink\na1.sinks.k1.type = hdfs\na1.sinks.k1.channel = c1\na1.sinks.k1.hdfs.path = hdfs://localhost:9000/user/hadoop/syslogtcp\na1.sinks.k1.hdfs.filePrefix = Syslog\na1.sinks.k1.hdfs.round = true\na1.sinks.k1.hdfs.roundValue = 10\na1.sinks.k1.hdfs.roundUnit = minute\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n```\n\n启动 Flume 代理。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$ bin/flume-ng agent -c conf -f conf/syslogtcp.conf -n a1 -Dflume.root.logger=INFO,console\n```\n\n测试产生 syslog。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$  echo \"hello  flume\" | nc localhost 4444\n```\n\n再次打开一个 Xfce 终端，检查 hdfs 上是否生成文件。\n\n\n\n### 案例五之 File Roll Sink\n\n接下来，我们将要介绍写入稍微复杂的文件数据，把动态生成的时间戳和数据一同写入 HDFS。\n\n在 `/opt` 创建 agent 的配置文件 file_roll.conf。\n\n```\nhadoop@907b3dc56edb:/opt$ sudo vi apache-flume-1.6.0-bin/conf/file_roll.conf\n# 添加如下内容\n```\n\n```\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe/configure the source\na1.sources.r1.type = syslogtcp\na1.sources.r1.port = 5555\na1.sources.r1.host = localhost\na1.sources.r1.channels = c1\n\n# Describe the sinkmior\n\na1.sinks.k1.type = file_roll\na1.sinks.k1.sink.directory = /opt/apache-flume-1.6.0-bin/logs\n\n# Use a channel which buffers events in memory\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# Bind the source and sink to the channel\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n```\n\n启动 Flume 代理。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$ bin/flume-ng agent -c conf -f conf/file_roll.conf -n a1 -Dflume.root.logger=INFO,console\n```\n\n另外开启一个 Xfce 终端中，测试产生 log。\n\n```\nhadoop@907b3dc56edb:/opt/apache-flume-1.6.0-bin$ echo \"Hello world!\"|nc localhost 5555\n```\n\n再次打开一个 Xfce 终端，查看 /opt/apache-flume-1.6.0-bin/logs 下是否生成文件，默认每30秒生成一个新文件。","slug":"flume案例","published":1,"updated":"2021-01-27T08:20:35.747Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h23000nq0us05r6g77b","content":"<p>Spool监测配置的目录下新增的文件，并将文件中的数据读取出来。需要注意两点：</p>\n<ul>\n<li>拷贝到 spool 目录下的文件不可以再打开编辑。</li>\n<li>spool 目录下不可包含相应的子目录。</li>\n</ul>\n<p>在 <code>/opt</code> 创建 agent 的配置文件 spool.conf。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt$ sudo vi apache-flume-1.6.0-bin&#x2F;conf&#x2F;spool.conf</span><br><span class=\"line\"># 添加如下内容</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Describe the agent</span><br><span class=\"line\">a1.sources &#x3D; r1</span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe&#x2F;configure the source</span><br><span class=\"line\">a1.sources.r1.type &#x3D; spooldir</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sources.r1.spoolDir &#x3D; &#x2F;opt&#x2F;apache-flume-1.6.0-bin&#x2F;logs</span><br><span class=\"line\">a1.sources.r1.fileHeader &#x3D; true</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the sink</span><br><span class=\"line\">a1.sinks.k1.type &#x3D; logger</span><br><span class=\"line\"></span><br><span class=\"line\"># Use a channel which buffers events in memory</span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 100</span><br><span class=\"line\"></span><br><span class=\"line\"># Bind the source and sink to the channel</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br></pre></td></tr></table></figure>\n\n<p>启动 Flume 代理。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$ bin&#x2F;flume-ng agent -c conf -f conf&#x2F;spool.conf -n a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n<p>另外开启一个终端，追加文件到 apache-flume-1.6.0-bin/logs 目录。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt$ echo &quot;Hello World&quot; &gt; apache-flume-1.6.0-bin&#x2F;logs&#x2F;spool.log</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"案例二之-ExecEXEC\"><a href=\"#案例二之-ExecEXEC\" class=\"headerlink\" title=\"案例二之 ExecEXEC\"></a>案例二之 ExecEXEC</h3><p>执行一个给定的命令获得输出的源。</p>\n<p>在 <code>/opt</code> 创建 agent 的配置文件 exec.conf。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt$ sudo vi apache-flume-1.6.0-bin&#x2F;conf&#x2F;exec.conf</span><br><span class=\"line\"># 添加如下内容</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Describe the agent</span><br><span class=\"line\">a1.sources &#x3D; r1</span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the source</span><br><span class=\"line\">a1.sources.r1.type &#x3D; exec</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sources.r1.command &#x3D; tail -F &#x2F;opt&#x2F;apache-flume-1.6.0-bin&#x2F;logs&#x2F;log_exec_tail</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the sink</span><br><span class=\"line\">a1.sinks.k1.type &#x3D; logger</span><br><span class=\"line\"></span><br><span class=\"line\"># Use a channel which buffers events in memory</span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 100</span><br><span class=\"line\"></span><br><span class=\"line\"># Bind the source and sink to the channel</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br></pre></td></tr></table></figure>\n\n<p>启动 Flume 代理。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$ bin&#x2F;flume-ng agent -c conf -f conf&#x2F;exec.conf -n a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n\n\n<p>另外开启一个终端，用脚本输出信息到 /opt/apache-flume-1.6.0-bin/log_exec_tail</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i in &#123;1..1000&#125;</span><br><span class=\"line\">do</span><br><span class=\"line\">echo &quot;exec tail$i&quot; &gt;&gt; &#x2F;opt&#x2F;apache-flume-1.6.0-bin&#x2F;logs&#x2F;log_exec_tail</span><br><span class=\"line\">done</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"案例三之-JSONHandler\"><a href=\"#案例三之-JSONHandler\" class=\"headerlink\" title=\"案例三之 JSONHandler\"></a>案例三之 JSONHandler</h3><p>从远程客户端接收数据。</p>\n<p>在 <code>/opt</code> 创建 agent 的配置文件 json.conf。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt$ sudo vi apache-flume-1.6.0-bin&#x2F;conf&#x2F;json.conf</span><br><span class=\"line\"># 添加如下内容</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Describe the agent</span><br><span class=\"line\">a1.sources &#x3D; r1</span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the source</span><br><span class=\"line\">a1.sources.r1.type &#x3D; org.apache.flume.source.http.HTTPSource</span><br><span class=\"line\">a1.sources.r1.port &#x3D; 8888</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the sink</span><br><span class=\"line\">a1.sinks.k1.type &#x3D; logger</span><br><span class=\"line\"></span><br><span class=\"line\"># Use a channel which buffers events in memory</span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 100</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># Bind the source and sink to the channel</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br></pre></td></tr></table></figure>\n\n<p>启动 Flume 代理。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$ bin&#x2F;flume-ng agent -c conf -f conf&#x2F;json.conf -n a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n<p>生成 JSON 格式的POST request。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$  curl -X POST -d &#39;[&#123; &quot;headers&quot; :&#123;&quot;a&quot; : &quot;a1&quot;,&quot;b&quot; : &quot;b1&quot;&#125;,&quot;body&quot; : &quot;shiyanlou.org_body&quot;&#125;]&#39; http:&#x2F;&#x2F;localhost:8888</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"案例四之-Syslogtcp\"><a href=\"#案例四之-Syslogtcp\" class=\"headerlink\" title=\"案例四之 Syslogtcp\"></a>案例四之 Syslogtcp</h3><p>接下来，我们将要介绍如何把数据写入HDFS。</p>\n<p>在 <code>/opt</code> 创建 agent 配置文件 syslogtcp.conf。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt$ sudo vi apache-flume-1.6.0-bin&#x2F;conf&#x2F;syslogtcp.conf</span><br><span class=\"line\"># 添加如下内容</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a1.sources &#x3D; r1</span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe&#x2F;configure the source</span><br><span class=\"line\">a1.sources.r1.type &#x3D; syslogtcp</span><br><span class=\"line\">a1.sources.r1.port &#x3D; 4444</span><br><span class=\"line\">a1.sources.r1.host &#x3D; localhost</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the sink</span><br><span class=\"line\">a1.sinks.k1.type &#x3D; hdfs</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.hdfs.path &#x3D; hdfs:&#x2F;&#x2F;localhost:9000&#x2F;user&#x2F;hadoop&#x2F;syslogtcp</span><br><span class=\"line\">a1.sinks.k1.hdfs.filePrefix &#x3D; Syslog</span><br><span class=\"line\">a1.sinks.k1.hdfs.round &#x3D; true</span><br><span class=\"line\">a1.sinks.k1.hdfs.roundValue &#x3D; 10</span><br><span class=\"line\">a1.sinks.k1.hdfs.roundUnit &#x3D; minute</span><br><span class=\"line\"></span><br><span class=\"line\"># Use a channel which buffers events in memory</span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 100</span><br><span class=\"line\"></span><br><span class=\"line\"># Bind the source and sink to the channel</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br></pre></td></tr></table></figure>\n\n<p>启动 Flume 代理。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$ bin&#x2F;flume-ng agent -c conf -f conf&#x2F;syslogtcp.conf -n a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n<p>测试产生 syslog。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$  echo &quot;hello  flume&quot; | nc localhost 4444</span><br></pre></td></tr></table></figure>\n\n<p>再次打开一个 Xfce 终端，检查 hdfs 上是否生成文件。</p>\n<h3 id=\"案例五之-File-Roll-Sink\"><a href=\"#案例五之-File-Roll-Sink\" class=\"headerlink\" title=\"案例五之 File Roll Sink\"></a>案例五之 File Roll Sink</h3><p>接下来，我们将要介绍写入稍微复杂的文件数据，把动态生成的时间戳和数据一同写入 HDFS。</p>\n<p>在 <code>/opt</code> 创建 agent 的配置文件 file_roll.conf。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt$ sudo vi apache-flume-1.6.0-bin&#x2F;conf&#x2F;file_roll.conf</span><br><span class=\"line\"># 添加如下内容</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a1.sources &#x3D; r1</span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe&#x2F;configure the source</span><br><span class=\"line\">a1.sources.r1.type &#x3D; syslogtcp</span><br><span class=\"line\">a1.sources.r1.port &#x3D; 5555</span><br><span class=\"line\">a1.sources.r1.host &#x3D; localhost</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the sinkmior</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sinks.k1.type &#x3D; file_roll</span><br><span class=\"line\">a1.sinks.k1.sink.directory &#x3D; &#x2F;opt&#x2F;apache-flume-1.6.0-bin&#x2F;logs</span><br><span class=\"line\"></span><br><span class=\"line\"># Use a channel which buffers events in memory</span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 100</span><br><span class=\"line\"></span><br><span class=\"line\"># Bind the source and sink to the channel</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br></pre></td></tr></table></figure>\n\n<p>启动 Flume 代理。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$ bin&#x2F;flume-ng agent -c conf -f conf&#x2F;file_roll.conf -n a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n<p>另外开启一个 Xfce 终端中，测试产生 log。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$ echo &quot;Hello world!&quot;|nc localhost 5555</span><br></pre></td></tr></table></figure>\n\n<p>再次打开一个 Xfce 终端，查看 /opt/apache-flume-1.6.0-bin/logs 下是否生成文件，默认每30秒生成一个新文件。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Spool监测配置的目录下新增的文件，并将文件中的数据读取出来。需要注意两点：</p>\n<ul>\n<li>拷贝到 spool 目录下的文件不可以再打开编辑。</li>\n<li>spool 目录下不可包含相应的子目录。</li>\n</ul>\n<p>在 <code>/opt</code> 创建 agent 的配置文件 spool.conf。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt$ sudo vi apache-flume-1.6.0-bin&#x2F;conf&#x2F;spool.conf</span><br><span class=\"line\"># 添加如下内容</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Describe the agent</span><br><span class=\"line\">a1.sources &#x3D; r1</span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe&#x2F;configure the source</span><br><span class=\"line\">a1.sources.r1.type &#x3D; spooldir</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sources.r1.spoolDir &#x3D; &#x2F;opt&#x2F;apache-flume-1.6.0-bin&#x2F;logs</span><br><span class=\"line\">a1.sources.r1.fileHeader &#x3D; true</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the sink</span><br><span class=\"line\">a1.sinks.k1.type &#x3D; logger</span><br><span class=\"line\"></span><br><span class=\"line\"># Use a channel which buffers events in memory</span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 100</span><br><span class=\"line\"></span><br><span class=\"line\"># Bind the source and sink to the channel</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br></pre></td></tr></table></figure>\n\n<p>启动 Flume 代理。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$ bin&#x2F;flume-ng agent -c conf -f conf&#x2F;spool.conf -n a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n<p>另外开启一个终端，追加文件到 apache-flume-1.6.0-bin/logs 目录。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt$ echo &quot;Hello World&quot; &gt; apache-flume-1.6.0-bin&#x2F;logs&#x2F;spool.log</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"案例二之-ExecEXEC\"><a href=\"#案例二之-ExecEXEC\" class=\"headerlink\" title=\"案例二之 ExecEXEC\"></a>案例二之 ExecEXEC</h3><p>执行一个给定的命令获得输出的源。</p>\n<p>在 <code>/opt</code> 创建 agent 的配置文件 exec.conf。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt$ sudo vi apache-flume-1.6.0-bin&#x2F;conf&#x2F;exec.conf</span><br><span class=\"line\"># 添加如下内容</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Describe the agent</span><br><span class=\"line\">a1.sources &#x3D; r1</span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the source</span><br><span class=\"line\">a1.sources.r1.type &#x3D; exec</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sources.r1.command &#x3D; tail -F &#x2F;opt&#x2F;apache-flume-1.6.0-bin&#x2F;logs&#x2F;log_exec_tail</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the sink</span><br><span class=\"line\">a1.sinks.k1.type &#x3D; logger</span><br><span class=\"line\"></span><br><span class=\"line\"># Use a channel which buffers events in memory</span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 100</span><br><span class=\"line\"></span><br><span class=\"line\"># Bind the source and sink to the channel</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br></pre></td></tr></table></figure>\n\n<p>启动 Flume 代理。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$ bin&#x2F;flume-ng agent -c conf -f conf&#x2F;exec.conf -n a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n\n\n<p>另外开启一个终端，用脚本输出信息到 /opt/apache-flume-1.6.0-bin/log_exec_tail</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i in &#123;1..1000&#125;</span><br><span class=\"line\">do</span><br><span class=\"line\">echo &quot;exec tail$i&quot; &gt;&gt; &#x2F;opt&#x2F;apache-flume-1.6.0-bin&#x2F;logs&#x2F;log_exec_tail</span><br><span class=\"line\">done</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"案例三之-JSONHandler\"><a href=\"#案例三之-JSONHandler\" class=\"headerlink\" title=\"案例三之 JSONHandler\"></a>案例三之 JSONHandler</h3><p>从远程客户端接收数据。</p>\n<p>在 <code>/opt</code> 创建 agent 的配置文件 json.conf。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt$ sudo vi apache-flume-1.6.0-bin&#x2F;conf&#x2F;json.conf</span><br><span class=\"line\"># 添加如下内容</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Describe the agent</span><br><span class=\"line\">a1.sources &#x3D; r1</span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the source</span><br><span class=\"line\">a1.sources.r1.type &#x3D; org.apache.flume.source.http.HTTPSource</span><br><span class=\"line\">a1.sources.r1.port &#x3D; 8888</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the sink</span><br><span class=\"line\">a1.sinks.k1.type &#x3D; logger</span><br><span class=\"line\"></span><br><span class=\"line\"># Use a channel which buffers events in memory</span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 100</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># Bind the source and sink to the channel</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br></pre></td></tr></table></figure>\n\n<p>启动 Flume 代理。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$ bin&#x2F;flume-ng agent -c conf -f conf&#x2F;json.conf -n a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n<p>生成 JSON 格式的POST request。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$  curl -X POST -d &#39;[&#123; &quot;headers&quot; :&#123;&quot;a&quot; : &quot;a1&quot;,&quot;b&quot; : &quot;b1&quot;&#125;,&quot;body&quot; : &quot;shiyanlou.org_body&quot;&#125;]&#39; http:&#x2F;&#x2F;localhost:8888</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"案例四之-Syslogtcp\"><a href=\"#案例四之-Syslogtcp\" class=\"headerlink\" title=\"案例四之 Syslogtcp\"></a>案例四之 Syslogtcp</h3><p>接下来，我们将要介绍如何把数据写入HDFS。</p>\n<p>在 <code>/opt</code> 创建 agent 配置文件 syslogtcp.conf。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt$ sudo vi apache-flume-1.6.0-bin&#x2F;conf&#x2F;syslogtcp.conf</span><br><span class=\"line\"># 添加如下内容</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a1.sources &#x3D; r1</span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe&#x2F;configure the source</span><br><span class=\"line\">a1.sources.r1.type &#x3D; syslogtcp</span><br><span class=\"line\">a1.sources.r1.port &#x3D; 4444</span><br><span class=\"line\">a1.sources.r1.host &#x3D; localhost</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the sink</span><br><span class=\"line\">a1.sinks.k1.type &#x3D; hdfs</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.hdfs.path &#x3D; hdfs:&#x2F;&#x2F;localhost:9000&#x2F;user&#x2F;hadoop&#x2F;syslogtcp</span><br><span class=\"line\">a1.sinks.k1.hdfs.filePrefix &#x3D; Syslog</span><br><span class=\"line\">a1.sinks.k1.hdfs.round &#x3D; true</span><br><span class=\"line\">a1.sinks.k1.hdfs.roundValue &#x3D; 10</span><br><span class=\"line\">a1.sinks.k1.hdfs.roundUnit &#x3D; minute</span><br><span class=\"line\"></span><br><span class=\"line\"># Use a channel which buffers events in memory</span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 100</span><br><span class=\"line\"></span><br><span class=\"line\"># Bind the source and sink to the channel</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br></pre></td></tr></table></figure>\n\n<p>启动 Flume 代理。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$ bin&#x2F;flume-ng agent -c conf -f conf&#x2F;syslogtcp.conf -n a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n<p>测试产生 syslog。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$  echo &quot;hello  flume&quot; | nc localhost 4444</span><br></pre></td></tr></table></figure>\n\n<p>再次打开一个 Xfce 终端，检查 hdfs 上是否生成文件。</p>\n<h3 id=\"案例五之-File-Roll-Sink\"><a href=\"#案例五之-File-Roll-Sink\" class=\"headerlink\" title=\"案例五之 File Roll Sink\"></a>案例五之 File Roll Sink</h3><p>接下来，我们将要介绍写入稍微复杂的文件数据，把动态生成的时间戳和数据一同写入 HDFS。</p>\n<p>在 <code>/opt</code> 创建 agent 的配置文件 file_roll.conf。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt$ sudo vi apache-flume-1.6.0-bin&#x2F;conf&#x2F;file_roll.conf</span><br><span class=\"line\"># 添加如下内容</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a1.sources &#x3D; r1</span><br><span class=\"line\">a1.sinks &#x3D; k1</span><br><span class=\"line\">a1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe&#x2F;configure the source</span><br><span class=\"line\">a1.sources.r1.type &#x3D; syslogtcp</span><br><span class=\"line\">a1.sources.r1.port &#x3D; 5555</span><br><span class=\"line\">a1.sources.r1.host &#x3D; localhost</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\"></span><br><span class=\"line\"># Describe the sinkmior</span><br><span class=\"line\"></span><br><span class=\"line\">a1.sinks.k1.type &#x3D; file_roll</span><br><span class=\"line\">a1.sinks.k1.sink.directory &#x3D; &#x2F;opt&#x2F;apache-flume-1.6.0-bin&#x2F;logs</span><br><span class=\"line\"></span><br><span class=\"line\"># Use a channel which buffers events in memory</span><br><span class=\"line\">a1.channels.c1.type &#x3D; memory</span><br><span class=\"line\">a1.channels.c1.capacity &#x3D; 1000</span><br><span class=\"line\">a1.channels.c1.transactionCapacity &#x3D; 100</span><br><span class=\"line\"></span><br><span class=\"line\"># Bind the source and sink to the channel</span><br><span class=\"line\">a1.sources.r1.channels &#x3D; c1</span><br><span class=\"line\">a1.sinks.k1.channel &#x3D; c1</span><br></pre></td></tr></table></figure>\n\n<p>启动 Flume 代理。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$ bin&#x2F;flume-ng agent -c conf -f conf&#x2F;file_roll.conf -n a1 -Dflume.root.logger&#x3D;INFO,console</span><br></pre></td></tr></table></figure>\n\n<p>另外开启一个 Xfce 终端中，测试产生 log。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop@907b3dc56edb:&#x2F;opt&#x2F;apache-flume-1.6.0-bin$ echo &quot;Hello world!&quot;|nc localhost 5555</span><br></pre></td></tr></table></figure>\n\n<p>再次打开一个 Xfce 终端，查看 /opt/apache-flume-1.6.0-bin/logs 下是否生成文件，默认每30秒生成一个新文件。</p>\n"},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2021-01-27T08:20:35.750Z","updated":"2021-01-27T08:20:35.750Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h25000rq0usd0e7ffxp","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"hadoop 安装","date":"2019-12-13T06:00:00.000Z","_content":"\n##hadoop 安装\n\n官方文档`http://hadoop.apache.org/docs/current/`\n\n```\n我们建议您下载以下镜像站点：\n\nhttp://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz\n\n其他镜像站点如下所示。\nhttp://mirrors.hust.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz \n\nhttp://mirrors.shu.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz \n\nhttp://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz \n\n```\n\n### 下载\n\n```\n下载地址：https://archive.apache.org/dist/hadoop/common/hadoop-3.0.0-alpha4/  这里找\n\n我们建议您下载以下镜像站点：\nhttp://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz\n其他镜像站点如下所示。\nhttp://mirrors.hust.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz \nhttp://mirrors.shu.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz \nhttp://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz \n```\n\n### 关闭防火墙和色linux\n\n```\n\n```\n\n\n\n###环境要求\n\n安装jdk,并且Java版本不低于Hadoop要求，并配置环境变量\n\n### 修改hosts\n\n```\n192.168.1.12 node1\n192.168.1.12 node2\n192.168.1.12 node3\n```\n\n创建ssh 秘钥，并发送到其他节点\n\n```\nssh-keygen -t rsa\nssh-copy-id node1\n```\n\n### 创建目录\n\n在/usr/hadoop/目录下，建立tmp、hdfs/name、hdfs/data目录，执行如下命令 \n\n```\nmkdir -p /mnt/hadoop/{tmp,hdfs/{data,name}}\n```\n\n\n\n###安装\n\n在网站hadoop.apache.org下载稳定版本的Hadoop包\n\n解压压缩包\n\n```\ntar xf hadoop-3.0.1.tar.gz\nmv hadoop-3.0.1 /usr/local/hadoop\n```\n\n### 添加hadoop环境变量\n\n```\n设置环境变量，  vim /etc/profile \n\n# set hadoop path\nexport HADOOP_HOME=/usr/local/hadoop/\nexport PATH=$PATH:$HADOOP_HOME/bin\n```\n\n###检查Hadoop是否可用\n\n```\nhadoop version\n\nHadoop 3.0.1\nSource code repository Unknown -r 496dc57cc2e4f4da117f7a8e3840aaeac0c1d2d0\nCompiled by lei on 2018-03-16T23:00Z\nCompiled with protoc 2.5.0\nFrom source with checksum 504d49cc3bcf4e2b56e2fd44ced8572\nThis command was run using /root/hadoop-3.0.1/share/hadoop/common/hadoop-common-3.0.1.jar\n```\n\n### 修改配置文件\n\n##### 配置hadoop-env.sh\n\n`vim /usr/local/hadoop/etc/hadoop/hadoop-env.sh `  hadoop配置环境\n\n```\n#第27行\nexport JAVA_HOME=/usr/local/java\n```\n\n##### 配置yarn-env.sh\n\n`vim /usr/local/hadoop/etc/hadoop/yarn-env.sh`\n\n```\nexport JAVA_HOME=/usr/local/java\n```\n\nHadoop配置以.xml文件形式存在\n\n##### 配置core-site.xml  \n\n`/usr/local/hadoop/etc/hadoop/core-site.xml`   hadoop 核心配置文件\n\n`http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/core-default.xml`\n\n```\n<configuration>\n        <property>\n        <!-- 指定hadoop运行时产生文件的存储目录 -->\n                <name>hadoop.tmp.dir</name>\n                <value>/mnt/hadoop/tmp</value>\n        </property>\n        <property>\n        <!-- 指定HADOOP所使用的文件系统schema（URI），HDFS的老大（NameNode）的地址 -->\n                <name>fs.default.name</name>\n                <value>hdfs://node1:9000</value>\n        </property>\n</configuration>\n```\n\n##### 配置hdfs-site.xml\n\n `/usr/local/hadoop/etc/hadoop/hdfs-site.xml`   hdfs服务的 –> 会起进程\n\n`http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml`\n\n```\n<configuration>\n        <property>\n        <!-- datanode上数据块的物理存储位置 -->\n                <name>dfs.datanode.data.dir</name>\n                <value>/mnt/hadoop/hdfs/data</value>\n        </property>\n        <property>\n        <!-- namenode上存储hdfs名字空间元数据  -->\n                <name>dfs.namenode.name.dir</name>\n                <value>/mnt/hadoop/hdfs/name</value>\n        </property>\n        <property>\n        <!-- hdfs web 管理界面 -->\n                <name>dfs.http.address</name>\n                <value>0.0.0.0:8100</value>\n        </property>\n        <property>\n        <!-- 副本个数，配置默认是3,应小于datanode机器数量 -->\n                <name>dfs.replication</name>\n                <value>1</value>\n        </property>\n</configuration>\n```\n\n##### 配置mapred-site.xml\n\n（注：若没有mapred-site.xml，则需要将mapred-site.xml.template改为mapred-site.xml，并设置hadoop为属主属组）\n\n`/usr/local/hadoop/etc/hadoop/mapred-site.xml`   mapred计算所需要的配置文件] 只当在jar计算时才有\n\n`http://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml`\n\n```\n<configuration>  \n<property>  \n        <name>mapreduce.framework.name</name>  \n        <value>yarn</value>  \n</property>  \n<property>\n  <name>mapred.job.tracker.http.address</name>\n  <value>0.0.0.0:50030</value>\n</property>\n<property>\n  <name>mapred.task.tracker.http.address</name>\n  <value>0.0.0.0:50060</value>\n</property>\n</configuration> \n```\n\n##### 配置yarn-site.xml\n\n`/usr/local/hadoop/etc/hadoop/yarn-site.xml`  yarn服务的 –> 会起进程\n\n`http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-common/yarn-default.xml`\n\n```\n<configuration>  \n<property>  \n        <name>yarn.nodemanager.aux-services</name>  \n        <value>mapreduce_shuffle</value>  \n</property>  \n<property>  \n        <name>yarn.resourcemanager.webapp.address</name>  \n        <value>192.168.1.12:8099</value>  \n        <description>这个地址是mr管理界面的</description>  \n</property>  \n</configuration>  \n```\n\n### 格式化namenode\n\n```\nhdfs namenode -format\n\n成功的话，会看到 \"successfully formatted\" 和 \"Exitting with status 0\" 的提示，若为 \"Exitting with status 1\" 则是出错\n```\n\n### 启动\n\n启动NameNode 和 DataNode 守护进程及secondary namenodes\n\n```\nsbin/start-dfs.sh\n```\n\n启动ResourceManager 和 NodeManager 守护进程\n\n```\nsbin/start-yarn.sh\n```\n\n\n\n```\n#! /bin/sh    \nrm -rf  /mnt/hadoop/hdfs/data/*  \nrm -rf  /mnt/hadoop/hdfs/name/*  \n#启动NameNode 和 DataNode 守护进程及secondary namenodes  \nsh /usr/local/hadoop/sbin/start-dfs.sh  \n#启动ResourceManager 和 NodeManager 守护进程  \nsh /usr/local/hadoop/sbin/sbin/start-yarn.sh \n```\n\n\n\n\n\n###HDFS的使用\n\nHDFS的命令执行格式：hadoop fs -cmd，其中cmd是类shell的命令\n\n```\nhadoop fs -ls /                //查看hdfs根目录的文件树\nhadoop fs -mkdir /test         //创建test文件夹\nhadoop fs -cp 文件 文件        //拷贝文件\nhadoop fs -help <cmd>          //#查看帮助\nhadoop fs -cat <hdfs上的路径>    //查看文件内容\nhadoop fs -put <linux上文件> <hdfs上的路径>   //上传\nhadoop fs -get <hdfs上的路径> <linux上文件>   //下载文件\n\n//上传文件到hdfs文件系统上\n例如： hadoop fs -put /root/install.log hdfs://localhost:9000/\n//删除hdfs系统文件  \n例如： hadoop fs -rm hdfs://localhost:9000/install.log  \n```\n\n### 测试yarn\n\n**上传一个文件到HDFS**\n\n```\nhadoop fs -put  words.txt  hdfs://localhost:9000/\n```\n\n让Yarn来统计一下文件信息\n\n```\ncd  /$HADOOP_HOME/share/hadoop/mapreduce/\n```\n\n测试命令\n\n```\nhadoop jar /usr/hadoop/hadoop-3.0.0/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.0.0.jar wordcount /ha.txt /myorder/  \n```\n\n\n\n### 问题\n\nnamenode格式化的时候遇到JAVA_HOME环境变量问题\n\n```\n解决办法：hadoop/etc/hadoop/hadoop-env.xml文件中有变量的设置，但是不能满足要求，还要修改一下hadoop/libexec/hadoop-config.sh   文件中大概160行，新增：\n\nexport JAVA_HOME=/usr/local/java/\n```\n\ndatanode无法启动\n\n出现该问题的原因：在第一次格式化dfs后，启动并使用了hadoop，后来又重新执行了格式化命令（hdfs namenode -format)，这时namenode的clusterID会重新生成，而datanode的clusterID 保持不变。\n\n```\n解决办法：将hadoop/name/current下的VERSION中的clusterID复制到hadoop/data/current下的VERSION中，覆盖掉原来的clusterID，让两个保持一致然后重启，启动后执行jps，查看进程\n```\n\n##### 启动报错\n\n如果运行脚本报如下错误,\n\nERROR: Attempting to launch hdfs namenode as root\nERROR: but there is no HDFS_NAMENODE_USER defined. Aborting launch.\nStarting datanodes\nERROR: Attempting to launch hdfs datanode as root\nERROR: but there is no HDFS_DATANODE_USER defined. Aborting launch.\nStarting secondary namenodes [localhost.localdomain]\nERROR: Attempting to launch hdfs secondarynamenode as root\nERROR: but there is no HDFS_SECONDARYNAMENODE_USER defined. Aborting launch.\n\n`解决方案`\n\n（缺少用户定义而造成的）因此编辑启动和关闭\n\n```\nvim sbin/start-dfs.sh\nvim sbin/stop-dfs.sh\n```\n\n顶部空白处\n\n```\nHDFS_DATANODE_USER=root\nHADOOP_SECURE_DN_USER=hdfs\nHDFS_NAMENODE_USER=root\nHDFS_SECONDARYNAMENODE_USER=root\n```\n\n\n\n**如果启动时报如下错误，**\n\n**Starting resourcemanagerERROR: Attempting to launch yarn resourcemanager as rootERROR: but there is no YARN_RESOURCEMANAGER_USER defined. Aborting launch.**\n\n\n\n**解决方案**\n\n（也是由于缺少用户定义）\n\n是因为缺少用户定义造成的，所以分别编辑开始和关闭脚本 \n\n```\nvim sbin/start-yarn.sh\nvim sbin/stop-yarn.sh \n```\n\n```\nYARN_RESOURCEMANAGER_USER=root  \nHADOOP_SECURE_DN_USER=yarn  \nYARN_NODEMANAGER_USER=root \n```","source":"_posts/hadoop.md","raw":"---\ntitle: hadoop 安装\ndate: 2019-12-13 14:00:00\ncategories: \n- bigdata\ntags:\n- hadoop\n---\n\n##hadoop 安装\n\n官方文档`http://hadoop.apache.org/docs/current/`\n\n```\n我们建议您下载以下镜像站点：\n\nhttp://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz\n\n其他镜像站点如下所示。\nhttp://mirrors.hust.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz \n\nhttp://mirrors.shu.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz \n\nhttp://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz \n\n```\n\n### 下载\n\n```\n下载地址：https://archive.apache.org/dist/hadoop/common/hadoop-3.0.0-alpha4/  这里找\n\n我们建议您下载以下镜像站点：\nhttp://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz\n其他镜像站点如下所示。\nhttp://mirrors.hust.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz \nhttp://mirrors.shu.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz \nhttp://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.0.1/hadoop-3.0.1.tar.gz \n```\n\n### 关闭防火墙和色linux\n\n```\n\n```\n\n\n\n###环境要求\n\n安装jdk,并且Java版本不低于Hadoop要求，并配置环境变量\n\n### 修改hosts\n\n```\n192.168.1.12 node1\n192.168.1.12 node2\n192.168.1.12 node3\n```\n\n创建ssh 秘钥，并发送到其他节点\n\n```\nssh-keygen -t rsa\nssh-copy-id node1\n```\n\n### 创建目录\n\n在/usr/hadoop/目录下，建立tmp、hdfs/name、hdfs/data目录，执行如下命令 \n\n```\nmkdir -p /mnt/hadoop/{tmp,hdfs/{data,name}}\n```\n\n\n\n###安装\n\n在网站hadoop.apache.org下载稳定版本的Hadoop包\n\n解压压缩包\n\n```\ntar xf hadoop-3.0.1.tar.gz\nmv hadoop-3.0.1 /usr/local/hadoop\n```\n\n### 添加hadoop环境变量\n\n```\n设置环境变量，  vim /etc/profile \n\n# set hadoop path\nexport HADOOP_HOME=/usr/local/hadoop/\nexport PATH=$PATH:$HADOOP_HOME/bin\n```\n\n###检查Hadoop是否可用\n\n```\nhadoop version\n\nHadoop 3.0.1\nSource code repository Unknown -r 496dc57cc2e4f4da117f7a8e3840aaeac0c1d2d0\nCompiled by lei on 2018-03-16T23:00Z\nCompiled with protoc 2.5.0\nFrom source with checksum 504d49cc3bcf4e2b56e2fd44ced8572\nThis command was run using /root/hadoop-3.0.1/share/hadoop/common/hadoop-common-3.0.1.jar\n```\n\n### 修改配置文件\n\n##### 配置hadoop-env.sh\n\n`vim /usr/local/hadoop/etc/hadoop/hadoop-env.sh `  hadoop配置环境\n\n```\n#第27行\nexport JAVA_HOME=/usr/local/java\n```\n\n##### 配置yarn-env.sh\n\n`vim /usr/local/hadoop/etc/hadoop/yarn-env.sh`\n\n```\nexport JAVA_HOME=/usr/local/java\n```\n\nHadoop配置以.xml文件形式存在\n\n##### 配置core-site.xml  \n\n`/usr/local/hadoop/etc/hadoop/core-site.xml`   hadoop 核心配置文件\n\n`http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/core-default.xml`\n\n```\n<configuration>\n        <property>\n        <!-- 指定hadoop运行时产生文件的存储目录 -->\n                <name>hadoop.tmp.dir</name>\n                <value>/mnt/hadoop/tmp</value>\n        </property>\n        <property>\n        <!-- 指定HADOOP所使用的文件系统schema（URI），HDFS的老大（NameNode）的地址 -->\n                <name>fs.default.name</name>\n                <value>hdfs://node1:9000</value>\n        </property>\n</configuration>\n```\n\n##### 配置hdfs-site.xml\n\n `/usr/local/hadoop/etc/hadoop/hdfs-site.xml`   hdfs服务的 –> 会起进程\n\n`http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml`\n\n```\n<configuration>\n        <property>\n        <!-- datanode上数据块的物理存储位置 -->\n                <name>dfs.datanode.data.dir</name>\n                <value>/mnt/hadoop/hdfs/data</value>\n        </property>\n        <property>\n        <!-- namenode上存储hdfs名字空间元数据  -->\n                <name>dfs.namenode.name.dir</name>\n                <value>/mnt/hadoop/hdfs/name</value>\n        </property>\n        <property>\n        <!-- hdfs web 管理界面 -->\n                <name>dfs.http.address</name>\n                <value>0.0.0.0:8100</value>\n        </property>\n        <property>\n        <!-- 副本个数，配置默认是3,应小于datanode机器数量 -->\n                <name>dfs.replication</name>\n                <value>1</value>\n        </property>\n</configuration>\n```\n\n##### 配置mapred-site.xml\n\n（注：若没有mapred-site.xml，则需要将mapred-site.xml.template改为mapred-site.xml，并设置hadoop为属主属组）\n\n`/usr/local/hadoop/etc/hadoop/mapred-site.xml`   mapred计算所需要的配置文件] 只当在jar计算时才有\n\n`http://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml`\n\n```\n<configuration>  \n<property>  \n        <name>mapreduce.framework.name</name>  \n        <value>yarn</value>  \n</property>  \n<property>\n  <name>mapred.job.tracker.http.address</name>\n  <value>0.0.0.0:50030</value>\n</property>\n<property>\n  <name>mapred.task.tracker.http.address</name>\n  <value>0.0.0.0:50060</value>\n</property>\n</configuration> \n```\n\n##### 配置yarn-site.xml\n\n`/usr/local/hadoop/etc/hadoop/yarn-site.xml`  yarn服务的 –> 会起进程\n\n`http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-common/yarn-default.xml`\n\n```\n<configuration>  \n<property>  \n        <name>yarn.nodemanager.aux-services</name>  \n        <value>mapreduce_shuffle</value>  \n</property>  \n<property>  \n        <name>yarn.resourcemanager.webapp.address</name>  \n        <value>192.168.1.12:8099</value>  \n        <description>这个地址是mr管理界面的</description>  \n</property>  \n</configuration>  \n```\n\n### 格式化namenode\n\n```\nhdfs namenode -format\n\n成功的话，会看到 \"successfully formatted\" 和 \"Exitting with status 0\" 的提示，若为 \"Exitting with status 1\" 则是出错\n```\n\n### 启动\n\n启动NameNode 和 DataNode 守护进程及secondary namenodes\n\n```\nsbin/start-dfs.sh\n```\n\n启动ResourceManager 和 NodeManager 守护进程\n\n```\nsbin/start-yarn.sh\n```\n\n\n\n```\n#! /bin/sh    \nrm -rf  /mnt/hadoop/hdfs/data/*  \nrm -rf  /mnt/hadoop/hdfs/name/*  \n#启动NameNode 和 DataNode 守护进程及secondary namenodes  \nsh /usr/local/hadoop/sbin/start-dfs.sh  \n#启动ResourceManager 和 NodeManager 守护进程  \nsh /usr/local/hadoop/sbin/sbin/start-yarn.sh \n```\n\n\n\n\n\n###HDFS的使用\n\nHDFS的命令执行格式：hadoop fs -cmd，其中cmd是类shell的命令\n\n```\nhadoop fs -ls /                //查看hdfs根目录的文件树\nhadoop fs -mkdir /test         //创建test文件夹\nhadoop fs -cp 文件 文件        //拷贝文件\nhadoop fs -help <cmd>          //#查看帮助\nhadoop fs -cat <hdfs上的路径>    //查看文件内容\nhadoop fs -put <linux上文件> <hdfs上的路径>   //上传\nhadoop fs -get <hdfs上的路径> <linux上文件>   //下载文件\n\n//上传文件到hdfs文件系统上\n例如： hadoop fs -put /root/install.log hdfs://localhost:9000/\n//删除hdfs系统文件  \n例如： hadoop fs -rm hdfs://localhost:9000/install.log  \n```\n\n### 测试yarn\n\n**上传一个文件到HDFS**\n\n```\nhadoop fs -put  words.txt  hdfs://localhost:9000/\n```\n\n让Yarn来统计一下文件信息\n\n```\ncd  /$HADOOP_HOME/share/hadoop/mapreduce/\n```\n\n测试命令\n\n```\nhadoop jar /usr/hadoop/hadoop-3.0.0/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.0.0.jar wordcount /ha.txt /myorder/  \n```\n\n\n\n### 问题\n\nnamenode格式化的时候遇到JAVA_HOME环境变量问题\n\n```\n解决办法：hadoop/etc/hadoop/hadoop-env.xml文件中有变量的设置，但是不能满足要求，还要修改一下hadoop/libexec/hadoop-config.sh   文件中大概160行，新增：\n\nexport JAVA_HOME=/usr/local/java/\n```\n\ndatanode无法启动\n\n出现该问题的原因：在第一次格式化dfs后，启动并使用了hadoop，后来又重新执行了格式化命令（hdfs namenode -format)，这时namenode的clusterID会重新生成，而datanode的clusterID 保持不变。\n\n```\n解决办法：将hadoop/name/current下的VERSION中的clusterID复制到hadoop/data/current下的VERSION中，覆盖掉原来的clusterID，让两个保持一致然后重启，启动后执行jps，查看进程\n```\n\n##### 启动报错\n\n如果运行脚本报如下错误,\n\nERROR: Attempting to launch hdfs namenode as root\nERROR: but there is no HDFS_NAMENODE_USER defined. Aborting launch.\nStarting datanodes\nERROR: Attempting to launch hdfs datanode as root\nERROR: but there is no HDFS_DATANODE_USER defined. Aborting launch.\nStarting secondary namenodes [localhost.localdomain]\nERROR: Attempting to launch hdfs secondarynamenode as root\nERROR: but there is no HDFS_SECONDARYNAMENODE_USER defined. Aborting launch.\n\n`解决方案`\n\n（缺少用户定义而造成的）因此编辑启动和关闭\n\n```\nvim sbin/start-dfs.sh\nvim sbin/stop-dfs.sh\n```\n\n顶部空白处\n\n```\nHDFS_DATANODE_USER=root\nHADOOP_SECURE_DN_USER=hdfs\nHDFS_NAMENODE_USER=root\nHDFS_SECONDARYNAMENODE_USER=root\n```\n\n\n\n**如果启动时报如下错误，**\n\n**Starting resourcemanagerERROR: Attempting to launch yarn resourcemanager as rootERROR: but there is no YARN_RESOURCEMANAGER_USER defined. Aborting launch.**\n\n\n\n**解决方案**\n\n（也是由于缺少用户定义）\n\n是因为缺少用户定义造成的，所以分别编辑开始和关闭脚本 \n\n```\nvim sbin/start-yarn.sh\nvim sbin/stop-yarn.sh \n```\n\n```\nYARN_RESOURCEMANAGER_USER=root  \nHADOOP_SECURE_DN_USER=yarn  \nYARN_NODEMANAGER_USER=root \n```","slug":"hadoop","published":1,"updated":"2021-01-27T08:20:35.749Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h26000tq0us34q6b1ms","content":"<p>##hadoop 安装</p>\n<p>官方文档<code>http://hadoop.apache.org/docs/current/</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">我们建议您下载以下镜像站点：</span><br><span class=\"line\"></span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">其他镜像站点如下所示。</span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.hust.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz </span><br><span class=\"line\"></span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.shu.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz </span><br><span class=\"line\"></span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">下载地址：https:&#x2F;&#x2F;archive.apache.org&#x2F;dist&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.0-alpha4&#x2F;  这里找</span><br><span class=\"line\"></span><br><span class=\"line\">我们建议您下载以下镜像站点：</span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz</span><br><span class=\"line\">其他镜像站点如下所示。</span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.hust.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz </span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.shu.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz </span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"关闭防火墙和色linux\"><a href=\"#关闭防火墙和色linux\" class=\"headerlink\" title=\"关闭防火墙和色linux\"></a>关闭防火墙和色linux</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>###环境要求</p>\n<p>安装jdk,并且Java版本不低于Hadoop要求，并配置环境变量</p>\n<h3 id=\"修改hosts\"><a href=\"#修改hosts\" class=\"headerlink\" title=\"修改hosts\"></a>修改hosts</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.1.12 node1</span><br><span class=\"line\">192.168.1.12 node2</span><br><span class=\"line\">192.168.1.12 node3</span><br></pre></td></tr></table></figure>\n\n<p>创建ssh 秘钥，并发送到其他节点</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br><span class=\"line\">ssh-copy-id node1</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建目录\"><a href=\"#创建目录\" class=\"headerlink\" title=\"创建目录\"></a>创建目录</h3><p>在/usr/hadoop/目录下，建立tmp、hdfs/name、hdfs/data目录，执行如下命令 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p &#x2F;mnt&#x2F;hadoop&#x2F;&#123;tmp,hdfs&#x2F;&#123;data,name&#125;&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>###安装</p>\n<p>在网站hadoop.apache.org下载稳定版本的Hadoop包</p>\n<p>解压压缩包</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xf hadoop-3.0.1.tar.gz</span><br><span class=\"line\">mv hadoop-3.0.1 &#x2F;usr&#x2F;local&#x2F;hadoop</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加hadoop环境变量\"><a href=\"#添加hadoop环境变量\" class=\"headerlink\" title=\"添加hadoop环境变量\"></a>添加hadoop环境变量</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">设置环境变量，  vim &#x2F;etc&#x2F;profile </span><br><span class=\"line\"></span><br><span class=\"line\"># set hadoop path</span><br><span class=\"line\">export HADOOP_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;hadoop&#x2F;</span><br><span class=\"line\">export PATH&#x3D;$PATH:$HADOOP_HOME&#x2F;bin</span><br></pre></td></tr></table></figure>\n\n<p>###检查Hadoop是否可用</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop version</span><br><span class=\"line\"></span><br><span class=\"line\">Hadoop 3.0.1</span><br><span class=\"line\">Source code repository Unknown -r 496dc57cc2e4f4da117f7a8e3840aaeac0c1d2d0</span><br><span class=\"line\">Compiled by lei on 2018-03-16T23:00Z</span><br><span class=\"line\">Compiled with protoc 2.5.0</span><br><span class=\"line\">From source with checksum 504d49cc3bcf4e2b56e2fd44ced8572</span><br><span class=\"line\">This command was run using &#x2F;root&#x2F;hadoop-3.0.1&#x2F;share&#x2F;hadoop&#x2F;common&#x2F;hadoop-common-3.0.1.jar</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h3><h5 id=\"配置hadoop-env-sh\"><a href=\"#配置hadoop-env-sh\" class=\"headerlink\" title=\"配置hadoop-env.sh\"></a>配置hadoop-env.sh</h5><p><code>vim /usr/local/hadoop/etc/hadoop/hadoop-env.sh </code>  hadoop配置环境</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#第27行</span><br><span class=\"line\">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"配置yarn-env-sh\"><a href=\"#配置yarn-env-sh\" class=\"headerlink\" title=\"配置yarn-env.sh\"></a>配置yarn-env.sh</h5><p><code>vim /usr/local/hadoop/etc/hadoop/yarn-env.sh</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java</span><br></pre></td></tr></table></figure>\n\n<p>Hadoop配置以.xml文件形式存在</p>\n<h5 id=\"配置core-site-xml\"><a href=\"#配置core-site-xml\" class=\"headerlink\" title=\"配置core-site.xml\"></a>配置core-site.xml</h5><p><code>/usr/local/hadoop/etc/hadoop/core-site.xml</code>   hadoop 核心配置文件</p>\n<p><code>http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/core-default.xml</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">        &lt;!-- 指定hadoop运行时产生文件的存储目录 --&gt;</span><br><span class=\"line\">                &lt;name&gt;hadoop.tmp.dir&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;&#x2F;mnt&#x2F;hadoop&#x2F;tmp&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">        &lt;!-- 指定HADOOP所使用的文件系统schema（URI），HDFS的老大（NameNode）的地址 --&gt;</span><br><span class=\"line\">                &lt;name&gt;fs.default.name&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;hdfs:&#x2F;&#x2F;node1:9000&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"配置hdfs-site-xml\"><a href=\"#配置hdfs-site-xml\" class=\"headerlink\" title=\"配置hdfs-site.xml\"></a>配置hdfs-site.xml</h5><p> <code>/usr/local/hadoop/etc/hadoop/hdfs-site.xml</code>   hdfs服务的 –&gt; 会起进程</p>\n<p><code>http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">        &lt;!-- datanode上数据块的物理存储位置 --&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.datanode.data.dir&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;&#x2F;mnt&#x2F;hadoop&#x2F;hdfs&#x2F;data&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">        &lt;!-- namenode上存储hdfs名字空间元数据  --&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.namenode.name.dir&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;&#x2F;mnt&#x2F;hadoop&#x2F;hdfs&#x2F;name&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">        &lt;!-- hdfs web 管理界面 --&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.http.address&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;0.0.0.0:8100&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">        &lt;!-- 副本个数，配置默认是3,应小于datanode机器数量 --&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.replication&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;1&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"配置mapred-site-xml\"><a href=\"#配置mapred-site-xml\" class=\"headerlink\" title=\"配置mapred-site.xml\"></a>配置mapred-site.xml</h5><p>（注：若没有mapred-site.xml，则需要将mapred-site.xml.template改为mapred-site.xml，并设置hadoop为属主属组）</p>\n<p><code>/usr/local/hadoop/etc/hadoop/mapred-site.xml</code>   mapred计算所需要的配置文件] 只当在jar计算时才有</p>\n<p><code>http://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;  </span><br><span class=\"line\">&lt;property&gt;  </span><br><span class=\"line\">        &lt;name&gt;mapreduce.framework.name&lt;&#x2F;name&gt;  </span><br><span class=\"line\">        &lt;value&gt;yarn&lt;&#x2F;value&gt;  </span><br><span class=\"line\">&lt;&#x2F;property&gt;  </span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">  &lt;name&gt;mapred.job.tracker.http.address&lt;&#x2F;name&gt;</span><br><span class=\"line\">  &lt;value&gt;0.0.0.0:50030&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">  &lt;name&gt;mapred.task.tracker.http.address&lt;&#x2F;name&gt;</span><br><span class=\"line\">  &lt;value&gt;0.0.0.0:50060&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;&#x2F;configuration&gt; </span><br></pre></td></tr></table></figure>\n\n<h5 id=\"配置yarn-site-xml\"><a href=\"#配置yarn-site-xml\" class=\"headerlink\" title=\"配置yarn-site.xml\"></a>配置yarn-site.xml</h5><p><code>/usr/local/hadoop/etc/hadoop/yarn-site.xml</code>  yarn服务的 –&gt; 会起进程</p>\n<p><code>http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-common/yarn-default.xml</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;  </span><br><span class=\"line\">&lt;property&gt;  </span><br><span class=\"line\">        &lt;name&gt;yarn.nodemanager.aux-services&lt;&#x2F;name&gt;  </span><br><span class=\"line\">        &lt;value&gt;mapreduce_shuffle&lt;&#x2F;value&gt;  </span><br><span class=\"line\">&lt;&#x2F;property&gt;  </span><br><span class=\"line\">&lt;property&gt;  </span><br><span class=\"line\">        &lt;name&gt;yarn.resourcemanager.webapp.address&lt;&#x2F;name&gt;  </span><br><span class=\"line\">        &lt;value&gt;192.168.1.12:8099&lt;&#x2F;value&gt;  </span><br><span class=\"line\">        &lt;description&gt;这个地址是mr管理界面的&lt;&#x2F;description&gt;  </span><br><span class=\"line\">&lt;&#x2F;property&gt;  </span><br><span class=\"line\">&lt;&#x2F;configuration&gt;  </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"格式化namenode\"><a href=\"#格式化namenode\" class=\"headerlink\" title=\"格式化namenode\"></a>格式化namenode</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs namenode -format</span><br><span class=\"line\"></span><br><span class=\"line\">成功的话，会看到 &quot;successfully formatted&quot; 和 &quot;Exitting with status 0&quot; 的提示，若为 &quot;Exitting with status 1&quot; 则是出错</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h3><p>启动NameNode 和 DataNode 守护进程及secondary namenodes</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sbin&#x2F;start-dfs.sh</span><br></pre></td></tr></table></figure>\n\n<p>启动ResourceManager 和 NodeManager 守护进程</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sbin&#x2F;start-yarn.sh</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#! &#x2F;bin&#x2F;sh    </span><br><span class=\"line\">rm -rf  &#x2F;mnt&#x2F;hadoop&#x2F;hdfs&#x2F;data&#x2F;*  </span><br><span class=\"line\">rm -rf  &#x2F;mnt&#x2F;hadoop&#x2F;hdfs&#x2F;name&#x2F;*  </span><br><span class=\"line\">#启动NameNode 和 DataNode 守护进程及secondary namenodes  </span><br><span class=\"line\">sh &#x2F;usr&#x2F;local&#x2F;hadoop&#x2F;sbin&#x2F;start-dfs.sh  </span><br><span class=\"line\">#启动ResourceManager 和 NodeManager 守护进程  </span><br><span class=\"line\">sh &#x2F;usr&#x2F;local&#x2F;hadoop&#x2F;sbin&#x2F;sbin&#x2F;start-yarn.sh </span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>###HDFS的使用</p>\n<p>HDFS的命令执行格式：hadoop fs -cmd，其中cmd是类shell的命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop fs -ls &#x2F;                &#x2F;&#x2F;查看hdfs根目录的文件树</span><br><span class=\"line\">hadoop fs -mkdir &#x2F;test         &#x2F;&#x2F;创建test文件夹</span><br><span class=\"line\">hadoop fs -cp 文件 文件        &#x2F;&#x2F;拷贝文件</span><br><span class=\"line\">hadoop fs -help &lt;cmd&gt;          &#x2F;&#x2F;#查看帮助</span><br><span class=\"line\">hadoop fs -cat &lt;hdfs上的路径&gt;    &#x2F;&#x2F;查看文件内容</span><br><span class=\"line\">hadoop fs -put &lt;linux上文件&gt; &lt;hdfs上的路径&gt;   &#x2F;&#x2F;上传</span><br><span class=\"line\">hadoop fs -get &lt;hdfs上的路径&gt; &lt;linux上文件&gt;   &#x2F;&#x2F;下载文件</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;上传文件到hdfs文件系统上</span><br><span class=\"line\">例如： hadoop fs -put &#x2F;root&#x2F;install.log hdfs:&#x2F;&#x2F;localhost:9000&#x2F;</span><br><span class=\"line\">&#x2F;&#x2F;删除hdfs系统文件  </span><br><span class=\"line\">例如： hadoop fs -rm hdfs:&#x2F;&#x2F;localhost:9000&#x2F;install.log  </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"测试yarn\"><a href=\"#测试yarn\" class=\"headerlink\" title=\"测试yarn\"></a>测试yarn</h3><p><strong>上传一个文件到HDFS</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop fs -put  words.txt  hdfs:&#x2F;&#x2F;localhost:9000&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>让Yarn来统计一下文件信息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd  &#x2F;$HADOOP_HOME&#x2F;share&#x2F;hadoop&#x2F;mapreduce&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>测试命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop jar &#x2F;usr&#x2F;hadoop&#x2F;hadoop-3.0.0&#x2F;share&#x2F;hadoop&#x2F;mapreduce&#x2F;hadoop-mapreduce-examples-3.0.0.jar wordcount &#x2F;ha.txt &#x2F;myorder&#x2F;  </span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h3><p>namenode格式化的时候遇到JAVA_HOME环境变量问题</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">解决办法：hadoop&#x2F;etc&#x2F;hadoop&#x2F;hadoop-env.xml文件中有变量的设置，但是不能满足要求，还要修改一下hadoop&#x2F;libexec&#x2F;hadoop-config.sh   文件中大概160行，新增：</span><br><span class=\"line\"></span><br><span class=\"line\">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>datanode无法启动</p>\n<p>出现该问题的原因：在第一次格式化dfs后，启动并使用了hadoop，后来又重新执行了格式化命令（hdfs namenode -format)，这时namenode的clusterID会重新生成，而datanode的clusterID 保持不变。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">解决办法：将hadoop&#x2F;name&#x2F;current下的VERSION中的clusterID复制到hadoop&#x2F;data&#x2F;current下的VERSION中，覆盖掉原来的clusterID，让两个保持一致然后重启，启动后执行jps，查看进程</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"启动报错\"><a href=\"#启动报错\" class=\"headerlink\" title=\"启动报错\"></a>启动报错</h5><p>如果运行脚本报如下错误,</p>\n<p>ERROR: Attempting to launch hdfs namenode as root<br>ERROR: but there is no HDFS_NAMENODE_USER defined. Aborting launch.<br>Starting datanodes<br>ERROR: Attempting to launch hdfs datanode as root<br>ERROR: but there is no HDFS_DATANODE_USER defined. Aborting launch.<br>Starting secondary namenodes [localhost.localdomain]<br>ERROR: Attempting to launch hdfs secondarynamenode as root<br>ERROR: but there is no HDFS_SECONDARYNAMENODE_USER defined. Aborting launch.</p>\n<p><code>解决方案</code></p>\n<p>（缺少用户定义而造成的）因此编辑启动和关闭</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim sbin&#x2F;start-dfs.sh</span><br><span class=\"line\">vim sbin&#x2F;stop-dfs.sh</span><br></pre></td></tr></table></figure>\n\n<p>顶部空白处</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HDFS_DATANODE_USER&#x3D;root</span><br><span class=\"line\">HADOOP_SECURE_DN_USER&#x3D;hdfs</span><br><span class=\"line\">HDFS_NAMENODE_USER&#x3D;root</span><br><span class=\"line\">HDFS_SECONDARYNAMENODE_USER&#x3D;root</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>如果启动时报如下错误，</strong></p>\n<p><strong>Starting resourcemanagerERROR: Attempting to launch yarn resourcemanager as rootERROR: but there is no YARN_RESOURCEMANAGER_USER defined. Aborting launch.</strong></p>\n<p><strong>解决方案</strong></p>\n<p>（也是由于缺少用户定义）</p>\n<p>是因为缺少用户定义造成的，所以分别编辑开始和关闭脚本 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim sbin&#x2F;start-yarn.sh</span><br><span class=\"line\">vim sbin&#x2F;stop-yarn.sh </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YARN_RESOURCEMANAGER_USER&#x3D;root  </span><br><span class=\"line\">HADOOP_SECURE_DN_USER&#x3D;yarn  </span><br><span class=\"line\">YARN_NODEMANAGER_USER&#x3D;root </span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>##hadoop 安装</p>\n<p>官方文档<code>http://hadoop.apache.org/docs/current/</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">我们建议您下载以下镜像站点：</span><br><span class=\"line\"></span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">其他镜像站点如下所示。</span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.hust.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz </span><br><span class=\"line\"></span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.shu.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz </span><br><span class=\"line\"></span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">下载地址：https:&#x2F;&#x2F;archive.apache.org&#x2F;dist&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.0-alpha4&#x2F;  这里找</span><br><span class=\"line\"></span><br><span class=\"line\">我们建议您下载以下镜像站点：</span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz</span><br><span class=\"line\">其他镜像站点如下所示。</span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.hust.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz </span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.shu.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz </span><br><span class=\"line\">http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;hadoop&#x2F;common&#x2F;hadoop-3.0.1&#x2F;hadoop-3.0.1.tar.gz </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"关闭防火墙和色linux\"><a href=\"#关闭防火墙和色linux\" class=\"headerlink\" title=\"关闭防火墙和色linux\"></a>关闭防火墙和色linux</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>###环境要求</p>\n<p>安装jdk,并且Java版本不低于Hadoop要求，并配置环境变量</p>\n<h3 id=\"修改hosts\"><a href=\"#修改hosts\" class=\"headerlink\" title=\"修改hosts\"></a>修改hosts</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.1.12 node1</span><br><span class=\"line\">192.168.1.12 node2</span><br><span class=\"line\">192.168.1.12 node3</span><br></pre></td></tr></table></figure>\n\n<p>创建ssh 秘钥，并发送到其他节点</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br><span class=\"line\">ssh-copy-id node1</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建目录\"><a href=\"#创建目录\" class=\"headerlink\" title=\"创建目录\"></a>创建目录</h3><p>在/usr/hadoop/目录下，建立tmp、hdfs/name、hdfs/data目录，执行如下命令 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p &#x2F;mnt&#x2F;hadoop&#x2F;&#123;tmp,hdfs&#x2F;&#123;data,name&#125;&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>###安装</p>\n<p>在网站hadoop.apache.org下载稳定版本的Hadoop包</p>\n<p>解压压缩包</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xf hadoop-3.0.1.tar.gz</span><br><span class=\"line\">mv hadoop-3.0.1 &#x2F;usr&#x2F;local&#x2F;hadoop</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加hadoop环境变量\"><a href=\"#添加hadoop环境变量\" class=\"headerlink\" title=\"添加hadoop环境变量\"></a>添加hadoop环境变量</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">设置环境变量，  vim &#x2F;etc&#x2F;profile </span><br><span class=\"line\"></span><br><span class=\"line\"># set hadoop path</span><br><span class=\"line\">export HADOOP_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;hadoop&#x2F;</span><br><span class=\"line\">export PATH&#x3D;$PATH:$HADOOP_HOME&#x2F;bin</span><br></pre></td></tr></table></figure>\n\n<p>###检查Hadoop是否可用</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop version</span><br><span class=\"line\"></span><br><span class=\"line\">Hadoop 3.0.1</span><br><span class=\"line\">Source code repository Unknown -r 496dc57cc2e4f4da117f7a8e3840aaeac0c1d2d0</span><br><span class=\"line\">Compiled by lei on 2018-03-16T23:00Z</span><br><span class=\"line\">Compiled with protoc 2.5.0</span><br><span class=\"line\">From source with checksum 504d49cc3bcf4e2b56e2fd44ced8572</span><br><span class=\"line\">This command was run using &#x2F;root&#x2F;hadoop-3.0.1&#x2F;share&#x2F;hadoop&#x2F;common&#x2F;hadoop-common-3.0.1.jar</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h3><h5 id=\"配置hadoop-env-sh\"><a href=\"#配置hadoop-env-sh\" class=\"headerlink\" title=\"配置hadoop-env.sh\"></a>配置hadoop-env.sh</h5><p><code>vim /usr/local/hadoop/etc/hadoop/hadoop-env.sh </code>  hadoop配置环境</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#第27行</span><br><span class=\"line\">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"配置yarn-env-sh\"><a href=\"#配置yarn-env-sh\" class=\"headerlink\" title=\"配置yarn-env.sh\"></a>配置yarn-env.sh</h5><p><code>vim /usr/local/hadoop/etc/hadoop/yarn-env.sh</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java</span><br></pre></td></tr></table></figure>\n\n<p>Hadoop配置以.xml文件形式存在</p>\n<h5 id=\"配置core-site-xml\"><a href=\"#配置core-site-xml\" class=\"headerlink\" title=\"配置core-site.xml\"></a>配置core-site.xml</h5><p><code>/usr/local/hadoop/etc/hadoop/core-site.xml</code>   hadoop 核心配置文件</p>\n<p><code>http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/core-default.xml</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">        &lt;!-- 指定hadoop运行时产生文件的存储目录 --&gt;</span><br><span class=\"line\">                &lt;name&gt;hadoop.tmp.dir&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;&#x2F;mnt&#x2F;hadoop&#x2F;tmp&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">        &lt;!-- 指定HADOOP所使用的文件系统schema（URI），HDFS的老大（NameNode）的地址 --&gt;</span><br><span class=\"line\">                &lt;name&gt;fs.default.name&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;hdfs:&#x2F;&#x2F;node1:9000&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"配置hdfs-site-xml\"><a href=\"#配置hdfs-site-xml\" class=\"headerlink\" title=\"配置hdfs-site.xml\"></a>配置hdfs-site.xml</h5><p> <code>/usr/local/hadoop/etc/hadoop/hdfs-site.xml</code>   hdfs服务的 –&gt; 会起进程</p>\n<p><code>http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">        &lt;!-- datanode上数据块的物理存储位置 --&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.datanode.data.dir&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;&#x2F;mnt&#x2F;hadoop&#x2F;hdfs&#x2F;data&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">        &lt;!-- namenode上存储hdfs名字空间元数据  --&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.namenode.name.dir&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;&#x2F;mnt&#x2F;hadoop&#x2F;hdfs&#x2F;name&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">        &lt;!-- hdfs web 管理界面 --&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.http.address&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;0.0.0.0:8100&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">        &lt;!-- 副本个数，配置默认是3,应小于datanode机器数量 --&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.replication&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;1&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"配置mapred-site-xml\"><a href=\"#配置mapred-site-xml\" class=\"headerlink\" title=\"配置mapred-site.xml\"></a>配置mapred-site.xml</h5><p>（注：若没有mapred-site.xml，则需要将mapred-site.xml.template改为mapred-site.xml，并设置hadoop为属主属组）</p>\n<p><code>/usr/local/hadoop/etc/hadoop/mapred-site.xml</code>   mapred计算所需要的配置文件] 只当在jar计算时才有</p>\n<p><code>http://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;  </span><br><span class=\"line\">&lt;property&gt;  </span><br><span class=\"line\">        &lt;name&gt;mapreduce.framework.name&lt;&#x2F;name&gt;  </span><br><span class=\"line\">        &lt;value&gt;yarn&lt;&#x2F;value&gt;  </span><br><span class=\"line\">&lt;&#x2F;property&gt;  </span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">  &lt;name&gt;mapred.job.tracker.http.address&lt;&#x2F;name&gt;</span><br><span class=\"line\">  &lt;value&gt;0.0.0.0:50030&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">  &lt;name&gt;mapred.task.tracker.http.address&lt;&#x2F;name&gt;</span><br><span class=\"line\">  &lt;value&gt;0.0.0.0:50060&lt;&#x2F;value&gt;</span><br><span class=\"line\">&lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;&#x2F;configuration&gt; </span><br></pre></td></tr></table></figure>\n\n<h5 id=\"配置yarn-site-xml\"><a href=\"#配置yarn-site-xml\" class=\"headerlink\" title=\"配置yarn-site.xml\"></a>配置yarn-site.xml</h5><p><code>/usr/local/hadoop/etc/hadoop/yarn-site.xml</code>  yarn服务的 –&gt; 会起进程</p>\n<p><code>http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-common/yarn-default.xml</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;  </span><br><span class=\"line\">&lt;property&gt;  </span><br><span class=\"line\">        &lt;name&gt;yarn.nodemanager.aux-services&lt;&#x2F;name&gt;  </span><br><span class=\"line\">        &lt;value&gt;mapreduce_shuffle&lt;&#x2F;value&gt;  </span><br><span class=\"line\">&lt;&#x2F;property&gt;  </span><br><span class=\"line\">&lt;property&gt;  </span><br><span class=\"line\">        &lt;name&gt;yarn.resourcemanager.webapp.address&lt;&#x2F;name&gt;  </span><br><span class=\"line\">        &lt;value&gt;192.168.1.12:8099&lt;&#x2F;value&gt;  </span><br><span class=\"line\">        &lt;description&gt;这个地址是mr管理界面的&lt;&#x2F;description&gt;  </span><br><span class=\"line\">&lt;&#x2F;property&gt;  </span><br><span class=\"line\">&lt;&#x2F;configuration&gt;  </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"格式化namenode\"><a href=\"#格式化namenode\" class=\"headerlink\" title=\"格式化namenode\"></a>格式化namenode</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hdfs namenode -format</span><br><span class=\"line\"></span><br><span class=\"line\">成功的话，会看到 &quot;successfully formatted&quot; 和 &quot;Exitting with status 0&quot; 的提示，若为 &quot;Exitting with status 1&quot; 则是出错</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h3><p>启动NameNode 和 DataNode 守护进程及secondary namenodes</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sbin&#x2F;start-dfs.sh</span><br></pre></td></tr></table></figure>\n\n<p>启动ResourceManager 和 NodeManager 守护进程</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sbin&#x2F;start-yarn.sh</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#! &#x2F;bin&#x2F;sh    </span><br><span class=\"line\">rm -rf  &#x2F;mnt&#x2F;hadoop&#x2F;hdfs&#x2F;data&#x2F;*  </span><br><span class=\"line\">rm -rf  &#x2F;mnt&#x2F;hadoop&#x2F;hdfs&#x2F;name&#x2F;*  </span><br><span class=\"line\">#启动NameNode 和 DataNode 守护进程及secondary namenodes  </span><br><span class=\"line\">sh &#x2F;usr&#x2F;local&#x2F;hadoop&#x2F;sbin&#x2F;start-dfs.sh  </span><br><span class=\"line\">#启动ResourceManager 和 NodeManager 守护进程  </span><br><span class=\"line\">sh &#x2F;usr&#x2F;local&#x2F;hadoop&#x2F;sbin&#x2F;sbin&#x2F;start-yarn.sh </span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>###HDFS的使用</p>\n<p>HDFS的命令执行格式：hadoop fs -cmd，其中cmd是类shell的命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop fs -ls &#x2F;                &#x2F;&#x2F;查看hdfs根目录的文件树</span><br><span class=\"line\">hadoop fs -mkdir &#x2F;test         &#x2F;&#x2F;创建test文件夹</span><br><span class=\"line\">hadoop fs -cp 文件 文件        &#x2F;&#x2F;拷贝文件</span><br><span class=\"line\">hadoop fs -help &lt;cmd&gt;          &#x2F;&#x2F;#查看帮助</span><br><span class=\"line\">hadoop fs -cat &lt;hdfs上的路径&gt;    &#x2F;&#x2F;查看文件内容</span><br><span class=\"line\">hadoop fs -put &lt;linux上文件&gt; &lt;hdfs上的路径&gt;   &#x2F;&#x2F;上传</span><br><span class=\"line\">hadoop fs -get &lt;hdfs上的路径&gt; &lt;linux上文件&gt;   &#x2F;&#x2F;下载文件</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;上传文件到hdfs文件系统上</span><br><span class=\"line\">例如： hadoop fs -put &#x2F;root&#x2F;install.log hdfs:&#x2F;&#x2F;localhost:9000&#x2F;</span><br><span class=\"line\">&#x2F;&#x2F;删除hdfs系统文件  </span><br><span class=\"line\">例如： hadoop fs -rm hdfs:&#x2F;&#x2F;localhost:9000&#x2F;install.log  </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"测试yarn\"><a href=\"#测试yarn\" class=\"headerlink\" title=\"测试yarn\"></a>测试yarn</h3><p><strong>上传一个文件到HDFS</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop fs -put  words.txt  hdfs:&#x2F;&#x2F;localhost:9000&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>让Yarn来统计一下文件信息</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd  &#x2F;$HADOOP_HOME&#x2F;share&#x2F;hadoop&#x2F;mapreduce&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>测试命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop jar &#x2F;usr&#x2F;hadoop&#x2F;hadoop-3.0.0&#x2F;share&#x2F;hadoop&#x2F;mapreduce&#x2F;hadoop-mapreduce-examples-3.0.0.jar wordcount &#x2F;ha.txt &#x2F;myorder&#x2F;  </span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h3><p>namenode格式化的时候遇到JAVA_HOME环境变量问题</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">解决办法：hadoop&#x2F;etc&#x2F;hadoop&#x2F;hadoop-env.xml文件中有变量的设置，但是不能满足要求，还要修改一下hadoop&#x2F;libexec&#x2F;hadoop-config.sh   文件中大概160行，新增：</span><br><span class=\"line\"></span><br><span class=\"line\">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>datanode无法启动</p>\n<p>出现该问题的原因：在第一次格式化dfs后，启动并使用了hadoop，后来又重新执行了格式化命令（hdfs namenode -format)，这时namenode的clusterID会重新生成，而datanode的clusterID 保持不变。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">解决办法：将hadoop&#x2F;name&#x2F;current下的VERSION中的clusterID复制到hadoop&#x2F;data&#x2F;current下的VERSION中，覆盖掉原来的clusterID，让两个保持一致然后重启，启动后执行jps，查看进程</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"启动报错\"><a href=\"#启动报错\" class=\"headerlink\" title=\"启动报错\"></a>启动报错</h5><p>如果运行脚本报如下错误,</p>\n<p>ERROR: Attempting to launch hdfs namenode as root<br>ERROR: but there is no HDFS_NAMENODE_USER defined. Aborting launch.<br>Starting datanodes<br>ERROR: Attempting to launch hdfs datanode as root<br>ERROR: but there is no HDFS_DATANODE_USER defined. Aborting launch.<br>Starting secondary namenodes [localhost.localdomain]<br>ERROR: Attempting to launch hdfs secondarynamenode as root<br>ERROR: but there is no HDFS_SECONDARYNAMENODE_USER defined. Aborting launch.</p>\n<p><code>解决方案</code></p>\n<p>（缺少用户定义而造成的）因此编辑启动和关闭</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim sbin&#x2F;start-dfs.sh</span><br><span class=\"line\">vim sbin&#x2F;stop-dfs.sh</span><br></pre></td></tr></table></figure>\n\n<p>顶部空白处</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HDFS_DATANODE_USER&#x3D;root</span><br><span class=\"line\">HADOOP_SECURE_DN_USER&#x3D;hdfs</span><br><span class=\"line\">HDFS_NAMENODE_USER&#x3D;root</span><br><span class=\"line\">HDFS_SECONDARYNAMENODE_USER&#x3D;root</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>如果启动时报如下错误，</strong></p>\n<p><strong>Starting resourcemanagerERROR: Attempting to launch yarn resourcemanager as rootERROR: but there is no YARN_RESOURCEMANAGER_USER defined. Aborting launch.</strong></p>\n<p><strong>解决方案</strong></p>\n<p>（也是由于缺少用户定义）</p>\n<p>是因为缺少用户定义造成的，所以分别编辑开始和关闭脚本 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim sbin&#x2F;start-yarn.sh</span><br><span class=\"line\">vim sbin&#x2F;stop-yarn.sh </span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YARN_RESOURCEMANAGER_USER&#x3D;root  </span><br><span class=\"line\">HADOOP_SECURE_DN_USER&#x3D;yarn  </span><br><span class=\"line\">YARN_NODEMANAGER_USER&#x3D;root </span><br></pre></td></tr></table></figure>"},{"title":"hexo 使用","date":"2019-10-09T03:00:00.000Z","_content":"\n## hexo 使用\n\n## 安装nodeJS\n\n安装后\n\n```bash\nnode -v\nnpm -v\n```\n\n\n\n## 安装 hexo\n\n```bash\nnpm install -g hexo-cli\n\nhexo -v    #查看一下版本\n```\n\n\n\n初始化hexo\n\n```\n始化hexo\n----------------------\nhexo init myblog\n\n这个myblog可以自己取什么名字都行，然后\n----------------------\ncd myblog\nnpm install\n\n```\n\n\n\n命令\n\n```bash\nhexo new \"postName\"     #新建文章\nhexo new page \"pageName\"    #新建页面\nhexo generate      #生成静态页面至public目录\nhexo server      #开启预览访问端口（默认端口4000，'ctrl + c'关闭server）\nhexo deploy      #将.deploy目录部署到指定空间\nhexo help        # 查看帮助\nhexo version     #查看Hexo的版本\n```\n\n## 简写指令\n\n```bash\nhexo n \"我的第一篇文章\"  等价于 hexo new \"我的第一篇文章\"   还等价于   hexo new post \"我的第一篇文章\"\nhexo p     等价于   hexo publish\nhexo g     等价于   hexo generate\nhexo s     等价于   hexo server\nhexo d     等价于   hexo deploy\nhexo deploy -g     等价于    hexo deploy --generate\nhexo generate -d   等价于    hexo generate --deploy\n```\n\n","source":"_posts/heox使用.md","raw":"---\ntitle:  hexo 使用\ndate: 2019-10-09 11:00:00\ncategories: \n- hexo\ntags:\n- hexo\n---\n\n## hexo 使用\n\n## 安装nodeJS\n\n安装后\n\n```bash\nnode -v\nnpm -v\n```\n\n\n\n## 安装 hexo\n\n```bash\nnpm install -g hexo-cli\n\nhexo -v    #查看一下版本\n```\n\n\n\n初始化hexo\n\n```\n始化hexo\n----------------------\nhexo init myblog\n\n这个myblog可以自己取什么名字都行，然后\n----------------------\ncd myblog\nnpm install\n\n```\n\n\n\n命令\n\n```bash\nhexo new \"postName\"     #新建文章\nhexo new page \"pageName\"    #新建页面\nhexo generate      #生成静态页面至public目录\nhexo server      #开启预览访问端口（默认端口4000，'ctrl + c'关闭server）\nhexo deploy      #将.deploy目录部署到指定空间\nhexo help        # 查看帮助\nhexo version     #查看Hexo的版本\n```\n\n## 简写指令\n\n```bash\nhexo n \"我的第一篇文章\"  等价于 hexo new \"我的第一篇文章\"   还等价于   hexo new post \"我的第一篇文章\"\nhexo p     等价于   hexo publish\nhexo g     等价于   hexo generate\nhexo s     等价于   hexo server\nhexo d     等价于   hexo deploy\nhexo deploy -g     等价于    hexo deploy --generate\nhexo generate -d   等价于    hexo generate --deploy\n```\n\n","slug":"heox使用","published":1,"updated":"2021-01-27T08:20:35.750Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h27000yq0ushwbl9req","content":"<h2 id=\"hexo-使用\"><a href=\"#hexo-使用\" class=\"headerlink\" title=\"hexo 使用\"></a>hexo 使用</h2><h2 id=\"安装nodeJS\"><a href=\"#安装nodeJS\" class=\"headerlink\" title=\"安装nodeJS\"></a>安装nodeJS</h2><p>安装后</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v</span><br><span class=\"line\">npm -v</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"安装-hexo\"><a href=\"#安装-hexo\" class=\"headerlink\" title=\"安装 hexo\"></a>安装 hexo</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br><span class=\"line\"></span><br><span class=\"line\">hexo -v    <span class=\"comment\">#查看一下版本</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>初始化hexo</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">始化hexo</span><br><span class=\"line\">----------------------</span><br><span class=\"line\">hexo init myblog</span><br><span class=\"line\"></span><br><span class=\"line\">这个myblog可以自己取什么名字都行，然后</span><br><span class=\"line\">----------------------</span><br><span class=\"line\">cd myblog</span><br><span class=\"line\">npm install</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new <span class=\"string\">&quot;postName&quot;</span>     <span class=\"comment\">#新建文章</span></span><br><span class=\"line\">hexo new page <span class=\"string\">&quot;pageName&quot;</span>    <span class=\"comment\">#新建页面</span></span><br><span class=\"line\">hexo generate      <span class=\"comment\">#生成静态页面至public目录</span></span><br><span class=\"line\">hexo server      <span class=\"comment\">#开启预览访问端口（默认端口4000，&#x27;ctrl + c&#x27;关闭server）</span></span><br><span class=\"line\">hexo deploy      <span class=\"comment\">#将.deploy目录部署到指定空间</span></span><br><span class=\"line\">hexo <span class=\"built_in\">help</span>        <span class=\"comment\"># 查看帮助</span></span><br><span class=\"line\">hexo version     <span class=\"comment\">#查看Hexo的版本</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"简写指令\"><a href=\"#简写指令\" class=\"headerlink\" title=\"简写指令\"></a>简写指令</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo n <span class=\"string\">&quot;我的第一篇文章&quot;</span>  等价于 hexo new <span class=\"string\">&quot;我的第一篇文章&quot;</span>   还等价于   hexo new post <span class=\"string\">&quot;我的第一篇文章&quot;</span></span><br><span class=\"line\">hexo p     等价于   hexo publish</span><br><span class=\"line\">hexo g     等价于   hexo generate</span><br><span class=\"line\">hexo s     等价于   hexo server</span><br><span class=\"line\">hexo d     等价于   hexo deploy</span><br><span class=\"line\">hexo deploy -g     等价于    hexo deploy --generate</span><br><span class=\"line\">hexo generate -d   等价于    hexo generate --deploy</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"hexo-使用\"><a href=\"#hexo-使用\" class=\"headerlink\" title=\"hexo 使用\"></a>hexo 使用</h2><h2 id=\"安装nodeJS\"><a href=\"#安装nodeJS\" class=\"headerlink\" title=\"安装nodeJS\"></a>安装nodeJS</h2><p>安装后</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v</span><br><span class=\"line\">npm -v</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"安装-hexo\"><a href=\"#安装-hexo\" class=\"headerlink\" title=\"安装 hexo\"></a>安装 hexo</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br><span class=\"line\"></span><br><span class=\"line\">hexo -v    <span class=\"comment\">#查看一下版本</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>初始化hexo</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">始化hexo</span><br><span class=\"line\">----------------------</span><br><span class=\"line\">hexo init myblog</span><br><span class=\"line\"></span><br><span class=\"line\">这个myblog可以自己取什么名字都行，然后</span><br><span class=\"line\">----------------------</span><br><span class=\"line\">cd myblog</span><br><span class=\"line\">npm install</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new <span class=\"string\">&quot;postName&quot;</span>     <span class=\"comment\">#新建文章</span></span><br><span class=\"line\">hexo new page <span class=\"string\">&quot;pageName&quot;</span>    <span class=\"comment\">#新建页面</span></span><br><span class=\"line\">hexo generate      <span class=\"comment\">#生成静态页面至public目录</span></span><br><span class=\"line\">hexo server      <span class=\"comment\">#开启预览访问端口（默认端口4000，&#x27;ctrl + c&#x27;关闭server）</span></span><br><span class=\"line\">hexo deploy      <span class=\"comment\">#将.deploy目录部署到指定空间</span></span><br><span class=\"line\">hexo <span class=\"built_in\">help</span>        <span class=\"comment\"># 查看帮助</span></span><br><span class=\"line\">hexo version     <span class=\"comment\">#查看Hexo的版本</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"简写指令\"><a href=\"#简写指令\" class=\"headerlink\" title=\"简写指令\"></a>简写指令</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo n <span class=\"string\">&quot;我的第一篇文章&quot;</span>  等价于 hexo new <span class=\"string\">&quot;我的第一篇文章&quot;</span>   还等价于   hexo new post <span class=\"string\">&quot;我的第一篇文章&quot;</span></span><br><span class=\"line\">hexo p     等价于   hexo publish</span><br><span class=\"line\">hexo g     等价于   hexo generate</span><br><span class=\"line\">hexo s     等价于   hexo server</span><br><span class=\"line\">hexo d     等价于   hexo deploy</span><br><span class=\"line\">hexo deploy -g     等价于    hexo deploy --generate</span><br><span class=\"line\">hexo generate -d   等价于    hexo generate --deploy</span><br></pre></td></tr></table></figure>\n\n"},{"title":"kafka 安装","date":"2019-12-13T06:00:00.000Z","_content":"## 环境准备\n\n- 安装 jdk\n- 安装 Zookeeper\n- kafaka安装包 http://kafka.apache.org/downloads.html\n\n### 修改host 文件\n\n`vim /etc/hots`\n\n```\n192.168.1.12 node1\n192.168.1.12 node2\n192.168.1.12 node3\n```\n\n### 下载安装包\n\n```\nwget \"http://mirrors.shu.edu.cn/apache/kafka/1.1.0/kafka_2.12-1.1.0.tgz\"\ntar -xzvf kafka_2.11-1.1.0.tgz\nmv kafka_2.11-1.1.0 /mnt/\n```\n### 配置环境变量\n\n将 `kafka_2.11-1.1.0/bin` 添加到`path`，以方便访问\n```\nvi /etc/profile\n```\n在末尾添加：\n```\nKAFKA_HOME=/mnt/kafka_2.11-1.1.0\nPATH=$PATH:$KAFKA_HOME/bin\n```\n\n<hr>\n\n## 单机模式\n\n### 启动单机模式\n\n### 修改配置文件\n```\ncd /mnt/kafka_2.11-1.1.0/config\nvi server.properties\n```\n修改配置文件中的以下内容：\n```\nbroker.id=1  \nport=9091\nhost.name=192.168.1.12\nnum.network.threads=3\nnum.io.threads=8\nsocket.send.buffer.bytes=102400\nsocket.receive.buffer.bytes=102400\nsocket.request.max.bytes=104857600\nlog.dirs=/mnt/kafka/kafka01/\nnum.partitions=1\nnum.recovery.threads.per.data.dir=1\nlog.retention.hours=168\nlog.segment.bytes=1073741824\nlog.retention.check.interval.ms=300000\nlog.cleaner.enable=false\nzookeeper.connect=192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183\nzookeeper.connection.timeout.ms=6000\n```\n### 启动程序\n先要确保zookeeper已启动，然后在Kafka目录执行\n```\nnohup bin/kafka-server-start.sh config/server.properties &\n```\n如果无报错则说明启动成功。nohup &  是实现在后台启动。\n\n### 简单测试\n打开2个终端，分别在Kafka目录执行以下命令 \n启动producer\n```\nbin/kafka-console-producer.sh --broker-list localhost:9092 --topic test\n```\n### 启动consumer\n```\nbin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic test --from-beginning\n```\n在producer的命令行输入任意字符，观察consumer是否能正确接收。\n\n## 常见错误\n###  启动Kafka时出现\n```\nJava HotSpot(TM) Server VM warning: INFO: os::commit_memory(0x67e00000, 1073741824, 0) failed; error='Cannot allocate memory' (errno=12)\n#\n# There is insufficient memory for the Java Runtime Environment to continue.\n# Native memory allocation (mmap) failed to map 1073741824 bytes for committing reserved memory.\n# An error report file with more information is saved as:\n# /opt/kafka_2.11-0.9.0.1/hs_err_pid2249.log\n```\n### 错误原因： \nKafka默认使用 `-Xmx1G -Xms1G` 的JVM内存配置，如果机器内存较小，需要调整启动配置。 \n打开 `/config/kafka-server-start.sh` ，修改 \n```\nexport KAFKA_HEAP_OPTS=\"-Xmx1G -Xms1G\" \n```\n为适合当前服务器的配置，例如\n```\nexport KAFKA_HEAP_OPTS=\"-Xmx256M -Xms128M\"\n```\n\n\n\n## 集群模式\n\n### 配置hosts\n\n### 准备缓存目录\n\n````\nmkdir -p /mnt/kafka/kafka0{1,2,3}\n````\n\n### 安装软件\n\n```\nls /usr/local/kafka/\nkafka01  kafka02  kafka03\n```\n\n### 修改kafka01 配置文件\n\n```\nvim /usr/local/kafka/kafka01/conf/server.properties\n\nbroker.id=1\nport=9091\nhost.name=192.168.1.12\nnum.network.threads=3\nnum.io.threads=8\nsocket.send.buffer.bytes=102400\nsocket.receive.buffer.bytes=102400\nsocket.request.max.bytes=104857600\nlog.dirs=/mnt/kafka/kafka01/\nnum.partitions=1\nnum.recovery.threads.per.data.dir=1\nlog.retention.hours=168\nlog.segment.bytes=1073741824\nlog.retention.check.interval.ms=300000\nlog.cleaner.enable=false\nzookeeper.connect=192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183\nzookeeper.connection.timeout.ms=6000\n\n```\n\n### 修改kafka02 配置文件\n\n```\nvim /usr/local/kafka/kafka01/conf/server.properties\n\nbroker.id=2\nport=9092\nhost.name=192.168.1.12\nnum.network.threads=3\nnum.io.threads=8\nsocket.send.buffer.bytes=102400\nsocket.receive.buffer.bytes=102400\nsocket.request.max.bytes=104857600\nlog.dirs=/mnt/kafka/kafka02/\nnum.partitions=1\nnum.recovery.threads.per.data.dir=1\nlog.retention.hours=168\nlog.segment.bytes=1073741824\nlog.retention.check.interval.ms=300000\nlog.cleaner.enable=false\nzookeeper.connect=192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183\nzookeeper.connection.timeout.ms=6000\n\n```\n\n\n\n### 修改kafka03 配置文件\n\n```\nvim /usr/local/kafka/kafka03/conf/server.properties\n\nbroker.id=3\nport=9093\nhost.name=192.168.1.12\nnum.network.threads=3\nnum.io.threads=8\nsocket.send.buffer.bytes=102400\nsocket.receive.buffer.bytes=102400\nsocket.request.max.bytes=104857600\nlog.dirs=/mnt/kafka/kafka03/\nnum.partitions=1\nnum.recovery.threads.per.data.dir=1\nlog.retention.hours=168\nlog.segment.bytes=1073741824\nlog.retention.check.interval.ms=300000\nlog.cleaner.enable=false\nzookeeper.connect=192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183\nzookeeper.connection.timeout.ms=6000\n\n```\n\n\n\n### 启动kafka\n\n先要确保zookeeper已启动，然后在启动Kafka\n\n```\nnohup /usr/local/kafka/kafka01/bin/kafka-server-start.sh /usr/local/kafka/kafka01/config/server.properties > /var/log/kafka01.out 2>&1 &\nnohup /usr/local/kafka/kafka02/bin/kafka-server-start.sh /usr/local/kafka/kafka02/config/server.properties > /var/log/kafka02.out 2>&1 &\nnohup /usr/local/kafka/kafka03/bin/kafka-server-start.sh /usr/local/kafka/kafka03/config/server.properties > /var/log/kafka03.out 2>&1 &\n```\n\n查看kafka进程\n\n```\njps\n\n14343 Kafka\n14345 Kafka\n16941 Jps\n14350 Kafka\n```\n\n\n\n### 测试\n\n#### 创建 topic,3个分片，3个副本\n\n```\n/usr/local/kafka/kafka03/bin/kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 3 –partitions 3 –topic test_topic\n```\n\n#### 启动一个生产者\n\n```\n/usr/local/kafka/kafka03/bin/kafka-console-producer.sh –broker-list node1:9091,node2:9092,node3:9093 –topic test_topic \n```\n\n#### 启动一个消费者\n\n```\n/usr/local/kafka/kafka03/bin/kafka-console-consumer.sh –zookeeper localhost:2181 –topic test_topic \n```\n\n####zookeeper查看topic\n\n```\nbin/zkCli.sh -server 192.168.1.12:2182\n\n[zk: 192.168.1.12:2182(CONNECTED) 2] get /brokers/topics/test_topic\n{\"version\":1,\"partitions\":{\"2\":[3,1,2],\"1\":[2,3,1],\"0\":[1,2,3]}}\n```\n\n### 配置文件说明\n\n```\nbroker.id=1  #当前机器在集群中的唯一标识，和zookeeper的myid性质一样,\n\n每一个broker在集群中的唯一表示，要求是正数。当该服务器的IP地址发生改变时，broker.id没有变化，则不会影响consumers的消息情况\n\nport=9092  #当前kafka对外提供服务的端口默认是9092\n\nhost.name=192.168.1.172 #broker的主机地址，若是设置了，那么会绑定到这个地址上，若是没有，会绑定到所有的接口上，并将其中之一发送到ZK，一般不设置\n\nnum.network.threads=3 #broker处理消息的最大线程数，一般情况下数量为cpu核数\n\nnum.io.threads=8 #broker处理磁盘IO的线程数，数值为cpu核数2倍\n\nsocket.send.buffer.bytes=102400 #发送缓冲区buffer大小，数据不是一下子就发送的，先回存储到缓冲区了到达一定的大小后在发送，能提高性能\n\nsocket.receive.buffer.bytes=102400 #kafka接收缓冲区大小，当数据到达一定大小后在序列化到磁盘\n\nsocket.request.max.bytes=104857600 #这个参数是向kafka请求消息或者向kafka发送消息的请请求的最大数，这个值不能超过java的堆栈大小\n\nlog.dirs=/tmp/kafka-logs_1      #kafka数据的存放地址，多个地址的话用逗号分割,多个目录分布在不同磁盘上可以提高读写性能  /data/kafka-logs-1，/data/kafka-logs-2\n\nnum.partitions=3 #每个topic的分区个数，若是在topic创建时候没有指定的话会被topic创建时的指定参数覆盖\n\nnum.recovery.threads.per.data.dir=1 #用于在启动时,用于日志恢复的线程个数,默认是1.\n\nlog.retention.hours=168 #默认消息的最大持久化时间，168小时，7天\n\nlog.segment.bytes=1073741824    #topic的分区是以一堆segment文件存储的，这个控制每个segment的大小，会被topic创建时的指定参数覆盖\n\nlog.retention.check.interval.ms=300000 #每隔300000毫秒去检查上面配置的log失效时间（log.retention.hours=168 ），到目录查看是否有过期的消息如果有，删除\n\nzookeeper.connect=localhost:2181,localhost:2182,localhost:2183\n\nzookeeper.connection.timeout.ms=6000 #ZooKeeper的连接超时时间\n\n```\n\n### supervisor管理kafka\n\n`vim bin/kafka-run-class.sh`   在最上面增加环境路径\n\n```\nJAVA_HOME=/usr/local/java\nexport JAVA_HOME\n```\n\n`vim /etc/supervisor/kafka.conf`\n\n```\n[program:kafka]\ncommand=/usr/local/kafka/kafka01/bin/kafka-server-start.sh /usr/local/kafka/kafka01/config/server.properties\nuser=root\nautostart=true\nautorestart=true\nstartsecs=10\nstdout_logfile=/var/log/kafka.log\nstdout_logfile_maxbytes=1MB\nstdout_logfile_backups=10\nstdout_capture_maxbytes=1MB\nstderr_logfile=/var/log/kafka.log\nstderr_logfile_maxbytes=1MB\nstderr_logfile_backups=10\nstderr_capture_maxbytes=1MB\n```","source":"_posts/kafaka安装.md","raw":"---\ntitle: kafka 安装\ndate: 2019-12-13 14:00:00\ncategories: \n- bigdata\ntags:\n- kafka\n---\n## 环境准备\n\n- 安装 jdk\n- 安装 Zookeeper\n- kafaka安装包 http://kafka.apache.org/downloads.html\n\n### 修改host 文件\n\n`vim /etc/hots`\n\n```\n192.168.1.12 node1\n192.168.1.12 node2\n192.168.1.12 node3\n```\n\n### 下载安装包\n\n```\nwget \"http://mirrors.shu.edu.cn/apache/kafka/1.1.0/kafka_2.12-1.1.0.tgz\"\ntar -xzvf kafka_2.11-1.1.0.tgz\nmv kafka_2.11-1.1.0 /mnt/\n```\n### 配置环境变量\n\n将 `kafka_2.11-1.1.0/bin` 添加到`path`，以方便访问\n```\nvi /etc/profile\n```\n在末尾添加：\n```\nKAFKA_HOME=/mnt/kafka_2.11-1.1.0\nPATH=$PATH:$KAFKA_HOME/bin\n```\n\n<hr>\n\n## 单机模式\n\n### 启动单机模式\n\n### 修改配置文件\n```\ncd /mnt/kafka_2.11-1.1.0/config\nvi server.properties\n```\n修改配置文件中的以下内容：\n```\nbroker.id=1  \nport=9091\nhost.name=192.168.1.12\nnum.network.threads=3\nnum.io.threads=8\nsocket.send.buffer.bytes=102400\nsocket.receive.buffer.bytes=102400\nsocket.request.max.bytes=104857600\nlog.dirs=/mnt/kafka/kafka01/\nnum.partitions=1\nnum.recovery.threads.per.data.dir=1\nlog.retention.hours=168\nlog.segment.bytes=1073741824\nlog.retention.check.interval.ms=300000\nlog.cleaner.enable=false\nzookeeper.connect=192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183\nzookeeper.connection.timeout.ms=6000\n```\n### 启动程序\n先要确保zookeeper已启动，然后在Kafka目录执行\n```\nnohup bin/kafka-server-start.sh config/server.properties &\n```\n如果无报错则说明启动成功。nohup &  是实现在后台启动。\n\n### 简单测试\n打开2个终端，分别在Kafka目录执行以下命令 \n启动producer\n```\nbin/kafka-console-producer.sh --broker-list localhost:9092 --topic test\n```\n### 启动consumer\n```\nbin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic test --from-beginning\n```\n在producer的命令行输入任意字符，观察consumer是否能正确接收。\n\n## 常见错误\n###  启动Kafka时出现\n```\nJava HotSpot(TM) Server VM warning: INFO: os::commit_memory(0x67e00000, 1073741824, 0) failed; error='Cannot allocate memory' (errno=12)\n#\n# There is insufficient memory for the Java Runtime Environment to continue.\n# Native memory allocation (mmap) failed to map 1073741824 bytes for committing reserved memory.\n# An error report file with more information is saved as:\n# /opt/kafka_2.11-0.9.0.1/hs_err_pid2249.log\n```\n### 错误原因： \nKafka默认使用 `-Xmx1G -Xms1G` 的JVM内存配置，如果机器内存较小，需要调整启动配置。 \n打开 `/config/kafka-server-start.sh` ，修改 \n```\nexport KAFKA_HEAP_OPTS=\"-Xmx1G -Xms1G\" \n```\n为适合当前服务器的配置，例如\n```\nexport KAFKA_HEAP_OPTS=\"-Xmx256M -Xms128M\"\n```\n\n\n\n## 集群模式\n\n### 配置hosts\n\n### 准备缓存目录\n\n````\nmkdir -p /mnt/kafka/kafka0{1,2,3}\n````\n\n### 安装软件\n\n```\nls /usr/local/kafka/\nkafka01  kafka02  kafka03\n```\n\n### 修改kafka01 配置文件\n\n```\nvim /usr/local/kafka/kafka01/conf/server.properties\n\nbroker.id=1\nport=9091\nhost.name=192.168.1.12\nnum.network.threads=3\nnum.io.threads=8\nsocket.send.buffer.bytes=102400\nsocket.receive.buffer.bytes=102400\nsocket.request.max.bytes=104857600\nlog.dirs=/mnt/kafka/kafka01/\nnum.partitions=1\nnum.recovery.threads.per.data.dir=1\nlog.retention.hours=168\nlog.segment.bytes=1073741824\nlog.retention.check.interval.ms=300000\nlog.cleaner.enable=false\nzookeeper.connect=192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183\nzookeeper.connection.timeout.ms=6000\n\n```\n\n### 修改kafka02 配置文件\n\n```\nvim /usr/local/kafka/kafka01/conf/server.properties\n\nbroker.id=2\nport=9092\nhost.name=192.168.1.12\nnum.network.threads=3\nnum.io.threads=8\nsocket.send.buffer.bytes=102400\nsocket.receive.buffer.bytes=102400\nsocket.request.max.bytes=104857600\nlog.dirs=/mnt/kafka/kafka02/\nnum.partitions=1\nnum.recovery.threads.per.data.dir=1\nlog.retention.hours=168\nlog.segment.bytes=1073741824\nlog.retention.check.interval.ms=300000\nlog.cleaner.enable=false\nzookeeper.connect=192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183\nzookeeper.connection.timeout.ms=6000\n\n```\n\n\n\n### 修改kafka03 配置文件\n\n```\nvim /usr/local/kafka/kafka03/conf/server.properties\n\nbroker.id=3\nport=9093\nhost.name=192.168.1.12\nnum.network.threads=3\nnum.io.threads=8\nsocket.send.buffer.bytes=102400\nsocket.receive.buffer.bytes=102400\nsocket.request.max.bytes=104857600\nlog.dirs=/mnt/kafka/kafka03/\nnum.partitions=1\nnum.recovery.threads.per.data.dir=1\nlog.retention.hours=168\nlog.segment.bytes=1073741824\nlog.retention.check.interval.ms=300000\nlog.cleaner.enable=false\nzookeeper.connect=192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183\nzookeeper.connection.timeout.ms=6000\n\n```\n\n\n\n### 启动kafka\n\n先要确保zookeeper已启动，然后在启动Kafka\n\n```\nnohup /usr/local/kafka/kafka01/bin/kafka-server-start.sh /usr/local/kafka/kafka01/config/server.properties > /var/log/kafka01.out 2>&1 &\nnohup /usr/local/kafka/kafka02/bin/kafka-server-start.sh /usr/local/kafka/kafka02/config/server.properties > /var/log/kafka02.out 2>&1 &\nnohup /usr/local/kafka/kafka03/bin/kafka-server-start.sh /usr/local/kafka/kafka03/config/server.properties > /var/log/kafka03.out 2>&1 &\n```\n\n查看kafka进程\n\n```\njps\n\n14343 Kafka\n14345 Kafka\n16941 Jps\n14350 Kafka\n```\n\n\n\n### 测试\n\n#### 创建 topic,3个分片，3个副本\n\n```\n/usr/local/kafka/kafka03/bin/kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 3 –partitions 3 –topic test_topic\n```\n\n#### 启动一个生产者\n\n```\n/usr/local/kafka/kafka03/bin/kafka-console-producer.sh –broker-list node1:9091,node2:9092,node3:9093 –topic test_topic \n```\n\n#### 启动一个消费者\n\n```\n/usr/local/kafka/kafka03/bin/kafka-console-consumer.sh –zookeeper localhost:2181 –topic test_topic \n```\n\n####zookeeper查看topic\n\n```\nbin/zkCli.sh -server 192.168.1.12:2182\n\n[zk: 192.168.1.12:2182(CONNECTED) 2] get /brokers/topics/test_topic\n{\"version\":1,\"partitions\":{\"2\":[3,1,2],\"1\":[2,3,1],\"0\":[1,2,3]}}\n```\n\n### 配置文件说明\n\n```\nbroker.id=1  #当前机器在集群中的唯一标识，和zookeeper的myid性质一样,\n\n每一个broker在集群中的唯一表示，要求是正数。当该服务器的IP地址发生改变时，broker.id没有变化，则不会影响consumers的消息情况\n\nport=9092  #当前kafka对外提供服务的端口默认是9092\n\nhost.name=192.168.1.172 #broker的主机地址，若是设置了，那么会绑定到这个地址上，若是没有，会绑定到所有的接口上，并将其中之一发送到ZK，一般不设置\n\nnum.network.threads=3 #broker处理消息的最大线程数，一般情况下数量为cpu核数\n\nnum.io.threads=8 #broker处理磁盘IO的线程数，数值为cpu核数2倍\n\nsocket.send.buffer.bytes=102400 #发送缓冲区buffer大小，数据不是一下子就发送的，先回存储到缓冲区了到达一定的大小后在发送，能提高性能\n\nsocket.receive.buffer.bytes=102400 #kafka接收缓冲区大小，当数据到达一定大小后在序列化到磁盘\n\nsocket.request.max.bytes=104857600 #这个参数是向kafka请求消息或者向kafka发送消息的请请求的最大数，这个值不能超过java的堆栈大小\n\nlog.dirs=/tmp/kafka-logs_1      #kafka数据的存放地址，多个地址的话用逗号分割,多个目录分布在不同磁盘上可以提高读写性能  /data/kafka-logs-1，/data/kafka-logs-2\n\nnum.partitions=3 #每个topic的分区个数，若是在topic创建时候没有指定的话会被topic创建时的指定参数覆盖\n\nnum.recovery.threads.per.data.dir=1 #用于在启动时,用于日志恢复的线程个数,默认是1.\n\nlog.retention.hours=168 #默认消息的最大持久化时间，168小时，7天\n\nlog.segment.bytes=1073741824    #topic的分区是以一堆segment文件存储的，这个控制每个segment的大小，会被topic创建时的指定参数覆盖\n\nlog.retention.check.interval.ms=300000 #每隔300000毫秒去检查上面配置的log失效时间（log.retention.hours=168 ），到目录查看是否有过期的消息如果有，删除\n\nzookeeper.connect=localhost:2181,localhost:2182,localhost:2183\n\nzookeeper.connection.timeout.ms=6000 #ZooKeeper的连接超时时间\n\n```\n\n### supervisor管理kafka\n\n`vim bin/kafka-run-class.sh`   在最上面增加环境路径\n\n```\nJAVA_HOME=/usr/local/java\nexport JAVA_HOME\n```\n\n`vim /etc/supervisor/kafka.conf`\n\n```\n[program:kafka]\ncommand=/usr/local/kafka/kafka01/bin/kafka-server-start.sh /usr/local/kafka/kafka01/config/server.properties\nuser=root\nautostart=true\nautorestart=true\nstartsecs=10\nstdout_logfile=/var/log/kafka.log\nstdout_logfile_maxbytes=1MB\nstdout_logfile_backups=10\nstdout_capture_maxbytes=1MB\nstderr_logfile=/var/log/kafka.log\nstderr_logfile_maxbytes=1MB\nstderr_logfile_backups=10\nstderr_capture_maxbytes=1MB\n```","slug":"kafaka安装","published":1,"updated":"2021-01-27T08:20:35.756Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h270010q0us3u25ftsz","content":"<h2 id=\"环境准备\"><a href=\"#环境准备\" class=\"headerlink\" title=\"环境准备\"></a>环境准备</h2><ul>\n<li>安装 jdk</li>\n<li>安装 Zookeeper</li>\n<li>kafaka安装包 <a href=\"http://kafka.apache.org/downloads.html\">http://kafka.apache.org/downloads.html</a></li>\n</ul>\n<h3 id=\"修改host-文件\"><a href=\"#修改host-文件\" class=\"headerlink\" title=\"修改host 文件\"></a>修改host 文件</h3><p><code>vim /etc/hots</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.1.12 node1</span><br><span class=\"line\">192.168.1.12 node2</span><br><span class=\"line\">192.168.1.12 node3</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载安装包\"><a href=\"#下载安装包\" class=\"headerlink\" title=\"下载安装包\"></a>下载安装包</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget &quot;http:&#x2F;&#x2F;mirrors.shu.edu.cn&#x2F;apache&#x2F;kafka&#x2F;1.1.0&#x2F;kafka_2.12-1.1.0.tgz&quot;</span><br><span class=\"line\">tar -xzvf kafka_2.11-1.1.0.tgz</span><br><span class=\"line\">mv kafka_2.11-1.1.0 &#x2F;mnt&#x2F;</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置环境变量\"><a href=\"#配置环境变量\" class=\"headerlink\" title=\"配置环境变量\"></a>配置环境变量</h3><p>将 <code>kafka_2.11-1.1.0/bin</code> 添加到<code>path</code>，以方便访问</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>\n<p>在末尾添加：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KAFKA_HOME&#x3D;&#x2F;mnt&#x2F;kafka_2.11-1.1.0</span><br><span class=\"line\">PATH&#x3D;$PATH:$KAFKA_HOME&#x2F;bin</span><br></pre></td></tr></table></figure>\n\n<hr>\n\n<h2 id=\"单机模式\"><a href=\"#单机模式\" class=\"headerlink\" title=\"单机模式\"></a>单机模式</h2><h3 id=\"启动单机模式\"><a href=\"#启动单机模式\" class=\"headerlink\" title=\"启动单机模式\"></a>启动单机模式</h3><h3 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;mnt&#x2F;kafka_2.11-1.1.0&#x2F;config</span><br><span class=\"line\">vi server.properties</span><br></pre></td></tr></table></figure>\n<p>修改配置文件中的以下内容：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">broker.id&#x3D;1  </span><br><span class=\"line\">port&#x3D;9091</span><br><span class=\"line\">host.name&#x3D;192.168.1.12</span><br><span class=\"line\">num.network.threads&#x3D;3</span><br><span class=\"line\">num.io.threads&#x3D;8</span><br><span class=\"line\">socket.send.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.receive.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.request.max.bytes&#x3D;104857600</span><br><span class=\"line\">log.dirs&#x3D;&#x2F;mnt&#x2F;kafka&#x2F;kafka01&#x2F;</span><br><span class=\"line\">num.partitions&#x3D;1</span><br><span class=\"line\">num.recovery.threads.per.data.dir&#x3D;1</span><br><span class=\"line\">log.retention.hours&#x3D;168</span><br><span class=\"line\">log.segment.bytes&#x3D;1073741824</span><br><span class=\"line\">log.retention.check.interval.ms&#x3D;300000</span><br><span class=\"line\">log.cleaner.enable&#x3D;false</span><br><span class=\"line\">zookeeper.connect&#x3D;192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183</span><br><span class=\"line\">zookeeper.connection.timeout.ms&#x3D;6000</span><br></pre></td></tr></table></figure>\n<h3 id=\"启动程序\"><a href=\"#启动程序\" class=\"headerlink\" title=\"启动程序\"></a>启动程序</h3><p>先要确保zookeeper已启动，然后在Kafka目录执行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup bin&#x2F;kafka-server-start.sh config&#x2F;server.properties &amp;</span><br></pre></td></tr></table></figure>\n<p>如果无报错则说明启动成功。nohup &amp;  是实现在后台启动。</p>\n<h3 id=\"简单测试\"><a href=\"#简单测试\" class=\"headerlink\" title=\"简单测试\"></a>简单测试</h3><p>打开2个终端，分别在Kafka目录执行以下命令<br>启动producer</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin&#x2F;kafka-console-producer.sh --broker-list localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n<h3 id=\"启动consumer\"><a href=\"#启动consumer\" class=\"headerlink\" title=\"启动consumer\"></a>启动consumer</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin&#x2F;kafka-console-consumer.sh --zookeeper localhost:2181 --topic test --from-beginning</span><br></pre></td></tr></table></figure>\n<p>在producer的命令行输入任意字符，观察consumer是否能正确接收。</p>\n<h2 id=\"常见错误\"><a href=\"#常见错误\" class=\"headerlink\" title=\"常见错误\"></a>常见错误</h2><h3 id=\"启动Kafka时出现\"><a href=\"#启动Kafka时出现\" class=\"headerlink\" title=\"启动Kafka时出现\"></a>启动Kafka时出现</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Java HotSpot(TM) Server VM warning: INFO: os::commit_memory(0x67e00000, 1073741824, 0) failed; error&#x3D;&#39;Cannot allocate memory&#39; (errno&#x3D;12)</span><br><span class=\"line\">#</span><br><span class=\"line\"># There is insufficient memory for the Java Runtime Environment to continue.</span><br><span class=\"line\"># Native memory allocation (mmap) failed to map 1073741824 bytes for committing reserved memory.</span><br><span class=\"line\"># An error report file with more information is saved as:</span><br><span class=\"line\"># &#x2F;opt&#x2F;kafka_2.11-0.9.0.1&#x2F;hs_err_pid2249.log</span><br></pre></td></tr></table></figure>\n<h3 id=\"错误原因：\"><a href=\"#错误原因：\" class=\"headerlink\" title=\"错误原因：\"></a>错误原因：</h3><p>Kafka默认使用 <code>-Xmx1G -Xms1G</code> 的JVM内存配置，如果机器内存较小，需要调整启动配置。<br>打开 <code>/config/kafka-server-start.sh</code> ，修改 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export KAFKA_HEAP_OPTS&#x3D;&quot;-Xmx1G -Xms1G&quot; </span><br></pre></td></tr></table></figure>\n<p>为适合当前服务器的配置，例如</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export KAFKA_HEAP_OPTS&#x3D;&quot;-Xmx256M -Xms128M&quot;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"集群模式\"><a href=\"#集群模式\" class=\"headerlink\" title=\"集群模式\"></a>集群模式</h2><h3 id=\"配置hosts\"><a href=\"#配置hosts\" class=\"headerlink\" title=\"配置hosts\"></a>配置hosts</h3><h3 id=\"准备缓存目录\"><a href=\"#准备缓存目录\" class=\"headerlink\" title=\"准备缓存目录\"></a>准备缓存目录</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p &#x2F;mnt&#x2F;kafka&#x2F;kafka0&#123;1,2,3&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装软件\"><a href=\"#安装软件\" class=\"headerlink\" title=\"安装软件\"></a>安装软件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;</span><br><span class=\"line\">kafka01  kafka02  kafka03</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改kafka01-配置文件\"><a href=\"#修改kafka01-配置文件\" class=\"headerlink\" title=\"修改kafka01 配置文件\"></a>修改kafka01 配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka01&#x2F;conf&#x2F;server.properties</span><br><span class=\"line\"></span><br><span class=\"line\">broker.id&#x3D;1</span><br><span class=\"line\">port&#x3D;9091</span><br><span class=\"line\">host.name&#x3D;192.168.1.12</span><br><span class=\"line\">num.network.threads&#x3D;3</span><br><span class=\"line\">num.io.threads&#x3D;8</span><br><span class=\"line\">socket.send.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.receive.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.request.max.bytes&#x3D;104857600</span><br><span class=\"line\">log.dirs&#x3D;&#x2F;mnt&#x2F;kafka&#x2F;kafka01&#x2F;</span><br><span class=\"line\">num.partitions&#x3D;1</span><br><span class=\"line\">num.recovery.threads.per.data.dir&#x3D;1</span><br><span class=\"line\">log.retention.hours&#x3D;168</span><br><span class=\"line\">log.segment.bytes&#x3D;1073741824</span><br><span class=\"line\">log.retention.check.interval.ms&#x3D;300000</span><br><span class=\"line\">log.cleaner.enable&#x3D;false</span><br><span class=\"line\">zookeeper.connect&#x3D;192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183</span><br><span class=\"line\">zookeeper.connection.timeout.ms&#x3D;6000</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改kafka02-配置文件\"><a href=\"#修改kafka02-配置文件\" class=\"headerlink\" title=\"修改kafka02 配置文件\"></a>修改kafka02 配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka01&#x2F;conf&#x2F;server.properties</span><br><span class=\"line\"></span><br><span class=\"line\">broker.id&#x3D;2</span><br><span class=\"line\">port&#x3D;9092</span><br><span class=\"line\">host.name&#x3D;192.168.1.12</span><br><span class=\"line\">num.network.threads&#x3D;3</span><br><span class=\"line\">num.io.threads&#x3D;8</span><br><span class=\"line\">socket.send.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.receive.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.request.max.bytes&#x3D;104857600</span><br><span class=\"line\">log.dirs&#x3D;&#x2F;mnt&#x2F;kafka&#x2F;kafka02&#x2F;</span><br><span class=\"line\">num.partitions&#x3D;1</span><br><span class=\"line\">num.recovery.threads.per.data.dir&#x3D;1</span><br><span class=\"line\">log.retention.hours&#x3D;168</span><br><span class=\"line\">log.segment.bytes&#x3D;1073741824</span><br><span class=\"line\">log.retention.check.interval.ms&#x3D;300000</span><br><span class=\"line\">log.cleaner.enable&#x3D;false</span><br><span class=\"line\">zookeeper.connect&#x3D;192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183</span><br><span class=\"line\">zookeeper.connection.timeout.ms&#x3D;6000</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"修改kafka03-配置文件\"><a href=\"#修改kafka03-配置文件\" class=\"headerlink\" title=\"修改kafka03 配置文件\"></a>修改kafka03 配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;conf&#x2F;server.properties</span><br><span class=\"line\"></span><br><span class=\"line\">broker.id&#x3D;3</span><br><span class=\"line\">port&#x3D;9093</span><br><span class=\"line\">host.name&#x3D;192.168.1.12</span><br><span class=\"line\">num.network.threads&#x3D;3</span><br><span class=\"line\">num.io.threads&#x3D;8</span><br><span class=\"line\">socket.send.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.receive.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.request.max.bytes&#x3D;104857600</span><br><span class=\"line\">log.dirs&#x3D;&#x2F;mnt&#x2F;kafka&#x2F;kafka03&#x2F;</span><br><span class=\"line\">num.partitions&#x3D;1</span><br><span class=\"line\">num.recovery.threads.per.data.dir&#x3D;1</span><br><span class=\"line\">log.retention.hours&#x3D;168</span><br><span class=\"line\">log.segment.bytes&#x3D;1073741824</span><br><span class=\"line\">log.retention.check.interval.ms&#x3D;300000</span><br><span class=\"line\">log.cleaner.enable&#x3D;false</span><br><span class=\"line\">zookeeper.connect&#x3D;192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183</span><br><span class=\"line\">zookeeper.connection.timeout.ms&#x3D;6000</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"启动kafka\"><a href=\"#启动kafka\" class=\"headerlink\" title=\"启动kafka\"></a>启动kafka</h3><p>先要确保zookeeper已启动，然后在启动Kafka</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka01&#x2F;bin&#x2F;kafka-server-start.sh &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka01&#x2F;config&#x2F;server.properties &gt; &#x2F;var&#x2F;log&#x2F;kafka01.out 2&gt;&amp;1 &amp;</span><br><span class=\"line\">nohup &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka02&#x2F;bin&#x2F;kafka-server-start.sh &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka02&#x2F;config&#x2F;server.properties &gt; &#x2F;var&#x2F;log&#x2F;kafka02.out 2&gt;&amp;1 &amp;</span><br><span class=\"line\">nohup &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;bin&#x2F;kafka-server-start.sh &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;config&#x2F;server.properties &gt; &#x2F;var&#x2F;log&#x2F;kafka03.out 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>\n\n<p>查看kafka进程</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jps</span><br><span class=\"line\"></span><br><span class=\"line\">14343 Kafka</span><br><span class=\"line\">14345 Kafka</span><br><span class=\"line\">16941 Jps</span><br><span class=\"line\">14350 Kafka</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h3><h4 id=\"创建-topic-3个分片，3个副本\"><a href=\"#创建-topic-3个分片，3个副本\" class=\"headerlink\" title=\"创建 topic,3个分片，3个副本\"></a>创建 topic,3个分片，3个副本</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;bin&#x2F;kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 3 –partitions 3 –topic test_topic</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"启动一个生产者\"><a href=\"#启动一个生产者\" class=\"headerlink\" title=\"启动一个生产者\"></a>启动一个生产者</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;bin&#x2F;kafka-console-producer.sh –broker-list node1:9091,node2:9092,node3:9093 –topic test_topic </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"启动一个消费者\"><a href=\"#启动一个消费者\" class=\"headerlink\" title=\"启动一个消费者\"></a>启动一个消费者</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;bin&#x2F;kafka-console-consumer.sh –zookeeper localhost:2181 –topic test_topic </span><br></pre></td></tr></table></figure>\n\n<p>####zookeeper查看topic</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin&#x2F;zkCli.sh -server 192.168.1.12:2182</span><br><span class=\"line\"></span><br><span class=\"line\">[zk: 192.168.1.12:2182(CONNECTED) 2] get &#x2F;brokers&#x2F;topics&#x2F;test_topic</span><br><span class=\"line\">&#123;&quot;version&quot;:1,&quot;partitions&quot;:&#123;&quot;2&quot;:[3,1,2],&quot;1&quot;:[2,3,1],&quot;0&quot;:[1,2,3]&#125;&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"配置文件说明\"><a href=\"#配置文件说明\" class=\"headerlink\" title=\"配置文件说明\"></a>配置文件说明</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">broker.id&#x3D;1  #当前机器在集群中的唯一标识，和zookeeper的myid性质一样,</span><br><span class=\"line\"></span><br><span class=\"line\">每一个broker在集群中的唯一表示，要求是正数。当该服务器的IP地址发生改变时，broker.id没有变化，则不会影响consumers的消息情况</span><br><span class=\"line\"></span><br><span class=\"line\">port&#x3D;9092  #当前kafka对外提供服务的端口默认是9092</span><br><span class=\"line\"></span><br><span class=\"line\">host.name&#x3D;192.168.1.172 #broker的主机地址，若是设置了，那么会绑定到这个地址上，若是没有，会绑定到所有的接口上，并将其中之一发送到ZK，一般不设置</span><br><span class=\"line\"></span><br><span class=\"line\">num.network.threads&#x3D;3 #broker处理消息的最大线程数，一般情况下数量为cpu核数</span><br><span class=\"line\"></span><br><span class=\"line\">num.io.threads&#x3D;8 #broker处理磁盘IO的线程数，数值为cpu核数2倍</span><br><span class=\"line\"></span><br><span class=\"line\">socket.send.buffer.bytes&#x3D;102400 #发送缓冲区buffer大小，数据不是一下子就发送的，先回存储到缓冲区了到达一定的大小后在发送，能提高性能</span><br><span class=\"line\"></span><br><span class=\"line\">socket.receive.buffer.bytes&#x3D;102400 #kafka接收缓冲区大小，当数据到达一定大小后在序列化到磁盘</span><br><span class=\"line\"></span><br><span class=\"line\">socket.request.max.bytes&#x3D;104857600 #这个参数是向kafka请求消息或者向kafka发送消息的请请求的最大数，这个值不能超过java的堆栈大小</span><br><span class=\"line\"></span><br><span class=\"line\">log.dirs&#x3D;&#x2F;tmp&#x2F;kafka-logs_1      #kafka数据的存放地址，多个地址的话用逗号分割,多个目录分布在不同磁盘上可以提高读写性能  &#x2F;data&#x2F;kafka-logs-1，&#x2F;data&#x2F;kafka-logs-2</span><br><span class=\"line\"></span><br><span class=\"line\">num.partitions&#x3D;3 #每个topic的分区个数，若是在topic创建时候没有指定的话会被topic创建时的指定参数覆盖</span><br><span class=\"line\"></span><br><span class=\"line\">num.recovery.threads.per.data.dir&#x3D;1 #用于在启动时,用于日志恢复的线程个数,默认是1.</span><br><span class=\"line\"></span><br><span class=\"line\">log.retention.hours&#x3D;168 #默认消息的最大持久化时间，168小时，7天</span><br><span class=\"line\"></span><br><span class=\"line\">log.segment.bytes&#x3D;1073741824    #topic的分区是以一堆segment文件存储的，这个控制每个segment的大小，会被topic创建时的指定参数覆盖</span><br><span class=\"line\"></span><br><span class=\"line\">log.retention.check.interval.ms&#x3D;300000 #每隔300000毫秒去检查上面配置的log失效时间（log.retention.hours&#x3D;168 ），到目录查看是否有过期的消息如果有，删除</span><br><span class=\"line\"></span><br><span class=\"line\">zookeeper.connect&#x3D;localhost:2181,localhost:2182,localhost:2183</span><br><span class=\"line\"></span><br><span class=\"line\">zookeeper.connection.timeout.ms&#x3D;6000 #ZooKeeper的连接超时时间</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"supervisor管理kafka\"><a href=\"#supervisor管理kafka\" class=\"headerlink\" title=\"supervisor管理kafka\"></a>supervisor管理kafka</h3><p><code>vim bin/kafka-run-class.sh</code>   在最上面增加环境路径</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java</span><br><span class=\"line\">export JAVA_HOME</span><br></pre></td></tr></table></figure>\n\n<p><code>vim /etc/supervisor/kafka.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[program:kafka]</span><br><span class=\"line\">command&#x3D;&#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka01&#x2F;bin&#x2F;kafka-server-start.sh &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka01&#x2F;config&#x2F;server.properties</span><br><span class=\"line\">user&#x3D;root</span><br><span class=\"line\">autostart&#x3D;true</span><br><span class=\"line\">autorestart&#x3D;true</span><br><span class=\"line\">startsecs&#x3D;10</span><br><span class=\"line\">stdout_logfile&#x3D;&#x2F;var&#x2F;log&#x2F;kafka.log</span><br><span class=\"line\">stdout_logfile_maxbytes&#x3D;1MB</span><br><span class=\"line\">stdout_logfile_backups&#x3D;10</span><br><span class=\"line\">stdout_capture_maxbytes&#x3D;1MB</span><br><span class=\"line\">stderr_logfile&#x3D;&#x2F;var&#x2F;log&#x2F;kafka.log</span><br><span class=\"line\">stderr_logfile_maxbytes&#x3D;1MB</span><br><span class=\"line\">stderr_logfile_backups&#x3D;10</span><br><span class=\"line\">stderr_capture_maxbytes&#x3D;1MB</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"环境准备\"><a href=\"#环境准备\" class=\"headerlink\" title=\"环境准备\"></a>环境准备</h2><ul>\n<li>安装 jdk</li>\n<li>安装 Zookeeper</li>\n<li>kafaka安装包 <a href=\"http://kafka.apache.org/downloads.html\">http://kafka.apache.org/downloads.html</a></li>\n</ul>\n<h3 id=\"修改host-文件\"><a href=\"#修改host-文件\" class=\"headerlink\" title=\"修改host 文件\"></a>修改host 文件</h3><p><code>vim /etc/hots</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">192.168.1.12 node1</span><br><span class=\"line\">192.168.1.12 node2</span><br><span class=\"line\">192.168.1.12 node3</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载安装包\"><a href=\"#下载安装包\" class=\"headerlink\" title=\"下载安装包\"></a>下载安装包</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget &quot;http:&#x2F;&#x2F;mirrors.shu.edu.cn&#x2F;apache&#x2F;kafka&#x2F;1.1.0&#x2F;kafka_2.12-1.1.0.tgz&quot;</span><br><span class=\"line\">tar -xzvf kafka_2.11-1.1.0.tgz</span><br><span class=\"line\">mv kafka_2.11-1.1.0 &#x2F;mnt&#x2F;</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置环境变量\"><a href=\"#配置环境变量\" class=\"headerlink\" title=\"配置环境变量\"></a>配置环境变量</h3><p>将 <code>kafka_2.11-1.1.0/bin</code> 添加到<code>path</code>，以方便访问</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>\n<p>在末尾添加：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KAFKA_HOME&#x3D;&#x2F;mnt&#x2F;kafka_2.11-1.1.0</span><br><span class=\"line\">PATH&#x3D;$PATH:$KAFKA_HOME&#x2F;bin</span><br></pre></td></tr></table></figure>\n\n<hr>\n\n<h2 id=\"单机模式\"><a href=\"#单机模式\" class=\"headerlink\" title=\"单机模式\"></a>单机模式</h2><h3 id=\"启动单机模式\"><a href=\"#启动单机模式\" class=\"headerlink\" title=\"启动单机模式\"></a>启动单机模式</h3><h3 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;mnt&#x2F;kafka_2.11-1.1.0&#x2F;config</span><br><span class=\"line\">vi server.properties</span><br></pre></td></tr></table></figure>\n<p>修改配置文件中的以下内容：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">broker.id&#x3D;1  </span><br><span class=\"line\">port&#x3D;9091</span><br><span class=\"line\">host.name&#x3D;192.168.1.12</span><br><span class=\"line\">num.network.threads&#x3D;3</span><br><span class=\"line\">num.io.threads&#x3D;8</span><br><span class=\"line\">socket.send.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.receive.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.request.max.bytes&#x3D;104857600</span><br><span class=\"line\">log.dirs&#x3D;&#x2F;mnt&#x2F;kafka&#x2F;kafka01&#x2F;</span><br><span class=\"line\">num.partitions&#x3D;1</span><br><span class=\"line\">num.recovery.threads.per.data.dir&#x3D;1</span><br><span class=\"line\">log.retention.hours&#x3D;168</span><br><span class=\"line\">log.segment.bytes&#x3D;1073741824</span><br><span class=\"line\">log.retention.check.interval.ms&#x3D;300000</span><br><span class=\"line\">log.cleaner.enable&#x3D;false</span><br><span class=\"line\">zookeeper.connect&#x3D;192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183</span><br><span class=\"line\">zookeeper.connection.timeout.ms&#x3D;6000</span><br></pre></td></tr></table></figure>\n<h3 id=\"启动程序\"><a href=\"#启动程序\" class=\"headerlink\" title=\"启动程序\"></a>启动程序</h3><p>先要确保zookeeper已启动，然后在Kafka目录执行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup bin&#x2F;kafka-server-start.sh config&#x2F;server.properties &amp;</span><br></pre></td></tr></table></figure>\n<p>如果无报错则说明启动成功。nohup &amp;  是实现在后台启动。</p>\n<h3 id=\"简单测试\"><a href=\"#简单测试\" class=\"headerlink\" title=\"简单测试\"></a>简单测试</h3><p>打开2个终端，分别在Kafka目录执行以下命令<br>启动producer</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin&#x2F;kafka-console-producer.sh --broker-list localhost:9092 --topic test</span><br></pre></td></tr></table></figure>\n<h3 id=\"启动consumer\"><a href=\"#启动consumer\" class=\"headerlink\" title=\"启动consumer\"></a>启动consumer</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin&#x2F;kafka-console-consumer.sh --zookeeper localhost:2181 --topic test --from-beginning</span><br></pre></td></tr></table></figure>\n<p>在producer的命令行输入任意字符，观察consumer是否能正确接收。</p>\n<h2 id=\"常见错误\"><a href=\"#常见错误\" class=\"headerlink\" title=\"常见错误\"></a>常见错误</h2><h3 id=\"启动Kafka时出现\"><a href=\"#启动Kafka时出现\" class=\"headerlink\" title=\"启动Kafka时出现\"></a>启动Kafka时出现</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Java HotSpot(TM) Server VM warning: INFO: os::commit_memory(0x67e00000, 1073741824, 0) failed; error&#x3D;&#39;Cannot allocate memory&#39; (errno&#x3D;12)</span><br><span class=\"line\">#</span><br><span class=\"line\"># There is insufficient memory for the Java Runtime Environment to continue.</span><br><span class=\"line\"># Native memory allocation (mmap) failed to map 1073741824 bytes for committing reserved memory.</span><br><span class=\"line\"># An error report file with more information is saved as:</span><br><span class=\"line\"># &#x2F;opt&#x2F;kafka_2.11-0.9.0.1&#x2F;hs_err_pid2249.log</span><br></pre></td></tr></table></figure>\n<h3 id=\"错误原因：\"><a href=\"#错误原因：\" class=\"headerlink\" title=\"错误原因：\"></a>错误原因：</h3><p>Kafka默认使用 <code>-Xmx1G -Xms1G</code> 的JVM内存配置，如果机器内存较小，需要调整启动配置。<br>打开 <code>/config/kafka-server-start.sh</code> ，修改 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export KAFKA_HEAP_OPTS&#x3D;&quot;-Xmx1G -Xms1G&quot; </span><br></pre></td></tr></table></figure>\n<p>为适合当前服务器的配置，例如</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export KAFKA_HEAP_OPTS&#x3D;&quot;-Xmx256M -Xms128M&quot;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"集群模式\"><a href=\"#集群模式\" class=\"headerlink\" title=\"集群模式\"></a>集群模式</h2><h3 id=\"配置hosts\"><a href=\"#配置hosts\" class=\"headerlink\" title=\"配置hosts\"></a>配置hosts</h3><h3 id=\"准备缓存目录\"><a href=\"#准备缓存目录\" class=\"headerlink\" title=\"准备缓存目录\"></a>准备缓存目录</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p &#x2F;mnt&#x2F;kafka&#x2F;kafka0&#123;1,2,3&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装软件\"><a href=\"#安装软件\" class=\"headerlink\" title=\"安装软件\"></a>安装软件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;</span><br><span class=\"line\">kafka01  kafka02  kafka03</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改kafka01-配置文件\"><a href=\"#修改kafka01-配置文件\" class=\"headerlink\" title=\"修改kafka01 配置文件\"></a>修改kafka01 配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka01&#x2F;conf&#x2F;server.properties</span><br><span class=\"line\"></span><br><span class=\"line\">broker.id&#x3D;1</span><br><span class=\"line\">port&#x3D;9091</span><br><span class=\"line\">host.name&#x3D;192.168.1.12</span><br><span class=\"line\">num.network.threads&#x3D;3</span><br><span class=\"line\">num.io.threads&#x3D;8</span><br><span class=\"line\">socket.send.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.receive.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.request.max.bytes&#x3D;104857600</span><br><span class=\"line\">log.dirs&#x3D;&#x2F;mnt&#x2F;kafka&#x2F;kafka01&#x2F;</span><br><span class=\"line\">num.partitions&#x3D;1</span><br><span class=\"line\">num.recovery.threads.per.data.dir&#x3D;1</span><br><span class=\"line\">log.retention.hours&#x3D;168</span><br><span class=\"line\">log.segment.bytes&#x3D;1073741824</span><br><span class=\"line\">log.retention.check.interval.ms&#x3D;300000</span><br><span class=\"line\">log.cleaner.enable&#x3D;false</span><br><span class=\"line\">zookeeper.connect&#x3D;192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183</span><br><span class=\"line\">zookeeper.connection.timeout.ms&#x3D;6000</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改kafka02-配置文件\"><a href=\"#修改kafka02-配置文件\" class=\"headerlink\" title=\"修改kafka02 配置文件\"></a>修改kafka02 配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka01&#x2F;conf&#x2F;server.properties</span><br><span class=\"line\"></span><br><span class=\"line\">broker.id&#x3D;2</span><br><span class=\"line\">port&#x3D;9092</span><br><span class=\"line\">host.name&#x3D;192.168.1.12</span><br><span class=\"line\">num.network.threads&#x3D;3</span><br><span class=\"line\">num.io.threads&#x3D;8</span><br><span class=\"line\">socket.send.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.receive.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.request.max.bytes&#x3D;104857600</span><br><span class=\"line\">log.dirs&#x3D;&#x2F;mnt&#x2F;kafka&#x2F;kafka02&#x2F;</span><br><span class=\"line\">num.partitions&#x3D;1</span><br><span class=\"line\">num.recovery.threads.per.data.dir&#x3D;1</span><br><span class=\"line\">log.retention.hours&#x3D;168</span><br><span class=\"line\">log.segment.bytes&#x3D;1073741824</span><br><span class=\"line\">log.retention.check.interval.ms&#x3D;300000</span><br><span class=\"line\">log.cleaner.enable&#x3D;false</span><br><span class=\"line\">zookeeper.connect&#x3D;192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183</span><br><span class=\"line\">zookeeper.connection.timeout.ms&#x3D;6000</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"修改kafka03-配置文件\"><a href=\"#修改kafka03-配置文件\" class=\"headerlink\" title=\"修改kafka03 配置文件\"></a>修改kafka03 配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;conf&#x2F;server.properties</span><br><span class=\"line\"></span><br><span class=\"line\">broker.id&#x3D;3</span><br><span class=\"line\">port&#x3D;9093</span><br><span class=\"line\">host.name&#x3D;192.168.1.12</span><br><span class=\"line\">num.network.threads&#x3D;3</span><br><span class=\"line\">num.io.threads&#x3D;8</span><br><span class=\"line\">socket.send.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.receive.buffer.bytes&#x3D;102400</span><br><span class=\"line\">socket.request.max.bytes&#x3D;104857600</span><br><span class=\"line\">log.dirs&#x3D;&#x2F;mnt&#x2F;kafka&#x2F;kafka03&#x2F;</span><br><span class=\"line\">num.partitions&#x3D;1</span><br><span class=\"line\">num.recovery.threads.per.data.dir&#x3D;1</span><br><span class=\"line\">log.retention.hours&#x3D;168</span><br><span class=\"line\">log.segment.bytes&#x3D;1073741824</span><br><span class=\"line\">log.retention.check.interval.ms&#x3D;300000</span><br><span class=\"line\">log.cleaner.enable&#x3D;false</span><br><span class=\"line\">zookeeper.connect&#x3D;192.168.1.12:2181,192.168.1.12:2182,192.168.1.12:2183</span><br><span class=\"line\">zookeeper.connection.timeout.ms&#x3D;6000</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"启动kafka\"><a href=\"#启动kafka\" class=\"headerlink\" title=\"启动kafka\"></a>启动kafka</h3><p>先要确保zookeeper已启动，然后在启动Kafka</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka01&#x2F;bin&#x2F;kafka-server-start.sh &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka01&#x2F;config&#x2F;server.properties &gt; &#x2F;var&#x2F;log&#x2F;kafka01.out 2&gt;&amp;1 &amp;</span><br><span class=\"line\">nohup &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka02&#x2F;bin&#x2F;kafka-server-start.sh &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka02&#x2F;config&#x2F;server.properties &gt; &#x2F;var&#x2F;log&#x2F;kafka02.out 2&gt;&amp;1 &amp;</span><br><span class=\"line\">nohup &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;bin&#x2F;kafka-server-start.sh &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;config&#x2F;server.properties &gt; &#x2F;var&#x2F;log&#x2F;kafka03.out 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>\n\n<p>查看kafka进程</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jps</span><br><span class=\"line\"></span><br><span class=\"line\">14343 Kafka</span><br><span class=\"line\">14345 Kafka</span><br><span class=\"line\">16941 Jps</span><br><span class=\"line\">14350 Kafka</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h3><h4 id=\"创建-topic-3个分片，3个副本\"><a href=\"#创建-topic-3个分片，3个副本\" class=\"headerlink\" title=\"创建 topic,3个分片，3个副本\"></a>创建 topic,3个分片，3个副本</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;bin&#x2F;kafka-topics.sh –create –zookeeper localhost:2181 –replication-factor 3 –partitions 3 –topic test_topic</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"启动一个生产者\"><a href=\"#启动一个生产者\" class=\"headerlink\" title=\"启动一个生产者\"></a>启动一个生产者</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;bin&#x2F;kafka-console-producer.sh –broker-list node1:9091,node2:9092,node3:9093 –topic test_topic </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"启动一个消费者\"><a href=\"#启动一个消费者\" class=\"headerlink\" title=\"启动一个消费者\"></a>启动一个消费者</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka03&#x2F;bin&#x2F;kafka-console-consumer.sh –zookeeper localhost:2181 –topic test_topic </span><br></pre></td></tr></table></figure>\n\n<p>####zookeeper查看topic</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin&#x2F;zkCli.sh -server 192.168.1.12:2182</span><br><span class=\"line\"></span><br><span class=\"line\">[zk: 192.168.1.12:2182(CONNECTED) 2] get &#x2F;brokers&#x2F;topics&#x2F;test_topic</span><br><span class=\"line\">&#123;&quot;version&quot;:1,&quot;partitions&quot;:&#123;&quot;2&quot;:[3,1,2],&quot;1&quot;:[2,3,1],&quot;0&quot;:[1,2,3]&#125;&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"配置文件说明\"><a href=\"#配置文件说明\" class=\"headerlink\" title=\"配置文件说明\"></a>配置文件说明</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">broker.id&#x3D;1  #当前机器在集群中的唯一标识，和zookeeper的myid性质一样,</span><br><span class=\"line\"></span><br><span class=\"line\">每一个broker在集群中的唯一表示，要求是正数。当该服务器的IP地址发生改变时，broker.id没有变化，则不会影响consumers的消息情况</span><br><span class=\"line\"></span><br><span class=\"line\">port&#x3D;9092  #当前kafka对外提供服务的端口默认是9092</span><br><span class=\"line\"></span><br><span class=\"line\">host.name&#x3D;192.168.1.172 #broker的主机地址，若是设置了，那么会绑定到这个地址上，若是没有，会绑定到所有的接口上，并将其中之一发送到ZK，一般不设置</span><br><span class=\"line\"></span><br><span class=\"line\">num.network.threads&#x3D;3 #broker处理消息的最大线程数，一般情况下数量为cpu核数</span><br><span class=\"line\"></span><br><span class=\"line\">num.io.threads&#x3D;8 #broker处理磁盘IO的线程数，数值为cpu核数2倍</span><br><span class=\"line\"></span><br><span class=\"line\">socket.send.buffer.bytes&#x3D;102400 #发送缓冲区buffer大小，数据不是一下子就发送的，先回存储到缓冲区了到达一定的大小后在发送，能提高性能</span><br><span class=\"line\"></span><br><span class=\"line\">socket.receive.buffer.bytes&#x3D;102400 #kafka接收缓冲区大小，当数据到达一定大小后在序列化到磁盘</span><br><span class=\"line\"></span><br><span class=\"line\">socket.request.max.bytes&#x3D;104857600 #这个参数是向kafka请求消息或者向kafka发送消息的请请求的最大数，这个值不能超过java的堆栈大小</span><br><span class=\"line\"></span><br><span class=\"line\">log.dirs&#x3D;&#x2F;tmp&#x2F;kafka-logs_1      #kafka数据的存放地址，多个地址的话用逗号分割,多个目录分布在不同磁盘上可以提高读写性能  &#x2F;data&#x2F;kafka-logs-1，&#x2F;data&#x2F;kafka-logs-2</span><br><span class=\"line\"></span><br><span class=\"line\">num.partitions&#x3D;3 #每个topic的分区个数，若是在topic创建时候没有指定的话会被topic创建时的指定参数覆盖</span><br><span class=\"line\"></span><br><span class=\"line\">num.recovery.threads.per.data.dir&#x3D;1 #用于在启动时,用于日志恢复的线程个数,默认是1.</span><br><span class=\"line\"></span><br><span class=\"line\">log.retention.hours&#x3D;168 #默认消息的最大持久化时间，168小时，7天</span><br><span class=\"line\"></span><br><span class=\"line\">log.segment.bytes&#x3D;1073741824    #topic的分区是以一堆segment文件存储的，这个控制每个segment的大小，会被topic创建时的指定参数覆盖</span><br><span class=\"line\"></span><br><span class=\"line\">log.retention.check.interval.ms&#x3D;300000 #每隔300000毫秒去检查上面配置的log失效时间（log.retention.hours&#x3D;168 ），到目录查看是否有过期的消息如果有，删除</span><br><span class=\"line\"></span><br><span class=\"line\">zookeeper.connect&#x3D;localhost:2181,localhost:2182,localhost:2183</span><br><span class=\"line\"></span><br><span class=\"line\">zookeeper.connection.timeout.ms&#x3D;6000 #ZooKeeper的连接超时时间</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"supervisor管理kafka\"><a href=\"#supervisor管理kafka\" class=\"headerlink\" title=\"supervisor管理kafka\"></a>supervisor管理kafka</h3><p><code>vim bin/kafka-run-class.sh</code>   在最上面增加环境路径</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java</span><br><span class=\"line\">export JAVA_HOME</span><br></pre></td></tr></table></figure>\n\n<p><code>vim /etc/supervisor/kafka.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[program:kafka]</span><br><span class=\"line\">command&#x3D;&#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka01&#x2F;bin&#x2F;kafka-server-start.sh &#x2F;usr&#x2F;local&#x2F;kafka&#x2F;kafka01&#x2F;config&#x2F;server.properties</span><br><span class=\"line\">user&#x3D;root</span><br><span class=\"line\">autostart&#x3D;true</span><br><span class=\"line\">autorestart&#x3D;true</span><br><span class=\"line\">startsecs&#x3D;10</span><br><span class=\"line\">stdout_logfile&#x3D;&#x2F;var&#x2F;log&#x2F;kafka.log</span><br><span class=\"line\">stdout_logfile_maxbytes&#x3D;1MB</span><br><span class=\"line\">stdout_logfile_backups&#x3D;10</span><br><span class=\"line\">stdout_capture_maxbytes&#x3D;1MB</span><br><span class=\"line\">stderr_logfile&#x3D;&#x2F;var&#x2F;log&#x2F;kafka.log</span><br><span class=\"line\">stderr_logfile_maxbytes&#x3D;1MB</span><br><span class=\"line\">stderr_logfile_backups&#x3D;10</span><br><span class=\"line\">stderr_capture_maxbytes&#x3D;1MB</span><br></pre></td></tr></table></figure>"},{"title":"openresty 编译安装","date":"2020-04-01T06:00:00.000Z","_content":"\n\n\n### 环境安装\n\n```\nyum install pcre pcre-devel openssl-devel gcc curl\nyum install GeoIP-devel GeoIP  -y\nyum install gcc-c++ make gcc -y\nyum install -y gcc gcc-c++ zlib-devel pcre-devel openssl-devel readline-devel\nyum -y install gd-devel\n```\n\n### 下载安装包\n\n```\ncd /usr/loca/src\nwget https://www.openssl.org/source/openssl-1.1.1f.tar.gz  下载最新版\nwget https://openresty.org/download/openresty-1.15.8.3.tar.gz   下载最新版\nwget https://github.com/vozlt/nginx-module-vts/archive/v0.1.18.tar.gz\n\ntar xf openresty-1.15.8.3.tar.gz \ntar xf openssl-1.1.1f.tar.gz\ntar xf v0.1.18.tar.gz\n```\n\n\n\n### 安装\n\n```\ncd openresty-1.15.8.3\n\n./configure  --prefix=/usr/local/openresty  \\\n  --user=nobody  --group=nobody \\\n  --http-client-body-temp-path=client_temp  \\\n  --http-proxy-temp-path=proxy_temp \\\n  --http-fastcgi-temp-path=fastcgi_temp \\\n  --http-uwsgi-temp-path=uwsgi_temp  \\\n  --with-http_ssl_module \\\n  --with-http_gunzip_module     \\\n  --with-http_gzip_static_module    \\\n  --with-file-aio    \\\n  --with-openssl=/usr/local/src/openssl-1.1.1f    \\\n  --with-poll_module       \\\n  --with-http_geoip_module       \\\n  --with-http_sub_module      \\\n  --with-http_v2_module      \\\n  --with-pcre       \\\n  --with-stream    \\\n  --with-http_realip_module \\\n  --with-http_geoip_module --with-mail \\\n  --with-http_mp4_module  \\\n  --with-http_flv_module \\\n  --with-http_auth_request_module  \\\n  --with-http_realip_module  \\\n  --with-http_image_filter_module \\\n  --add-module=/usr/local/src/nginx-module-vts-0.1.18\n  \n \n gmake -j `grep processor /proc/cpuinfo | wc -l` && make install\n \n \n```\n\n\n\nsystemctl 管理文件\n\n```\ncat  <<EOF >> /usr/lib/systemd/system/nginx.service\n[Unit]\nDescription=The nginx HTTP and reverse proxy server\nAfter=network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=forking\nPIDFile=/run/nginx.pid\nExecStartPre=/usr/bin/rm -f /run/nginx.pid\nExecStartPre=/usr/sbin/nginx -t\nExecStart=/usr/sbin/nginx\nExecReload=/bin/kill -s HUP $MAINPID\nKillSignal=SIGQUIT\nTimeoutStopSec=5\nKillMode=process\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\nEOF\n```\n\n### nginx 编译安装 错误\n\n第一个错误 : `/configure: error: C compiler cc is not found `缺少gcc编译器。\n\n```\nyum -y install gcc-c++ autoconf automake\n```\n\n第二个错误：`/configure: error: the HTTP rewrite module requires the PCRE library.`确少PCRE库\n\n```\nyum   -y install pcre pcre-devel\n```\n\n 第三个错误：`./configure: error: the HTTP cache module requires md5 functions from OpenSSL library. You can either disable the module by using --without-http-cache option, or install the OpenSSL library into the system, or build the OpenSSL library statically from the source with nginx by using --with-http_ssl_module --with-openssl=<path> options. `缺少ssl错误。\n\n```\nyum -y install openssl openssl-devel\n```\n\n第四个错误：`./configure: error: the HTTP gzip module requires the zlib library. `缺少zlib库\n\n```\nyum install -y zlib-devel\n```\n\n第五个错误信息：`./configure: error: the HTTP XSLT module requires the libxml2/libxslt  `缺少libxml2\n\n```\nyum -y install libxml2 libxml2-dev && yum -y install libxslt-devel\n```\n\n第六个错误信息：`./configure: error: the HTTP image filter module requires the GD library. You can either do not enable the module or install the libraries.`\n\n解决方法：http_image_filter_module是nginx提供的集成图片处理模块，需要gd-devel的支持\n\n```\n  yum -y install gd-devel\n```\n\n第七个错误信息：`./configure: error: perl module ExtUtils::Embed is required` 缺少ExtUtils\n\n```\nyum -y install perl-devel perl-ExtUtils-Embed\n```\n\n第八个错误信息：`./configure: error: the GeoIP module requires the GeoIP library. You can either do not enable the module or install the library. `缺少GeoIP\n\n```\nyum -y install GeoIP GeoIP-devel GeoIP-data\n```\n\n\n\n\n\n### nginx 开启 nginx-module-vts 监控\n\n```\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    vhost_traffic_status_zone;     \n    vhost_traffic_status_filter_by_host on;\n    #vhost_traffic_status_dump logs/vts.db;   #持久化数据\n    \n    server {\n        listen       80;\n        server_name  localhost;\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n        location /status {\n            vhost_traffic_status_display;\n            vhost_traffic_status_display_format html;\n        }\n    }\n}\n\n在浏览器打开   http://ip/status\n```\n\n```\n\n打开vhost过滤：\nvhost_traffic_status_filter_by_host on;\n开启此功能，在Nginx配置有多个server_name的情况下，会根据不同的server_name进行流量的统计，否则默认会把流量全部计算到第一个server_name上。\n在不想统计流量的server区域禁用vhost_traffic_status，配置示例：\nserver {\n...\nvhost_traffic_status off;\n...\n}\n```\n\n\n\n配置监控数据采集模块 nginx-vts-exporter\n\n```\nhttps://github.com/hnlq715/nginx-vts-exporter\n\n\n\nnginx-vts-exporter-0.9.1.linux-amd64/nginx-vts-exporter -nginx.scrape_timeout 10 -nginx.scrape_uri http://127.0.0.1/status/format/json\n\n\nnginx_vts_exporter的默认端口号：9913，对外暴露监控接口http://xxx:9913/metrics.\n```\n\n监控采集指标说明\n\n```\nnginx_server_requestMsec： 统计nginx，各个server请求转发的平均处理时间，精确到host\nnginx_server_requests：统计nginx各个host 各个请求的总数，精确到状态码\n\n```\n\nnginx_server_bytes：统计nginx进出的字节计数可以精确到每个host，in进，out出\n\n```\n\nnginx_server_bytes{direction=\"in\",host=\"*\"} 466638\nnginx_server_bytes{direction=\"in\",host=\"127.0.0.1\"} 21031\nnginx_server_bytes{direction=\"in\",host=\"9.56.39.66\"} 445607\nnginx_server_bytes{direction=\"out\",host=\"*\"} 8.089076e+06\nnginx_server_bytes{direction=\"out\",host=\"127.0.0.1\"} 1.993122e+06\nnginx_server_bytes{direction=\"out\",host=\"9.56.39.66\"} 6.095954e+06\n```\n\nnginx_server_cache：统计nginx缓存计算器，精确到每一种状态和转发type\n\n```\nnginx_server_cache{host=\"*\",status=\"bypass\"} 0\nnginx_server_cache{host=\"*\",status=\"expired\"} 0\nnginx_server_cache{host=\"*\",status=\"hit\"} 0\nnginx_server_cache{host=\"*\",status=\"miss\"} 0\nnginx_server_cache{host=\"*\",status=\"revalidated\"} 0\nnginx_server_cache{host=\"*\",status=\"scarce\"} 0\nnginx_server_cache{host=\"*\",status=\"stale\"} 0\nnginx_server_cache{host=\"*\",status=\"updating\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"bypass\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"expired\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"hit\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"miss\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"revalidated\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"scarce\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"stale\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"updating\"} 0\n```\n\nnginx_server_connections： 统计nginx几种连接状态type的连接数\n\n```\nnginx_server_connections{status=\"accepted\"} 98\nnginx_server_connections{status=\"active\"} 1\nnginx_server_connections{status=\"handled\"} 98\nnginx_server_connections{status=\"reading\"} 0\nnginx_server_connections{status=\"requests\"} 942\nnginx_server_connections{status=\"waiting\"} 0\nnginx_server_connections{status=\"writing\"} 1\n```\n\nnginx_server_requestMsec： 统计nginx，各个server请求转发的平均处理时间，精确到host \n\n```\nnginx_server_requestMsec{host=\"*\"} 0\nnginx_server_requestMsec{host=\"127.0.0.1\"} 0\nnginx_server_requestMsec{host=\"9.56.39.66\"} 0\n```\n\nnginx_server_requests：统计nginx各个host 各个请求的总数，精确到状态码\n\n```\nnginx_server_requests{code=\"1xx\",host=\"*\"} 0\nnginx_server_requests{code=\"1xx\",host=\"9.56.39.66\"} 0\nnginx_server_requests{code=\"2xx\",host=\"*\"} 940\nnginx_server_requests{code=\"2xx\",host=\"9.56.39.66\"} 745\nnginx_server_requests{code=\"3xx\",host=\"*\"} 0\nnginx_server_requests{code=\"3xx\",host=\"9.56.39.66\"} 0\nnginx_server_requests{code=\"4xx\",host=\"*\"} 1\nnginx_server_requests{code=\"4xx\",host=\"9.56.39.66\"} 1\nnginx_server_requests{code=\"5xx\",host=\"*\"} 0\nnginx_server_requests{code=\"5xx\",host=\"9.56.39.66\"} 0\nnginx_server_requests{code=\"total\",host=\"*\"} 941\nnginx_server_requests{code=\"total\",host=\"9.56.39.66\"} 746\n```\n\nnginx_upstream_bytes： 统计nginx各个 upstream 分组的字节总数，细分到进出\n\n```\nnginx_upstream_bytes{direction=\"in\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_bytes{direction=\"out\",upstream=\"server_java_weixin\"} 0\n```\n\nnginx_upstream_requestMsec： 统计nginx 转发每个upstream中各个节点的请求的处理时间ms，不足1ms，会被标记为0\n\n```\nnginx_upstream_requestMsec{backend=\"9.56.39.66:8700\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requestMsec{backend=\"9.56.39.66:8800\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requestMsec{backend=\"9.56.39.66:8900\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requestMsec{backend=\"9.56.39.66:8901\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requestMsec{backend=\"9.56.39.66:8902\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requestMsec{backend=\"9.56.39.66:8903\",upstream=\"server_java_weixin\"} 0\n```\n\nnginx_upstream_requests： 统计各个upstream 请求总数，精确到状态码\n\n```\nnginx_upstream_requests{code=\"1xx\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requests{code=\"2xx\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requests{code=\"3xx\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requests{code=\"4xx\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requests{code=\"5xx\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requests{code=\"total\",upstream=\"server_java_weixin\"} 0\n```\n\nnginx_upstream_responseMsec：统计各个upstream 平均响应时长，精确到每个节点\n\n```\nnginx_upstream_responseMsec{backend=\"9.56.39.66:8700\",upstream=\"server_java_weixin\"} 293\nnginx_upstream_responseMsec{backend=\"9.56.39.66:8800\",upstream=\"server_java_weixin\"} 293\nnginx_upstream_responseMsec{backend=\"9.56.39.66:8900\",upstream=\"server_java_weixin\"} 292\nnginx_upstream_responseMsec{backend=\"9.56.39.66:8901\",upstream=\"server_java_weixin\"} 297\nnginx_upstream_responseMsec{backend=\"9.56.39.66:8902\",upstream=\"server_java_weixin\"} 295\nnginx_upstream_responseMsec{backend=\"9.56.39.66:8903\",upstream=\"server_java_weixin\"} 296\n```\n\n","source":"_posts/openresty编译安装.md","raw":"---\ntitle: openresty 编译安装\ndate: 2020-04-1 14:00:00\ncategories: \n- openresty\ntags:\n- linux\n- nginx\n---\n\n\n\n### 环境安装\n\n```\nyum install pcre pcre-devel openssl-devel gcc curl\nyum install GeoIP-devel GeoIP  -y\nyum install gcc-c++ make gcc -y\nyum install -y gcc gcc-c++ zlib-devel pcre-devel openssl-devel readline-devel\nyum -y install gd-devel\n```\n\n### 下载安装包\n\n```\ncd /usr/loca/src\nwget https://www.openssl.org/source/openssl-1.1.1f.tar.gz  下载最新版\nwget https://openresty.org/download/openresty-1.15.8.3.tar.gz   下载最新版\nwget https://github.com/vozlt/nginx-module-vts/archive/v0.1.18.tar.gz\n\ntar xf openresty-1.15.8.3.tar.gz \ntar xf openssl-1.1.1f.tar.gz\ntar xf v0.1.18.tar.gz\n```\n\n\n\n### 安装\n\n```\ncd openresty-1.15.8.3\n\n./configure  --prefix=/usr/local/openresty  \\\n  --user=nobody  --group=nobody \\\n  --http-client-body-temp-path=client_temp  \\\n  --http-proxy-temp-path=proxy_temp \\\n  --http-fastcgi-temp-path=fastcgi_temp \\\n  --http-uwsgi-temp-path=uwsgi_temp  \\\n  --with-http_ssl_module \\\n  --with-http_gunzip_module     \\\n  --with-http_gzip_static_module    \\\n  --with-file-aio    \\\n  --with-openssl=/usr/local/src/openssl-1.1.1f    \\\n  --with-poll_module       \\\n  --with-http_geoip_module       \\\n  --with-http_sub_module      \\\n  --with-http_v2_module      \\\n  --with-pcre       \\\n  --with-stream    \\\n  --with-http_realip_module \\\n  --with-http_geoip_module --with-mail \\\n  --with-http_mp4_module  \\\n  --with-http_flv_module \\\n  --with-http_auth_request_module  \\\n  --with-http_realip_module  \\\n  --with-http_image_filter_module \\\n  --add-module=/usr/local/src/nginx-module-vts-0.1.18\n  \n \n gmake -j `grep processor /proc/cpuinfo | wc -l` && make install\n \n \n```\n\n\n\nsystemctl 管理文件\n\n```\ncat  <<EOF >> /usr/lib/systemd/system/nginx.service\n[Unit]\nDescription=The nginx HTTP and reverse proxy server\nAfter=network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=forking\nPIDFile=/run/nginx.pid\nExecStartPre=/usr/bin/rm -f /run/nginx.pid\nExecStartPre=/usr/sbin/nginx -t\nExecStart=/usr/sbin/nginx\nExecReload=/bin/kill -s HUP $MAINPID\nKillSignal=SIGQUIT\nTimeoutStopSec=5\nKillMode=process\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\nEOF\n```\n\n### nginx 编译安装 错误\n\n第一个错误 : `/configure: error: C compiler cc is not found `缺少gcc编译器。\n\n```\nyum -y install gcc-c++ autoconf automake\n```\n\n第二个错误：`/configure: error: the HTTP rewrite module requires the PCRE library.`确少PCRE库\n\n```\nyum   -y install pcre pcre-devel\n```\n\n 第三个错误：`./configure: error: the HTTP cache module requires md5 functions from OpenSSL library. You can either disable the module by using --without-http-cache option, or install the OpenSSL library into the system, or build the OpenSSL library statically from the source with nginx by using --with-http_ssl_module --with-openssl=<path> options. `缺少ssl错误。\n\n```\nyum -y install openssl openssl-devel\n```\n\n第四个错误：`./configure: error: the HTTP gzip module requires the zlib library. `缺少zlib库\n\n```\nyum install -y zlib-devel\n```\n\n第五个错误信息：`./configure: error: the HTTP XSLT module requires the libxml2/libxslt  `缺少libxml2\n\n```\nyum -y install libxml2 libxml2-dev && yum -y install libxslt-devel\n```\n\n第六个错误信息：`./configure: error: the HTTP image filter module requires the GD library. You can either do not enable the module or install the libraries.`\n\n解决方法：http_image_filter_module是nginx提供的集成图片处理模块，需要gd-devel的支持\n\n```\n  yum -y install gd-devel\n```\n\n第七个错误信息：`./configure: error: perl module ExtUtils::Embed is required` 缺少ExtUtils\n\n```\nyum -y install perl-devel perl-ExtUtils-Embed\n```\n\n第八个错误信息：`./configure: error: the GeoIP module requires the GeoIP library. You can either do not enable the module or install the library. `缺少GeoIP\n\n```\nyum -y install GeoIP GeoIP-devel GeoIP-data\n```\n\n\n\n\n\n### nginx 开启 nginx-module-vts 监控\n\n```\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    vhost_traffic_status_zone;     \n    vhost_traffic_status_filter_by_host on;\n    #vhost_traffic_status_dump logs/vts.db;   #持久化数据\n    \n    server {\n        listen       80;\n        server_name  localhost;\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n        location /status {\n            vhost_traffic_status_display;\n            vhost_traffic_status_display_format html;\n        }\n    }\n}\n\n在浏览器打开   http://ip/status\n```\n\n```\n\n打开vhost过滤：\nvhost_traffic_status_filter_by_host on;\n开启此功能，在Nginx配置有多个server_name的情况下，会根据不同的server_name进行流量的统计，否则默认会把流量全部计算到第一个server_name上。\n在不想统计流量的server区域禁用vhost_traffic_status，配置示例：\nserver {\n...\nvhost_traffic_status off;\n...\n}\n```\n\n\n\n配置监控数据采集模块 nginx-vts-exporter\n\n```\nhttps://github.com/hnlq715/nginx-vts-exporter\n\n\n\nnginx-vts-exporter-0.9.1.linux-amd64/nginx-vts-exporter -nginx.scrape_timeout 10 -nginx.scrape_uri http://127.0.0.1/status/format/json\n\n\nnginx_vts_exporter的默认端口号：9913，对外暴露监控接口http://xxx:9913/metrics.\n```\n\n监控采集指标说明\n\n```\nnginx_server_requestMsec： 统计nginx，各个server请求转发的平均处理时间，精确到host\nnginx_server_requests：统计nginx各个host 各个请求的总数，精确到状态码\n\n```\n\nnginx_server_bytes：统计nginx进出的字节计数可以精确到每个host，in进，out出\n\n```\n\nnginx_server_bytes{direction=\"in\",host=\"*\"} 466638\nnginx_server_bytes{direction=\"in\",host=\"127.0.0.1\"} 21031\nnginx_server_bytes{direction=\"in\",host=\"9.56.39.66\"} 445607\nnginx_server_bytes{direction=\"out\",host=\"*\"} 8.089076e+06\nnginx_server_bytes{direction=\"out\",host=\"127.0.0.1\"} 1.993122e+06\nnginx_server_bytes{direction=\"out\",host=\"9.56.39.66\"} 6.095954e+06\n```\n\nnginx_server_cache：统计nginx缓存计算器，精确到每一种状态和转发type\n\n```\nnginx_server_cache{host=\"*\",status=\"bypass\"} 0\nnginx_server_cache{host=\"*\",status=\"expired\"} 0\nnginx_server_cache{host=\"*\",status=\"hit\"} 0\nnginx_server_cache{host=\"*\",status=\"miss\"} 0\nnginx_server_cache{host=\"*\",status=\"revalidated\"} 0\nnginx_server_cache{host=\"*\",status=\"scarce\"} 0\nnginx_server_cache{host=\"*\",status=\"stale\"} 0\nnginx_server_cache{host=\"*\",status=\"updating\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"bypass\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"expired\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"hit\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"miss\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"revalidated\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"scarce\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"stale\"} 0\nnginx_server_cache{host=\"9.56.39.66\",status=\"updating\"} 0\n```\n\nnginx_server_connections： 统计nginx几种连接状态type的连接数\n\n```\nnginx_server_connections{status=\"accepted\"} 98\nnginx_server_connections{status=\"active\"} 1\nnginx_server_connections{status=\"handled\"} 98\nnginx_server_connections{status=\"reading\"} 0\nnginx_server_connections{status=\"requests\"} 942\nnginx_server_connections{status=\"waiting\"} 0\nnginx_server_connections{status=\"writing\"} 1\n```\n\nnginx_server_requestMsec： 统计nginx，各个server请求转发的平均处理时间，精确到host \n\n```\nnginx_server_requestMsec{host=\"*\"} 0\nnginx_server_requestMsec{host=\"127.0.0.1\"} 0\nnginx_server_requestMsec{host=\"9.56.39.66\"} 0\n```\n\nnginx_server_requests：统计nginx各个host 各个请求的总数，精确到状态码\n\n```\nnginx_server_requests{code=\"1xx\",host=\"*\"} 0\nnginx_server_requests{code=\"1xx\",host=\"9.56.39.66\"} 0\nnginx_server_requests{code=\"2xx\",host=\"*\"} 940\nnginx_server_requests{code=\"2xx\",host=\"9.56.39.66\"} 745\nnginx_server_requests{code=\"3xx\",host=\"*\"} 0\nnginx_server_requests{code=\"3xx\",host=\"9.56.39.66\"} 0\nnginx_server_requests{code=\"4xx\",host=\"*\"} 1\nnginx_server_requests{code=\"4xx\",host=\"9.56.39.66\"} 1\nnginx_server_requests{code=\"5xx\",host=\"*\"} 0\nnginx_server_requests{code=\"5xx\",host=\"9.56.39.66\"} 0\nnginx_server_requests{code=\"total\",host=\"*\"} 941\nnginx_server_requests{code=\"total\",host=\"9.56.39.66\"} 746\n```\n\nnginx_upstream_bytes： 统计nginx各个 upstream 分组的字节总数，细分到进出\n\n```\nnginx_upstream_bytes{direction=\"in\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_bytes{direction=\"out\",upstream=\"server_java_weixin\"} 0\n```\n\nnginx_upstream_requestMsec： 统计nginx 转发每个upstream中各个节点的请求的处理时间ms，不足1ms，会被标记为0\n\n```\nnginx_upstream_requestMsec{backend=\"9.56.39.66:8700\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requestMsec{backend=\"9.56.39.66:8800\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requestMsec{backend=\"9.56.39.66:8900\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requestMsec{backend=\"9.56.39.66:8901\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requestMsec{backend=\"9.56.39.66:8902\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requestMsec{backend=\"9.56.39.66:8903\",upstream=\"server_java_weixin\"} 0\n```\n\nnginx_upstream_requests： 统计各个upstream 请求总数，精确到状态码\n\n```\nnginx_upstream_requests{code=\"1xx\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requests{code=\"2xx\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requests{code=\"3xx\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requests{code=\"4xx\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requests{code=\"5xx\",upstream=\"server_java_weixin\"} 0\nnginx_upstream_requests{code=\"total\",upstream=\"server_java_weixin\"} 0\n```\n\nnginx_upstream_responseMsec：统计各个upstream 平均响应时长，精确到每个节点\n\n```\nnginx_upstream_responseMsec{backend=\"9.56.39.66:8700\",upstream=\"server_java_weixin\"} 293\nnginx_upstream_responseMsec{backend=\"9.56.39.66:8800\",upstream=\"server_java_weixin\"} 293\nnginx_upstream_responseMsec{backend=\"9.56.39.66:8900\",upstream=\"server_java_weixin\"} 292\nnginx_upstream_responseMsec{backend=\"9.56.39.66:8901\",upstream=\"server_java_weixin\"} 297\nnginx_upstream_responseMsec{backend=\"9.56.39.66:8902\",upstream=\"server_java_weixin\"} 295\nnginx_upstream_responseMsec{backend=\"9.56.39.66:8903\",upstream=\"server_java_weixin\"} 296\n```\n\n","slug":"openresty编译安装","published":1,"updated":"2021-01-27T08:20:35.765Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h280013q0us72238s9e","content":"<h3 id=\"环境安装\"><a href=\"#环境安装\" class=\"headerlink\" title=\"环境安装\"></a>环境安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install pcre pcre-devel openssl-devel gcc curl</span><br><span class=\"line\">yum install GeoIP-devel GeoIP  -y</span><br><span class=\"line\">yum install gcc-c++ make gcc -y</span><br><span class=\"line\">yum install -y gcc gcc-c++ zlib-devel pcre-devel openssl-devel readline-devel</span><br><span class=\"line\">yum -y install gd-devel</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载安装包\"><a href=\"#下载安装包\" class=\"headerlink\" title=\"下载安装包\"></a>下载安装包</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;usr&#x2F;loca&#x2F;src</span><br><span class=\"line\">wget https:&#x2F;&#x2F;www.openssl.org&#x2F;source&#x2F;openssl-1.1.1f.tar.gz  下载最新版</span><br><span class=\"line\">wget https:&#x2F;&#x2F;openresty.org&#x2F;download&#x2F;openresty-1.15.8.3.tar.gz   下载最新版</span><br><span class=\"line\">wget https:&#x2F;&#x2F;github.com&#x2F;vozlt&#x2F;nginx-module-vts&#x2F;archive&#x2F;v0.1.18.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">tar xf openresty-1.15.8.3.tar.gz </span><br><span class=\"line\">tar xf openssl-1.1.1f.tar.gz</span><br><span class=\"line\">tar xf v0.1.18.tar.gz</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd openresty-1.15.8.3</span><br><span class=\"line\"></span><br><span class=\"line\">.&#x2F;configure  --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;openresty  \\</span><br><span class=\"line\">  --user&#x3D;nobody  --group&#x3D;nobody \\</span><br><span class=\"line\">  --http-client-body-temp-path&#x3D;client_temp  \\</span><br><span class=\"line\">  --http-proxy-temp-path&#x3D;proxy_temp \\</span><br><span class=\"line\">  --http-fastcgi-temp-path&#x3D;fastcgi_temp \\</span><br><span class=\"line\">  --http-uwsgi-temp-path&#x3D;uwsgi_temp  \\</span><br><span class=\"line\">  --with-http_ssl_module \\</span><br><span class=\"line\">  --with-http_gunzip_module     \\</span><br><span class=\"line\">  --with-http_gzip_static_module    \\</span><br><span class=\"line\">  --with-file-aio    \\</span><br><span class=\"line\">  --with-openssl&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;openssl-1.1.1f    \\</span><br><span class=\"line\">  --with-poll_module       \\</span><br><span class=\"line\">  --with-http_geoip_module       \\</span><br><span class=\"line\">  --with-http_sub_module      \\</span><br><span class=\"line\">  --with-http_v2_module      \\</span><br><span class=\"line\">  --with-pcre       \\</span><br><span class=\"line\">  --with-stream    \\</span><br><span class=\"line\">  --with-http_realip_module \\</span><br><span class=\"line\">  --with-http_geoip_module --with-mail \\</span><br><span class=\"line\">  --with-http_mp4_module  \\</span><br><span class=\"line\">  --with-http_flv_module \\</span><br><span class=\"line\">  --with-http_auth_request_module  \\</span><br><span class=\"line\">  --with-http_realip_module  \\</span><br><span class=\"line\">  --with-http_image_filter_module \\</span><br><span class=\"line\">  --add-module&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;nginx-module-vts-0.1.18</span><br><span class=\"line\">  </span><br><span class=\"line\"> </span><br><span class=\"line\"> gmake -j &#96;grep processor &#x2F;proc&#x2F;cpuinfo | wc -l&#96; &amp;&amp; make install</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n\n\n\n<p>systemctl 管理文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat  &lt;&lt;EOF &gt;&gt; &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;nginx.service</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description&#x3D;The nginx HTTP and reverse proxy server</span><br><span class=\"line\">After&#x3D;network.target remote-fs.target nss-lookup.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type&#x3D;forking</span><br><span class=\"line\">PIDFile&#x3D;&#x2F;run&#x2F;nginx.pid</span><br><span class=\"line\">ExecStartPre&#x3D;&#x2F;usr&#x2F;bin&#x2F;rm -f &#x2F;run&#x2F;nginx.pid</span><br><span class=\"line\">ExecStartPre&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx -t</span><br><span class=\"line\">ExecStart&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx</span><br><span class=\"line\">ExecReload&#x3D;&#x2F;bin&#x2F;kill -s HUP $MAINPID</span><br><span class=\"line\">KillSignal&#x3D;SIGQUIT</span><br><span class=\"line\">TimeoutStopSec&#x3D;5</span><br><span class=\"line\">KillMode&#x3D;process</span><br><span class=\"line\">PrivateTmp&#x3D;true</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy&#x3D;multi-user.target</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"nginx-编译安装-错误\"><a href=\"#nginx-编译安装-错误\" class=\"headerlink\" title=\"nginx 编译安装 错误\"></a>nginx 编译安装 错误</h3><p>第一个错误 : <code>/configure: error: C compiler cc is not found </code>缺少gcc编译器。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gcc-c++ autoconf automake</span><br></pre></td></tr></table></figure>\n\n<p>第二个错误：<code>/configure: error: the HTTP rewrite module requires the PCRE library.</code>确少PCRE库</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum   -y install pcre pcre-devel</span><br></pre></td></tr></table></figure>\n\n<p> 第三个错误：<code>./configure: error: the HTTP cache module requires md5 functions from OpenSSL library. You can either disable the module by using --without-http-cache option, or install the OpenSSL library into the system, or build the OpenSSL library statically from the source with nginx by using --with-http_ssl_module --with-openssl=&lt;path&gt; options. </code>缺少ssl错误。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install openssl openssl-devel</span><br></pre></td></tr></table></figure>\n\n<p>第四个错误：<code>./configure: error: the HTTP gzip module requires the zlib library. </code>缺少zlib库</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y zlib-devel</span><br></pre></td></tr></table></figure>\n\n<p>第五个错误信息：<code>./configure: error: the HTTP XSLT module requires the libxml2/libxslt  </code>缺少libxml2</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install libxml2 libxml2-dev &amp;&amp; yum -y install libxslt-devel</span><br></pre></td></tr></table></figure>\n\n<p>第六个错误信息：<code>./configure: error: the HTTP image filter module requires the GD library. You can either do not enable the module or install the libraries.</code></p>\n<p>解决方法：http_image_filter_module是nginx提供的集成图片处理模块，需要gd-devel的支持</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gd-devel</span><br></pre></td></tr></table></figure>\n\n<p>第七个错误信息：<code>./configure: error: perl module ExtUtils::Embed is required</code> 缺少ExtUtils</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install perl-devel perl-ExtUtils-Embed</span><br></pre></td></tr></table></figure>\n\n<p>第八个错误信息：<code>./configure: error: the GeoIP module requires the GeoIP library. You can either do not enable the module or install the library. </code>缺少GeoIP</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install GeoIP GeoIP-devel GeoIP-data</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"nginx-开启-nginx-module-vts-监控\"><a href=\"#nginx-开启-nginx-module-vts-监控\" class=\"headerlink\" title=\"nginx 开启 nginx-module-vts 监控\"></a>nginx 开启 nginx-module-vts 监控</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http &#123;</span><br><span class=\"line\">    include       mime.types;</span><br><span class=\"line\">    default_type  application&#x2F;octet-stream;</span><br><span class=\"line\">    vhost_traffic_status_zone;     </span><br><span class=\"line\">    vhost_traffic_status_filter_by_host on;</span><br><span class=\"line\">    #vhost_traffic_status_dump logs&#x2F;vts.db;   #持久化数据</span><br><span class=\"line\">    </span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen       80;</span><br><span class=\"line\">        server_name  localhost;</span><br><span class=\"line\">        location &#x2F; &#123;</span><br><span class=\"line\">            root   html;</span><br><span class=\"line\">            index  index.html index.htm;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        location &#x2F;status &#123;</span><br><span class=\"line\">            vhost_traffic_status_display;</span><br><span class=\"line\">            vhost_traffic_status_display_format html;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">在浏览器打开   http:&#x2F;&#x2F;ip&#x2F;status</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">打开vhost过滤：</span><br><span class=\"line\">vhost_traffic_status_filter_by_host on;</span><br><span class=\"line\">开启此功能，在Nginx配置有多个server_name的情况下，会根据不同的server_name进行流量的统计，否则默认会把流量全部计算到第一个server_name上。</span><br><span class=\"line\">在不想统计流量的server区域禁用vhost_traffic_status，配置示例：</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">...</span><br><span class=\"line\">vhost_traffic_status off;</span><br><span class=\"line\">...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>配置监控数据采集模块 nginx-vts-exporter</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;hnlq715&#x2F;nginx-vts-exporter</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">nginx-vts-exporter-0.9.1.linux-amd64&#x2F;nginx-vts-exporter -nginx.scrape_timeout 10 -nginx.scrape_uri http:&#x2F;&#x2F;127.0.0.1&#x2F;status&#x2F;format&#x2F;json</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">nginx_vts_exporter的默认端口号：9913，对外暴露监控接口http:&#x2F;&#x2F;xxx:9913&#x2F;metrics.</span><br></pre></td></tr></table></figure>\n\n<p>监控采集指标说明</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_server_requestMsec： 统计nginx，各个server请求转发的平均处理时间，精确到host</span><br><span class=\"line\">nginx_server_requests：统计nginx各个host 各个请求的总数，精确到状态码</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>nginx_server_bytes：统计nginx进出的字节计数可以精确到每个host，in进，out出</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">nginx_server_bytes&#123;direction&#x3D;&quot;in&quot;,host&#x3D;&quot;*&quot;&#125; 466638</span><br><span class=\"line\">nginx_server_bytes&#123;direction&#x3D;&quot;in&quot;,host&#x3D;&quot;127.0.0.1&quot;&#125; 21031</span><br><span class=\"line\">nginx_server_bytes&#123;direction&#x3D;&quot;in&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 445607</span><br><span class=\"line\">nginx_server_bytes&#123;direction&#x3D;&quot;out&quot;,host&#x3D;&quot;*&quot;&#125; 8.089076e+06</span><br><span class=\"line\">nginx_server_bytes&#123;direction&#x3D;&quot;out&quot;,host&#x3D;&quot;127.0.0.1&quot;&#125; 1.993122e+06</span><br><span class=\"line\">nginx_server_bytes&#123;direction&#x3D;&quot;out&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 6.095954e+06</span><br></pre></td></tr></table></figure>\n\n<p>nginx_server_cache：统计nginx缓存计算器，精确到每一种状态和转发type</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;bypass&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;expired&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;hit&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;miss&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;revalidated&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;scarce&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;stale&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;updating&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;bypass&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;expired&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;hit&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;miss&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;revalidated&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;scarce&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;stale&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;updating&quot;&#125; 0</span><br></pre></td></tr></table></figure>\n\n<p>nginx_server_connections： 统计nginx几种连接状态type的连接数</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;accepted&quot;&#125; 98</span><br><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;active&quot;&#125; 1</span><br><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;handled&quot;&#125; 98</span><br><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;reading&quot;&#125; 0</span><br><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;requests&quot;&#125; 942</span><br><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;waiting&quot;&#125; 0</span><br><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;writing&quot;&#125; 1</span><br></pre></td></tr></table></figure>\n\n<p>nginx_server_requestMsec： 统计nginx，各个server请求转发的平均处理时间，精确到host </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_server_requestMsec&#123;host&#x3D;&quot;*&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requestMsec&#123;host&#x3D;&quot;127.0.0.1&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requestMsec&#123;host&#x3D;&quot;9.56.39.66&quot;&#125; 0</span><br></pre></td></tr></table></figure>\n\n<p>nginx_server_requests：统计nginx各个host 各个请求的总数，精确到状态码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;1xx&quot;,host&#x3D;&quot;*&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;1xx&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;2xx&quot;,host&#x3D;&quot;*&quot;&#125; 940</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;2xx&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 745</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;3xx&quot;,host&#x3D;&quot;*&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;3xx&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;4xx&quot;,host&#x3D;&quot;*&quot;&#125; 1</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;4xx&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 1</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;5xx&quot;,host&#x3D;&quot;*&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;5xx&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;total&quot;,host&#x3D;&quot;*&quot;&#125; 941</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;total&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 746</span><br></pre></td></tr></table></figure>\n\n<p>nginx_upstream_bytes： 统计nginx各个 upstream 分组的字节总数，细分到进出</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_upstream_bytes&#123;direction&#x3D;&quot;in&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_bytes&#123;direction&#x3D;&quot;out&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br></pre></td></tr></table></figure>\n\n<p>nginx_upstream_requestMsec： 统计nginx 转发每个upstream中各个节点的请求的处理时间ms，不足1ms，会被标记为0</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_upstream_requestMsec&#123;backend&#x3D;&quot;9.56.39.66:8700&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requestMsec&#123;backend&#x3D;&quot;9.56.39.66:8800&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requestMsec&#123;backend&#x3D;&quot;9.56.39.66:8900&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requestMsec&#123;backend&#x3D;&quot;9.56.39.66:8901&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requestMsec&#123;backend&#x3D;&quot;9.56.39.66:8902&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requestMsec&#123;backend&#x3D;&quot;9.56.39.66:8903&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br></pre></td></tr></table></figure>\n\n<p>nginx_upstream_requests： 统计各个upstream 请求总数，精确到状态码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_upstream_requests&#123;code&#x3D;&quot;1xx&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requests&#123;code&#x3D;&quot;2xx&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requests&#123;code&#x3D;&quot;3xx&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requests&#123;code&#x3D;&quot;4xx&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requests&#123;code&#x3D;&quot;5xx&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requests&#123;code&#x3D;&quot;total&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br></pre></td></tr></table></figure>\n\n<p>nginx_upstream_responseMsec：统计各个upstream 平均响应时长，精确到每个节点</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_upstream_responseMsec&#123;backend&#x3D;&quot;9.56.39.66:8700&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 293</span><br><span class=\"line\">nginx_upstream_responseMsec&#123;backend&#x3D;&quot;9.56.39.66:8800&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 293</span><br><span class=\"line\">nginx_upstream_responseMsec&#123;backend&#x3D;&quot;9.56.39.66:8900&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 292</span><br><span class=\"line\">nginx_upstream_responseMsec&#123;backend&#x3D;&quot;9.56.39.66:8901&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 297</span><br><span class=\"line\">nginx_upstream_responseMsec&#123;backend&#x3D;&quot;9.56.39.66:8902&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 295</span><br><span class=\"line\">nginx_upstream_responseMsec&#123;backend&#x3D;&quot;9.56.39.66:8903&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 296</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"环境安装\"><a href=\"#环境安装\" class=\"headerlink\" title=\"环境安装\"></a>环境安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install pcre pcre-devel openssl-devel gcc curl</span><br><span class=\"line\">yum install GeoIP-devel GeoIP  -y</span><br><span class=\"line\">yum install gcc-c++ make gcc -y</span><br><span class=\"line\">yum install -y gcc gcc-c++ zlib-devel pcre-devel openssl-devel readline-devel</span><br><span class=\"line\">yum -y install gd-devel</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载安装包\"><a href=\"#下载安装包\" class=\"headerlink\" title=\"下载安装包\"></a>下载安装包</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;usr&#x2F;loca&#x2F;src</span><br><span class=\"line\">wget https:&#x2F;&#x2F;www.openssl.org&#x2F;source&#x2F;openssl-1.1.1f.tar.gz  下载最新版</span><br><span class=\"line\">wget https:&#x2F;&#x2F;openresty.org&#x2F;download&#x2F;openresty-1.15.8.3.tar.gz   下载最新版</span><br><span class=\"line\">wget https:&#x2F;&#x2F;github.com&#x2F;vozlt&#x2F;nginx-module-vts&#x2F;archive&#x2F;v0.1.18.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">tar xf openresty-1.15.8.3.tar.gz </span><br><span class=\"line\">tar xf openssl-1.1.1f.tar.gz</span><br><span class=\"line\">tar xf v0.1.18.tar.gz</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd openresty-1.15.8.3</span><br><span class=\"line\"></span><br><span class=\"line\">.&#x2F;configure  --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;openresty  \\</span><br><span class=\"line\">  --user&#x3D;nobody  --group&#x3D;nobody \\</span><br><span class=\"line\">  --http-client-body-temp-path&#x3D;client_temp  \\</span><br><span class=\"line\">  --http-proxy-temp-path&#x3D;proxy_temp \\</span><br><span class=\"line\">  --http-fastcgi-temp-path&#x3D;fastcgi_temp \\</span><br><span class=\"line\">  --http-uwsgi-temp-path&#x3D;uwsgi_temp  \\</span><br><span class=\"line\">  --with-http_ssl_module \\</span><br><span class=\"line\">  --with-http_gunzip_module     \\</span><br><span class=\"line\">  --with-http_gzip_static_module    \\</span><br><span class=\"line\">  --with-file-aio    \\</span><br><span class=\"line\">  --with-openssl&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;openssl-1.1.1f    \\</span><br><span class=\"line\">  --with-poll_module       \\</span><br><span class=\"line\">  --with-http_geoip_module       \\</span><br><span class=\"line\">  --with-http_sub_module      \\</span><br><span class=\"line\">  --with-http_v2_module      \\</span><br><span class=\"line\">  --with-pcre       \\</span><br><span class=\"line\">  --with-stream    \\</span><br><span class=\"line\">  --with-http_realip_module \\</span><br><span class=\"line\">  --with-http_geoip_module --with-mail \\</span><br><span class=\"line\">  --with-http_mp4_module  \\</span><br><span class=\"line\">  --with-http_flv_module \\</span><br><span class=\"line\">  --with-http_auth_request_module  \\</span><br><span class=\"line\">  --with-http_realip_module  \\</span><br><span class=\"line\">  --with-http_image_filter_module \\</span><br><span class=\"line\">  --add-module&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;nginx-module-vts-0.1.18</span><br><span class=\"line\">  </span><br><span class=\"line\"> </span><br><span class=\"line\"> gmake -j &#96;grep processor &#x2F;proc&#x2F;cpuinfo | wc -l&#96; &amp;&amp; make install</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n\n\n\n<p>systemctl 管理文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat  &lt;&lt;EOF &gt;&gt; &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;nginx.service</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description&#x3D;The nginx HTTP and reverse proxy server</span><br><span class=\"line\">After&#x3D;network.target remote-fs.target nss-lookup.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type&#x3D;forking</span><br><span class=\"line\">PIDFile&#x3D;&#x2F;run&#x2F;nginx.pid</span><br><span class=\"line\">ExecStartPre&#x3D;&#x2F;usr&#x2F;bin&#x2F;rm -f &#x2F;run&#x2F;nginx.pid</span><br><span class=\"line\">ExecStartPre&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx -t</span><br><span class=\"line\">ExecStart&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx</span><br><span class=\"line\">ExecReload&#x3D;&#x2F;bin&#x2F;kill -s HUP $MAINPID</span><br><span class=\"line\">KillSignal&#x3D;SIGQUIT</span><br><span class=\"line\">TimeoutStopSec&#x3D;5</span><br><span class=\"line\">KillMode&#x3D;process</span><br><span class=\"line\">PrivateTmp&#x3D;true</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy&#x3D;multi-user.target</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"nginx-编译安装-错误\"><a href=\"#nginx-编译安装-错误\" class=\"headerlink\" title=\"nginx 编译安装 错误\"></a>nginx 编译安装 错误</h3><p>第一个错误 : <code>/configure: error: C compiler cc is not found </code>缺少gcc编译器。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gcc-c++ autoconf automake</span><br></pre></td></tr></table></figure>\n\n<p>第二个错误：<code>/configure: error: the HTTP rewrite module requires the PCRE library.</code>确少PCRE库</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum   -y install pcre pcre-devel</span><br></pre></td></tr></table></figure>\n\n<p> 第三个错误：<code>./configure: error: the HTTP cache module requires md5 functions from OpenSSL library. You can either disable the module by using --without-http-cache option, or install the OpenSSL library into the system, or build the OpenSSL library statically from the source with nginx by using --with-http_ssl_module --with-openssl=&lt;path&gt; options. </code>缺少ssl错误。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install openssl openssl-devel</span><br></pre></td></tr></table></figure>\n\n<p>第四个错误：<code>./configure: error: the HTTP gzip module requires the zlib library. </code>缺少zlib库</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y zlib-devel</span><br></pre></td></tr></table></figure>\n\n<p>第五个错误信息：<code>./configure: error: the HTTP XSLT module requires the libxml2/libxslt  </code>缺少libxml2</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install libxml2 libxml2-dev &amp;&amp; yum -y install libxslt-devel</span><br></pre></td></tr></table></figure>\n\n<p>第六个错误信息：<code>./configure: error: the HTTP image filter module requires the GD library. You can either do not enable the module or install the libraries.</code></p>\n<p>解决方法：http_image_filter_module是nginx提供的集成图片处理模块，需要gd-devel的支持</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gd-devel</span><br></pre></td></tr></table></figure>\n\n<p>第七个错误信息：<code>./configure: error: perl module ExtUtils::Embed is required</code> 缺少ExtUtils</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install perl-devel perl-ExtUtils-Embed</span><br></pre></td></tr></table></figure>\n\n<p>第八个错误信息：<code>./configure: error: the GeoIP module requires the GeoIP library. You can either do not enable the module or install the library. </code>缺少GeoIP</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install GeoIP GeoIP-devel GeoIP-data</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"nginx-开启-nginx-module-vts-监控\"><a href=\"#nginx-开启-nginx-module-vts-监控\" class=\"headerlink\" title=\"nginx 开启 nginx-module-vts 监控\"></a>nginx 开启 nginx-module-vts 监控</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http &#123;</span><br><span class=\"line\">    include       mime.types;</span><br><span class=\"line\">    default_type  application&#x2F;octet-stream;</span><br><span class=\"line\">    vhost_traffic_status_zone;     </span><br><span class=\"line\">    vhost_traffic_status_filter_by_host on;</span><br><span class=\"line\">    #vhost_traffic_status_dump logs&#x2F;vts.db;   #持久化数据</span><br><span class=\"line\">    </span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen       80;</span><br><span class=\"line\">        server_name  localhost;</span><br><span class=\"line\">        location &#x2F; &#123;</span><br><span class=\"line\">            root   html;</span><br><span class=\"line\">            index  index.html index.htm;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        location &#x2F;status &#123;</span><br><span class=\"line\">            vhost_traffic_status_display;</span><br><span class=\"line\">            vhost_traffic_status_display_format html;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">在浏览器打开   http:&#x2F;&#x2F;ip&#x2F;status</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">打开vhost过滤：</span><br><span class=\"line\">vhost_traffic_status_filter_by_host on;</span><br><span class=\"line\">开启此功能，在Nginx配置有多个server_name的情况下，会根据不同的server_name进行流量的统计，否则默认会把流量全部计算到第一个server_name上。</span><br><span class=\"line\">在不想统计流量的server区域禁用vhost_traffic_status，配置示例：</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">...</span><br><span class=\"line\">vhost_traffic_status off;</span><br><span class=\"line\">...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>配置监控数据采集模块 nginx-vts-exporter</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;hnlq715&#x2F;nginx-vts-exporter</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">nginx-vts-exporter-0.9.1.linux-amd64&#x2F;nginx-vts-exporter -nginx.scrape_timeout 10 -nginx.scrape_uri http:&#x2F;&#x2F;127.0.0.1&#x2F;status&#x2F;format&#x2F;json</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">nginx_vts_exporter的默认端口号：9913，对外暴露监控接口http:&#x2F;&#x2F;xxx:9913&#x2F;metrics.</span><br></pre></td></tr></table></figure>\n\n<p>监控采集指标说明</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_server_requestMsec： 统计nginx，各个server请求转发的平均处理时间，精确到host</span><br><span class=\"line\">nginx_server_requests：统计nginx各个host 各个请求的总数，精确到状态码</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>nginx_server_bytes：统计nginx进出的字节计数可以精确到每个host，in进，out出</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">nginx_server_bytes&#123;direction&#x3D;&quot;in&quot;,host&#x3D;&quot;*&quot;&#125; 466638</span><br><span class=\"line\">nginx_server_bytes&#123;direction&#x3D;&quot;in&quot;,host&#x3D;&quot;127.0.0.1&quot;&#125; 21031</span><br><span class=\"line\">nginx_server_bytes&#123;direction&#x3D;&quot;in&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 445607</span><br><span class=\"line\">nginx_server_bytes&#123;direction&#x3D;&quot;out&quot;,host&#x3D;&quot;*&quot;&#125; 8.089076e+06</span><br><span class=\"line\">nginx_server_bytes&#123;direction&#x3D;&quot;out&quot;,host&#x3D;&quot;127.0.0.1&quot;&#125; 1.993122e+06</span><br><span class=\"line\">nginx_server_bytes&#123;direction&#x3D;&quot;out&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 6.095954e+06</span><br></pre></td></tr></table></figure>\n\n<p>nginx_server_cache：统计nginx缓存计算器，精确到每一种状态和转发type</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;bypass&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;expired&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;hit&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;miss&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;revalidated&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;scarce&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;stale&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;*&quot;,status&#x3D;&quot;updating&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;bypass&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;expired&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;hit&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;miss&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;revalidated&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;scarce&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;stale&quot;&#125; 0</span><br><span class=\"line\">nginx_server_cache&#123;host&#x3D;&quot;9.56.39.66&quot;,status&#x3D;&quot;updating&quot;&#125; 0</span><br></pre></td></tr></table></figure>\n\n<p>nginx_server_connections： 统计nginx几种连接状态type的连接数</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;accepted&quot;&#125; 98</span><br><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;active&quot;&#125; 1</span><br><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;handled&quot;&#125; 98</span><br><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;reading&quot;&#125; 0</span><br><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;requests&quot;&#125; 942</span><br><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;waiting&quot;&#125; 0</span><br><span class=\"line\">nginx_server_connections&#123;status&#x3D;&quot;writing&quot;&#125; 1</span><br></pre></td></tr></table></figure>\n\n<p>nginx_server_requestMsec： 统计nginx，各个server请求转发的平均处理时间，精确到host </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_server_requestMsec&#123;host&#x3D;&quot;*&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requestMsec&#123;host&#x3D;&quot;127.0.0.1&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requestMsec&#123;host&#x3D;&quot;9.56.39.66&quot;&#125; 0</span><br></pre></td></tr></table></figure>\n\n<p>nginx_server_requests：统计nginx各个host 各个请求的总数，精确到状态码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;1xx&quot;,host&#x3D;&quot;*&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;1xx&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;2xx&quot;,host&#x3D;&quot;*&quot;&#125; 940</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;2xx&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 745</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;3xx&quot;,host&#x3D;&quot;*&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;3xx&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;4xx&quot;,host&#x3D;&quot;*&quot;&#125; 1</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;4xx&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 1</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;5xx&quot;,host&#x3D;&quot;*&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;5xx&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 0</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;total&quot;,host&#x3D;&quot;*&quot;&#125; 941</span><br><span class=\"line\">nginx_server_requests&#123;code&#x3D;&quot;total&quot;,host&#x3D;&quot;9.56.39.66&quot;&#125; 746</span><br></pre></td></tr></table></figure>\n\n<p>nginx_upstream_bytes： 统计nginx各个 upstream 分组的字节总数，细分到进出</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_upstream_bytes&#123;direction&#x3D;&quot;in&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_bytes&#123;direction&#x3D;&quot;out&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br></pre></td></tr></table></figure>\n\n<p>nginx_upstream_requestMsec： 统计nginx 转发每个upstream中各个节点的请求的处理时间ms，不足1ms，会被标记为0</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_upstream_requestMsec&#123;backend&#x3D;&quot;9.56.39.66:8700&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requestMsec&#123;backend&#x3D;&quot;9.56.39.66:8800&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requestMsec&#123;backend&#x3D;&quot;9.56.39.66:8900&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requestMsec&#123;backend&#x3D;&quot;9.56.39.66:8901&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requestMsec&#123;backend&#x3D;&quot;9.56.39.66:8902&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requestMsec&#123;backend&#x3D;&quot;9.56.39.66:8903&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br></pre></td></tr></table></figure>\n\n<p>nginx_upstream_requests： 统计各个upstream 请求总数，精确到状态码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_upstream_requests&#123;code&#x3D;&quot;1xx&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requests&#123;code&#x3D;&quot;2xx&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requests&#123;code&#x3D;&quot;3xx&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requests&#123;code&#x3D;&quot;4xx&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requests&#123;code&#x3D;&quot;5xx&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br><span class=\"line\">nginx_upstream_requests&#123;code&#x3D;&quot;total&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 0</span><br></pre></td></tr></table></figure>\n\n<p>nginx_upstream_responseMsec：统计各个upstream 平均响应时长，精确到每个节点</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx_upstream_responseMsec&#123;backend&#x3D;&quot;9.56.39.66:8700&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 293</span><br><span class=\"line\">nginx_upstream_responseMsec&#123;backend&#x3D;&quot;9.56.39.66:8800&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 293</span><br><span class=\"line\">nginx_upstream_responseMsec&#123;backend&#x3D;&quot;9.56.39.66:8900&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 292</span><br><span class=\"line\">nginx_upstream_responseMsec&#123;backend&#x3D;&quot;9.56.39.66:8901&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 297</span><br><span class=\"line\">nginx_upstream_responseMsec&#123;backend&#x3D;&quot;9.56.39.66:8902&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 295</span><br><span class=\"line\">nginx_upstream_responseMsec&#123;backend&#x3D;&quot;9.56.39.66:8903&quot;,upstream&#x3D;&quot;server_java_weixin&quot;&#125; 296</span><br></pre></td></tr></table></figure>\n\n"},{"title":"proxmox 超融合","date":"2020-05-11T06:00:00.000Z","_content":"\n\n\n**安装前准备**\n\n不使用磁盘控制器，不要做raid\n\n\n\n### 安装部署\n\n略\n\n\n\n**刪除內建的LVM thin**\n\nLVM 有两种，分为 Thin 和 非Thin， 而 pve內建的 local-lvm 的格式是 LVM-Thin ，在使用上有好处也有坏处:\n\n1) 好处:用来建vm or ct 可以有 snapshot(快照)的功能，而且可以超额分配硬碟空间(当然是有代价的)\n\n2) 坏处:这个分割区你无法直接放档案进去，等于这个分割区只能給 vm or ct 专用了\n\n若你不想使用 LVM-Thin 想把它移掉，只当一般的 LVM 使用，LVM 相对于 LVM-thin 的优缺点如下:\n\n1) 优点:你可以直接放档案进去\n\n2) 缺点:vm or ct 沒有快照功能，不能超额分配硬碟空间\n\n按下面的方法转换成一般的LVM 来使用\n\n注意:底下的操作会刪掉你 local-lvm 里的所有资料，请确定你 local-lvm 里沒有要保留的资料\n\n\n\n\n\n```bash\napt update\n```","source":"_posts/proxmox超融合.md","raw":"---\ntitle: proxmox 超融合\ndate: 2020-5-11 14:00:00\ncategories: \n- linux\ntags:\n- proxmox\n---\n\n\n\n**安装前准备**\n\n不使用磁盘控制器，不要做raid\n\n\n\n### 安装部署\n\n略\n\n\n\n**刪除內建的LVM thin**\n\nLVM 有两种，分为 Thin 和 非Thin， 而 pve內建的 local-lvm 的格式是 LVM-Thin ，在使用上有好处也有坏处:\n\n1) 好处:用来建vm or ct 可以有 snapshot(快照)的功能，而且可以超额分配硬碟空间(当然是有代价的)\n\n2) 坏处:这个分割区你无法直接放档案进去，等于这个分割区只能給 vm or ct 专用了\n\n若你不想使用 LVM-Thin 想把它移掉，只当一般的 LVM 使用，LVM 相对于 LVM-thin 的优缺点如下:\n\n1) 优点:你可以直接放档案进去\n\n2) 缺点:vm or ct 沒有快照功能，不能超额分配硬碟空间\n\n按下面的方法转换成一般的LVM 来使用\n\n注意:底下的操作会刪掉你 local-lvm 里的所有资料，请确定你 local-lvm 里沒有要保留的资料\n\n\n\n\n\n```bash\napt update\n```","slug":"proxmox超融合","published":1,"updated":"2021-01-27T08:20:35.769Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h290015q0usaq8x4ovx","content":"<p><strong>安装前准备</strong></p>\n<p>不使用磁盘控制器，不要做raid</p>\n<h3 id=\"安装部署\"><a href=\"#安装部署\" class=\"headerlink\" title=\"安装部署\"></a>安装部署</h3><p>略</p>\n<p><strong>刪除內建的LVM thin</strong></p>\n<p>LVM 有两种，分为 Thin 和 非Thin， 而 pve內建的 local-lvm 的格式是 LVM-Thin ，在使用上有好处也有坏处:</p>\n<ol>\n<li><p>好处:用来建vm or ct 可以有 snapshot(快照)的功能，而且可以超额分配硬碟空间(当然是有代价的)</p>\n</li>\n<li><p>坏处:这个分割区你无法直接放档案进去，等于这个分割区只能給 vm or ct 专用了</p>\n</li>\n</ol>\n<p>若你不想使用 LVM-Thin 想把它移掉，只当一般的 LVM 使用，LVM 相对于 LVM-thin 的优缺点如下:</p>\n<ol>\n<li><p>优点:你可以直接放档案进去</p>\n</li>\n<li><p>缺点:vm or ct 沒有快照功能，不能超额分配硬碟空间</p>\n</li>\n</ol>\n<p>按下面的方法转换成一般的LVM 来使用</p>\n<p>注意:底下的操作会刪掉你 local-lvm 里的所有资料，请确定你 local-lvm 里沒有要保留的资料</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt update</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p><strong>安装前准备</strong></p>\n<p>不使用磁盘控制器，不要做raid</p>\n<h3 id=\"安装部署\"><a href=\"#安装部署\" class=\"headerlink\" title=\"安装部署\"></a>安装部署</h3><p>略</p>\n<p><strong>刪除內建的LVM thin</strong></p>\n<p>LVM 有两种，分为 Thin 和 非Thin， 而 pve內建的 local-lvm 的格式是 LVM-Thin ，在使用上有好处也有坏处:</p>\n<ol>\n<li><p>好处:用来建vm or ct 可以有 snapshot(快照)的功能，而且可以超额分配硬碟空间(当然是有代价的)</p>\n</li>\n<li><p>坏处:这个分割区你无法直接放档案进去，等于这个分割区只能給 vm or ct 专用了</p>\n</li>\n</ol>\n<p>若你不想使用 LVM-Thin 想把它移掉，只当一般的 LVM 使用，LVM 相对于 LVM-thin 的优缺点如下:</p>\n<ol>\n<li><p>优点:你可以直接放档案进去</p>\n</li>\n<li><p>缺点:vm or ct 沒有快照功能，不能超额分配硬碟空间</p>\n</li>\n</ol>\n<p>按下面的方法转换成一般的LVM 来使用</p>\n<p>注意:底下的操作会刪掉你 local-lvm 里的所有资料，请确定你 local-lvm 里沒有要保留的资料</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt update</span><br></pre></td></tr></table></figure>"},{"title":"spark 安装","date":"2019-12-13T06:00:00.000Z","_content":"\n##准备\n\n###环境要求\n\nJava版本不低于Hadoop要求，并配置环境变量\n\n### 安装\n\n在网站hadoop.apache.org下载稳定版本的Hadoop包\n\n解压压缩包并检查Hadoop是否可用\n\n```\ntar xf hadoop-3.0.1.tar.gz\nhadoop-3.0.1/bin/hadoop version\n\nHadoop 3.0.1\nSource code repository Unknown -r 496dc57cc2e4f4da117f7a8e3840aaeac0c1d2d0\nCompiled by lei on 2018-03-16T23:00Z\nCompiled with protoc 2.5.0\nFrom source with checksum 504d49cc3bcf4e2b56e2fd44ced8572\nThis command was run using /root/hadoop-3.0.1/share/hadoop/common/hadoop-common-3.0.1.jar\n```\n\n### 修改配置文件\n\n`hadoop-3.0.1/etc/hadoop/hadoop-env.sh`\n\n```\n#第27行\nexport JAVA_HOME=/usr/local/java\n```\n\n\n\nHadoop配置以`.xml`文件形式存在\n\n修改文件 `hadoop-3.0.1/etc/hadoop/core-site.xml` :\n\n```\n<configuration>\n        <property>\n                <!-- 指定hadoop运行时产生文件的存储目录 -->\n                <name>hadoop.tmp.dir</name>\n                <value>/home/users/hadoop/hadoop/tmp</value>\n        </property>\n        <property>\n                <!-- 指定HADOOP所使用的文件系统schema（URI），HDFS的老大（NameNode）的地址 -->\n                <name>fs.default.name</name>\n                <value>hdfs://node1:9000</value>\n        </property>\n</configuration>\n```\n\n修改文件`hadoop-3.0.1/etc/hadoop/hdfs-site.xml`:\n\n```\n<configuration>\n        <property>\n                <name>dfs.datanode.data.dir</name>\n                <value>/home/users/hadoop/hadoop/data</value>\n        </property>\n        <property>\n                <name>dfs.namenode.name.dir</name>\n                <value>/home/users/hadoop/hadoop/name</value>\n        </property>\n        <property>\n                <name>dfs.http.address</name>\n                <value>0.0.0.0:8100</value>\n        </property>\n        <property>\n                <name>dfs.replication</name>\n                <value>1</value>\n        </property>\n</configuration>\n```\n\n### namenode格式化\n\n```\nhadoop-3.0.1/bin/hdfs namenode -format\n```\n\n### 开启Namenode和Datanode\n\n```\nhadoop-3.0.1/sbin/start-dfs.sh\n```\n\n### HDFS的使用\n\nHDFS的命令执行格式：`hadoop fs -cmd`， 其中cmd是类shell的命令(命令可以通过添加环境变量来简化)\n\n```\nhadoop fs -ls /        //查看hdfs根目录的文件树\nhadoop fs -mkdir /test        //创建test文件夹\nhadoop fs -cp 文件 文件        //拷贝文件\n```","source":"_posts/spark安装.md","raw":"---\ntitle: spark 安装\ndate: 2019-12-13 14:00:00\ncategories: \n- bigdata\ntags:\n- spark\n---\n\n##准备\n\n###环境要求\n\nJava版本不低于Hadoop要求，并配置环境变量\n\n### 安装\n\n在网站hadoop.apache.org下载稳定版本的Hadoop包\n\n解压压缩包并检查Hadoop是否可用\n\n```\ntar xf hadoop-3.0.1.tar.gz\nhadoop-3.0.1/bin/hadoop version\n\nHadoop 3.0.1\nSource code repository Unknown -r 496dc57cc2e4f4da117f7a8e3840aaeac0c1d2d0\nCompiled by lei on 2018-03-16T23:00Z\nCompiled with protoc 2.5.0\nFrom source with checksum 504d49cc3bcf4e2b56e2fd44ced8572\nThis command was run using /root/hadoop-3.0.1/share/hadoop/common/hadoop-common-3.0.1.jar\n```\n\n### 修改配置文件\n\n`hadoop-3.0.1/etc/hadoop/hadoop-env.sh`\n\n```\n#第27行\nexport JAVA_HOME=/usr/local/java\n```\n\n\n\nHadoop配置以`.xml`文件形式存在\n\n修改文件 `hadoop-3.0.1/etc/hadoop/core-site.xml` :\n\n```\n<configuration>\n        <property>\n                <!-- 指定hadoop运行时产生文件的存储目录 -->\n                <name>hadoop.tmp.dir</name>\n                <value>/home/users/hadoop/hadoop/tmp</value>\n        </property>\n        <property>\n                <!-- 指定HADOOP所使用的文件系统schema（URI），HDFS的老大（NameNode）的地址 -->\n                <name>fs.default.name</name>\n                <value>hdfs://node1:9000</value>\n        </property>\n</configuration>\n```\n\n修改文件`hadoop-3.0.1/etc/hadoop/hdfs-site.xml`:\n\n```\n<configuration>\n        <property>\n                <name>dfs.datanode.data.dir</name>\n                <value>/home/users/hadoop/hadoop/data</value>\n        </property>\n        <property>\n                <name>dfs.namenode.name.dir</name>\n                <value>/home/users/hadoop/hadoop/name</value>\n        </property>\n        <property>\n                <name>dfs.http.address</name>\n                <value>0.0.0.0:8100</value>\n        </property>\n        <property>\n                <name>dfs.replication</name>\n                <value>1</value>\n        </property>\n</configuration>\n```\n\n### namenode格式化\n\n```\nhadoop-3.0.1/bin/hdfs namenode -format\n```\n\n### 开启Namenode和Datanode\n\n```\nhadoop-3.0.1/sbin/start-dfs.sh\n```\n\n### HDFS的使用\n\nHDFS的命令执行格式：`hadoop fs -cmd`， 其中cmd是类shell的命令(命令可以通过添加环境变量来简化)\n\n```\nhadoop fs -ls /        //查看hdfs根目录的文件树\nhadoop fs -mkdir /test        //创建test文件夹\nhadoop fs -cp 文件 文件        //拷贝文件\n```","slug":"spark安装","published":1,"updated":"2021-01-27T08:20:35.774Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2c0018q0us87eg6xwr","content":"<p>##准备</p>\n<p>###环境要求</p>\n<p>Java版本不低于Hadoop要求，并配置环境变量</p>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><p>在网站hadoop.apache.org下载稳定版本的Hadoop包</p>\n<p>解压压缩包并检查Hadoop是否可用</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xf hadoop-3.0.1.tar.gz</span><br><span class=\"line\">hadoop-3.0.1&#x2F;bin&#x2F;hadoop version</span><br><span class=\"line\"></span><br><span class=\"line\">Hadoop 3.0.1</span><br><span class=\"line\">Source code repository Unknown -r 496dc57cc2e4f4da117f7a8e3840aaeac0c1d2d0</span><br><span class=\"line\">Compiled by lei on 2018-03-16T23:00Z</span><br><span class=\"line\">Compiled with protoc 2.5.0</span><br><span class=\"line\">From source with checksum 504d49cc3bcf4e2b56e2fd44ced8572</span><br><span class=\"line\">This command was run using &#x2F;root&#x2F;hadoop-3.0.1&#x2F;share&#x2F;hadoop&#x2F;common&#x2F;hadoop-common-3.0.1.jar</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h3><p><code>hadoop-3.0.1/etc/hadoop/hadoop-env.sh</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#第27行</span><br><span class=\"line\">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java</span><br></pre></td></tr></table></figure>\n\n\n\n<p>Hadoop配置以<code>.xml</code>文件形式存在</p>\n<p>修改文件 <code>hadoop-3.0.1/etc/hadoop/core-site.xml</code> :</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">                &lt;!-- 指定hadoop运行时产生文件的存储目录 --&gt;</span><br><span class=\"line\">                &lt;name&gt;hadoop.tmp.dir&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;&#x2F;home&#x2F;users&#x2F;hadoop&#x2F;hadoop&#x2F;tmp&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">                &lt;!-- 指定HADOOP所使用的文件系统schema（URI），HDFS的老大（NameNode）的地址 --&gt;</span><br><span class=\"line\">                &lt;name&gt;fs.default.name&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;hdfs:&#x2F;&#x2F;node1:9000&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<p>修改文件<code>hadoop-3.0.1/etc/hadoop/hdfs-site.xml</code>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.datanode.data.dir&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;&#x2F;home&#x2F;users&#x2F;hadoop&#x2F;hadoop&#x2F;data&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.namenode.name.dir&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;&#x2F;home&#x2F;users&#x2F;hadoop&#x2F;hadoop&#x2F;name&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.http.address&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;0.0.0.0:8100&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.replication&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;1&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"namenode格式化\"><a href=\"#namenode格式化\" class=\"headerlink\" title=\"namenode格式化\"></a>namenode格式化</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop-3.0.1&#x2F;bin&#x2F;hdfs namenode -format</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"开启Namenode和Datanode\"><a href=\"#开启Namenode和Datanode\" class=\"headerlink\" title=\"开启Namenode和Datanode\"></a>开启Namenode和Datanode</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop-3.0.1&#x2F;sbin&#x2F;start-dfs.sh</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HDFS的使用\"><a href=\"#HDFS的使用\" class=\"headerlink\" title=\"HDFS的使用\"></a>HDFS的使用</h3><p>HDFS的命令执行格式：<code>hadoop fs -cmd</code>， 其中cmd是类shell的命令(命令可以通过添加环境变量来简化)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop fs -ls &#x2F;        &#x2F;&#x2F;查看hdfs根目录的文件树</span><br><span class=\"line\">hadoop fs -mkdir &#x2F;test        &#x2F;&#x2F;创建test文件夹</span><br><span class=\"line\">hadoop fs -cp 文件 文件        &#x2F;&#x2F;拷贝文件</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>##准备</p>\n<p>###环境要求</p>\n<p>Java版本不低于Hadoop要求，并配置环境变量</p>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><p>在网站hadoop.apache.org下载稳定版本的Hadoop包</p>\n<p>解压压缩包并检查Hadoop是否可用</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xf hadoop-3.0.1.tar.gz</span><br><span class=\"line\">hadoop-3.0.1&#x2F;bin&#x2F;hadoop version</span><br><span class=\"line\"></span><br><span class=\"line\">Hadoop 3.0.1</span><br><span class=\"line\">Source code repository Unknown -r 496dc57cc2e4f4da117f7a8e3840aaeac0c1d2d0</span><br><span class=\"line\">Compiled by lei on 2018-03-16T23:00Z</span><br><span class=\"line\">Compiled with protoc 2.5.0</span><br><span class=\"line\">From source with checksum 504d49cc3bcf4e2b56e2fd44ced8572</span><br><span class=\"line\">This command was run using &#x2F;root&#x2F;hadoop-3.0.1&#x2F;share&#x2F;hadoop&#x2F;common&#x2F;hadoop-common-3.0.1.jar</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h3><p><code>hadoop-3.0.1/etc/hadoop/hadoop-env.sh</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#第27行</span><br><span class=\"line\">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java</span><br></pre></td></tr></table></figure>\n\n\n\n<p>Hadoop配置以<code>.xml</code>文件形式存在</p>\n<p>修改文件 <code>hadoop-3.0.1/etc/hadoop/core-site.xml</code> :</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">                &lt;!-- 指定hadoop运行时产生文件的存储目录 --&gt;</span><br><span class=\"line\">                &lt;name&gt;hadoop.tmp.dir&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;&#x2F;home&#x2F;users&#x2F;hadoop&#x2F;hadoop&#x2F;tmp&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">                &lt;!-- 指定HADOOP所使用的文件系统schema（URI），HDFS的老大（NameNode）的地址 --&gt;</span><br><span class=\"line\">                &lt;name&gt;fs.default.name&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;hdfs:&#x2F;&#x2F;node1:9000&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<p>修改文件<code>hadoop-3.0.1/etc/hadoop/hdfs-site.xml</code>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.datanode.data.dir&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;&#x2F;home&#x2F;users&#x2F;hadoop&#x2F;hadoop&#x2F;data&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.namenode.name.dir&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;&#x2F;home&#x2F;users&#x2F;hadoop&#x2F;hadoop&#x2F;name&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.http.address&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;0.0.0.0:8100&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">        &lt;property&gt;</span><br><span class=\"line\">                &lt;name&gt;dfs.replication&lt;&#x2F;name&gt;</span><br><span class=\"line\">                &lt;value&gt;1&lt;&#x2F;value&gt;</span><br><span class=\"line\">        &lt;&#x2F;property&gt;</span><br><span class=\"line\">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"namenode格式化\"><a href=\"#namenode格式化\" class=\"headerlink\" title=\"namenode格式化\"></a>namenode格式化</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop-3.0.1&#x2F;bin&#x2F;hdfs namenode -format</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"开启Namenode和Datanode\"><a href=\"#开启Namenode和Datanode\" class=\"headerlink\" title=\"开启Namenode和Datanode\"></a>开启Namenode和Datanode</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop-3.0.1&#x2F;sbin&#x2F;start-dfs.sh</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"HDFS的使用\"><a href=\"#HDFS的使用\" class=\"headerlink\" title=\"HDFS的使用\"></a>HDFS的使用</h3><p>HDFS的命令执行格式：<code>hadoop fs -cmd</code>， 其中cmd是类shell的命令(命令可以通过添加环境变量来简化)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hadoop fs -ls &#x2F;        &#x2F;&#x2F;查看hdfs根目录的文件树</span><br><span class=\"line\">hadoop fs -mkdir &#x2F;test        &#x2F;&#x2F;创建test文件夹</span><br><span class=\"line\">hadoop fs -cp 文件 文件        &#x2F;&#x2F;拷贝文件</span><br></pre></td></tr></table></figure>"},{"title":"pipenv使用","date":"2019-12-13T06:00:00.000Z","_content":"\n\n### 安装pipenv\n\n`python2.7.x or python3.6.* `\n\n```\npip install pipenv\n```\n\n### 启动pipenv\n\n```\ncd my_project\npipenv install\n```\n\n然后将目录更改为包含你的Python项目的文件夹，并启动Pipenv，这将在项目目录中创建两个新文件Pipfile和Pipfile.lock，如果项目不存在，则为项目创建一个新的虚拟环境。 如果你添加–two或–three标志到上面的最后一个命令，它分别使用Python 2或3来初始化你的项目。 否则将使用默认版本的Python。\n\n### 管理python依赖关系\n\n#### 安装Python包，请使用install关键字。\n\n```\npipenv install beautifulsoup4\n```\n\n#### 卸载Python包，请使用uninstall关键字。\n\n```\npipenv uninstall beautifulsoup4\n```\n\n#### 冻结软件包名称及其版本\n\n```\npipenv lock\n```\n\n如果另一个用户克隆存储库，可以添加Pipfiles到你的Git存储库，这样他们只需要在他们的系统中安装Pipenv，Pipenv会自动找到Pipfiles，创建一个新的虚拟环境并安装必要的软件包。\n\n```\npipenv install\n```\n\n### 管理开发环境\n\n通常有一些Python包只在你的开发环境中需要，而不是在你的生产环境中，例如单元测试包。 Pipenv将使用–dev标志保持两个环境分开。\n\n```\npipenv install --dev nose2\n```\n\nnose2，但也将其关联为只在开发环境中需要的软件包。 这很有用，因为现在，如果你要在你的生产环境中安装你的项目，\n\n```\npipenv install\n```\n\n默认情况下不会安装nose2包。 但是，如果另一个开发人员将你的项目克隆到自己的开发环境中，他们可以使用–dev标志，\n\n```\npipenv install –dev\n```\n\n并安装所有依赖项，包括开发包。\n\n### 运行代码\n\n为了激活与你的Python项目相关联的虚拟环境，你可以使用简单地shell命令，比如\n\n```\npipenv run which python\n```\n\n将在你的虚拟环境中运行which python命令，并显示与你的虚拟环境相关联的python可执行文件所在的路径。 这是在虚拟环境中运行你自己的Python代码的一个简单方法，\n\n```\npipenv run python my_project.py\n```\n\n如果你不想每次运行Python时都输入这么多，你可以在shell中设置一个别名，例如，\n\n```\nalias prp=\"pipenv run python\"\n```\n\n### 用法\n\n新建一个准备当环境的文件夹pipenvtest，并cd进入该文件夹：\n\n| 命令                          | 说明                            | 例子 |\n| ----------------------------- | ------------------------------- | ---- |\n| `pipenv --three`              | 会使用当前系统的Python3创建环境 |      |\n| `pipenv --python 3.6`         | 指定某一Python版本创建环境      |      |\n| `pipenv shell`                | 激活虚拟环境                    |      |\n| `pipenv --where`              | 显示目录信息                    |      |\n| `pipenv --venv`               | 显示虚拟环境信息                |      |\n| `pipenv --py`                 | 显示Python解释器信息            |      |\n| `pipenv install requests`     | 安装相关模块并加入到Pipfile     |      |\n| `pipenv install django==1.11` | 安装固定版本模块并加入到Pipfile |      |\n| `pipenv graph`                | 查看目前安装的库及其依赖        |      |\n| `pipenv check`                | 检查安全漏洞                    |      |\n| `pipenv uninstall --all`      | 卸载全部包并从Pipfile中移除     |      |\n\n### 设置国内源\n\n可以设置国内源：\n\n`Pipfile`文件中`[source]`下面`url`属性，比如修改成：\n\n`url = \"https://pypi.tuna.tsinghua.edu.cn/simple\"`","source":"_posts/pipenv使用.md","raw":"---\ntitle: pipenv使用\ndate: 2019-12-13 14:00:00\ncategories: \n- python\ntags:\n- pipenv\n- python\n---\n\n\n### 安装pipenv\n\n`python2.7.x or python3.6.* `\n\n```\npip install pipenv\n```\n\n### 启动pipenv\n\n```\ncd my_project\npipenv install\n```\n\n然后将目录更改为包含你的Python项目的文件夹，并启动Pipenv，这将在项目目录中创建两个新文件Pipfile和Pipfile.lock，如果项目不存在，则为项目创建一个新的虚拟环境。 如果你添加–two或–three标志到上面的最后一个命令，它分别使用Python 2或3来初始化你的项目。 否则将使用默认版本的Python。\n\n### 管理python依赖关系\n\n#### 安装Python包，请使用install关键字。\n\n```\npipenv install beautifulsoup4\n```\n\n#### 卸载Python包，请使用uninstall关键字。\n\n```\npipenv uninstall beautifulsoup4\n```\n\n#### 冻结软件包名称及其版本\n\n```\npipenv lock\n```\n\n如果另一个用户克隆存储库，可以添加Pipfiles到你的Git存储库，这样他们只需要在他们的系统中安装Pipenv，Pipenv会自动找到Pipfiles，创建一个新的虚拟环境并安装必要的软件包。\n\n```\npipenv install\n```\n\n### 管理开发环境\n\n通常有一些Python包只在你的开发环境中需要，而不是在你的生产环境中，例如单元测试包。 Pipenv将使用–dev标志保持两个环境分开。\n\n```\npipenv install --dev nose2\n```\n\nnose2，但也将其关联为只在开发环境中需要的软件包。 这很有用，因为现在，如果你要在你的生产环境中安装你的项目，\n\n```\npipenv install\n```\n\n默认情况下不会安装nose2包。 但是，如果另一个开发人员将你的项目克隆到自己的开发环境中，他们可以使用–dev标志，\n\n```\npipenv install –dev\n```\n\n并安装所有依赖项，包括开发包。\n\n### 运行代码\n\n为了激活与你的Python项目相关联的虚拟环境，你可以使用简单地shell命令，比如\n\n```\npipenv run which python\n```\n\n将在你的虚拟环境中运行which python命令，并显示与你的虚拟环境相关联的python可执行文件所在的路径。 这是在虚拟环境中运行你自己的Python代码的一个简单方法，\n\n```\npipenv run python my_project.py\n```\n\n如果你不想每次运行Python时都输入这么多，你可以在shell中设置一个别名，例如，\n\n```\nalias prp=\"pipenv run python\"\n```\n\n### 用法\n\n新建一个准备当环境的文件夹pipenvtest，并cd进入该文件夹：\n\n| 命令                          | 说明                            | 例子 |\n| ----------------------------- | ------------------------------- | ---- |\n| `pipenv --three`              | 会使用当前系统的Python3创建环境 |      |\n| `pipenv --python 3.6`         | 指定某一Python版本创建环境      |      |\n| `pipenv shell`                | 激活虚拟环境                    |      |\n| `pipenv --where`              | 显示目录信息                    |      |\n| `pipenv --venv`               | 显示虚拟环境信息                |      |\n| `pipenv --py`                 | 显示Python解释器信息            |      |\n| `pipenv install requests`     | 安装相关模块并加入到Pipfile     |      |\n| `pipenv install django==1.11` | 安装固定版本模块并加入到Pipfile |      |\n| `pipenv graph`                | 查看目前安装的库及其依赖        |      |\n| `pipenv check`                | 检查安全漏洞                    |      |\n| `pipenv uninstall --all`      | 卸载全部包并从Pipfile中移除     |      |\n\n### 设置国内源\n\n可以设置国内源：\n\n`Pipfile`文件中`[source]`下面`url`属性，比如修改成：\n\n`url = \"https://pypi.tuna.tsinghua.edu.cn/simple\"`","slug":"pipenv使用","published":1,"updated":"2021-01-27T08:20:35.766Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2d001bq0usbvfoa99v","content":"<h3 id=\"安装pipenv\"><a href=\"#安装pipenv\" class=\"headerlink\" title=\"安装pipenv\"></a>安装pipenv</h3><p><code>python2.7.x or python3.6.* </code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install pipenv</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动pipenv\"><a href=\"#启动pipenv\" class=\"headerlink\" title=\"启动pipenv\"></a>启动pipenv</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd my_project</span><br><span class=\"line\">pipenv install</span><br></pre></td></tr></table></figure>\n\n<p>然后将目录更改为包含你的Python项目的文件夹，并启动Pipenv，这将在项目目录中创建两个新文件Pipfile和Pipfile.lock，如果项目不存在，则为项目创建一个新的虚拟环境。 如果你添加–two或–three标志到上面的最后一个命令，它分别使用Python 2或3来初始化你的项目。 否则将使用默认版本的Python。</p>\n<h3 id=\"管理python依赖关系\"><a href=\"#管理python依赖关系\" class=\"headerlink\" title=\"管理python依赖关系\"></a>管理python依赖关系</h3><h4 id=\"安装Python包，请使用install关键字。\"><a href=\"#安装Python包，请使用install关键字。\" class=\"headerlink\" title=\"安装Python包，请使用install关键字。\"></a>安装Python包，请使用install关键字。</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv install beautifulsoup4</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"卸载Python包，请使用uninstall关键字。\"><a href=\"#卸载Python包，请使用uninstall关键字。\" class=\"headerlink\" title=\"卸载Python包，请使用uninstall关键字。\"></a>卸载Python包，请使用uninstall关键字。</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv uninstall beautifulsoup4</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"冻结软件包名称及其版本\"><a href=\"#冻结软件包名称及其版本\" class=\"headerlink\" title=\"冻结软件包名称及其版本\"></a>冻结软件包名称及其版本</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv lock</span><br></pre></td></tr></table></figure>\n\n<p>如果另一个用户克隆存储库，可以添加Pipfiles到你的Git存储库，这样他们只需要在他们的系统中安装Pipenv，Pipenv会自动找到Pipfiles，创建一个新的虚拟环境并安装必要的软件包。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv install</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"管理开发环境\"><a href=\"#管理开发环境\" class=\"headerlink\" title=\"管理开发环境\"></a>管理开发环境</h3><p>通常有一些Python包只在你的开发环境中需要，而不是在你的生产环境中，例如单元测试包。 Pipenv将使用–dev标志保持两个环境分开。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv install --dev nose2</span><br></pre></td></tr></table></figure>\n\n<p>nose2，但也将其关联为只在开发环境中需要的软件包。 这很有用，因为现在，如果你要在你的生产环境中安装你的项目，</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv install</span><br></pre></td></tr></table></figure>\n\n<p>默认情况下不会安装nose2包。 但是，如果另一个开发人员将你的项目克隆到自己的开发环境中，他们可以使用–dev标志，</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv install –dev</span><br></pre></td></tr></table></figure>\n\n<p>并安装所有依赖项，包括开发包。</p>\n<h3 id=\"运行代码\"><a href=\"#运行代码\" class=\"headerlink\" title=\"运行代码\"></a>运行代码</h3><p>为了激活与你的Python项目相关联的虚拟环境，你可以使用简单地shell命令，比如</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv run which python</span><br></pre></td></tr></table></figure>\n\n<p>将在你的虚拟环境中运行which python命令，并显示与你的虚拟环境相关联的python可执行文件所在的路径。 这是在虚拟环境中运行你自己的Python代码的一个简单方法，</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv run python my_project.py</span><br></pre></td></tr></table></figure>\n\n<p>如果你不想每次运行Python时都输入这么多，你可以在shell中设置一个别名，例如，</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alias prp&#x3D;&quot;pipenv run python&quot;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h3><p>新建一个准备当环境的文件夹pipenvtest，并cd进入该文件夹：</p>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>说明</th>\n<th>例子</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>pipenv --three</code></td>\n<td>会使用当前系统的Python3创建环境</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv --python 3.6</code></td>\n<td>指定某一Python版本创建环境</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv shell</code></td>\n<td>激活虚拟环境</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv --where</code></td>\n<td>显示目录信息</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv --venv</code></td>\n<td>显示虚拟环境信息</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv --py</code></td>\n<td>显示Python解释器信息</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv install requests</code></td>\n<td>安装相关模块并加入到Pipfile</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv install django==1.11</code></td>\n<td>安装固定版本模块并加入到Pipfile</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv graph</code></td>\n<td>查看目前安装的库及其依赖</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv check</code></td>\n<td>检查安全漏洞</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv uninstall --all</code></td>\n<td>卸载全部包并从Pipfile中移除</td>\n<td></td>\n</tr>\n</tbody></table>\n<h3 id=\"设置国内源\"><a href=\"#设置国内源\" class=\"headerlink\" title=\"设置国内源\"></a>设置国内源</h3><p>可以设置国内源：</p>\n<p><code>Pipfile</code>文件中<code>[source]</code>下面<code>url</code>属性，比如修改成：</p>\n<p><code>url = &quot;https://pypi.tuna.tsinghua.edu.cn/simple&quot;</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"安装pipenv\"><a href=\"#安装pipenv\" class=\"headerlink\" title=\"安装pipenv\"></a>安装pipenv</h3><p><code>python2.7.x or python3.6.* </code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install pipenv</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"启动pipenv\"><a href=\"#启动pipenv\" class=\"headerlink\" title=\"启动pipenv\"></a>启动pipenv</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd my_project</span><br><span class=\"line\">pipenv install</span><br></pre></td></tr></table></figure>\n\n<p>然后将目录更改为包含你的Python项目的文件夹，并启动Pipenv，这将在项目目录中创建两个新文件Pipfile和Pipfile.lock，如果项目不存在，则为项目创建一个新的虚拟环境。 如果你添加–two或–three标志到上面的最后一个命令，它分别使用Python 2或3来初始化你的项目。 否则将使用默认版本的Python。</p>\n<h3 id=\"管理python依赖关系\"><a href=\"#管理python依赖关系\" class=\"headerlink\" title=\"管理python依赖关系\"></a>管理python依赖关系</h3><h4 id=\"安装Python包，请使用install关键字。\"><a href=\"#安装Python包，请使用install关键字。\" class=\"headerlink\" title=\"安装Python包，请使用install关键字。\"></a>安装Python包，请使用install关键字。</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv install beautifulsoup4</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"卸载Python包，请使用uninstall关键字。\"><a href=\"#卸载Python包，请使用uninstall关键字。\" class=\"headerlink\" title=\"卸载Python包，请使用uninstall关键字。\"></a>卸载Python包，请使用uninstall关键字。</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv uninstall beautifulsoup4</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"冻结软件包名称及其版本\"><a href=\"#冻结软件包名称及其版本\" class=\"headerlink\" title=\"冻结软件包名称及其版本\"></a>冻结软件包名称及其版本</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv lock</span><br></pre></td></tr></table></figure>\n\n<p>如果另一个用户克隆存储库，可以添加Pipfiles到你的Git存储库，这样他们只需要在他们的系统中安装Pipenv，Pipenv会自动找到Pipfiles，创建一个新的虚拟环境并安装必要的软件包。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv install</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"管理开发环境\"><a href=\"#管理开发环境\" class=\"headerlink\" title=\"管理开发环境\"></a>管理开发环境</h3><p>通常有一些Python包只在你的开发环境中需要，而不是在你的生产环境中，例如单元测试包。 Pipenv将使用–dev标志保持两个环境分开。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv install --dev nose2</span><br></pre></td></tr></table></figure>\n\n<p>nose2，但也将其关联为只在开发环境中需要的软件包。 这很有用，因为现在，如果你要在你的生产环境中安装你的项目，</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv install</span><br></pre></td></tr></table></figure>\n\n<p>默认情况下不会安装nose2包。 但是，如果另一个开发人员将你的项目克隆到自己的开发环境中，他们可以使用–dev标志，</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv install –dev</span><br></pre></td></tr></table></figure>\n\n<p>并安装所有依赖项，包括开发包。</p>\n<h3 id=\"运行代码\"><a href=\"#运行代码\" class=\"headerlink\" title=\"运行代码\"></a>运行代码</h3><p>为了激活与你的Python项目相关联的虚拟环境，你可以使用简单地shell命令，比如</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv run which python</span><br></pre></td></tr></table></figure>\n\n<p>将在你的虚拟环境中运行which python命令，并显示与你的虚拟环境相关联的python可执行文件所在的路径。 这是在虚拟环境中运行你自己的Python代码的一个简单方法，</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pipenv run python my_project.py</span><br></pre></td></tr></table></figure>\n\n<p>如果你不想每次运行Python时都输入这么多，你可以在shell中设置一个别名，例如，</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alias prp&#x3D;&quot;pipenv run python&quot;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h3><p>新建一个准备当环境的文件夹pipenvtest，并cd进入该文件夹：</p>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>说明</th>\n<th>例子</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>pipenv --three</code></td>\n<td>会使用当前系统的Python3创建环境</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv --python 3.6</code></td>\n<td>指定某一Python版本创建环境</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv shell</code></td>\n<td>激活虚拟环境</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv --where</code></td>\n<td>显示目录信息</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv --venv</code></td>\n<td>显示虚拟环境信息</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv --py</code></td>\n<td>显示Python解释器信息</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv install requests</code></td>\n<td>安装相关模块并加入到Pipfile</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv install django==1.11</code></td>\n<td>安装固定版本模块并加入到Pipfile</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv graph</code></td>\n<td>查看目前安装的库及其依赖</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv check</code></td>\n<td>检查安全漏洞</td>\n<td></td>\n</tr>\n<tr>\n<td><code>pipenv uninstall --all</code></td>\n<td>卸载全部包并从Pipfile中移除</td>\n<td></td>\n</tr>\n</tbody></table>\n<h3 id=\"设置国内源\"><a href=\"#设置国内源\" class=\"headerlink\" title=\"设置国内源\"></a>设置国内源</h3><p>可以设置国内源：</p>\n<p><code>Pipfile</code>文件中<code>[source]</code>下面<code>url</code>属性，比如修改成：</p>\n<p><code>url = &quot;https://pypi.tuna.tsinghua.edu.cn/simple&quot;</code></p>\n"},{"title":"代码补全 AI 工具","date":"2020-09-21T04:38:00.000Z","_content":"\n\n\n### python ai 代码补全工具\n\n\n\n#### Kite\n\nhttps://kite.com/\n\n支持 python ，JavaScript\n免费\n\n\n\n#### TabNine\nhttps://www.tabnine.com/blog/deep/\n\n支持23种编程语言\n免费+收费\n\npycharm   插件中安装  Tabnine\n\n在编辑器中输入 \nTabNine::config\n会自动打开配置页面\n\nTabNine::config\nTabNine::version\nTabNine::active\nTabNine::restart\nTabNine::sem 打开当前语言的自动补全\nTabNine::no_sem 禁用当前语言的自动补全\n","source":"_posts/代码补全.md","raw":"---\ntitle: 代码补全 AI 工具\ndate: 2020-09-21 12:38\ncategories:\n- python\n\ntags:\n- tag\n- Kite\n- tabnine\n---\n\n\n\n### python ai 代码补全工具\n\n\n\n#### Kite\n\nhttps://kite.com/\n\n支持 python ，JavaScript\n免费\n\n\n\n#### TabNine\nhttps://www.tabnine.com/blog/deep/\n\n支持23种编程语言\n免费+收费\n\npycharm   插件中安装  Tabnine\n\n在编辑器中输入 \nTabNine::config\n会自动打开配置页面\n\nTabNine::config\nTabNine::version\nTabNine::active\nTabNine::restart\nTabNine::sem 打开当前语言的自动补全\nTabNine::no_sem 禁用当前语言的自动补全\n","slug":"代码补全","published":1,"updated":"2021-01-27T08:20:35.776Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2e001eq0us8gpqfxoi","content":"<h3 id=\"python-ai-代码补全工具\"><a href=\"#python-ai-代码补全工具\" class=\"headerlink\" title=\"python ai 代码补全工具\"></a>python ai 代码补全工具</h3><h4 id=\"Kite\"><a href=\"#Kite\" class=\"headerlink\" title=\"Kite\"></a>Kite</h4><p><a href=\"https://kite.com/\">https://kite.com/</a></p>\n<p>支持 python ，JavaScript<br>免费</p>\n<h4 id=\"TabNine\"><a href=\"#TabNine\" class=\"headerlink\" title=\"TabNine\"></a>TabNine</h4><p><a href=\"https://www.tabnine.com/blog/deep/\">https://www.tabnine.com/blog/deep/</a></p>\n<p>支持23种编程语言<br>免费+收费</p>\n<p>pycharm   插件中安装  Tabnine</p>\n<p>在编辑器中输入<br>TabNine::config<br>会自动打开配置页面</p>\n<p>TabNine::config<br>TabNine::version<br>TabNine::active<br>TabNine::restart<br>TabNine::sem 打开当前语言的自动补全<br>TabNine::no_sem 禁用当前语言的自动补全</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"python-ai-代码补全工具\"><a href=\"#python-ai-代码补全工具\" class=\"headerlink\" title=\"python ai 代码补全工具\"></a>python ai 代码补全工具</h3><h4 id=\"Kite\"><a href=\"#Kite\" class=\"headerlink\" title=\"Kite\"></a>Kite</h4><p><a href=\"https://kite.com/\">https://kite.com/</a></p>\n<p>支持 python ，JavaScript<br>免费</p>\n<h4 id=\"TabNine\"><a href=\"#TabNine\" class=\"headerlink\" title=\"TabNine\"></a>TabNine</h4><p><a href=\"https://www.tabnine.com/blog/deep/\">https://www.tabnine.com/blog/deep/</a></p>\n<p>支持23种编程语言<br>免费+收费</p>\n<p>pycharm   插件中安装  Tabnine</p>\n<p>在编辑器中输入<br>TabNine::config<br>会自动打开配置页面</p>\n<p>TabNine::config<br>TabNine::version<br>TabNine::active<br>TabNine::restart<br>TabNine::sem 打开当前语言的自动补全<br>TabNine::no_sem 禁用当前语言的自动补全</p>\n"},{"title":"主机管理设计","date":"2020-10-13T06:17:00.000Z","_content":"  \n  \n摘要: desc\n<!-- more -->\n\n\n创建数据库\n```\nCREATE DATABASE cmdb\nuse cmdb\n```\n\nidc表\nCREATE TABLE `idc` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(128) NOT NULL,\n  `location` varchar(128) NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\n|  字段   | 描述  |\n|  ----  | ----  |\n| id  | id |\n| name  | 名称 |\n| location | 位置 |\n\n\n物理机表\nserver\nCREATE TABLE `server_hw` (\n  `id` int(11) NOT NULL AUTO_INCREMENT comment '物理机id',\n  `hostname` varchar(128) NOT NULL  comment '主机名' ,\n  `serial_num` varchar(128)   comment '序列号',\n  `CPU` varchar(128)   comment 'CPU',\n  `memory` varchar(58)   comment '内存',\n  `disk` varchar(128)   comment '磁盘',\n  `mg_ip` varchar(128)  comment '管理ip',\n  `net_ip` varchar(128)  comment 'IP',\n  `ops` varchar(128)  comment '操作系统',\n  `asset_numb` varchar(128)  comment '资产编号',\n  `location` varchar(128)  comment 'idc',\n  `purchase_at` TIMESTAMP  comment '采购时间',\n  `over_at` TIMESTAMP  comment '过保时间',\n  `desc` varchar(128)  comment '描述',\n  `guarantee_status` int(2)  comment '保修状态',\n  `status` int(8)  comment '状态',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\n| 字段 | 描 述 |  属性 | 参数 | \n|  ----  | ----  | ---- | ---- |\n| id | id |  uuid | |\n| hostname| 主机名 | str | |\n| serial_num | 序列号 |  str | |\n| CPU | CPU |  str | |\n| memory | 内存 |  str | |\n| disk | 磁盘 | dict | |\n| net | 网卡 |  dict | |\n| mg_ip | 管理ip |  str | |\n| ops | 操作系统 |  str | |\n| asset_numb | 资产编号 | str | |\n| purchase_at | 采购时间 | time | |\n| over_at| 过保时间 | time |  |\n| desc | 备注 | str |  |\n| guarantee_status | 保修状态 | bit | 0, 1|\n| status | 状态 | bit | 0 , 1 , 2 , 3 |\n| location | 位置 | int |  |\n\n\nguarantee_status | 保修状态 | bit | \n0  在保\n1  过保\n\nstatus | 状态 | bit |\n0 下架     000000\n1 上架     000001\n2 上线     000010\n3 下线     000100\n4 故障     001000\n\n下架        000000\n下架, 下线  000100\n下架，故障  001000\n\n上架        000001\n上架，下线  000101\n上架，故障  001001\n\n\n\n\n虚拟机表\nserver_vm\n\nCREATE TABLE `server_vm` (\n  `id` int(11) NOT NULL AUTO_INCREMENT comment '虚拟机id',\n  `hostname` varchar(128)   comment '主机名' ,\n  `serial_num` varchar(128)   comment '序列号',\n  `CPU` varchar(128)   comment 'CPU',\n  `memory` varchar(58)   comment '内存',\n  `disk` varchar(128)   comment '磁盘',\n  `mg_ip` varchar(128)  comment '管理ip',\n  `net_ip` varchar(128)  comment 'IP',\n  `ops` varchar(128)  comment '操作系统',\n  `asset_numb` varchar(128)  comment '资产编号',\n  `location` int  comment '宿主机',\n  `status` int  comment '状态',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\n\n| 字段 | 描 述 |  属性 | 参数 | \n|  ----  | ----  | ---- | ---- |\n| id | id |  uuid | |\n| hostname| 主机名 | str | |\n| serial_num | 序列号 |  str | |\n| CPU | CPU |  str | |\n| memory | 内存 |  str | |\n| disk | 磁盘 | dict | |\n| mg_ip | 管理ip |  str | |\n| net_ip | ip | dict | |\n| ops | 操作系统 |  str | |\n| asset_numb | 资产编号 | str | |\n| desc | 备注 | str |  |\n| location | 位置 | str | |\n\n\n\nstatus : \n  200     成功\n  204     失败\n\n\nidc  crud \n\n/add    post \n{\n  \"name\":\"\",\n  \"location\":\"\"\n}\n\n\n\n\n\n### 项目创建\n```\nmkdir gocmdb\ncd gocmdb\ngo mod init gocmdb\n\nmkdir -p conf middleware models pkg routers runtime\n```\n\n```\nconf：         用于存储配置文件\nmiddleware：   应用中间件\nmodels：       应用数据库模型\npkg：          第三方包\nrouters        路由逻辑处理\nruntime        应用运行时数据\ndatasource     数据库连接和初始化表\n```\n\n```\nconf                配置文件\ncontrollers         控制器 入参处理 api的入口\ndatasource          数据库配置 \nmodels              结构体\ndb                  sql数据文件 postman接口文件\nrepo                数据库的操作\nmiddleware          中间件 jwt实现\nroute               注册路由\nservice             业务逻辑代码\nutils               工具类\nconfig.json         配置文件的映射\nmain.go             主程序入口\n```\n\n\n\n\n\n\n","source":"_posts/cmdb/hosts.md","raw":"---\ntitle: 主机管理设计\ndate: 2020-10-13 14:17\ncategories:\n- cmdb\ntags:\n- cmdb\n---\n  \n  \n摘要: desc\n<!-- more -->\n\n\n创建数据库\n```\nCREATE DATABASE cmdb\nuse cmdb\n```\n\nidc表\nCREATE TABLE `idc` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(128) NOT NULL,\n  `location` varchar(128) NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\n|  字段   | 描述  |\n|  ----  | ----  |\n| id  | id |\n| name  | 名称 |\n| location | 位置 |\n\n\n物理机表\nserver\nCREATE TABLE `server_hw` (\n  `id` int(11) NOT NULL AUTO_INCREMENT comment '物理机id',\n  `hostname` varchar(128) NOT NULL  comment '主机名' ,\n  `serial_num` varchar(128)   comment '序列号',\n  `CPU` varchar(128)   comment 'CPU',\n  `memory` varchar(58)   comment '内存',\n  `disk` varchar(128)   comment '磁盘',\n  `mg_ip` varchar(128)  comment '管理ip',\n  `net_ip` varchar(128)  comment 'IP',\n  `ops` varchar(128)  comment '操作系统',\n  `asset_numb` varchar(128)  comment '资产编号',\n  `location` varchar(128)  comment 'idc',\n  `purchase_at` TIMESTAMP  comment '采购时间',\n  `over_at` TIMESTAMP  comment '过保时间',\n  `desc` varchar(128)  comment '描述',\n  `guarantee_status` int(2)  comment '保修状态',\n  `status` int(8)  comment '状态',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\n| 字段 | 描 述 |  属性 | 参数 | \n|  ----  | ----  | ---- | ---- |\n| id | id |  uuid | |\n| hostname| 主机名 | str | |\n| serial_num | 序列号 |  str | |\n| CPU | CPU |  str | |\n| memory | 内存 |  str | |\n| disk | 磁盘 | dict | |\n| net | 网卡 |  dict | |\n| mg_ip | 管理ip |  str | |\n| ops | 操作系统 |  str | |\n| asset_numb | 资产编号 | str | |\n| purchase_at | 采购时间 | time | |\n| over_at| 过保时间 | time |  |\n| desc | 备注 | str |  |\n| guarantee_status | 保修状态 | bit | 0, 1|\n| status | 状态 | bit | 0 , 1 , 2 , 3 |\n| location | 位置 | int |  |\n\n\nguarantee_status | 保修状态 | bit | \n0  在保\n1  过保\n\nstatus | 状态 | bit |\n0 下架     000000\n1 上架     000001\n2 上线     000010\n3 下线     000100\n4 故障     001000\n\n下架        000000\n下架, 下线  000100\n下架，故障  001000\n\n上架        000001\n上架，下线  000101\n上架，故障  001001\n\n\n\n\n虚拟机表\nserver_vm\n\nCREATE TABLE `server_vm` (\n  `id` int(11) NOT NULL AUTO_INCREMENT comment '虚拟机id',\n  `hostname` varchar(128)   comment '主机名' ,\n  `serial_num` varchar(128)   comment '序列号',\n  `CPU` varchar(128)   comment 'CPU',\n  `memory` varchar(58)   comment '内存',\n  `disk` varchar(128)   comment '磁盘',\n  `mg_ip` varchar(128)  comment '管理ip',\n  `net_ip` varchar(128)  comment 'IP',\n  `ops` varchar(128)  comment '操作系统',\n  `asset_numb` varchar(128)  comment '资产编号',\n  `location` int  comment '宿主机',\n  `status` int  comment '状态',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\n\n| 字段 | 描 述 |  属性 | 参数 | \n|  ----  | ----  | ---- | ---- |\n| id | id |  uuid | |\n| hostname| 主机名 | str | |\n| serial_num | 序列号 |  str | |\n| CPU | CPU |  str | |\n| memory | 内存 |  str | |\n| disk | 磁盘 | dict | |\n| mg_ip | 管理ip |  str | |\n| net_ip | ip | dict | |\n| ops | 操作系统 |  str | |\n| asset_numb | 资产编号 | str | |\n| desc | 备注 | str |  |\n| location | 位置 | str | |\n\n\n\nstatus : \n  200     成功\n  204     失败\n\n\nidc  crud \n\n/add    post \n{\n  \"name\":\"\",\n  \"location\":\"\"\n}\n\n\n\n\n\n### 项目创建\n```\nmkdir gocmdb\ncd gocmdb\ngo mod init gocmdb\n\nmkdir -p conf middleware models pkg routers runtime\n```\n\n```\nconf：         用于存储配置文件\nmiddleware：   应用中间件\nmodels：       应用数据库模型\npkg：          第三方包\nrouters        路由逻辑处理\nruntime        应用运行时数据\ndatasource     数据库连接和初始化表\n```\n\n```\nconf                配置文件\ncontrollers         控制器 入参处理 api的入口\ndatasource          数据库配置 \nmodels              结构体\ndb                  sql数据文件 postman接口文件\nrepo                数据库的操作\nmiddleware          中间件 jwt实现\nroute               注册路由\nservice             业务逻辑代码\nutils               工具类\nconfig.json         配置文件的映射\nmain.go             主程序入口\n```\n\n\n\n\n\n\n","slug":"cmdb/hosts","published":1,"updated":"2021-01-27T08:20:35.743Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2g001iq0uscxeg9q8d","content":"<p>摘要: desc</p>\n<a id=\"more\"></a>\n\n\n<p>创建数据库</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE DATABASE cmdb</span><br><span class=\"line\">use cmdb</span><br></pre></td></tr></table></figure>\n\n<p>idc表<br>CREATE TABLE <code>idc</code> (<br>  <code>id</code> int(11) NOT NULL AUTO_INCREMENT,<br>  <code>name</code> varchar(128) NOT NULL,<br>  <code>location</code> varchar(128) NOT NULL,<br>  PRIMARY KEY (<code>id</code>)<br>) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>id</td>\n</tr>\n<tr>\n<td>name</td>\n<td>名称</td>\n</tr>\n<tr>\n<td>location</td>\n<td>位置</td>\n</tr>\n</tbody></table>\n<p>物理机表<br>server<br>CREATE TABLE <code>server_hw</code> (<br>  <code>id</code> int(11) NOT NULL AUTO_INCREMENT comment ‘物理机id’,<br>  <code>hostname</code> varchar(128) NOT NULL  comment ‘主机名’ ,<br>  <code>serial_num</code> varchar(128)   comment ‘序列号’,<br>  <code>CPU</code> varchar(128)   comment ‘CPU’,<br>  <code>memory</code> varchar(58)   comment ‘内存’,<br>  <code>disk</code> varchar(128)   comment ‘磁盘’,<br>  <code>mg_ip</code> varchar(128)  comment ‘管理ip’,<br>  <code>net_ip</code> varchar(128)  comment ‘IP’,<br>  <code>ops</code> varchar(128)  comment ‘操作系统’,<br>  <code>asset_numb</code> varchar(128)  comment ‘资产编号’,<br>  <code>location</code> varchar(128)  comment ‘idc’,<br>  <code>purchase_at</code> TIMESTAMP  comment ‘采购时间’,<br>  <code>over_at</code> TIMESTAMP  comment ‘过保时间’,<br>  <code>desc</code> varchar(128)  comment ‘描述’,<br>  <code>guarantee_status</code> int(2)  comment ‘保修状态’,<br>  <code>status</code> int(8)  comment ‘状态’,<br>  PRIMARY KEY (<code>id</code>)<br>) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描 述</th>\n<th>属性</th>\n<th>参数</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>id</td>\n<td>uuid</td>\n<td></td>\n</tr>\n<tr>\n<td>hostname</td>\n<td>主机名</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>serial_num</td>\n<td>序列号</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>CPU</td>\n<td>CPU</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>memory</td>\n<td>内存</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>disk</td>\n<td>磁盘</td>\n<td>dict</td>\n<td></td>\n</tr>\n<tr>\n<td>net</td>\n<td>网卡</td>\n<td>dict</td>\n<td></td>\n</tr>\n<tr>\n<td>mg_ip</td>\n<td>管理ip</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>ops</td>\n<td>操作系统</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>asset_numb</td>\n<td>资产编号</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>purchase_at</td>\n<td>采购时间</td>\n<td>time</td>\n<td></td>\n</tr>\n<tr>\n<td>over_at</td>\n<td>过保时间</td>\n<td>time</td>\n<td></td>\n</tr>\n<tr>\n<td>desc</td>\n<td>备注</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>guarantee_status</td>\n<td>保修状态</td>\n<td>bit</td>\n<td>0, 1</td>\n</tr>\n<tr>\n<td>status</td>\n<td>状态</td>\n<td>bit</td>\n<td>0 , 1 , 2 , 3</td>\n</tr>\n<tr>\n<td>location</td>\n<td>位置</td>\n<td>int</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>guarantee_status | 保修状态 | bit |<br>0  在保<br>1  过保</p>\n<p>status | 状态 | bit |<br>0 下架     000000<br>1 上架     000001<br>2 上线     000010<br>3 下线     000100<br>4 故障     001000</p>\n<p>下架        000000<br>下架, 下线  000100<br>下架，故障  001000</p>\n<p>上架        000001<br>上架，下线  000101<br>上架，故障  001001</p>\n<p>虚拟机表<br>server_vm</p>\n<p>CREATE TABLE <code>server_vm</code> (<br>  <code>id</code> int(11) NOT NULL AUTO_INCREMENT comment ‘虚拟机id’,<br>  <code>hostname</code> varchar(128)   comment ‘主机名’ ,<br>  <code>serial_num</code> varchar(128)   comment ‘序列号’,<br>  <code>CPU</code> varchar(128)   comment ‘CPU’,<br>  <code>memory</code> varchar(58)   comment ‘内存’,<br>  <code>disk</code> varchar(128)   comment ‘磁盘’,<br>  <code>mg_ip</code> varchar(128)  comment ‘管理ip’,<br>  <code>net_ip</code> varchar(128)  comment ‘IP’,<br>  <code>ops</code> varchar(128)  comment ‘操作系统’,<br>  <code>asset_numb</code> varchar(128)  comment ‘资产编号’,<br>  <code>location</code> int  comment ‘宿主机’,<br>  <code>status</code> int  comment ‘状态’,<br>  PRIMARY KEY (<code>id</code>)<br>) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描 述</th>\n<th>属性</th>\n<th>参数</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>id</td>\n<td>uuid</td>\n<td></td>\n</tr>\n<tr>\n<td>hostname</td>\n<td>主机名</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>serial_num</td>\n<td>序列号</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>CPU</td>\n<td>CPU</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>memory</td>\n<td>内存</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>disk</td>\n<td>磁盘</td>\n<td>dict</td>\n<td></td>\n</tr>\n<tr>\n<td>mg_ip</td>\n<td>管理ip</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>net_ip</td>\n<td>ip</td>\n<td>dict</td>\n<td></td>\n</tr>\n<tr>\n<td>ops</td>\n<td>操作系统</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>asset_numb</td>\n<td>资产编号</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>desc</td>\n<td>备注</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>location</td>\n<td>位置</td>\n<td>str</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>status :<br>  200     成功<br>  204     失败</p>\n<p>idc  crud </p>\n<p>/add    post<br>{<br>  “name”:””,<br>  “location”:””<br>}</p>\n<h3 id=\"项目创建\"><a href=\"#项目创建\" class=\"headerlink\" title=\"项目创建\"></a>项目创建</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir gocmdb</span><br><span class=\"line\">cd gocmdb</span><br><span class=\"line\">go mod init gocmdb</span><br><span class=\"line\"></span><br><span class=\"line\">mkdir -p conf middleware models pkg routers runtime</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conf：         用于存储配置文件</span><br><span class=\"line\">middleware：   应用中间件</span><br><span class=\"line\">models：       应用数据库模型</span><br><span class=\"line\">pkg：          第三方包</span><br><span class=\"line\">routers        路由逻辑处理</span><br><span class=\"line\">runtime        应用运行时数据</span><br><span class=\"line\">datasource     数据库连接和初始化表</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conf                配置文件</span><br><span class=\"line\">controllers         控制器 入参处理 api的入口</span><br><span class=\"line\">datasource          数据库配置 </span><br><span class=\"line\">models              结构体</span><br><span class=\"line\">db                  sql数据文件 postman接口文件</span><br><span class=\"line\">repo                数据库的操作</span><br><span class=\"line\">middleware          中间件 jwt实现</span><br><span class=\"line\">route               注册路由</span><br><span class=\"line\">service             业务逻辑代码</span><br><span class=\"line\">utils               工具类</span><br><span class=\"line\">config.json         配置文件的映射</span><br><span class=\"line\">main.go             主程序入口</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n","site":{"data":{}},"excerpt":"<p>摘要: desc</p>","more":"<p>创建数据库</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE DATABASE cmdb</span><br><span class=\"line\">use cmdb</span><br></pre></td></tr></table></figure>\n\n<p>idc表<br>CREATE TABLE <code>idc</code> (<br>  <code>id</code> int(11) NOT NULL AUTO_INCREMENT,<br>  <code>name</code> varchar(128) NOT NULL,<br>  <code>location</code> varchar(128) NOT NULL,<br>  PRIMARY KEY (<code>id</code>)<br>) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>id</td>\n</tr>\n<tr>\n<td>name</td>\n<td>名称</td>\n</tr>\n<tr>\n<td>location</td>\n<td>位置</td>\n</tr>\n</tbody></table>\n<p>物理机表<br>server<br>CREATE TABLE <code>server_hw</code> (<br>  <code>id</code> int(11) NOT NULL AUTO_INCREMENT comment ‘物理机id’,<br>  <code>hostname</code> varchar(128) NOT NULL  comment ‘主机名’ ,<br>  <code>serial_num</code> varchar(128)   comment ‘序列号’,<br>  <code>CPU</code> varchar(128)   comment ‘CPU’,<br>  <code>memory</code> varchar(58)   comment ‘内存’,<br>  <code>disk</code> varchar(128)   comment ‘磁盘’,<br>  <code>mg_ip</code> varchar(128)  comment ‘管理ip’,<br>  <code>net_ip</code> varchar(128)  comment ‘IP’,<br>  <code>ops</code> varchar(128)  comment ‘操作系统’,<br>  <code>asset_numb</code> varchar(128)  comment ‘资产编号’,<br>  <code>location</code> varchar(128)  comment ‘idc’,<br>  <code>purchase_at</code> TIMESTAMP  comment ‘采购时间’,<br>  <code>over_at</code> TIMESTAMP  comment ‘过保时间’,<br>  <code>desc</code> varchar(128)  comment ‘描述’,<br>  <code>guarantee_status</code> int(2)  comment ‘保修状态’,<br>  <code>status</code> int(8)  comment ‘状态’,<br>  PRIMARY KEY (<code>id</code>)<br>) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描 述</th>\n<th>属性</th>\n<th>参数</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>id</td>\n<td>uuid</td>\n<td></td>\n</tr>\n<tr>\n<td>hostname</td>\n<td>主机名</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>serial_num</td>\n<td>序列号</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>CPU</td>\n<td>CPU</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>memory</td>\n<td>内存</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>disk</td>\n<td>磁盘</td>\n<td>dict</td>\n<td></td>\n</tr>\n<tr>\n<td>net</td>\n<td>网卡</td>\n<td>dict</td>\n<td></td>\n</tr>\n<tr>\n<td>mg_ip</td>\n<td>管理ip</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>ops</td>\n<td>操作系统</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>asset_numb</td>\n<td>资产编号</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>purchase_at</td>\n<td>采购时间</td>\n<td>time</td>\n<td></td>\n</tr>\n<tr>\n<td>over_at</td>\n<td>过保时间</td>\n<td>time</td>\n<td></td>\n</tr>\n<tr>\n<td>desc</td>\n<td>备注</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>guarantee_status</td>\n<td>保修状态</td>\n<td>bit</td>\n<td>0, 1</td>\n</tr>\n<tr>\n<td>status</td>\n<td>状态</td>\n<td>bit</td>\n<td>0 , 1 , 2 , 3</td>\n</tr>\n<tr>\n<td>location</td>\n<td>位置</td>\n<td>int</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>guarantee_status | 保修状态 | bit |<br>0  在保<br>1  过保</p>\n<p>status | 状态 | bit |<br>0 下架     000000<br>1 上架     000001<br>2 上线     000010<br>3 下线     000100<br>4 故障     001000</p>\n<p>下架        000000<br>下架, 下线  000100<br>下架，故障  001000</p>\n<p>上架        000001<br>上架，下线  000101<br>上架，故障  001001</p>\n<p>虚拟机表<br>server_vm</p>\n<p>CREATE TABLE <code>server_vm</code> (<br>  <code>id</code> int(11) NOT NULL AUTO_INCREMENT comment ‘虚拟机id’,<br>  <code>hostname</code> varchar(128)   comment ‘主机名’ ,<br>  <code>serial_num</code> varchar(128)   comment ‘序列号’,<br>  <code>CPU</code> varchar(128)   comment ‘CPU’,<br>  <code>memory</code> varchar(58)   comment ‘内存’,<br>  <code>disk</code> varchar(128)   comment ‘磁盘’,<br>  <code>mg_ip</code> varchar(128)  comment ‘管理ip’,<br>  <code>net_ip</code> varchar(128)  comment ‘IP’,<br>  <code>ops</code> varchar(128)  comment ‘操作系统’,<br>  <code>asset_numb</code> varchar(128)  comment ‘资产编号’,<br>  <code>location</code> int  comment ‘宿主机’,<br>  <code>status</code> int  comment ‘状态’,<br>  PRIMARY KEY (<code>id</code>)<br>) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th>描 述</th>\n<th>属性</th>\n<th>参数</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>id</td>\n<td>id</td>\n<td>uuid</td>\n<td></td>\n</tr>\n<tr>\n<td>hostname</td>\n<td>主机名</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>serial_num</td>\n<td>序列号</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>CPU</td>\n<td>CPU</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>memory</td>\n<td>内存</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>disk</td>\n<td>磁盘</td>\n<td>dict</td>\n<td></td>\n</tr>\n<tr>\n<td>mg_ip</td>\n<td>管理ip</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>net_ip</td>\n<td>ip</td>\n<td>dict</td>\n<td></td>\n</tr>\n<tr>\n<td>ops</td>\n<td>操作系统</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>asset_numb</td>\n<td>资产编号</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>desc</td>\n<td>备注</td>\n<td>str</td>\n<td></td>\n</tr>\n<tr>\n<td>location</td>\n<td>位置</td>\n<td>str</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>status :<br>  200     成功<br>  204     失败</p>\n<p>idc  crud </p>\n<p>/add    post<br>{<br>  “name”:””,<br>  “location”:””<br>}</p>\n<h3 id=\"项目创建\"><a href=\"#项目创建\" class=\"headerlink\" title=\"项目创建\"></a>项目创建</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir gocmdb</span><br><span class=\"line\">cd gocmdb</span><br><span class=\"line\">go mod init gocmdb</span><br><span class=\"line\"></span><br><span class=\"line\">mkdir -p conf middleware models pkg routers runtime</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conf：         用于存储配置文件</span><br><span class=\"line\">middleware：   应用中间件</span><br><span class=\"line\">models：       应用数据库模型</span><br><span class=\"line\">pkg：          第三方包</span><br><span class=\"line\">routers        路由逻辑处理</span><br><span class=\"line\">runtime        应用运行时数据</span><br><span class=\"line\">datasource     数据库连接和初始化表</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conf                配置文件</span><br><span class=\"line\">controllers         控制器 入参处理 api的入口</span><br><span class=\"line\">datasource          数据库配置 </span><br><span class=\"line\">models              结构体</span><br><span class=\"line\">db                  sql数据文件 postman接口文件</span><br><span class=\"line\">repo                数据库的操作</span><br><span class=\"line\">middleware          中间件 jwt实现</span><br><span class=\"line\">route               注册路由</span><br><span class=\"line\">service             业务逻辑代码</span><br><span class=\"line\">utils               工具类</span><br><span class=\"line\">config.json         配置文件的映射</span><br><span class=\"line\">main.go             主程序入口</span><br></pre></td></tr></table></figure>"},{"_content":"skywaking 部署使用\n\n\n\n\n\n下载\n\n```\nhttps://mirrors.tuna.tsinghua.edu.cn/apache/skywalking/8.0.0/\n\nwget https://mirrors.tuna.tsinghua.edu.cn/apache/skywalking/8.0.0/apache-skywalking-apm-es7-8.0.0.tar.gz\n```\n\n","source":"_posts/elasticsearch/skywaking.md","raw":"skywaking 部署使用\n\n\n\n\n\n下载\n\n```\nhttps://mirrors.tuna.tsinghua.edu.cn/apache/skywalking/8.0.0/\n\nwget https://mirrors.tuna.tsinghua.edu.cn/apache/skywalking/8.0.0/apache-skywalking-apm-es7-8.0.0.tar.gz\n```\n\n","slug":"elasticsearch/skywaking","published":1,"date":"2021-01-27T08:20:35.743Z","updated":"2021-01-27T08:20:35.744Z","title":"","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2h001lq0us44f86va8","content":"<p>skywaking 部署使用</p>\n<p>下载</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;skywalking&#x2F;8.0.0&#x2F;</span><br><span class=\"line\"></span><br><span class=\"line\">wget https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;skywalking&#x2F;8.0.0&#x2F;apache-skywalking-apm-es7-8.0.0.tar.gz</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>skywaking 部署使用</p>\n<p>下载</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;skywalking&#x2F;8.0.0&#x2F;</span><br><span class=\"line\"></span><br><span class=\"line\">wget https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;apache&#x2F;skywalking&#x2F;8.0.0&#x2F;apache-skywalking-apm-es7-8.0.0.tar.gz</span><br></pre></td></tr></table></figure>\n\n"},{"title":"zookeeper 安装","date":"2019-12-13T06:00:00.000Z","_content":"\n## 一、 准备\n- 安装JDK\n- 准备 安装包 http://archive.apache.org/dist/zookeeper/\n- 官方手册 \nhttp://zookeeper.apache.org/doc/r3.4.6/zookeeperStarted.html\n\n## 二、单机安装\n\n### 2.1、解压安装包\n\n```bash\ncd /usr/local/src\ntar -zxf zookeeper-3.4.9.tar.gz -C /usr/local/\n```\n### 2.2、配置\n\n创建data和logs 目录\n```bash\nmkdir -p /mnt/zookeeper/{data,logs}\n```\n新建`zoo.cfg` 文件,写入以下内容保存：\n```\ntickTime=2000\ndataDir=/usr/myapp/zookeeper-3.4.5/data\ndataLogDir=/usr/myapp/zookeeper-3.4.5/logs\nclientPort=2181\n```\n### 2.3、启动和停止\n进入bin目录，启动、停止、重启分和查看当前节点状态（包括集群中是何角色）别执行：\n```\n./zkServer.sh start\n./zkServer.sh stop\n./zkServer.sh restart\n./zkServer.sh status\n```\n\n<hr/>\n\n## 三、伪集群模式\n\n伪集群模式就是在同一主机启动多个zookeeper并组成集群，下边以在192.168.220.128主机上创3个zookeeper组集群为例。\n\n将通过第一大点安装的zookeeper，复制成zookeeper1/zookeeper2/zookeeper3三份\n### 3.1、准备\n```\ncd /usr/local/zookeeper/\nmkdir {zookeeper1,zookeeper2,zookeeper3}\nmkdir -p /mnt/zookerper/{zookeeper1/{data,logs},zookeeper2/{data,logs},zookeeper3/{data,logs}}\n```\n\n### 3.2、zookeeper2配置\n\nzookeeper1 配置文件conf/zoo.cfg修改如下：\n```\ntickTime=2000\ndataDir=/mnt/zookerper/zookeeper1/data\ndataLogDir=/mnt/zookerper/zookeeper1/logs\nclientPort=2181\ninitLimit=5\nsyncLimit=2\nserver.1=192.168.220.128:2888:3888\nserver.2=192.168.220.128:4888:5888\nserver.3=192.168.220.128:6888:7888\n```\nzookeeper1的data/myid配置如下：\n```\necho '1' > /mnt/zookerper/zookeeper1/data/myid\n```\n### 3.3、zookeeper2配置\nzookeeper2 配置文件conf/zoo.cfg修改如下：\n```\ntickTime=2000\ndataDir=/mnt/zookerper/zookeeper2/data\ndataLogDir=/mnt/zookerper/zookeeper2/logs\nclientPort=2181\ninitLimit=5\nsyncLimit=2\nserver.1=192.168.220.128:2888:3888\nserver.2=192.168.220.128:4888:5888\nserver.3=192.168.220.128:6888:7888\n```\nzookeeper2的data/myid配置如下：\n```\necho '2' > /mnt/zookerper/zookeeper2/data/myid\n```\n\n### 3.4、zookeeper3配置\nzookeeper3 配置文件conf/zoo.cfg修改如下：\n```\ntickTime=2000\ndataDir=/mnt/zookerper/zookeeper3/data\ndataLogDir=/mnt/zookerper/zookeeper3/logs\nclientPort=2181\ninitLimit=5\nsyncLimit=2\nserver.1=192.168.220.128:2888:3888\nserver.2=192.168.220.128:4888:5888\nserver.3=192.168.220.128:6888:7888\n```\nzookeeper1的data/myid配置如下：\n```\necho '3' > /mnt/zookerper/zookeeper3/data/myid\n```\n### 3.5、启动和停止\n\n进入bin目录，启动、停止、重启分和查看当前节点状态（包括集群中是何角色）别执行：\n```\n./zkServer.sh start\n./zkServer.sh stop\n./zkServer.sh restart\n./zkServer.sh status\n```\n<hr>\n\n## 四、集群模式\n\n集群模式就是在不同主机上安装zookeeper然后组成集群的模式；下边以在192.168.220.128/129/130三台主机为例。\n\n将第1.1到1.3步中安装好的zookeeper打包复制到129和130上，并都解压到同样的目录下。\n\n### 4.1、conf/zoo.cfg文件修改\n三个zookeeper的conf/zoo.cfg修改如下：\n```\ntickTime=2000\ndataDir=/usr/myapp/zookeeper-3.4.5/data\ndataLogDir=/usr/myapp/zookeeper-3.4.5/logs\nclientPort=2181\ninitLimit=5\nsyncLimit=2\nserver.1=192.168.220.128:2888:3888\nserver.2=192.168.220.129:2888:3888\nserver.3=192.168.220.130:2888:3888\n```\n对于129和130，由于安装目录都是zookeeper-3.4.5所以dataDir和dataLogDir不需要改变，又由于在不同机器上所以clientPort也不需要改变\n\n所以此时129和130的conf/zoo.cfg的内容与128一样即可。\n\n### 4.2、data/myid文件修改\n\n128 data/myid修改如下：\n```\necho '1' > data/myid\n```\n129 data/myid修改如下：\n```\necho '2' > data/myid\n```\n130 data/myid修改如下：\n```\necho '3' > data/myid\n```\n\n<hr>\n\n## 五、测试集群是否启动成功\n\n```\nbin/zkCli.sh  -server 127.0.0.1:2181,127.0.0.1:2182,127.0.0.1:2183\n\nls /brokers/ids\n[1, 2, 3]\n```\n\n\n\n<hr>\n\n## 六、配置文件详解\n\n```\ntickTime=2000:\ntickTime这个时间是作为Zookeeper服务器之间或客户端与服务器之间维持心跳的时间间隔,也就是每个tickTime时间就会发送一个心跳；\n\ninitLimit=10:\ninitLimit这个配置项是用来配置Zookeeper接受客户端（这里所说的客户端不是用户连接Zookeeper服务器的客户端,而是Zookeeper服务器集群中连接到Leader的Follower 服务器）初始化连接时最长能忍受多少个心跳时间间隔数。\n当已经超过10个心跳的时间（也就是tickTime）长度后 Zookeeper 服务器还没有收到客户端的返回信息,那么表明这个客户端连接失败。总的时间长度就是 10*2000=20 秒；\n\nsyncLimit=5:\nsyncLimit这个配置项标识Leader与Follower之间发送消息,请求和应答时间长度,最长不能超过多少个tickTime的时间长度,总的时间长度就是5*2000=10秒；\n\ndataDir=/export/search/zookeeper-cluster/zookeeper-3.4.6-node1/data\ndataDir顾名思义就是Zookeeper保存数据的目录,默认情况下Zookeeper将写数据的日志文件也保存在这个目录里；\ndatailogDir=/usr/local/zookeeper-cluster/zookeeper-3.5.2-node1/datalog\n事物日志的存储路径，如果不配置这个那么事物日志会默认存储到dataDir制定的目录，这样会严重影响zk的性能，当zk吞吐量较大的时候，产生的事物日志、快照日志太多\nclientPort=2181\nclientPort这个端口就是客户端连接Zookeeper服务器的端口,Zookeeper会监听这个端口接受客户端的访问请求；\n\nserver.1=localhost:2887:3887\nserver.2=localhost:2888:3888\nserver.3=localhost:2889:3889\nserver.A=B：C：D：\nA是一个数字,表示这个是第几号服务器,B是这个服务器的ip地址\nC第一个端口用来集群成员的信息交换,表示的是这个服务器与集群中的Leader服务器交换信息的端口\nD是在leader挂掉时专门用来进行选举leader所用\n\n#autopurge.purgeInterval  这个参数指定了清理频率，单位是小时，需要填写一个1或更大的整数，默认是0，表示不开启自己清理功能。\n#autopurge.snapRetainCount 这个参数和上面的参数搭配使用，这个参数指定了需要保留的文件数目。默认是保留3个。\n```\n\n\n\n## 七、supervisor管理\n\n`vim bin/zkEnv.sh`在最上面增加环境路径\n\n```\nJAVA_HOME=/usr/local/java\nexport JAVA_HOME\n```\n\n`vim /etc/supervisor/zookeeper.conf`\n\n```\n[program:zookeeper]\ncommand=/usr/local/zookeeper-3.5.2-alpha/bin/zkServer.sh start-foreground\nautostart=true\nautorestart=true\nstartsecs=10\nstdout_logfile=/var/log/zookeeper.log\nstdout_logfile_maxbytes=1MB\nstdout_logfile_backups=10\nstdout_capture_maxbytes=1MB\nstderr_logfile=/var/log/zookeeper.log\nstderr_logfile_maxbytes=1MB\nstderr_logfile_backups=10\nstderr_capture_maxbytes=1MB\n```\n\n\n\n##八、报错及处理\n\n应用连接zookeepr报错：Session 0x0 for server 192.168.220.128/192.168.220.128:2181,unexpected error,closing socket connection and attempting reconnect；\n\n先看端口能否telnet通，如果通则使用./zkServer.sh status查看zk是否确实已启动，没启查看bin/zookeeper.out中的报错。\n\nbin/zookeeper.out中报错：“zookeeper address already in use”；显然端口被占用，要么是其他进程占用了配置的端口，要么是上边配置的clientPort和server中的端口有重复。\n\nbin/zookeeper.out中报错：Cannot open channel to 2 at election address /192.168.220.130:3888；这应该只是组成集群的130节点未启动，到130启动起来zk即会正常。\n\n","source":"_posts/zookeeper安装.md","raw":"---\ntitle: zookeeper 安装\ndate: 2019-12-13 14:00:00\ncategories: \n- bigdata\ntags:\n- zookeeper\n---\n\n## 一、 准备\n- 安装JDK\n- 准备 安装包 http://archive.apache.org/dist/zookeeper/\n- 官方手册 \nhttp://zookeeper.apache.org/doc/r3.4.6/zookeeperStarted.html\n\n## 二、单机安装\n\n### 2.1、解压安装包\n\n```bash\ncd /usr/local/src\ntar -zxf zookeeper-3.4.9.tar.gz -C /usr/local/\n```\n### 2.2、配置\n\n创建data和logs 目录\n```bash\nmkdir -p /mnt/zookeeper/{data,logs}\n```\n新建`zoo.cfg` 文件,写入以下内容保存：\n```\ntickTime=2000\ndataDir=/usr/myapp/zookeeper-3.4.5/data\ndataLogDir=/usr/myapp/zookeeper-3.4.5/logs\nclientPort=2181\n```\n### 2.3、启动和停止\n进入bin目录，启动、停止、重启分和查看当前节点状态（包括集群中是何角色）别执行：\n```\n./zkServer.sh start\n./zkServer.sh stop\n./zkServer.sh restart\n./zkServer.sh status\n```\n\n<hr/>\n\n## 三、伪集群模式\n\n伪集群模式就是在同一主机启动多个zookeeper并组成集群，下边以在192.168.220.128主机上创3个zookeeper组集群为例。\n\n将通过第一大点安装的zookeeper，复制成zookeeper1/zookeeper2/zookeeper3三份\n### 3.1、准备\n```\ncd /usr/local/zookeeper/\nmkdir {zookeeper1,zookeeper2,zookeeper3}\nmkdir -p /mnt/zookerper/{zookeeper1/{data,logs},zookeeper2/{data,logs},zookeeper3/{data,logs}}\n```\n\n### 3.2、zookeeper2配置\n\nzookeeper1 配置文件conf/zoo.cfg修改如下：\n```\ntickTime=2000\ndataDir=/mnt/zookerper/zookeeper1/data\ndataLogDir=/mnt/zookerper/zookeeper1/logs\nclientPort=2181\ninitLimit=5\nsyncLimit=2\nserver.1=192.168.220.128:2888:3888\nserver.2=192.168.220.128:4888:5888\nserver.3=192.168.220.128:6888:7888\n```\nzookeeper1的data/myid配置如下：\n```\necho '1' > /mnt/zookerper/zookeeper1/data/myid\n```\n### 3.3、zookeeper2配置\nzookeeper2 配置文件conf/zoo.cfg修改如下：\n```\ntickTime=2000\ndataDir=/mnt/zookerper/zookeeper2/data\ndataLogDir=/mnt/zookerper/zookeeper2/logs\nclientPort=2181\ninitLimit=5\nsyncLimit=2\nserver.1=192.168.220.128:2888:3888\nserver.2=192.168.220.128:4888:5888\nserver.3=192.168.220.128:6888:7888\n```\nzookeeper2的data/myid配置如下：\n```\necho '2' > /mnt/zookerper/zookeeper2/data/myid\n```\n\n### 3.4、zookeeper3配置\nzookeeper3 配置文件conf/zoo.cfg修改如下：\n```\ntickTime=2000\ndataDir=/mnt/zookerper/zookeeper3/data\ndataLogDir=/mnt/zookerper/zookeeper3/logs\nclientPort=2181\ninitLimit=5\nsyncLimit=2\nserver.1=192.168.220.128:2888:3888\nserver.2=192.168.220.128:4888:5888\nserver.3=192.168.220.128:6888:7888\n```\nzookeeper1的data/myid配置如下：\n```\necho '3' > /mnt/zookerper/zookeeper3/data/myid\n```\n### 3.5、启动和停止\n\n进入bin目录，启动、停止、重启分和查看当前节点状态（包括集群中是何角色）别执行：\n```\n./zkServer.sh start\n./zkServer.sh stop\n./zkServer.sh restart\n./zkServer.sh status\n```\n<hr>\n\n## 四、集群模式\n\n集群模式就是在不同主机上安装zookeeper然后组成集群的模式；下边以在192.168.220.128/129/130三台主机为例。\n\n将第1.1到1.3步中安装好的zookeeper打包复制到129和130上，并都解压到同样的目录下。\n\n### 4.1、conf/zoo.cfg文件修改\n三个zookeeper的conf/zoo.cfg修改如下：\n```\ntickTime=2000\ndataDir=/usr/myapp/zookeeper-3.4.5/data\ndataLogDir=/usr/myapp/zookeeper-3.4.5/logs\nclientPort=2181\ninitLimit=5\nsyncLimit=2\nserver.1=192.168.220.128:2888:3888\nserver.2=192.168.220.129:2888:3888\nserver.3=192.168.220.130:2888:3888\n```\n对于129和130，由于安装目录都是zookeeper-3.4.5所以dataDir和dataLogDir不需要改变，又由于在不同机器上所以clientPort也不需要改变\n\n所以此时129和130的conf/zoo.cfg的内容与128一样即可。\n\n### 4.2、data/myid文件修改\n\n128 data/myid修改如下：\n```\necho '1' > data/myid\n```\n129 data/myid修改如下：\n```\necho '2' > data/myid\n```\n130 data/myid修改如下：\n```\necho '3' > data/myid\n```\n\n<hr>\n\n## 五、测试集群是否启动成功\n\n```\nbin/zkCli.sh  -server 127.0.0.1:2181,127.0.0.1:2182,127.0.0.1:2183\n\nls /brokers/ids\n[1, 2, 3]\n```\n\n\n\n<hr>\n\n## 六、配置文件详解\n\n```\ntickTime=2000:\ntickTime这个时间是作为Zookeeper服务器之间或客户端与服务器之间维持心跳的时间间隔,也就是每个tickTime时间就会发送一个心跳；\n\ninitLimit=10:\ninitLimit这个配置项是用来配置Zookeeper接受客户端（这里所说的客户端不是用户连接Zookeeper服务器的客户端,而是Zookeeper服务器集群中连接到Leader的Follower 服务器）初始化连接时最长能忍受多少个心跳时间间隔数。\n当已经超过10个心跳的时间（也就是tickTime）长度后 Zookeeper 服务器还没有收到客户端的返回信息,那么表明这个客户端连接失败。总的时间长度就是 10*2000=20 秒；\n\nsyncLimit=5:\nsyncLimit这个配置项标识Leader与Follower之间发送消息,请求和应答时间长度,最长不能超过多少个tickTime的时间长度,总的时间长度就是5*2000=10秒；\n\ndataDir=/export/search/zookeeper-cluster/zookeeper-3.4.6-node1/data\ndataDir顾名思义就是Zookeeper保存数据的目录,默认情况下Zookeeper将写数据的日志文件也保存在这个目录里；\ndatailogDir=/usr/local/zookeeper-cluster/zookeeper-3.5.2-node1/datalog\n事物日志的存储路径，如果不配置这个那么事物日志会默认存储到dataDir制定的目录，这样会严重影响zk的性能，当zk吞吐量较大的时候，产生的事物日志、快照日志太多\nclientPort=2181\nclientPort这个端口就是客户端连接Zookeeper服务器的端口,Zookeeper会监听这个端口接受客户端的访问请求；\n\nserver.1=localhost:2887:3887\nserver.2=localhost:2888:3888\nserver.3=localhost:2889:3889\nserver.A=B：C：D：\nA是一个数字,表示这个是第几号服务器,B是这个服务器的ip地址\nC第一个端口用来集群成员的信息交换,表示的是这个服务器与集群中的Leader服务器交换信息的端口\nD是在leader挂掉时专门用来进行选举leader所用\n\n#autopurge.purgeInterval  这个参数指定了清理频率，单位是小时，需要填写一个1或更大的整数，默认是0，表示不开启自己清理功能。\n#autopurge.snapRetainCount 这个参数和上面的参数搭配使用，这个参数指定了需要保留的文件数目。默认是保留3个。\n```\n\n\n\n## 七、supervisor管理\n\n`vim bin/zkEnv.sh`在最上面增加环境路径\n\n```\nJAVA_HOME=/usr/local/java\nexport JAVA_HOME\n```\n\n`vim /etc/supervisor/zookeeper.conf`\n\n```\n[program:zookeeper]\ncommand=/usr/local/zookeeper-3.5.2-alpha/bin/zkServer.sh start-foreground\nautostart=true\nautorestart=true\nstartsecs=10\nstdout_logfile=/var/log/zookeeper.log\nstdout_logfile_maxbytes=1MB\nstdout_logfile_backups=10\nstdout_capture_maxbytes=1MB\nstderr_logfile=/var/log/zookeeper.log\nstderr_logfile_maxbytes=1MB\nstderr_logfile_backups=10\nstderr_capture_maxbytes=1MB\n```\n\n\n\n##八、报错及处理\n\n应用连接zookeepr报错：Session 0x0 for server 192.168.220.128/192.168.220.128:2181,unexpected error,closing socket connection and attempting reconnect；\n\n先看端口能否telnet通，如果通则使用./zkServer.sh status查看zk是否确实已启动，没启查看bin/zookeeper.out中的报错。\n\nbin/zookeeper.out中报错：“zookeeper address already in use”；显然端口被占用，要么是其他进程占用了配置的端口，要么是上边配置的clientPort和server中的端口有重复。\n\nbin/zookeeper.out中报错：Cannot open channel to 2 at election address /192.168.220.130:3888；这应该只是组成集群的130节点未启动，到130启动起来zk即会正常。\n\n","slug":"zookeeper安装","published":1,"updated":"2021-01-27T08:20:35.776Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2i001pq0us2a5ibxmk","content":"<h2 id=\"一、-准备\"><a href=\"#一、-准备\" class=\"headerlink\" title=\"一、 准备\"></a>一、 准备</h2><ul>\n<li>安装JDK</li>\n<li>准备 安装包 <a href=\"http://archive.apache.org/dist/zookeeper/\">http://archive.apache.org/dist/zookeeper/</a></li>\n<li>官方手册<br><a href=\"http://zookeeper.apache.org/doc/r3.4.6/zookeeperStarted.html\">http://zookeeper.apache.org/doc/r3.4.6/zookeeperStarted.html</a></li>\n</ul>\n<h2 id=\"二、单机安装\"><a href=\"#二、单机安装\" class=\"headerlink\" title=\"二、单机安装\"></a>二、单机安装</h2><h3 id=\"2-1、解压安装包\"><a href=\"#2-1、解压安装包\" class=\"headerlink\" title=\"2.1、解压安装包\"></a>2.1、解压安装包</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src</span><br><span class=\"line\">tar -zxf zookeeper-3.4.9.tar.gz -C /usr/<span class=\"built_in\">local</span>/</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-2、配置\"><a href=\"#2-2、配置\" class=\"headerlink\" title=\"2.2、配置\"></a>2.2、配置</h3><p>创建data和logs 目录</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /mnt/zookeeper/&#123;data,logs&#125;</span><br></pre></td></tr></table></figure>\n<p>新建<code>zoo.cfg</code> 文件,写入以下内容保存：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tickTime&#x3D;2000</span><br><span class=\"line\">dataDir&#x3D;&#x2F;usr&#x2F;myapp&#x2F;zookeeper-3.4.5&#x2F;data</span><br><span class=\"line\">dataLogDir&#x3D;&#x2F;usr&#x2F;myapp&#x2F;zookeeper-3.4.5&#x2F;logs</span><br><span class=\"line\">clientPort&#x3D;2181</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-3、启动和停止\"><a href=\"#2-3、启动和停止\" class=\"headerlink\" title=\"2.3、启动和停止\"></a>2.3、启动和停止</h3><p>进入bin目录，启动、停止、重启分和查看当前节点状态（包括集群中是何角色）别执行：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;zkServer.sh start</span><br><span class=\"line\">.&#x2F;zkServer.sh stop</span><br><span class=\"line\">.&#x2F;zkServer.sh restart</span><br><span class=\"line\">.&#x2F;zkServer.sh status</span><br></pre></td></tr></table></figure>\n\n<hr/>\n\n<h2 id=\"三、伪集群模式\"><a href=\"#三、伪集群模式\" class=\"headerlink\" title=\"三、伪集群模式\"></a>三、伪集群模式</h2><p>伪集群模式就是在同一主机启动多个zookeeper并组成集群，下边以在192.168.220.128主机上创3个zookeeper组集群为例。</p>\n<p>将通过第一大点安装的zookeeper，复制成zookeeper1/zookeeper2/zookeeper3三份</p>\n<h3 id=\"3-1、准备\"><a href=\"#3-1、准备\" class=\"headerlink\" title=\"3.1、准备\"></a>3.1、准备</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;usr&#x2F;local&#x2F;zookeeper&#x2F;</span><br><span class=\"line\">mkdir &#123;zookeeper1,zookeeper2,zookeeper3&#125;</span><br><span class=\"line\">mkdir -p &#x2F;mnt&#x2F;zookerper&#x2F;&#123;zookeeper1&#x2F;&#123;data,logs&#125;,zookeeper2&#x2F;&#123;data,logs&#125;,zookeeper3&#x2F;&#123;data,logs&#125;&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-2、zookeeper2配置\"><a href=\"#3-2、zookeeper2配置\" class=\"headerlink\" title=\"3.2、zookeeper2配置\"></a>3.2、zookeeper2配置</h3><p>zookeeper1 配置文件conf/zoo.cfg修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tickTime&#x3D;2000</span><br><span class=\"line\">dataDir&#x3D;&#x2F;mnt&#x2F;zookerper&#x2F;zookeeper1&#x2F;data</span><br><span class=\"line\">dataLogDir&#x3D;&#x2F;mnt&#x2F;zookerper&#x2F;zookeeper1&#x2F;logs</span><br><span class=\"line\">clientPort&#x3D;2181</span><br><span class=\"line\">initLimit&#x3D;5</span><br><span class=\"line\">syncLimit&#x3D;2</span><br><span class=\"line\">server.1&#x3D;192.168.220.128:2888:3888</span><br><span class=\"line\">server.2&#x3D;192.168.220.128:4888:5888</span><br><span class=\"line\">server.3&#x3D;192.168.220.128:6888:7888</span><br></pre></td></tr></table></figure>\n<p>zookeeper1的data/myid配置如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;1&#39; &gt; &#x2F;mnt&#x2F;zookerper&#x2F;zookeeper1&#x2F;data&#x2F;myid</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-3、zookeeper2配置\"><a href=\"#3-3、zookeeper2配置\" class=\"headerlink\" title=\"3.3、zookeeper2配置\"></a>3.3、zookeeper2配置</h3><p>zookeeper2 配置文件conf/zoo.cfg修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tickTime&#x3D;2000</span><br><span class=\"line\">dataDir&#x3D;&#x2F;mnt&#x2F;zookerper&#x2F;zookeeper2&#x2F;data</span><br><span class=\"line\">dataLogDir&#x3D;&#x2F;mnt&#x2F;zookerper&#x2F;zookeeper2&#x2F;logs</span><br><span class=\"line\">clientPort&#x3D;2181</span><br><span class=\"line\">initLimit&#x3D;5</span><br><span class=\"line\">syncLimit&#x3D;2</span><br><span class=\"line\">server.1&#x3D;192.168.220.128:2888:3888</span><br><span class=\"line\">server.2&#x3D;192.168.220.128:4888:5888</span><br><span class=\"line\">server.3&#x3D;192.168.220.128:6888:7888</span><br></pre></td></tr></table></figure>\n<p>zookeeper2的data/myid配置如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;2&#39; &gt; &#x2F;mnt&#x2F;zookerper&#x2F;zookeeper2&#x2F;data&#x2F;myid</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-4、zookeeper3配置\"><a href=\"#3-4、zookeeper3配置\" class=\"headerlink\" title=\"3.4、zookeeper3配置\"></a>3.4、zookeeper3配置</h3><p>zookeeper3 配置文件conf/zoo.cfg修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tickTime&#x3D;2000</span><br><span class=\"line\">dataDir&#x3D;&#x2F;mnt&#x2F;zookerper&#x2F;zookeeper3&#x2F;data</span><br><span class=\"line\">dataLogDir&#x3D;&#x2F;mnt&#x2F;zookerper&#x2F;zookeeper3&#x2F;logs</span><br><span class=\"line\">clientPort&#x3D;2181</span><br><span class=\"line\">initLimit&#x3D;5</span><br><span class=\"line\">syncLimit&#x3D;2</span><br><span class=\"line\">server.1&#x3D;192.168.220.128:2888:3888</span><br><span class=\"line\">server.2&#x3D;192.168.220.128:4888:5888</span><br><span class=\"line\">server.3&#x3D;192.168.220.128:6888:7888</span><br></pre></td></tr></table></figure>\n<p>zookeeper1的data/myid配置如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;3&#39; &gt; &#x2F;mnt&#x2F;zookerper&#x2F;zookeeper3&#x2F;data&#x2F;myid</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-5、启动和停止\"><a href=\"#3-5、启动和停止\" class=\"headerlink\" title=\"3.5、启动和停止\"></a>3.5、启动和停止</h3><p>进入bin目录，启动、停止、重启分和查看当前节点状态（包括集群中是何角色）别执行：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;zkServer.sh start</span><br><span class=\"line\">.&#x2F;zkServer.sh stop</span><br><span class=\"line\">.&#x2F;zkServer.sh restart</span><br><span class=\"line\">.&#x2F;zkServer.sh status</span><br></pre></td></tr></table></figure>\n<hr>\n\n<h2 id=\"四、集群模式\"><a href=\"#四、集群模式\" class=\"headerlink\" title=\"四、集群模式\"></a>四、集群模式</h2><p>集群模式就是在不同主机上安装zookeeper然后组成集群的模式；下边以在192.168.220.128/129/130三台主机为例。</p>\n<p>将第1.1到1.3步中安装好的zookeeper打包复制到129和130上，并都解压到同样的目录下。</p>\n<h3 id=\"4-1、conf-zoo-cfg文件修改\"><a href=\"#4-1、conf-zoo-cfg文件修改\" class=\"headerlink\" title=\"4.1、conf/zoo.cfg文件修改\"></a>4.1、conf/zoo.cfg文件修改</h3><p>三个zookeeper的conf/zoo.cfg修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tickTime&#x3D;2000</span><br><span class=\"line\">dataDir&#x3D;&#x2F;usr&#x2F;myapp&#x2F;zookeeper-3.4.5&#x2F;data</span><br><span class=\"line\">dataLogDir&#x3D;&#x2F;usr&#x2F;myapp&#x2F;zookeeper-3.4.5&#x2F;logs</span><br><span class=\"line\">clientPort&#x3D;2181</span><br><span class=\"line\">initLimit&#x3D;5</span><br><span class=\"line\">syncLimit&#x3D;2</span><br><span class=\"line\">server.1&#x3D;192.168.220.128:2888:3888</span><br><span class=\"line\">server.2&#x3D;192.168.220.129:2888:3888</span><br><span class=\"line\">server.3&#x3D;192.168.220.130:2888:3888</span><br></pre></td></tr></table></figure>\n<p>对于129和130，由于安装目录都是zookeeper-3.4.5所以dataDir和dataLogDir不需要改变，又由于在不同机器上所以clientPort也不需要改变</p>\n<p>所以此时129和130的conf/zoo.cfg的内容与128一样即可。</p>\n<h3 id=\"4-2、data-myid文件修改\"><a href=\"#4-2、data-myid文件修改\" class=\"headerlink\" title=\"4.2、data/myid文件修改\"></a>4.2、data/myid文件修改</h3><p>128 data/myid修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;1&#39; &gt; data&#x2F;myid</span><br></pre></td></tr></table></figure>\n<p>129 data/myid修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;2&#39; &gt; data&#x2F;myid</span><br></pre></td></tr></table></figure>\n<p>130 data/myid修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;3&#39; &gt; data&#x2F;myid</span><br></pre></td></tr></table></figure>\n\n<hr>\n\n<h2 id=\"五、测试集群是否启动成功\"><a href=\"#五、测试集群是否启动成功\" class=\"headerlink\" title=\"五、测试集群是否启动成功\"></a>五、测试集群是否启动成功</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin&#x2F;zkCli.sh  -server 127.0.0.1:2181,127.0.0.1:2182,127.0.0.1:2183</span><br><span class=\"line\"></span><br><span class=\"line\">ls &#x2F;brokers&#x2F;ids</span><br><span class=\"line\">[1, 2, 3]</span><br></pre></td></tr></table></figure>\n\n\n\n<hr>\n\n<h2 id=\"六、配置文件详解\"><a href=\"#六、配置文件详解\" class=\"headerlink\" title=\"六、配置文件详解\"></a>六、配置文件详解</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tickTime&#x3D;2000:</span><br><span class=\"line\">tickTime这个时间是作为Zookeeper服务器之间或客户端与服务器之间维持心跳的时间间隔,也就是每个tickTime时间就会发送一个心跳；</span><br><span class=\"line\"></span><br><span class=\"line\">initLimit&#x3D;10:</span><br><span class=\"line\">initLimit这个配置项是用来配置Zookeeper接受客户端（这里所说的客户端不是用户连接Zookeeper服务器的客户端,而是Zookeeper服务器集群中连接到Leader的Follower 服务器）初始化连接时最长能忍受多少个心跳时间间隔数。</span><br><span class=\"line\">当已经超过10个心跳的时间（也就是tickTime）长度后 Zookeeper 服务器还没有收到客户端的返回信息,那么表明这个客户端连接失败。总的时间长度就是 10*2000&#x3D;20 秒；</span><br><span class=\"line\"></span><br><span class=\"line\">syncLimit&#x3D;5:</span><br><span class=\"line\">syncLimit这个配置项标识Leader与Follower之间发送消息,请求和应答时间长度,最长不能超过多少个tickTime的时间长度,总的时间长度就是5*2000&#x3D;10秒；</span><br><span class=\"line\"></span><br><span class=\"line\">dataDir&#x3D;&#x2F;export&#x2F;search&#x2F;zookeeper-cluster&#x2F;zookeeper-3.4.6-node1&#x2F;data</span><br><span class=\"line\">dataDir顾名思义就是Zookeeper保存数据的目录,默认情况下Zookeeper将写数据的日志文件也保存在这个目录里；</span><br><span class=\"line\">datailogDir&#x3D;&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-3.5.2-node1&#x2F;datalog</span><br><span class=\"line\">事物日志的存储路径，如果不配置这个那么事物日志会默认存储到dataDir制定的目录，这样会严重影响zk的性能，当zk吞吐量较大的时候，产生的事物日志、快照日志太多</span><br><span class=\"line\">clientPort&#x3D;2181</span><br><span class=\"line\">clientPort这个端口就是客户端连接Zookeeper服务器的端口,Zookeeper会监听这个端口接受客户端的访问请求；</span><br><span class=\"line\"></span><br><span class=\"line\">server.1&#x3D;localhost:2887:3887</span><br><span class=\"line\">server.2&#x3D;localhost:2888:3888</span><br><span class=\"line\">server.3&#x3D;localhost:2889:3889</span><br><span class=\"line\">server.A&#x3D;B：C：D：</span><br><span class=\"line\">A是一个数字,表示这个是第几号服务器,B是这个服务器的ip地址</span><br><span class=\"line\">C第一个端口用来集群成员的信息交换,表示的是这个服务器与集群中的Leader服务器交换信息的端口</span><br><span class=\"line\">D是在leader挂掉时专门用来进行选举leader所用</span><br><span class=\"line\"></span><br><span class=\"line\">#autopurge.purgeInterval  这个参数指定了清理频率，单位是小时，需要填写一个1或更大的整数，默认是0，表示不开启自己清理功能。</span><br><span class=\"line\">#autopurge.snapRetainCount 这个参数和上面的参数搭配使用，这个参数指定了需要保留的文件数目。默认是保留3个。</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"七、supervisor管理\"><a href=\"#七、supervisor管理\" class=\"headerlink\" title=\"七、supervisor管理\"></a>七、supervisor管理</h2><p><code>vim bin/zkEnv.sh</code>在最上面增加环境路径</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java</span><br><span class=\"line\">export JAVA_HOME</span><br></pre></td></tr></table></figure>\n\n<p><code>vim /etc/supervisor/zookeeper.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[program:zookeeper]</span><br><span class=\"line\">command&#x3D;&#x2F;usr&#x2F;local&#x2F;zookeeper-3.5.2-alpha&#x2F;bin&#x2F;zkServer.sh start-foreground</span><br><span class=\"line\">autostart&#x3D;true</span><br><span class=\"line\">autorestart&#x3D;true</span><br><span class=\"line\">startsecs&#x3D;10</span><br><span class=\"line\">stdout_logfile&#x3D;&#x2F;var&#x2F;log&#x2F;zookeeper.log</span><br><span class=\"line\">stdout_logfile_maxbytes&#x3D;1MB</span><br><span class=\"line\">stdout_logfile_backups&#x3D;10</span><br><span class=\"line\">stdout_capture_maxbytes&#x3D;1MB</span><br><span class=\"line\">stderr_logfile&#x3D;&#x2F;var&#x2F;log&#x2F;zookeeper.log</span><br><span class=\"line\">stderr_logfile_maxbytes&#x3D;1MB</span><br><span class=\"line\">stderr_logfile_backups&#x3D;10</span><br><span class=\"line\">stderr_capture_maxbytes&#x3D;1MB</span><br></pre></td></tr></table></figure>\n\n\n\n<p>##八、报错及处理</p>\n<p>应用连接zookeepr报错：Session 0x0 for server 192.168.220.128/192.168.220.128:2181,unexpected error,closing socket connection and attempting reconnect；</p>\n<p>先看端口能否telnet通，如果通则使用./zkServer.sh status查看zk是否确实已启动，没启查看bin/zookeeper.out中的报错。</p>\n<p>bin/zookeeper.out中报错：“zookeeper address already in use”；显然端口被占用，要么是其他进程占用了配置的端口，要么是上边配置的clientPort和server中的端口有重复。</p>\n<p>bin/zookeeper.out中报错：Cannot open channel to 2 at election address /192.168.220.130:3888；这应该只是组成集群的130节点未启动，到130启动起来zk即会正常。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"一、-准备\"><a href=\"#一、-准备\" class=\"headerlink\" title=\"一、 准备\"></a>一、 准备</h2><ul>\n<li>安装JDK</li>\n<li>准备 安装包 <a href=\"http://archive.apache.org/dist/zookeeper/\">http://archive.apache.org/dist/zookeeper/</a></li>\n<li>官方手册<br><a href=\"http://zookeeper.apache.org/doc/r3.4.6/zookeeperStarted.html\">http://zookeeper.apache.org/doc/r3.4.6/zookeeperStarted.html</a></li>\n</ul>\n<h2 id=\"二、单机安装\"><a href=\"#二、单机安装\" class=\"headerlink\" title=\"二、单机安装\"></a>二、单机安装</h2><h3 id=\"2-1、解压安装包\"><a href=\"#2-1、解压安装包\" class=\"headerlink\" title=\"2.1、解压安装包\"></a>2.1、解压安装包</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src</span><br><span class=\"line\">tar -zxf zookeeper-3.4.9.tar.gz -C /usr/<span class=\"built_in\">local</span>/</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-2、配置\"><a href=\"#2-2、配置\" class=\"headerlink\" title=\"2.2、配置\"></a>2.2、配置</h3><p>创建data和logs 目录</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /mnt/zookeeper/&#123;data,logs&#125;</span><br></pre></td></tr></table></figure>\n<p>新建<code>zoo.cfg</code> 文件,写入以下内容保存：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tickTime&#x3D;2000</span><br><span class=\"line\">dataDir&#x3D;&#x2F;usr&#x2F;myapp&#x2F;zookeeper-3.4.5&#x2F;data</span><br><span class=\"line\">dataLogDir&#x3D;&#x2F;usr&#x2F;myapp&#x2F;zookeeper-3.4.5&#x2F;logs</span><br><span class=\"line\">clientPort&#x3D;2181</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-3、启动和停止\"><a href=\"#2-3、启动和停止\" class=\"headerlink\" title=\"2.3、启动和停止\"></a>2.3、启动和停止</h3><p>进入bin目录，启动、停止、重启分和查看当前节点状态（包括集群中是何角色）别执行：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;zkServer.sh start</span><br><span class=\"line\">.&#x2F;zkServer.sh stop</span><br><span class=\"line\">.&#x2F;zkServer.sh restart</span><br><span class=\"line\">.&#x2F;zkServer.sh status</span><br></pre></td></tr></table></figure>\n\n<hr/>\n\n<h2 id=\"三、伪集群模式\"><a href=\"#三、伪集群模式\" class=\"headerlink\" title=\"三、伪集群模式\"></a>三、伪集群模式</h2><p>伪集群模式就是在同一主机启动多个zookeeper并组成集群，下边以在192.168.220.128主机上创3个zookeeper组集群为例。</p>\n<p>将通过第一大点安装的zookeeper，复制成zookeeper1/zookeeper2/zookeeper3三份</p>\n<h3 id=\"3-1、准备\"><a href=\"#3-1、准备\" class=\"headerlink\" title=\"3.1、准备\"></a>3.1、准备</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;usr&#x2F;local&#x2F;zookeeper&#x2F;</span><br><span class=\"line\">mkdir &#123;zookeeper1,zookeeper2,zookeeper3&#125;</span><br><span class=\"line\">mkdir -p &#x2F;mnt&#x2F;zookerper&#x2F;&#123;zookeeper1&#x2F;&#123;data,logs&#125;,zookeeper2&#x2F;&#123;data,logs&#125;,zookeeper3&#x2F;&#123;data,logs&#125;&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-2、zookeeper2配置\"><a href=\"#3-2、zookeeper2配置\" class=\"headerlink\" title=\"3.2、zookeeper2配置\"></a>3.2、zookeeper2配置</h3><p>zookeeper1 配置文件conf/zoo.cfg修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tickTime&#x3D;2000</span><br><span class=\"line\">dataDir&#x3D;&#x2F;mnt&#x2F;zookerper&#x2F;zookeeper1&#x2F;data</span><br><span class=\"line\">dataLogDir&#x3D;&#x2F;mnt&#x2F;zookerper&#x2F;zookeeper1&#x2F;logs</span><br><span class=\"line\">clientPort&#x3D;2181</span><br><span class=\"line\">initLimit&#x3D;5</span><br><span class=\"line\">syncLimit&#x3D;2</span><br><span class=\"line\">server.1&#x3D;192.168.220.128:2888:3888</span><br><span class=\"line\">server.2&#x3D;192.168.220.128:4888:5888</span><br><span class=\"line\">server.3&#x3D;192.168.220.128:6888:7888</span><br></pre></td></tr></table></figure>\n<p>zookeeper1的data/myid配置如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;1&#39; &gt; &#x2F;mnt&#x2F;zookerper&#x2F;zookeeper1&#x2F;data&#x2F;myid</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-3、zookeeper2配置\"><a href=\"#3-3、zookeeper2配置\" class=\"headerlink\" title=\"3.3、zookeeper2配置\"></a>3.3、zookeeper2配置</h3><p>zookeeper2 配置文件conf/zoo.cfg修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tickTime&#x3D;2000</span><br><span class=\"line\">dataDir&#x3D;&#x2F;mnt&#x2F;zookerper&#x2F;zookeeper2&#x2F;data</span><br><span class=\"line\">dataLogDir&#x3D;&#x2F;mnt&#x2F;zookerper&#x2F;zookeeper2&#x2F;logs</span><br><span class=\"line\">clientPort&#x3D;2181</span><br><span class=\"line\">initLimit&#x3D;5</span><br><span class=\"line\">syncLimit&#x3D;2</span><br><span class=\"line\">server.1&#x3D;192.168.220.128:2888:3888</span><br><span class=\"line\">server.2&#x3D;192.168.220.128:4888:5888</span><br><span class=\"line\">server.3&#x3D;192.168.220.128:6888:7888</span><br></pre></td></tr></table></figure>\n<p>zookeeper2的data/myid配置如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;2&#39; &gt; &#x2F;mnt&#x2F;zookerper&#x2F;zookeeper2&#x2F;data&#x2F;myid</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-4、zookeeper3配置\"><a href=\"#3-4、zookeeper3配置\" class=\"headerlink\" title=\"3.4、zookeeper3配置\"></a>3.4、zookeeper3配置</h3><p>zookeeper3 配置文件conf/zoo.cfg修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tickTime&#x3D;2000</span><br><span class=\"line\">dataDir&#x3D;&#x2F;mnt&#x2F;zookerper&#x2F;zookeeper3&#x2F;data</span><br><span class=\"line\">dataLogDir&#x3D;&#x2F;mnt&#x2F;zookerper&#x2F;zookeeper3&#x2F;logs</span><br><span class=\"line\">clientPort&#x3D;2181</span><br><span class=\"line\">initLimit&#x3D;5</span><br><span class=\"line\">syncLimit&#x3D;2</span><br><span class=\"line\">server.1&#x3D;192.168.220.128:2888:3888</span><br><span class=\"line\">server.2&#x3D;192.168.220.128:4888:5888</span><br><span class=\"line\">server.3&#x3D;192.168.220.128:6888:7888</span><br></pre></td></tr></table></figure>\n<p>zookeeper1的data/myid配置如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;3&#39; &gt; &#x2F;mnt&#x2F;zookerper&#x2F;zookeeper3&#x2F;data&#x2F;myid</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-5、启动和停止\"><a href=\"#3-5、启动和停止\" class=\"headerlink\" title=\"3.5、启动和停止\"></a>3.5、启动和停止</h3><p>进入bin目录，启动、停止、重启分和查看当前节点状态（包括集群中是何角色）别执行：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.&#x2F;zkServer.sh start</span><br><span class=\"line\">.&#x2F;zkServer.sh stop</span><br><span class=\"line\">.&#x2F;zkServer.sh restart</span><br><span class=\"line\">.&#x2F;zkServer.sh status</span><br></pre></td></tr></table></figure>\n<hr>\n\n<h2 id=\"四、集群模式\"><a href=\"#四、集群模式\" class=\"headerlink\" title=\"四、集群模式\"></a>四、集群模式</h2><p>集群模式就是在不同主机上安装zookeeper然后组成集群的模式；下边以在192.168.220.128/129/130三台主机为例。</p>\n<p>将第1.1到1.3步中安装好的zookeeper打包复制到129和130上，并都解压到同样的目录下。</p>\n<h3 id=\"4-1、conf-zoo-cfg文件修改\"><a href=\"#4-1、conf-zoo-cfg文件修改\" class=\"headerlink\" title=\"4.1、conf/zoo.cfg文件修改\"></a>4.1、conf/zoo.cfg文件修改</h3><p>三个zookeeper的conf/zoo.cfg修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tickTime&#x3D;2000</span><br><span class=\"line\">dataDir&#x3D;&#x2F;usr&#x2F;myapp&#x2F;zookeeper-3.4.5&#x2F;data</span><br><span class=\"line\">dataLogDir&#x3D;&#x2F;usr&#x2F;myapp&#x2F;zookeeper-3.4.5&#x2F;logs</span><br><span class=\"line\">clientPort&#x3D;2181</span><br><span class=\"line\">initLimit&#x3D;5</span><br><span class=\"line\">syncLimit&#x3D;2</span><br><span class=\"line\">server.1&#x3D;192.168.220.128:2888:3888</span><br><span class=\"line\">server.2&#x3D;192.168.220.129:2888:3888</span><br><span class=\"line\">server.3&#x3D;192.168.220.130:2888:3888</span><br></pre></td></tr></table></figure>\n<p>对于129和130，由于安装目录都是zookeeper-3.4.5所以dataDir和dataLogDir不需要改变，又由于在不同机器上所以clientPort也不需要改变</p>\n<p>所以此时129和130的conf/zoo.cfg的内容与128一样即可。</p>\n<h3 id=\"4-2、data-myid文件修改\"><a href=\"#4-2、data-myid文件修改\" class=\"headerlink\" title=\"4.2、data/myid文件修改\"></a>4.2、data/myid文件修改</h3><p>128 data/myid修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;1&#39; &gt; data&#x2F;myid</span><br></pre></td></tr></table></figure>\n<p>129 data/myid修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;2&#39; &gt; data&#x2F;myid</span><br></pre></td></tr></table></figure>\n<p>130 data/myid修改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#39;3&#39; &gt; data&#x2F;myid</span><br></pre></td></tr></table></figure>\n\n<hr>\n\n<h2 id=\"五、测试集群是否启动成功\"><a href=\"#五、测试集群是否启动成功\" class=\"headerlink\" title=\"五、测试集群是否启动成功\"></a>五、测试集群是否启动成功</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bin&#x2F;zkCli.sh  -server 127.0.0.1:2181,127.0.0.1:2182,127.0.0.1:2183</span><br><span class=\"line\"></span><br><span class=\"line\">ls &#x2F;brokers&#x2F;ids</span><br><span class=\"line\">[1, 2, 3]</span><br></pre></td></tr></table></figure>\n\n\n\n<hr>\n\n<h2 id=\"六、配置文件详解\"><a href=\"#六、配置文件详解\" class=\"headerlink\" title=\"六、配置文件详解\"></a>六、配置文件详解</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tickTime&#x3D;2000:</span><br><span class=\"line\">tickTime这个时间是作为Zookeeper服务器之间或客户端与服务器之间维持心跳的时间间隔,也就是每个tickTime时间就会发送一个心跳；</span><br><span class=\"line\"></span><br><span class=\"line\">initLimit&#x3D;10:</span><br><span class=\"line\">initLimit这个配置项是用来配置Zookeeper接受客户端（这里所说的客户端不是用户连接Zookeeper服务器的客户端,而是Zookeeper服务器集群中连接到Leader的Follower 服务器）初始化连接时最长能忍受多少个心跳时间间隔数。</span><br><span class=\"line\">当已经超过10个心跳的时间（也就是tickTime）长度后 Zookeeper 服务器还没有收到客户端的返回信息,那么表明这个客户端连接失败。总的时间长度就是 10*2000&#x3D;20 秒；</span><br><span class=\"line\"></span><br><span class=\"line\">syncLimit&#x3D;5:</span><br><span class=\"line\">syncLimit这个配置项标识Leader与Follower之间发送消息,请求和应答时间长度,最长不能超过多少个tickTime的时间长度,总的时间长度就是5*2000&#x3D;10秒；</span><br><span class=\"line\"></span><br><span class=\"line\">dataDir&#x3D;&#x2F;export&#x2F;search&#x2F;zookeeper-cluster&#x2F;zookeeper-3.4.6-node1&#x2F;data</span><br><span class=\"line\">dataDir顾名思义就是Zookeeper保存数据的目录,默认情况下Zookeeper将写数据的日志文件也保存在这个目录里；</span><br><span class=\"line\">datailogDir&#x3D;&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-3.5.2-node1&#x2F;datalog</span><br><span class=\"line\">事物日志的存储路径，如果不配置这个那么事物日志会默认存储到dataDir制定的目录，这样会严重影响zk的性能，当zk吞吐量较大的时候，产生的事物日志、快照日志太多</span><br><span class=\"line\">clientPort&#x3D;2181</span><br><span class=\"line\">clientPort这个端口就是客户端连接Zookeeper服务器的端口,Zookeeper会监听这个端口接受客户端的访问请求；</span><br><span class=\"line\"></span><br><span class=\"line\">server.1&#x3D;localhost:2887:3887</span><br><span class=\"line\">server.2&#x3D;localhost:2888:3888</span><br><span class=\"line\">server.3&#x3D;localhost:2889:3889</span><br><span class=\"line\">server.A&#x3D;B：C：D：</span><br><span class=\"line\">A是一个数字,表示这个是第几号服务器,B是这个服务器的ip地址</span><br><span class=\"line\">C第一个端口用来集群成员的信息交换,表示的是这个服务器与集群中的Leader服务器交换信息的端口</span><br><span class=\"line\">D是在leader挂掉时专门用来进行选举leader所用</span><br><span class=\"line\"></span><br><span class=\"line\">#autopurge.purgeInterval  这个参数指定了清理频率，单位是小时，需要填写一个1或更大的整数，默认是0，表示不开启自己清理功能。</span><br><span class=\"line\">#autopurge.snapRetainCount 这个参数和上面的参数搭配使用，这个参数指定了需要保留的文件数目。默认是保留3个。</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"七、supervisor管理\"><a href=\"#七、supervisor管理\" class=\"headerlink\" title=\"七、supervisor管理\"></a>七、supervisor管理</h2><p><code>vim bin/zkEnv.sh</code>在最上面增加环境路径</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;java</span><br><span class=\"line\">export JAVA_HOME</span><br></pre></td></tr></table></figure>\n\n<p><code>vim /etc/supervisor/zookeeper.conf</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[program:zookeeper]</span><br><span class=\"line\">command&#x3D;&#x2F;usr&#x2F;local&#x2F;zookeeper-3.5.2-alpha&#x2F;bin&#x2F;zkServer.sh start-foreground</span><br><span class=\"line\">autostart&#x3D;true</span><br><span class=\"line\">autorestart&#x3D;true</span><br><span class=\"line\">startsecs&#x3D;10</span><br><span class=\"line\">stdout_logfile&#x3D;&#x2F;var&#x2F;log&#x2F;zookeeper.log</span><br><span class=\"line\">stdout_logfile_maxbytes&#x3D;1MB</span><br><span class=\"line\">stdout_logfile_backups&#x3D;10</span><br><span class=\"line\">stdout_capture_maxbytes&#x3D;1MB</span><br><span class=\"line\">stderr_logfile&#x3D;&#x2F;var&#x2F;log&#x2F;zookeeper.log</span><br><span class=\"line\">stderr_logfile_maxbytes&#x3D;1MB</span><br><span class=\"line\">stderr_logfile_backups&#x3D;10</span><br><span class=\"line\">stderr_capture_maxbytes&#x3D;1MB</span><br></pre></td></tr></table></figure>\n\n\n\n<p>##八、报错及处理</p>\n<p>应用连接zookeepr报错：Session 0x0 for server 192.168.220.128/192.168.220.128:2181,unexpected error,closing socket connection and attempting reconnect；</p>\n<p>先看端口能否telnet通，如果通则使用./zkServer.sh status查看zk是否确实已启动，没启查看bin/zookeeper.out中的报错。</p>\n<p>bin/zookeeper.out中报错：“zookeeper address already in use”；显然端口被占用，要么是其他进程占用了配置的端口，要么是上边配置的clientPort和server中的端口有重复。</p>\n<p>bin/zookeeper.out中报错：Cannot open channel to 2 at election address /192.168.220.130:3888；这应该只是组成集群的130节点未启动，到130启动起来zk即会正常。</p>\n"},{"title":"go 项目初始化","date":"2020-10-13T08:42:00.000Z","_content":"  \n  \n摘要: go项目初始化\n<!-- more -->\n\n### 项目创建\n```\nmkdir gocmdb\ncd gocmdb\ngo mod init gocmdb\n\n\nmkdir -p  {conf,middleware,models,pkg,routers,runtime,sql}    // unix\nmkdir  conf,middleware,models,pkg,routers,runtime,sql    // windows\n```\n\n```\nconf：         用于存储配置文件\nmiddleware：   应用中间件\nmodels：       应用数据库模型\nlogs:          运行日志\npkg：          第三方包\nrouters        路由逻辑处理\nruntime        应用运行时数据\n```\n\n\n\n\n","source":"_posts/GO/go.md","raw":"---\ntitle: go 项目初始化\ndate: 2020-10-13 16:42\ncategories:\n- go\ntags:\n- go\n---\n  \n  \n摘要: go项目初始化\n<!-- more -->\n\n### 项目创建\n```\nmkdir gocmdb\ncd gocmdb\ngo mod init gocmdb\n\n\nmkdir -p  {conf,middleware,models,pkg,routers,runtime,sql}    // unix\nmkdir  conf,middleware,models,pkg,routers,runtime,sql    // windows\n```\n\n```\nconf：         用于存储配置文件\nmiddleware：   应用中间件\nmodels：       应用数据库模型\nlogs:          运行日志\npkg：          第三方包\nrouters        路由逻辑处理\nruntime        应用运行时数据\n```\n\n\n\n\n","slug":"GO/go","published":1,"updated":"2021-01-27T08:20:35.739Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2j001rq0usgp5bcun6","content":"<p>摘要: go项目初始化</p>\n<a id=\"more\"></a>\n\n<h3 id=\"项目创建\"><a href=\"#项目创建\" class=\"headerlink\" title=\"项目创建\"></a>项目创建</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir gocmdb</span><br><span class=\"line\">cd gocmdb</span><br><span class=\"line\">go mod init gocmdb</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">mkdir -p  &#123;conf,middleware,models,pkg,routers,runtime,sql&#125;    &#x2F;&#x2F; unix</span><br><span class=\"line\">mkdir  conf,middleware,models,pkg,routers,runtime,sql    &#x2F;&#x2F; windows</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conf：         用于存储配置文件</span><br><span class=\"line\">middleware：   应用中间件</span><br><span class=\"line\">models：       应用数据库模型</span><br><span class=\"line\">logs:          运行日志</span><br><span class=\"line\">pkg：          第三方包</span><br><span class=\"line\">routers        路由逻辑处理</span><br><span class=\"line\">runtime        应用运行时数据</span><br></pre></td></tr></table></figure>\n\n\n\n\n","site":{"data":{}},"excerpt":"<p>摘要: go项目初始化</p>","more":"<h3 id=\"项目创建\"><a href=\"#项目创建\" class=\"headerlink\" title=\"项目创建\"></a>项目创建</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir gocmdb</span><br><span class=\"line\">cd gocmdb</span><br><span class=\"line\">go mod init gocmdb</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">mkdir -p  &#123;conf,middleware,models,pkg,routers,runtime,sql&#125;    &#x2F;&#x2F; unix</span><br><span class=\"line\">mkdir  conf,middleware,models,pkg,routers,runtime,sql    &#x2F;&#x2F; windows</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">conf：         用于存储配置文件</span><br><span class=\"line\">middleware：   应用中间件</span><br><span class=\"line\">models：       应用数据库模型</span><br><span class=\"line\">logs:          运行日志</span><br><span class=\"line\">pkg：          第三方包</span><br><span class=\"line\">routers        路由逻辑处理</span><br><span class=\"line\">runtime        应用运行时数据</span><br></pre></td></tr></table></figure>"},{"title":"go mod 简单使用","date":"2020-10-13T08:28:00.000Z","_content":"  \n  \n摘要: go mod 使用\n<!-- more -->\n\n\ngo modules 是 golang 1.11 新加的特性。Modules官方定义为：\n\n> 模块是相关Go包的集合。modules是源代码交换和版本控制的单元。 go命令直接支持使用modules，包括记录和解析对其他模块的依赖性。modules替换旧的基于GOPATH的方法来指定在给定构建中使用哪些源文件\n\n### 如何使用 Modules ？\n\n把 golang 升级到 1.11\n\n设置 GO111MODULE\n\nGO111MODULE 有三个值：off, on和auto（默认值）。\n```\nGO111MODULE=off，go命令行将不会支持module功能，寻找依赖包的方式将会沿用旧版本那种通过vendor目录或者GOPATH模式来查找。\nGO111MODULE=on，go命令行会使用modules，而一点也不会去GOPATH目录下查找。\nGO111MODULE=auto，默认值，go命令行将会根据当前目录来决定是否启用module功能。这种情况下可以分为两种情形：\n    1、当前目录在GOPATH/src之外且该目录包含go.mod文件\n    2、当前文件在包含go.mod文件的目录下面。\n```\n\n\n> 当modules 功能启用时，依赖包的存放位置变更为$GOPATH/pkg，允许同一个package多个版本并存，且多个项目可以共享缓存的 module。\n\n\n### go mod  命令\ngolang 提供了 go mod命令来管理包。\ngo mod 有以下命令：\n\n\n\n| 命令 | 说明 | \n| ---- | ---- |\n| download |  download modules to local cache(下载依赖包) |\n| edit | edit go.mod from tools or scripts(编辑go.mod) |\n| graph | print module requirement graph (打印模块依赖图) |\n| init | initialize new module in current directory(在当前目录初始化mod) |\n| tidy | add missing and remove unused modules(拉取缺少的模块，移除不用的模块) |\n| vendor | make vendored copy of dependencies(将依赖复制到vendor下) |\n| verify | verify dependencies have expected content (验证依赖是否正确) |\n| why | explain why packages or modules are needed(解释为什么需要依赖) |\n\n---\n\ngo.mod 提供了module, require、replace和exclude 四个命令\n```\nmodule    语句指定包的名字(路径)\nrequire   语句指定的依赖项模块\nreplace   语句可以替换依赖项模块\nexclude   语句可以忽略依赖项模块\n```\n\n\n---\n\ngo get 升级\n\n- 运行 `go get -u`  将会升级到最新的次要版本或者修订版本(x.y.z, z是修订版本号， y是次要版本号)\n- 运行 `go get -u=patch` 将会升级到最新的修订版本\n- 运行 `go get package@version` 将会升级到指定的版本号version\n- 运行`go get`如果有版本的更改，那么go.mod文件也会更改\n\n\n### 使用replace替换无法直接获取的package\n由于某些已知的原因，并不是所有的package都能成功下载，比如：golang.org下的包。\nmodules 可以通过在 go.mod 文件中使用 replace 指令替换成github上对应的库，比如：\n```\nreplace (\n\tgolang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a => github.com/golang/crypto v0.0.0-20190313024323-a1f597ede03a\n)\n```\n或者\n\n```\nreplace golang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a => github.com/golang/crypto v0.0.0-20190313024323-a1f597ede03a\n```\n\n","source":"_posts/GO/gomod.md","raw":"---\ntitle: go mod 简单使用\ndate: 2020-10-13 16:28\ncategories:\n- go\ntags:\n- go-mod\n---\n  \n  \n摘要: go mod 使用\n<!-- more -->\n\n\ngo modules 是 golang 1.11 新加的特性。Modules官方定义为：\n\n> 模块是相关Go包的集合。modules是源代码交换和版本控制的单元。 go命令直接支持使用modules，包括记录和解析对其他模块的依赖性。modules替换旧的基于GOPATH的方法来指定在给定构建中使用哪些源文件\n\n### 如何使用 Modules ？\n\n把 golang 升级到 1.11\n\n设置 GO111MODULE\n\nGO111MODULE 有三个值：off, on和auto（默认值）。\n```\nGO111MODULE=off，go命令行将不会支持module功能，寻找依赖包的方式将会沿用旧版本那种通过vendor目录或者GOPATH模式来查找。\nGO111MODULE=on，go命令行会使用modules，而一点也不会去GOPATH目录下查找。\nGO111MODULE=auto，默认值，go命令行将会根据当前目录来决定是否启用module功能。这种情况下可以分为两种情形：\n    1、当前目录在GOPATH/src之外且该目录包含go.mod文件\n    2、当前文件在包含go.mod文件的目录下面。\n```\n\n\n> 当modules 功能启用时，依赖包的存放位置变更为$GOPATH/pkg，允许同一个package多个版本并存，且多个项目可以共享缓存的 module。\n\n\n### go mod  命令\ngolang 提供了 go mod命令来管理包。\ngo mod 有以下命令：\n\n\n\n| 命令 | 说明 | \n| ---- | ---- |\n| download |  download modules to local cache(下载依赖包) |\n| edit | edit go.mod from tools or scripts(编辑go.mod) |\n| graph | print module requirement graph (打印模块依赖图) |\n| init | initialize new module in current directory(在当前目录初始化mod) |\n| tidy | add missing and remove unused modules(拉取缺少的模块，移除不用的模块) |\n| vendor | make vendored copy of dependencies(将依赖复制到vendor下) |\n| verify | verify dependencies have expected content (验证依赖是否正确) |\n| why | explain why packages or modules are needed(解释为什么需要依赖) |\n\n---\n\ngo.mod 提供了module, require、replace和exclude 四个命令\n```\nmodule    语句指定包的名字(路径)\nrequire   语句指定的依赖项模块\nreplace   语句可以替换依赖项模块\nexclude   语句可以忽略依赖项模块\n```\n\n\n---\n\ngo get 升级\n\n- 运行 `go get -u`  将会升级到最新的次要版本或者修订版本(x.y.z, z是修订版本号， y是次要版本号)\n- 运行 `go get -u=patch` 将会升级到最新的修订版本\n- 运行 `go get package@version` 将会升级到指定的版本号version\n- 运行`go get`如果有版本的更改，那么go.mod文件也会更改\n\n\n### 使用replace替换无法直接获取的package\n由于某些已知的原因，并不是所有的package都能成功下载，比如：golang.org下的包。\nmodules 可以通过在 go.mod 文件中使用 replace 指令替换成github上对应的库，比如：\n```\nreplace (\n\tgolang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a => github.com/golang/crypto v0.0.0-20190313024323-a1f597ede03a\n)\n```\n或者\n\n```\nreplace golang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a => github.com/golang/crypto v0.0.0-20190313024323-a1f597ede03a\n```\n\n","slug":"GO/gomod","published":1,"updated":"2021-01-27T08:20:35.739Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2k001vq0us6fqu42ke","content":"<p>摘要: go mod 使用</p>\n<a id=\"more\"></a>\n\n\n<p>go modules 是 golang 1.11 新加的特性。Modules官方定义为：</p>\n<blockquote>\n<p>模块是相关Go包的集合。modules是源代码交换和版本控制的单元。 go命令直接支持使用modules，包括记录和解析对其他模块的依赖性。modules替换旧的基于GOPATH的方法来指定在给定构建中使用哪些源文件</p>\n</blockquote>\n<h3 id=\"如何使用-Modules-？\"><a href=\"#如何使用-Modules-？\" class=\"headerlink\" title=\"如何使用 Modules ？\"></a>如何使用 Modules ？</h3><p>把 golang 升级到 1.11</p>\n<p>设置 GO111MODULE</p>\n<p>GO111MODULE 有三个值：off, on和auto（默认值）。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GO111MODULE&#x3D;off，go命令行将不会支持module功能，寻找依赖包的方式将会沿用旧版本那种通过vendor目录或者GOPATH模式来查找。</span><br><span class=\"line\">GO111MODULE&#x3D;on，go命令行会使用modules，而一点也不会去GOPATH目录下查找。</span><br><span class=\"line\">GO111MODULE&#x3D;auto，默认值，go命令行将会根据当前目录来决定是否启用module功能。这种情况下可以分为两种情形：</span><br><span class=\"line\">    1、当前目录在GOPATH&#x2F;src之外且该目录包含go.mod文件</span><br><span class=\"line\">    2、当前文件在包含go.mod文件的目录下面。</span><br></pre></td></tr></table></figure>\n\n\n<blockquote>\n<p>当modules 功能启用时，依赖包的存放位置变更为$GOPATH/pkg，允许同一个package多个版本并存，且多个项目可以共享缓存的 module。</p>\n</blockquote>\n<h3 id=\"go-mod-命令\"><a href=\"#go-mod-命令\" class=\"headerlink\" title=\"go mod  命令\"></a>go mod  命令</h3><p>golang 提供了 go mod命令来管理包。<br>go mod 有以下命令：</p>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>download</td>\n<td>download modules to local cache(下载依赖包)</td>\n</tr>\n<tr>\n<td>edit</td>\n<td>edit go.mod from tools or scripts(编辑go.mod)</td>\n</tr>\n<tr>\n<td>graph</td>\n<td>print module requirement graph (打印模块依赖图)</td>\n</tr>\n<tr>\n<td>init</td>\n<td>initialize new module in current directory(在当前目录初始化mod)</td>\n</tr>\n<tr>\n<td>tidy</td>\n<td>add missing and remove unused modules(拉取缺少的模块，移除不用的模块)</td>\n</tr>\n<tr>\n<td>vendor</td>\n<td>make vendored copy of dependencies(将依赖复制到vendor下)</td>\n</tr>\n<tr>\n<td>verify</td>\n<td>verify dependencies have expected content (验证依赖是否正确)</td>\n</tr>\n<tr>\n<td>why</td>\n<td>explain why packages or modules are needed(解释为什么需要依赖)</td>\n</tr>\n</tbody></table>\n<hr>\n<p>go.mod 提供了module, require、replace和exclude 四个命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">module    语句指定包的名字(路径)</span><br><span class=\"line\">require   语句指定的依赖项模块</span><br><span class=\"line\">replace   语句可以替换依赖项模块</span><br><span class=\"line\">exclude   语句可以忽略依赖项模块</span><br></pre></td></tr></table></figure>\n\n\n<hr>\n<p>go get 升级</p>\n<ul>\n<li>运行 <code>go get -u</code>  将会升级到最新的次要版本或者修订版本(x.y.z, z是修订版本号， y是次要版本号)</li>\n<li>运行 <code>go get -u=patch</code> 将会升级到最新的修订版本</li>\n<li>运行 <code>go get package@version</code> 将会升级到指定的版本号version</li>\n<li>运行<code>go get</code>如果有版本的更改，那么go.mod文件也会更改</li>\n</ul>\n<h3 id=\"使用replace替换无法直接获取的package\"><a href=\"#使用replace替换无法直接获取的package\" class=\"headerlink\" title=\"使用replace替换无法直接获取的package\"></a>使用replace替换无法直接获取的package</h3><p>由于某些已知的原因，并不是所有的package都能成功下载，比如：golang.org下的包。<br>modules 可以通过在 go.mod 文件中使用 replace 指令替换成github上对应的库，比如：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">replace (</span><br><span class=\"line\">\tgolang.org&#x2F;x&#x2F;crypto v0.0.0-20190313024323-a1f597ede03a &#x3D;&gt; github.com&#x2F;golang&#x2F;crypto v0.0.0-20190313024323-a1f597ede03a</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<p>或者</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">replace golang.org&#x2F;x&#x2F;crypto v0.0.0-20190313024323-a1f597ede03a &#x3D;&gt; github.com&#x2F;golang&#x2F;crypto v0.0.0-20190313024323-a1f597ede03a</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"<p>摘要: go mod 使用</p>","more":"<p>go modules 是 golang 1.11 新加的特性。Modules官方定义为：</p>\n<blockquote>\n<p>模块是相关Go包的集合。modules是源代码交换和版本控制的单元。 go命令直接支持使用modules，包括记录和解析对其他模块的依赖性。modules替换旧的基于GOPATH的方法来指定在给定构建中使用哪些源文件</p>\n</blockquote>\n<h3 id=\"如何使用-Modules-？\"><a href=\"#如何使用-Modules-？\" class=\"headerlink\" title=\"如何使用 Modules ？\"></a>如何使用 Modules ？</h3><p>把 golang 升级到 1.11</p>\n<p>设置 GO111MODULE</p>\n<p>GO111MODULE 有三个值：off, on和auto（默认值）。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GO111MODULE&#x3D;off，go命令行将不会支持module功能，寻找依赖包的方式将会沿用旧版本那种通过vendor目录或者GOPATH模式来查找。</span><br><span class=\"line\">GO111MODULE&#x3D;on，go命令行会使用modules，而一点也不会去GOPATH目录下查找。</span><br><span class=\"line\">GO111MODULE&#x3D;auto，默认值，go命令行将会根据当前目录来决定是否启用module功能。这种情况下可以分为两种情形：</span><br><span class=\"line\">    1、当前目录在GOPATH&#x2F;src之外且该目录包含go.mod文件</span><br><span class=\"line\">    2、当前文件在包含go.mod文件的目录下面。</span><br></pre></td></tr></table></figure>\n\n\n<blockquote>\n<p>当modules 功能启用时，依赖包的存放位置变更为$GOPATH/pkg，允许同一个package多个版本并存，且多个项目可以共享缓存的 module。</p>\n</blockquote>\n<h3 id=\"go-mod-命令\"><a href=\"#go-mod-命令\" class=\"headerlink\" title=\"go mod  命令\"></a>go mod  命令</h3><p>golang 提供了 go mod命令来管理包。<br>go mod 有以下命令：</p>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>download</td>\n<td>download modules to local cache(下载依赖包)</td>\n</tr>\n<tr>\n<td>edit</td>\n<td>edit go.mod from tools or scripts(编辑go.mod)</td>\n</tr>\n<tr>\n<td>graph</td>\n<td>print module requirement graph (打印模块依赖图)</td>\n</tr>\n<tr>\n<td>init</td>\n<td>initialize new module in current directory(在当前目录初始化mod)</td>\n</tr>\n<tr>\n<td>tidy</td>\n<td>add missing and remove unused modules(拉取缺少的模块，移除不用的模块)</td>\n</tr>\n<tr>\n<td>vendor</td>\n<td>make vendored copy of dependencies(将依赖复制到vendor下)</td>\n</tr>\n<tr>\n<td>verify</td>\n<td>verify dependencies have expected content (验证依赖是否正确)</td>\n</tr>\n<tr>\n<td>why</td>\n<td>explain why packages or modules are needed(解释为什么需要依赖)</td>\n</tr>\n</tbody></table>\n<hr>\n<p>go.mod 提供了module, require、replace和exclude 四个命令</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">module    语句指定包的名字(路径)</span><br><span class=\"line\">require   语句指定的依赖项模块</span><br><span class=\"line\">replace   语句可以替换依赖项模块</span><br><span class=\"line\">exclude   语句可以忽略依赖项模块</span><br></pre></td></tr></table></figure>\n\n\n<hr>\n<p>go get 升级</p>\n<ul>\n<li>运行 <code>go get -u</code>  将会升级到最新的次要版本或者修订版本(x.y.z, z是修订版本号， y是次要版本号)</li>\n<li>运行 <code>go get -u=patch</code> 将会升级到最新的修订版本</li>\n<li>运行 <code>go get package@version</code> 将会升级到指定的版本号version</li>\n<li>运行<code>go get</code>如果有版本的更改，那么go.mod文件也会更改</li>\n</ul>\n<h3 id=\"使用replace替换无法直接获取的package\"><a href=\"#使用replace替换无法直接获取的package\" class=\"headerlink\" title=\"使用replace替换无法直接获取的package\"></a>使用replace替换无法直接获取的package</h3><p>由于某些已知的原因，并不是所有的package都能成功下载，比如：golang.org下的包。<br>modules 可以通过在 go.mod 文件中使用 replace 指令替换成github上对应的库，比如：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">replace (</span><br><span class=\"line\">\tgolang.org&#x2F;x&#x2F;crypto v0.0.0-20190313024323-a1f597ede03a &#x3D;&gt; github.com&#x2F;golang&#x2F;crypto v0.0.0-20190313024323-a1f597ede03a</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<p>或者</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">replace golang.org&#x2F;x&#x2F;crypto v0.0.0-20190313024323-a1f597ede03a &#x3D;&gt; github.com&#x2F;golang&#x2F;crypto v0.0.0-20190313024323-a1f597ede03a</span><br></pre></td></tr></table></figure>"},{"title":"Playbook支持任务结果回显","date":"2020-10-09T03:13:00.000Z","_content":"  \n  \n摘要: Playbook支持任务结果回显，不只是执行是否成功\n<!-- more -->\n\n### 配置文件\nansible.cfg 配置文件（变更callback路径位置）\n```\n[defaults]\ncallback_plugins=/etc/ansible/callback_plugins\n# change the default callback\n#stdout_callback = result_echo\n# enable additional callbacks\ncallback_whitelist = result_echo\nbin_ansible_callbacks = Ture\n\n```\n\n### 编写回显callback脚本\n```\nmkdir /etc/ansible/callback_plugins\n\ncd /etc/ansible/callback_plugins\nvim result_echo.py\n```\n```\n#!/usr/bin/env python\n# -*- coding=utf-8 -*-\n######################\nfrom __future__ import (absolute_import, division, print_function)\n__metaclass__ = type\n\nfrom ansible.plugins.callback.default import CallbackModule as CallbackModule_default\n\nclass CallbackModule(CallbackModule_default):\n\n    '''\n    Execution result echo\n    '''\n\n    CALLBACK_VERSION = 2.0\n    CALLBACK_TYPE = 'notification'\n    #CALLBACK_TYPE = 'stdout'\n    CALLBACK_NAME = 'result_echo'\n\n    def __init__(self):\n        super(CallbackModule, self).__init__()\n        self.lock_results = None\n\n    def on_any(self, *args, **kwargs):\n        pass\n    def runner_on_failed(self, host, res, ignore_errors=False):\n        pass\n    def runner_on_ok(self, host, res):\n        #pass\n        print(res)\n    def runner_on_skipped(self, host, item=None):\n        pass\n    def runner_on_unreachable(self, host, res):\n        #pass\n        print(res)\n    def runner_on_no_hosts(self):\n        pass\n    def runner_on_async_poll(self, host, res, jid, clock):\n        pass\n    def runner_on_async_ok(self, host, res, jid):\n        pass\n    def runner_on_async_failed(self, host, res, jid):\n        pass\n    def playbook_on_start(self):\n        pass\n    def playbook_on_notify(self, host, handler):\n        pass\n    def playbook_on_no_hosts_matched(self):\n        pass\n    def playbook_on_no_hosts_remaining(self):\n        pass\n    def playbook_on_task_start(self, name, is_conditional):\n        pass\n    def playbook_on_vars_prompt(self, varname, private=True, prompt=None, encrypt=None, confirm=False, salt_size=None, salt=None, default=None):\n        pass\n    def playbook_on_setup(self):\n        pass\n    def playbook_on_import_for_host(self, host, imported_file):\n        pass\n    def playbook_on_not_import_for_host(self, host, missing_file):\n        pass\n    def playbook_on_play_start(self, name):\n        pass\n    def playbook_on_stats(self, stats):\n        pass\n    def on_file_diff(self, host, diff):\n        pass\n    def v2_on_any(self, *args, **kwargs):\n        pass\n    def v2_runner_on_failed(self, result, ignore_errors=False):\n        #pass\n        #print (result.__dict__.items())\n        #if \"stderr_lines\" in result._result.keys():\n        #    print( result._result['stderr_lines'])\n        #if 'state' in result._result.keys():\n        #    print( result._result['state'])\n        #if 'invocation' in result._result.keys():\n        #    print( result._result['invocation'])\n    def v2_runner_on_ok(self, result):\n        if \"stdout\" in result._result.keys():\n            print( result._result['stdout'])\n        if 'state' in result._result.keys():\n            print( result._result['state'])\n        if 'invocation' in result._result.keys():\n            print( result._result['invocation'])\n        #pass\n    def v2_runner_on_skipped(self, result):\n        pass\n    def v2_runner_on_unreachable(self, result):\n        pass\n    def v2_runner_on_no_hosts(self, task):\n        pass\n    def v2_runner_on_async_poll(self, result):\n        pass\n    def v2_runner_on_async_ok(self, result):\n        pass\n    def v2_runner_on_async_failed(self, result):\n        pass\n    def v2_runner_on_file_diff(self, result, diff):\n        pass\n    def v2_playbook_on_start(self, playbook):\n        pass\n    def v2_playbook_on_notify(self, result, handler):\n        pass\n    def v2_playbook_on_no_hosts_matched(self):\n        pass\n    def v2_playbook_on_no_hosts_remaining(self):\n        pass\n    def v2_playbook_on_task_start(self, task, is_conditional):\n        pass\n    def v2_playbook_on_cleanup_task_start(self, task):\n        pass\n    def v2_playbook_on_handler_task_start(self, task):\n        pass\n    def v2_playbook_on_vars_prompt(self, varname, private=True, prompt=None, encrypt=None, confirm=False, salt_size=None, salt=None, default=None):\n        pass\n    def v2_playbook_on_setup(self):\n        pass\n    def v2_playbook_on_import_for_host(self, result, imported_file):\n        pass\n    def v2_playbook_on_not_import_for_host(self, result, missing_file):\n        pass\n    def v2_playbook_on_play_start(self, play):\n        pass\n    def v2_playbook_on_stats(self, stats):\n        pass\n    def v2_on_file_diff(self, result):\n        pass\n    def v2_playbook_on_include(self, included_file):\n        pass\n    def v2_runner_item_on_ok(self, result):\n        pass\n    def v2_runner_item_on_failed(self, result):\n        pass\n    def v2_runner_item_on_skipped(self, result):\n        pass\n    def v2_runner_retry(self, result):\n        pass\n```\n\n### 方法的result值\nprint(result._task) 输出任务名\nprint(result._check_key)\nprint(result._host) 输出主机名\nprint(result._result) 输出任务执行的结果\nprint(result.is_changed)\nprint(result.is_failed)\n\n\n### 定义callback说明信息\nCALLBACK_VERSION = 2.0 插件版本\nCALLBACK_TYPE = 'aggregate' 插件类型，如果是'stdout'时，只会加载一个这样的回调插件\nCALLBACK_NAME = 'timer' 插件名称，需与文件名称一致。\nCALLBACK_NEEDS_WHITELIST = True 插件是否需要在配置文件配置whitelist。为true是，ansible检查ansible.cfg文件中的callback_whitelist是否有插件名称，有则执行，无则跳过。\n","source":"_posts/ansible/Playbook支持任务结果回显.md","raw":"---\ntitle: Playbook支持任务结果回显\ndate: 2020-10-09 11:13\ncategories:\n- ansible\ntags:\n- ansible\n---\n  \n  \n摘要: Playbook支持任务结果回显，不只是执行是否成功\n<!-- more -->\n\n### 配置文件\nansible.cfg 配置文件（变更callback路径位置）\n```\n[defaults]\ncallback_plugins=/etc/ansible/callback_plugins\n# change the default callback\n#stdout_callback = result_echo\n# enable additional callbacks\ncallback_whitelist = result_echo\nbin_ansible_callbacks = Ture\n\n```\n\n### 编写回显callback脚本\n```\nmkdir /etc/ansible/callback_plugins\n\ncd /etc/ansible/callback_plugins\nvim result_echo.py\n```\n```\n#!/usr/bin/env python\n# -*- coding=utf-8 -*-\n######################\nfrom __future__ import (absolute_import, division, print_function)\n__metaclass__ = type\n\nfrom ansible.plugins.callback.default import CallbackModule as CallbackModule_default\n\nclass CallbackModule(CallbackModule_default):\n\n    '''\n    Execution result echo\n    '''\n\n    CALLBACK_VERSION = 2.0\n    CALLBACK_TYPE = 'notification'\n    #CALLBACK_TYPE = 'stdout'\n    CALLBACK_NAME = 'result_echo'\n\n    def __init__(self):\n        super(CallbackModule, self).__init__()\n        self.lock_results = None\n\n    def on_any(self, *args, **kwargs):\n        pass\n    def runner_on_failed(self, host, res, ignore_errors=False):\n        pass\n    def runner_on_ok(self, host, res):\n        #pass\n        print(res)\n    def runner_on_skipped(self, host, item=None):\n        pass\n    def runner_on_unreachable(self, host, res):\n        #pass\n        print(res)\n    def runner_on_no_hosts(self):\n        pass\n    def runner_on_async_poll(self, host, res, jid, clock):\n        pass\n    def runner_on_async_ok(self, host, res, jid):\n        pass\n    def runner_on_async_failed(self, host, res, jid):\n        pass\n    def playbook_on_start(self):\n        pass\n    def playbook_on_notify(self, host, handler):\n        pass\n    def playbook_on_no_hosts_matched(self):\n        pass\n    def playbook_on_no_hosts_remaining(self):\n        pass\n    def playbook_on_task_start(self, name, is_conditional):\n        pass\n    def playbook_on_vars_prompt(self, varname, private=True, prompt=None, encrypt=None, confirm=False, salt_size=None, salt=None, default=None):\n        pass\n    def playbook_on_setup(self):\n        pass\n    def playbook_on_import_for_host(self, host, imported_file):\n        pass\n    def playbook_on_not_import_for_host(self, host, missing_file):\n        pass\n    def playbook_on_play_start(self, name):\n        pass\n    def playbook_on_stats(self, stats):\n        pass\n    def on_file_diff(self, host, diff):\n        pass\n    def v2_on_any(self, *args, **kwargs):\n        pass\n    def v2_runner_on_failed(self, result, ignore_errors=False):\n        #pass\n        #print (result.__dict__.items())\n        #if \"stderr_lines\" in result._result.keys():\n        #    print( result._result['stderr_lines'])\n        #if 'state' in result._result.keys():\n        #    print( result._result['state'])\n        #if 'invocation' in result._result.keys():\n        #    print( result._result['invocation'])\n    def v2_runner_on_ok(self, result):\n        if \"stdout\" in result._result.keys():\n            print( result._result['stdout'])\n        if 'state' in result._result.keys():\n            print( result._result['state'])\n        if 'invocation' in result._result.keys():\n            print( result._result['invocation'])\n        #pass\n    def v2_runner_on_skipped(self, result):\n        pass\n    def v2_runner_on_unreachable(self, result):\n        pass\n    def v2_runner_on_no_hosts(self, task):\n        pass\n    def v2_runner_on_async_poll(self, result):\n        pass\n    def v2_runner_on_async_ok(self, result):\n        pass\n    def v2_runner_on_async_failed(self, result):\n        pass\n    def v2_runner_on_file_diff(self, result, diff):\n        pass\n    def v2_playbook_on_start(self, playbook):\n        pass\n    def v2_playbook_on_notify(self, result, handler):\n        pass\n    def v2_playbook_on_no_hosts_matched(self):\n        pass\n    def v2_playbook_on_no_hosts_remaining(self):\n        pass\n    def v2_playbook_on_task_start(self, task, is_conditional):\n        pass\n    def v2_playbook_on_cleanup_task_start(self, task):\n        pass\n    def v2_playbook_on_handler_task_start(self, task):\n        pass\n    def v2_playbook_on_vars_prompt(self, varname, private=True, prompt=None, encrypt=None, confirm=False, salt_size=None, salt=None, default=None):\n        pass\n    def v2_playbook_on_setup(self):\n        pass\n    def v2_playbook_on_import_for_host(self, result, imported_file):\n        pass\n    def v2_playbook_on_not_import_for_host(self, result, missing_file):\n        pass\n    def v2_playbook_on_play_start(self, play):\n        pass\n    def v2_playbook_on_stats(self, stats):\n        pass\n    def v2_on_file_diff(self, result):\n        pass\n    def v2_playbook_on_include(self, included_file):\n        pass\n    def v2_runner_item_on_ok(self, result):\n        pass\n    def v2_runner_item_on_failed(self, result):\n        pass\n    def v2_runner_item_on_skipped(self, result):\n        pass\n    def v2_runner_retry(self, result):\n        pass\n```\n\n### 方法的result值\nprint(result._task) 输出任务名\nprint(result._check_key)\nprint(result._host) 输出主机名\nprint(result._result) 输出任务执行的结果\nprint(result.is_changed)\nprint(result.is_failed)\n\n\n### 定义callback说明信息\nCALLBACK_VERSION = 2.0 插件版本\nCALLBACK_TYPE = 'aggregate' 插件类型，如果是'stdout'时，只会加载一个这样的回调插件\nCALLBACK_NAME = 'timer' 插件名称，需与文件名称一致。\nCALLBACK_NEEDS_WHITELIST = True 插件是否需要在配置文件配置whitelist。为true是，ansible检查ansible.cfg文件中的callback_whitelist是否有插件名称，有则执行，无则跳过。\n","slug":"ansible/Playbook支持任务结果回显","published":1,"updated":"2021-01-27T08:20:35.742Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2l001xq0us3jqk4ing","content":"<p>摘要: Playbook支持任务结果回显，不只是执行是否成功</p>\n<a id=\"more\"></a>\n\n<h3 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><p>ansible.cfg 配置文件（变更callback路径位置）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[defaults]</span><br><span class=\"line\">callback_plugins&#x3D;&#x2F;etc&#x2F;ansible&#x2F;callback_plugins</span><br><span class=\"line\"># change the default callback</span><br><span class=\"line\">#stdout_callback &#x3D; result_echo</span><br><span class=\"line\"># enable additional callbacks</span><br><span class=\"line\">callback_whitelist &#x3D; result_echo</span><br><span class=\"line\">bin_ansible_callbacks &#x3D; Ture</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"编写回显callback脚本\"><a href=\"#编写回显callback脚本\" class=\"headerlink\" title=\"编写回显callback脚本\"></a>编写回显callback脚本</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir &#x2F;etc&#x2F;ansible&#x2F;callback_plugins</span><br><span class=\"line\"></span><br><span class=\"line\">cd &#x2F;etc&#x2F;ansible&#x2F;callback_plugins</span><br><span class=\"line\">vim result_echo.py</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!&#x2F;usr&#x2F;bin&#x2F;env python</span><br><span class=\"line\"># -*- coding&#x3D;utf-8 -*-</span><br><span class=\"line\">######################</span><br><span class=\"line\">from __future__ import (absolute_import, division, print_function)</span><br><span class=\"line\">__metaclass__ &#x3D; type</span><br><span class=\"line\"></span><br><span class=\"line\">from ansible.plugins.callback.default import CallbackModule as CallbackModule_default</span><br><span class=\"line\"></span><br><span class=\"line\">class CallbackModule(CallbackModule_default):</span><br><span class=\"line\"></span><br><span class=\"line\">    &#39;&#39;&#39;</span><br><span class=\"line\">    Execution result echo</span><br><span class=\"line\">    &#39;&#39;&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">    CALLBACK_VERSION &#x3D; 2.0</span><br><span class=\"line\">    CALLBACK_TYPE &#x3D; &#39;notification&#39;</span><br><span class=\"line\">    #CALLBACK_TYPE &#x3D; &#39;stdout&#39;</span><br><span class=\"line\">    CALLBACK_NAME &#x3D; &#39;result_echo&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">    def __init__(self):</span><br><span class=\"line\">        super(CallbackModule, self).__init__()</span><br><span class=\"line\">        self.lock_results &#x3D; None</span><br><span class=\"line\"></span><br><span class=\"line\">    def on_any(self, *args, **kwargs):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def runner_on_failed(self, host, res, ignore_errors&#x3D;False):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def runner_on_ok(self, host, res):</span><br><span class=\"line\">        #pass</span><br><span class=\"line\">        print(res)</span><br><span class=\"line\">    def runner_on_skipped(self, host, item&#x3D;None):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def runner_on_unreachable(self, host, res):</span><br><span class=\"line\">        #pass</span><br><span class=\"line\">        print(res)</span><br><span class=\"line\">    def runner_on_no_hosts(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def runner_on_async_poll(self, host, res, jid, clock):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def runner_on_async_ok(self, host, res, jid):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def runner_on_async_failed(self, host, res, jid):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_start(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_notify(self, host, handler):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_no_hosts_matched(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_no_hosts_remaining(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_task_start(self, name, is_conditional):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_vars_prompt(self, varname, private&#x3D;True, prompt&#x3D;None, encrypt&#x3D;None, confirm&#x3D;False, salt_size&#x3D;None, salt&#x3D;None, default&#x3D;None):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_setup(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_import_for_host(self, host, imported_file):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_not_import_for_host(self, host, missing_file):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_play_start(self, name):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_stats(self, stats):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def on_file_diff(self, host, diff):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_on_any(self, *args, **kwargs):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_failed(self, result, ignore_errors&#x3D;False):</span><br><span class=\"line\">        #pass</span><br><span class=\"line\">        #print (result.__dict__.items())</span><br><span class=\"line\">        #if &quot;stderr_lines&quot; in result._result.keys():</span><br><span class=\"line\">        #    print( result._result[&#39;stderr_lines&#39;])</span><br><span class=\"line\">        #if &#39;state&#39; in result._result.keys():</span><br><span class=\"line\">        #    print( result._result[&#39;state&#39;])</span><br><span class=\"line\">        #if &#39;invocation&#39; in result._result.keys():</span><br><span class=\"line\">        #    print( result._result[&#39;invocation&#39;])</span><br><span class=\"line\">    def v2_runner_on_ok(self, result):</span><br><span class=\"line\">        if &quot;stdout&quot; in result._result.keys():</span><br><span class=\"line\">            print( result._result[&#39;stdout&#39;])</span><br><span class=\"line\">        if &#39;state&#39; in result._result.keys():</span><br><span class=\"line\">            print( result._result[&#39;state&#39;])</span><br><span class=\"line\">        if &#39;invocation&#39; in result._result.keys():</span><br><span class=\"line\">            print( result._result[&#39;invocation&#39;])</span><br><span class=\"line\">        #pass</span><br><span class=\"line\">    def v2_runner_on_skipped(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_unreachable(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_no_hosts(self, task):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_async_poll(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_async_ok(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_async_failed(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_file_diff(self, result, diff):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_start(self, playbook):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_notify(self, result, handler):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_no_hosts_matched(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_no_hosts_remaining(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_task_start(self, task, is_conditional):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_cleanup_task_start(self, task):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_handler_task_start(self, task):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_vars_prompt(self, varname, private&#x3D;True, prompt&#x3D;None, encrypt&#x3D;None, confirm&#x3D;False, salt_size&#x3D;None, salt&#x3D;None, default&#x3D;None):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_setup(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_import_for_host(self, result, imported_file):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_not_import_for_host(self, result, missing_file):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_play_start(self, play):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_stats(self, stats):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_on_file_diff(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_include(self, included_file):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_item_on_ok(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_item_on_failed(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_item_on_skipped(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_retry(self, result):</span><br><span class=\"line\">        pass</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"方法的result值\"><a href=\"#方法的result值\" class=\"headerlink\" title=\"方法的result值\"></a>方法的result值</h3><p>print(result._task) 输出任务名<br>print(result._check_key)<br>print(result._host) 输出主机名<br>print(result._result) 输出任务执行的结果<br>print(result.is_changed)<br>print(result.is_failed)</p>\n<h3 id=\"定义callback说明信息\"><a href=\"#定义callback说明信息\" class=\"headerlink\" title=\"定义callback说明信息\"></a>定义callback说明信息</h3><p>CALLBACK_VERSION = 2.0 插件版本<br>CALLBACK_TYPE = ‘aggregate’ 插件类型，如果是’stdout’时，只会加载一个这样的回调插件<br>CALLBACK_NAME = ‘timer’ 插件名称，需与文件名称一致。<br>CALLBACK_NEEDS_WHITELIST = True 插件是否需要在配置文件配置whitelist。为true是，ansible检查ansible.cfg文件中的callback_whitelist是否有插件名称，有则执行，无则跳过。</p>\n","site":{"data":{}},"excerpt":"<p>摘要: Playbook支持任务结果回显，不只是执行是否成功</p>","more":"<h3 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><p>ansible.cfg 配置文件（变更callback路径位置）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[defaults]</span><br><span class=\"line\">callback_plugins&#x3D;&#x2F;etc&#x2F;ansible&#x2F;callback_plugins</span><br><span class=\"line\"># change the default callback</span><br><span class=\"line\">#stdout_callback &#x3D; result_echo</span><br><span class=\"line\"># enable additional callbacks</span><br><span class=\"line\">callback_whitelist &#x3D; result_echo</span><br><span class=\"line\">bin_ansible_callbacks &#x3D; Ture</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"编写回显callback脚本\"><a href=\"#编写回显callback脚本\" class=\"headerlink\" title=\"编写回显callback脚本\"></a>编写回显callback脚本</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir &#x2F;etc&#x2F;ansible&#x2F;callback_plugins</span><br><span class=\"line\"></span><br><span class=\"line\">cd &#x2F;etc&#x2F;ansible&#x2F;callback_plugins</span><br><span class=\"line\">vim result_echo.py</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!&#x2F;usr&#x2F;bin&#x2F;env python</span><br><span class=\"line\"># -*- coding&#x3D;utf-8 -*-</span><br><span class=\"line\">######################</span><br><span class=\"line\">from __future__ import (absolute_import, division, print_function)</span><br><span class=\"line\">__metaclass__ &#x3D; type</span><br><span class=\"line\"></span><br><span class=\"line\">from ansible.plugins.callback.default import CallbackModule as CallbackModule_default</span><br><span class=\"line\"></span><br><span class=\"line\">class CallbackModule(CallbackModule_default):</span><br><span class=\"line\"></span><br><span class=\"line\">    &#39;&#39;&#39;</span><br><span class=\"line\">    Execution result echo</span><br><span class=\"line\">    &#39;&#39;&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">    CALLBACK_VERSION &#x3D; 2.0</span><br><span class=\"line\">    CALLBACK_TYPE &#x3D; &#39;notification&#39;</span><br><span class=\"line\">    #CALLBACK_TYPE &#x3D; &#39;stdout&#39;</span><br><span class=\"line\">    CALLBACK_NAME &#x3D; &#39;result_echo&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">    def __init__(self):</span><br><span class=\"line\">        super(CallbackModule, self).__init__()</span><br><span class=\"line\">        self.lock_results &#x3D; None</span><br><span class=\"line\"></span><br><span class=\"line\">    def on_any(self, *args, **kwargs):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def runner_on_failed(self, host, res, ignore_errors&#x3D;False):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def runner_on_ok(self, host, res):</span><br><span class=\"line\">        #pass</span><br><span class=\"line\">        print(res)</span><br><span class=\"line\">    def runner_on_skipped(self, host, item&#x3D;None):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def runner_on_unreachable(self, host, res):</span><br><span class=\"line\">        #pass</span><br><span class=\"line\">        print(res)</span><br><span class=\"line\">    def runner_on_no_hosts(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def runner_on_async_poll(self, host, res, jid, clock):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def runner_on_async_ok(self, host, res, jid):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def runner_on_async_failed(self, host, res, jid):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_start(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_notify(self, host, handler):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_no_hosts_matched(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_no_hosts_remaining(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_task_start(self, name, is_conditional):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_vars_prompt(self, varname, private&#x3D;True, prompt&#x3D;None, encrypt&#x3D;None, confirm&#x3D;False, salt_size&#x3D;None, salt&#x3D;None, default&#x3D;None):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_setup(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_import_for_host(self, host, imported_file):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_not_import_for_host(self, host, missing_file):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_play_start(self, name):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def playbook_on_stats(self, stats):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def on_file_diff(self, host, diff):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_on_any(self, *args, **kwargs):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_failed(self, result, ignore_errors&#x3D;False):</span><br><span class=\"line\">        #pass</span><br><span class=\"line\">        #print (result.__dict__.items())</span><br><span class=\"line\">        #if &quot;stderr_lines&quot; in result._result.keys():</span><br><span class=\"line\">        #    print( result._result[&#39;stderr_lines&#39;])</span><br><span class=\"line\">        #if &#39;state&#39; in result._result.keys():</span><br><span class=\"line\">        #    print( result._result[&#39;state&#39;])</span><br><span class=\"line\">        #if &#39;invocation&#39; in result._result.keys():</span><br><span class=\"line\">        #    print( result._result[&#39;invocation&#39;])</span><br><span class=\"line\">    def v2_runner_on_ok(self, result):</span><br><span class=\"line\">        if &quot;stdout&quot; in result._result.keys():</span><br><span class=\"line\">            print( result._result[&#39;stdout&#39;])</span><br><span class=\"line\">        if &#39;state&#39; in result._result.keys():</span><br><span class=\"line\">            print( result._result[&#39;state&#39;])</span><br><span class=\"line\">        if &#39;invocation&#39; in result._result.keys():</span><br><span class=\"line\">            print( result._result[&#39;invocation&#39;])</span><br><span class=\"line\">        #pass</span><br><span class=\"line\">    def v2_runner_on_skipped(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_unreachable(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_no_hosts(self, task):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_async_poll(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_async_ok(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_async_failed(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_on_file_diff(self, result, diff):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_start(self, playbook):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_notify(self, result, handler):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_no_hosts_matched(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_no_hosts_remaining(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_task_start(self, task, is_conditional):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_cleanup_task_start(self, task):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_handler_task_start(self, task):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_vars_prompt(self, varname, private&#x3D;True, prompt&#x3D;None, encrypt&#x3D;None, confirm&#x3D;False, salt_size&#x3D;None, salt&#x3D;None, default&#x3D;None):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_setup(self):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_import_for_host(self, result, imported_file):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_not_import_for_host(self, result, missing_file):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_play_start(self, play):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_stats(self, stats):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_on_file_diff(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_playbook_on_include(self, included_file):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_item_on_ok(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_item_on_failed(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_item_on_skipped(self, result):</span><br><span class=\"line\">        pass</span><br><span class=\"line\">    def v2_runner_retry(self, result):</span><br><span class=\"line\">        pass</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"方法的result值\"><a href=\"#方法的result值\" class=\"headerlink\" title=\"方法的result值\"></a>方法的result值</h3><p>print(result._task) 输出任务名<br>print(result._check_key)<br>print(result._host) 输出主机名<br>print(result._result) 输出任务执行的结果<br>print(result.is_changed)<br>print(result.is_failed)</p>\n<h3 id=\"定义callback说明信息\"><a href=\"#定义callback说明信息\" class=\"headerlink\" title=\"定义callback说明信息\"></a>定义callback说明信息</h3><p>CALLBACK_VERSION = 2.0 插件版本<br>CALLBACK_TYPE = ‘aggregate’ 插件类型，如果是’stdout’时，只会加载一个这样的回调插件<br>CALLBACK_NAME = ‘timer’ 插件名称，需与文件名称一致。<br>CALLBACK_NEEDS_WHITELIST = True 插件是否需要在配置文件配置whitelist。为true是，ansible检查ansible.cfg文件中的callback_whitelist是否有插件名称，有则执行，无则跳过。</p>"},{"title":"es7.x 安装","date":"2020-09-21T04:48:00.000Z","_content":"\n\n\n\n下载elasticsearch\n\n```\nhttps://www.elastic.co/cn/downloads/elasticsearch\n```\n\n```\nwget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.8.0-linux-x86_64.tar.gz\n```\n\n```\ntar xf elasticsearch-7.8.0-linux-x86_64.tar.gz\nmv elasticsearch-7.8.0 /home/es/elasticsearch-7.8.0\nchown es.es -R elasticsearch\nln -s /home/es/elasticsearch-7.8.0 /home/es/elasticsearch\n```\n\n\n\n配置es\n\n```\ncat >> config/elasticsearch.yml <<EOF\n\n# ======================== Elasticsearch Configuration =========================\ncluster.name: cluster-Es\nnode.name: node01\nnetwork.host: 172.16.103.123\nnode.master: true\nnode.data: true\n# head 插件需要这打开这两个配置\nhttp.cors.allow-origin: \"*\"\nhttp.cors.enabled: true\nhttp.max_content_length: 200mb\n# 可以选举的主节点\ncluster.initial_master_nodes: [\"192.168.7.41:9300\",\"192.168.7.42:9300\",\"192.168.7.43:9300\"]\ndiscovery.seed_hosts: [\"192.168.7.41:9300\",\"192.168.7.42:9300\",\"192.168.7.43:9300\"]\ngateway.recover_after_nodes: 2\nnetwork.tcp.keep_alive: true\nnetwork.tcp.no_delay: true\ntransport.tcp.compress: true\n#集群内同时启动的数据任务个数，默认是2个\ncluster.routing.allocation.cluster_concurrent_rebalance: 16\n#添加或删除节点及负载均衡时并发恢复的线程个数，默认4个\ncluster.routing.allocation.node_concurrent_recoveries: 16\n#初始化数据恢复时，并发恢复线程的个数，默认4个\ncluster.routing.allocation.node_initial_primaries_recoveries: 16\n#开启 xpack 功能，如果要禁止使用密码，请将以下内容注释，直接启动不需要设置密码\n#xpack.security.enabled: true\n#xpack.security.transport.ssl.enabled: true\n#xpack.security.transport.ssl.verification_mode: certificate\n#xpack.security.transport.ssl.keystore.path: elastic-certificates.p12\n#xpack.security.transport.ssl.truststore.path: elastic-certificates.p12\nEOF\n```\n\n\n\n启动\n\n```\nsu - es -c \"/home/es/elasticsearch/bin/elasticsearch -d\"\n```\n\n\n\n启动二\n\n配置 services 文件\n\n```\nvim /lib/systemd/system/elasticsearch.service\n\n\n[Unit]\nDescription=Elasticsearch\nDocumentation=http://www.elastic.co\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nRuntimeDirectory=elasticsearch\nPrivateTmp=true\nEnvironment=ES_HOME=/home/es/elasticsearch\nEnvironment=ES_PATH_CONF=/etc/elasticsearch\nEnvironment=PID_DIR=/var/run/elasticsearch\nEnvironmentFile=-/etc/sysconfig/elasticsearch\n\nWorkingDirectory=/home/es/elasticsearch\n\nUser=es\nGroup=es\n\nExecStart=/home/es/elasticsearch/bin/elasticsearch -p ${PID_DIR}/elasticsearch.pid --quiet\n\n# StandardOutput is configured to redirect to journalctl since\n# some error messages may be logged in standard output before\n# elasticsearch logging system is initialized. Elasticsearch\n# stores its logs in /var/log/elasticsearch and does not use\n# journalctl by default. If you also want to enable journalctl\n# logging, you can simply remove the \"quiet\" option from ExecStart.\nStandardOutput=journal\nStandardError=inherit\n\n# Specifies the maximum file descriptor number that can be opened by this process\nLimitNOFILE=65536\n\n# Specifies the maximum number of processes\nLimitNPROC=4096\n\n# Specifies the maximum size of virtual memory\nLimitAS=infinity\n\n# Specifies the maximum file size\nLimitFSIZE=infinity\n\n# Disable timeout logic and wait until process is stopped\nTimeoutStopSec=0\n\n# SIGTERM signal is used to stop the Java process\nKillSignal=SIGTERM\n\n# Send the signal only to the JVM rather than its control group\nKillMode=process\n\n# Java process is never killed\nSendSIGKILL=no\n\n# When a JVM receives a SIGTERM signal it exits with code 143\nSuccessExitStatus=143\n\n[Install]\nWantedBy=multi-user.target\n\n# Built for packages-7.1.1 (packages)\n```\n\n\n\n\n\n```\nsystemctl daemon-reload\nsystemctl start elasticsearch\nsystemctl status elasticsearch\nsystemctl stop elasticsearch\n```\n\n\n\n运行elasticsearch时报错：\n\n```\ncould not find java; set JAVA_HOME or ensure java is in PATH\n```\n\n修改文件\n\n```\nvim bin/elasticsearch-env\n\n添加\nsource /etc/profile\n\n修改  ES_HOME=`dirname \"$SCRIPT\"`   为    ES_HOME=\"/home/es/elasticsearch\"\n```\n\n","source":"_posts/elasticsearch/部署es7x.md","raw":"\n---\ntitle: es7.x 安装\ndate: 2020-09-21 12:48\ncategories:\n- elasticsearch\ntags:\n- es\n- elasticsearch\n---\n\n\n\n\n下载elasticsearch\n\n```\nhttps://www.elastic.co/cn/downloads/elasticsearch\n```\n\n```\nwget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.8.0-linux-x86_64.tar.gz\n```\n\n```\ntar xf elasticsearch-7.8.0-linux-x86_64.tar.gz\nmv elasticsearch-7.8.0 /home/es/elasticsearch-7.8.0\nchown es.es -R elasticsearch\nln -s /home/es/elasticsearch-7.8.0 /home/es/elasticsearch\n```\n\n\n\n配置es\n\n```\ncat >> config/elasticsearch.yml <<EOF\n\n# ======================== Elasticsearch Configuration =========================\ncluster.name: cluster-Es\nnode.name: node01\nnetwork.host: 172.16.103.123\nnode.master: true\nnode.data: true\n# head 插件需要这打开这两个配置\nhttp.cors.allow-origin: \"*\"\nhttp.cors.enabled: true\nhttp.max_content_length: 200mb\n# 可以选举的主节点\ncluster.initial_master_nodes: [\"192.168.7.41:9300\",\"192.168.7.42:9300\",\"192.168.7.43:9300\"]\ndiscovery.seed_hosts: [\"192.168.7.41:9300\",\"192.168.7.42:9300\",\"192.168.7.43:9300\"]\ngateway.recover_after_nodes: 2\nnetwork.tcp.keep_alive: true\nnetwork.tcp.no_delay: true\ntransport.tcp.compress: true\n#集群内同时启动的数据任务个数，默认是2个\ncluster.routing.allocation.cluster_concurrent_rebalance: 16\n#添加或删除节点及负载均衡时并发恢复的线程个数，默认4个\ncluster.routing.allocation.node_concurrent_recoveries: 16\n#初始化数据恢复时，并发恢复线程的个数，默认4个\ncluster.routing.allocation.node_initial_primaries_recoveries: 16\n#开启 xpack 功能，如果要禁止使用密码，请将以下内容注释，直接启动不需要设置密码\n#xpack.security.enabled: true\n#xpack.security.transport.ssl.enabled: true\n#xpack.security.transport.ssl.verification_mode: certificate\n#xpack.security.transport.ssl.keystore.path: elastic-certificates.p12\n#xpack.security.transport.ssl.truststore.path: elastic-certificates.p12\nEOF\n```\n\n\n\n启动\n\n```\nsu - es -c \"/home/es/elasticsearch/bin/elasticsearch -d\"\n```\n\n\n\n启动二\n\n配置 services 文件\n\n```\nvim /lib/systemd/system/elasticsearch.service\n\n\n[Unit]\nDescription=Elasticsearch\nDocumentation=http://www.elastic.co\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nRuntimeDirectory=elasticsearch\nPrivateTmp=true\nEnvironment=ES_HOME=/home/es/elasticsearch\nEnvironment=ES_PATH_CONF=/etc/elasticsearch\nEnvironment=PID_DIR=/var/run/elasticsearch\nEnvironmentFile=-/etc/sysconfig/elasticsearch\n\nWorkingDirectory=/home/es/elasticsearch\n\nUser=es\nGroup=es\n\nExecStart=/home/es/elasticsearch/bin/elasticsearch -p ${PID_DIR}/elasticsearch.pid --quiet\n\n# StandardOutput is configured to redirect to journalctl since\n# some error messages may be logged in standard output before\n# elasticsearch logging system is initialized. Elasticsearch\n# stores its logs in /var/log/elasticsearch and does not use\n# journalctl by default. If you also want to enable journalctl\n# logging, you can simply remove the \"quiet\" option from ExecStart.\nStandardOutput=journal\nStandardError=inherit\n\n# Specifies the maximum file descriptor number that can be opened by this process\nLimitNOFILE=65536\n\n# Specifies the maximum number of processes\nLimitNPROC=4096\n\n# Specifies the maximum size of virtual memory\nLimitAS=infinity\n\n# Specifies the maximum file size\nLimitFSIZE=infinity\n\n# Disable timeout logic and wait until process is stopped\nTimeoutStopSec=0\n\n# SIGTERM signal is used to stop the Java process\nKillSignal=SIGTERM\n\n# Send the signal only to the JVM rather than its control group\nKillMode=process\n\n# Java process is never killed\nSendSIGKILL=no\n\n# When a JVM receives a SIGTERM signal it exits with code 143\nSuccessExitStatus=143\n\n[Install]\nWantedBy=multi-user.target\n\n# Built for packages-7.1.1 (packages)\n```\n\n\n\n\n\n```\nsystemctl daemon-reload\nsystemctl start elasticsearch\nsystemctl status elasticsearch\nsystemctl stop elasticsearch\n```\n\n\n\n运行elasticsearch时报错：\n\n```\ncould not find java; set JAVA_HOME or ensure java is in PATH\n```\n\n修改文件\n\n```\nvim bin/elasticsearch-env\n\n添加\nsource /etc/profile\n\n修改  ES_HOME=`dirname \"$SCRIPT\"`   为    ES_HOME=\"/home/es/elasticsearch\"\n```\n\n","slug":"elasticsearch/部署es7x","published":1,"updated":"2021-01-27T08:20:35.744Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2n0022q0us8ldc0taq","content":"<p>下载elasticsearch</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;www.elastic.co&#x2F;cn&#x2F;downloads&#x2F;elasticsearch</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;artifacts.elastic.co&#x2F;downloads&#x2F;elasticsearch&#x2F;elasticsearch-7.8.0-linux-x86_64.tar.gz</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xf elasticsearch-7.8.0-linux-x86_64.tar.gz</span><br><span class=\"line\">mv elasticsearch-7.8.0 &#x2F;home&#x2F;es&#x2F;elasticsearch-7.8.0</span><br><span class=\"line\">chown es.es -R elasticsearch</span><br><span class=\"line\">ln -s &#x2F;home&#x2F;es&#x2F;elasticsearch-7.8.0 &#x2F;home&#x2F;es&#x2F;elasticsearch</span><br></pre></td></tr></table></figure>\n\n\n\n<p>配置es</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat &gt;&gt; config&#x2F;elasticsearch.yml &lt;&lt;EOF</span><br><span class=\"line\"></span><br><span class=\"line\"># &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Elasticsearch Configuration &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class=\"line\">cluster.name: cluster-Es</span><br><span class=\"line\">node.name: node01</span><br><span class=\"line\">network.host: 172.16.103.123</span><br><span class=\"line\">node.master: true</span><br><span class=\"line\">node.data: true</span><br><span class=\"line\"># head 插件需要这打开这两个配置</span><br><span class=\"line\">http.cors.allow-origin: &quot;*&quot;</span><br><span class=\"line\">http.cors.enabled: true</span><br><span class=\"line\">http.max_content_length: 200mb</span><br><span class=\"line\"># 可以选举的主节点</span><br><span class=\"line\">cluster.initial_master_nodes: [&quot;192.168.7.41:9300&quot;,&quot;192.168.7.42:9300&quot;,&quot;192.168.7.43:9300&quot;]</span><br><span class=\"line\">discovery.seed_hosts: [&quot;192.168.7.41:9300&quot;,&quot;192.168.7.42:9300&quot;,&quot;192.168.7.43:9300&quot;]</span><br><span class=\"line\">gateway.recover_after_nodes: 2</span><br><span class=\"line\">network.tcp.keep_alive: true</span><br><span class=\"line\">network.tcp.no_delay: true</span><br><span class=\"line\">transport.tcp.compress: true</span><br><span class=\"line\">#集群内同时启动的数据任务个数，默认是2个</span><br><span class=\"line\">cluster.routing.allocation.cluster_concurrent_rebalance: 16</span><br><span class=\"line\">#添加或删除节点及负载均衡时并发恢复的线程个数，默认4个</span><br><span class=\"line\">cluster.routing.allocation.node_concurrent_recoveries: 16</span><br><span class=\"line\">#初始化数据恢复时，并发恢复线程的个数，默认4个</span><br><span class=\"line\">cluster.routing.allocation.node_initial_primaries_recoveries: 16</span><br><span class=\"line\">#开启 xpack 功能，如果要禁止使用密码，请将以下内容注释，直接启动不需要设置密码</span><br><span class=\"line\">#xpack.security.enabled: true</span><br><span class=\"line\">#xpack.security.transport.ssl.enabled: true</span><br><span class=\"line\">#xpack.security.transport.ssl.verification_mode: certificate</span><br><span class=\"line\">#xpack.security.transport.ssl.keystore.path: elastic-certificates.p12</span><br><span class=\"line\">#xpack.security.transport.ssl.truststore.path: elastic-certificates.p12</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n\n\n\n<p>启动</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">su - es -c &quot;&#x2F;home&#x2F;es&#x2F;elasticsearch&#x2F;bin&#x2F;elasticsearch -d&quot;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>启动二</p>\n<p>配置 services 文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;elasticsearch.service</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description&#x3D;Elasticsearch</span><br><span class=\"line\">Documentation&#x3D;http:&#x2F;&#x2F;www.elastic.co</span><br><span class=\"line\">Wants&#x3D;network-online.target</span><br><span class=\"line\">After&#x3D;network-online.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">RuntimeDirectory&#x3D;elasticsearch</span><br><span class=\"line\">PrivateTmp&#x3D;true</span><br><span class=\"line\">Environment&#x3D;ES_HOME&#x3D;&#x2F;home&#x2F;es&#x2F;elasticsearch</span><br><span class=\"line\">Environment&#x3D;ES_PATH_CONF&#x3D;&#x2F;etc&#x2F;elasticsearch</span><br><span class=\"line\">Environment&#x3D;PID_DIR&#x3D;&#x2F;var&#x2F;run&#x2F;elasticsearch</span><br><span class=\"line\">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;sysconfig&#x2F;elasticsearch</span><br><span class=\"line\"></span><br><span class=\"line\">WorkingDirectory&#x3D;&#x2F;home&#x2F;es&#x2F;elasticsearch</span><br><span class=\"line\"></span><br><span class=\"line\">User&#x3D;es</span><br><span class=\"line\">Group&#x3D;es</span><br><span class=\"line\"></span><br><span class=\"line\">ExecStart&#x3D;&#x2F;home&#x2F;es&#x2F;elasticsearch&#x2F;bin&#x2F;elasticsearch -p $&#123;PID_DIR&#125;&#x2F;elasticsearch.pid --quiet</span><br><span class=\"line\"></span><br><span class=\"line\"># StandardOutput is configured to redirect to journalctl since</span><br><span class=\"line\"># some error messages may be logged in standard output before</span><br><span class=\"line\"># elasticsearch logging system is initialized. Elasticsearch</span><br><span class=\"line\"># stores its logs in &#x2F;var&#x2F;log&#x2F;elasticsearch and does not use</span><br><span class=\"line\"># journalctl by default. If you also want to enable journalctl</span><br><span class=\"line\"># logging, you can simply remove the &quot;quiet&quot; option from ExecStart.</span><br><span class=\"line\">StandardOutput&#x3D;journal</span><br><span class=\"line\">StandardError&#x3D;inherit</span><br><span class=\"line\"></span><br><span class=\"line\"># Specifies the maximum file descriptor number that can be opened by this process</span><br><span class=\"line\">LimitNOFILE&#x3D;65536</span><br><span class=\"line\"></span><br><span class=\"line\"># Specifies the maximum number of processes</span><br><span class=\"line\">LimitNPROC&#x3D;4096</span><br><span class=\"line\"></span><br><span class=\"line\"># Specifies the maximum size of virtual memory</span><br><span class=\"line\">LimitAS&#x3D;infinity</span><br><span class=\"line\"></span><br><span class=\"line\"># Specifies the maximum file size</span><br><span class=\"line\">LimitFSIZE&#x3D;infinity</span><br><span class=\"line\"></span><br><span class=\"line\"># Disable timeout logic and wait until process is stopped</span><br><span class=\"line\">TimeoutStopSec&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\"># SIGTERM signal is used to stop the Java process</span><br><span class=\"line\">KillSignal&#x3D;SIGTERM</span><br><span class=\"line\"></span><br><span class=\"line\"># Send the signal only to the JVM rather than its control group</span><br><span class=\"line\">KillMode&#x3D;process</span><br><span class=\"line\"></span><br><span class=\"line\"># Java process is never killed</span><br><span class=\"line\">SendSIGKILL&#x3D;no</span><br><span class=\"line\"></span><br><span class=\"line\"># When a JVM receives a SIGTERM signal it exits with code 143</span><br><span class=\"line\">SuccessExitStatus&#x3D;143</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy&#x3D;multi-user.target</span><br><span class=\"line\"></span><br><span class=\"line\"># Built for packages-7.1.1 (packages)</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl start elasticsearch</span><br><span class=\"line\">systemctl status elasticsearch</span><br><span class=\"line\">systemctl stop elasticsearch</span><br></pre></td></tr></table></figure>\n\n\n\n<p>运行elasticsearch时报错：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">could not find java; set JAVA_HOME or ensure java is in PATH</span><br></pre></td></tr></table></figure>\n\n<p>修改文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim bin&#x2F;elasticsearch-env</span><br><span class=\"line\"></span><br><span class=\"line\">添加</span><br><span class=\"line\">source &#x2F;etc&#x2F;profile</span><br><span class=\"line\"></span><br><span class=\"line\">修改  ES_HOME&#x3D;&#96;dirname &quot;$SCRIPT&quot;&#96;   为    ES_HOME&#x3D;&quot;&#x2F;home&#x2F;es&#x2F;elasticsearch&quot;</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>下载elasticsearch</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;www.elastic.co&#x2F;cn&#x2F;downloads&#x2F;elasticsearch</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;artifacts.elastic.co&#x2F;downloads&#x2F;elasticsearch&#x2F;elasticsearch-7.8.0-linux-x86_64.tar.gz</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xf elasticsearch-7.8.0-linux-x86_64.tar.gz</span><br><span class=\"line\">mv elasticsearch-7.8.0 &#x2F;home&#x2F;es&#x2F;elasticsearch-7.8.0</span><br><span class=\"line\">chown es.es -R elasticsearch</span><br><span class=\"line\">ln -s &#x2F;home&#x2F;es&#x2F;elasticsearch-7.8.0 &#x2F;home&#x2F;es&#x2F;elasticsearch</span><br></pre></td></tr></table></figure>\n\n\n\n<p>配置es</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat &gt;&gt; config&#x2F;elasticsearch.yml &lt;&lt;EOF</span><br><span class=\"line\"></span><br><span class=\"line\"># &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Elasticsearch Configuration &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class=\"line\">cluster.name: cluster-Es</span><br><span class=\"line\">node.name: node01</span><br><span class=\"line\">network.host: 172.16.103.123</span><br><span class=\"line\">node.master: true</span><br><span class=\"line\">node.data: true</span><br><span class=\"line\"># head 插件需要这打开这两个配置</span><br><span class=\"line\">http.cors.allow-origin: &quot;*&quot;</span><br><span class=\"line\">http.cors.enabled: true</span><br><span class=\"line\">http.max_content_length: 200mb</span><br><span class=\"line\"># 可以选举的主节点</span><br><span class=\"line\">cluster.initial_master_nodes: [&quot;192.168.7.41:9300&quot;,&quot;192.168.7.42:9300&quot;,&quot;192.168.7.43:9300&quot;]</span><br><span class=\"line\">discovery.seed_hosts: [&quot;192.168.7.41:9300&quot;,&quot;192.168.7.42:9300&quot;,&quot;192.168.7.43:9300&quot;]</span><br><span class=\"line\">gateway.recover_after_nodes: 2</span><br><span class=\"line\">network.tcp.keep_alive: true</span><br><span class=\"line\">network.tcp.no_delay: true</span><br><span class=\"line\">transport.tcp.compress: true</span><br><span class=\"line\">#集群内同时启动的数据任务个数，默认是2个</span><br><span class=\"line\">cluster.routing.allocation.cluster_concurrent_rebalance: 16</span><br><span class=\"line\">#添加或删除节点及负载均衡时并发恢复的线程个数，默认4个</span><br><span class=\"line\">cluster.routing.allocation.node_concurrent_recoveries: 16</span><br><span class=\"line\">#初始化数据恢复时，并发恢复线程的个数，默认4个</span><br><span class=\"line\">cluster.routing.allocation.node_initial_primaries_recoveries: 16</span><br><span class=\"line\">#开启 xpack 功能，如果要禁止使用密码，请将以下内容注释，直接启动不需要设置密码</span><br><span class=\"line\">#xpack.security.enabled: true</span><br><span class=\"line\">#xpack.security.transport.ssl.enabled: true</span><br><span class=\"line\">#xpack.security.transport.ssl.verification_mode: certificate</span><br><span class=\"line\">#xpack.security.transport.ssl.keystore.path: elastic-certificates.p12</span><br><span class=\"line\">#xpack.security.transport.ssl.truststore.path: elastic-certificates.p12</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n\n\n\n<p>启动</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">su - es -c &quot;&#x2F;home&#x2F;es&#x2F;elasticsearch&#x2F;bin&#x2F;elasticsearch -d&quot;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>启动二</p>\n<p>配置 services 文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;elasticsearch.service</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description&#x3D;Elasticsearch</span><br><span class=\"line\">Documentation&#x3D;http:&#x2F;&#x2F;www.elastic.co</span><br><span class=\"line\">Wants&#x3D;network-online.target</span><br><span class=\"line\">After&#x3D;network-online.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">RuntimeDirectory&#x3D;elasticsearch</span><br><span class=\"line\">PrivateTmp&#x3D;true</span><br><span class=\"line\">Environment&#x3D;ES_HOME&#x3D;&#x2F;home&#x2F;es&#x2F;elasticsearch</span><br><span class=\"line\">Environment&#x3D;ES_PATH_CONF&#x3D;&#x2F;etc&#x2F;elasticsearch</span><br><span class=\"line\">Environment&#x3D;PID_DIR&#x3D;&#x2F;var&#x2F;run&#x2F;elasticsearch</span><br><span class=\"line\">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;sysconfig&#x2F;elasticsearch</span><br><span class=\"line\"></span><br><span class=\"line\">WorkingDirectory&#x3D;&#x2F;home&#x2F;es&#x2F;elasticsearch</span><br><span class=\"line\"></span><br><span class=\"line\">User&#x3D;es</span><br><span class=\"line\">Group&#x3D;es</span><br><span class=\"line\"></span><br><span class=\"line\">ExecStart&#x3D;&#x2F;home&#x2F;es&#x2F;elasticsearch&#x2F;bin&#x2F;elasticsearch -p $&#123;PID_DIR&#125;&#x2F;elasticsearch.pid --quiet</span><br><span class=\"line\"></span><br><span class=\"line\"># StandardOutput is configured to redirect to journalctl since</span><br><span class=\"line\"># some error messages may be logged in standard output before</span><br><span class=\"line\"># elasticsearch logging system is initialized. Elasticsearch</span><br><span class=\"line\"># stores its logs in &#x2F;var&#x2F;log&#x2F;elasticsearch and does not use</span><br><span class=\"line\"># journalctl by default. If you also want to enable journalctl</span><br><span class=\"line\"># logging, you can simply remove the &quot;quiet&quot; option from ExecStart.</span><br><span class=\"line\">StandardOutput&#x3D;journal</span><br><span class=\"line\">StandardError&#x3D;inherit</span><br><span class=\"line\"></span><br><span class=\"line\"># Specifies the maximum file descriptor number that can be opened by this process</span><br><span class=\"line\">LimitNOFILE&#x3D;65536</span><br><span class=\"line\"></span><br><span class=\"line\"># Specifies the maximum number of processes</span><br><span class=\"line\">LimitNPROC&#x3D;4096</span><br><span class=\"line\"></span><br><span class=\"line\"># Specifies the maximum size of virtual memory</span><br><span class=\"line\">LimitAS&#x3D;infinity</span><br><span class=\"line\"></span><br><span class=\"line\"># Specifies the maximum file size</span><br><span class=\"line\">LimitFSIZE&#x3D;infinity</span><br><span class=\"line\"></span><br><span class=\"line\"># Disable timeout logic and wait until process is stopped</span><br><span class=\"line\">TimeoutStopSec&#x3D;0</span><br><span class=\"line\"></span><br><span class=\"line\"># SIGTERM signal is used to stop the Java process</span><br><span class=\"line\">KillSignal&#x3D;SIGTERM</span><br><span class=\"line\"></span><br><span class=\"line\"># Send the signal only to the JVM rather than its control group</span><br><span class=\"line\">KillMode&#x3D;process</span><br><span class=\"line\"></span><br><span class=\"line\"># Java process is never killed</span><br><span class=\"line\">SendSIGKILL&#x3D;no</span><br><span class=\"line\"></span><br><span class=\"line\"># When a JVM receives a SIGTERM signal it exits with code 143</span><br><span class=\"line\">SuccessExitStatus&#x3D;143</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy&#x3D;multi-user.target</span><br><span class=\"line\"></span><br><span class=\"line\"># Built for packages-7.1.1 (packages)</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl start elasticsearch</span><br><span class=\"line\">systemctl status elasticsearch</span><br><span class=\"line\">systemctl stop elasticsearch</span><br></pre></td></tr></table></figure>\n\n\n\n<p>运行elasticsearch时报错：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">could not find java; set JAVA_HOME or ensure java is in PATH</span><br></pre></td></tr></table></figure>\n\n<p>修改文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim bin&#x2F;elasticsearch-env</span><br><span class=\"line\"></span><br><span class=\"line\">添加</span><br><span class=\"line\">source &#x2F;etc&#x2F;profile</span><br><span class=\"line\"></span><br><span class=\"line\">修改  ES_HOME&#x3D;&#96;dirname &quot;$SCRIPT&quot;&#96;   为    ES_HOME&#x3D;&quot;&#x2F;home&#x2F;es&#x2F;elasticsearch&quot;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"flask自定义分页","date":"2020-02-13T06:00:00.000Z","_content":"\n\n\n## flask 自定义fenye\n\npage_utils.py\n\n```python\n#!usr/bin/env python\n# -*- coding:utf-8 -*-\nfrom urllib import urlencode\nclass Pagination(object):\n    \"\"\"\n    自定义分页\n    \"\"\"\n    def __init__(self, current_page, total_count, base_url, params, per_page_count=10, max_pager_count=11):\n        try:\n            current_page = int(current_page)\n        except Exception as e:\n            current_page = 1\n        if current_page <=0:\n            current_page = 1\n        self.current_page = current_page\n        # 数据总条数\n        self.total_count = total_count\n  \n        # 每页显示10条数据\n        self.per_page_count = per_page_count\n  \n        # 页面上应该显示的最大页码\n        max_page_num, div = divmod(total_count, per_page_count)\n        if div:\n            max_page_num += 1\n        self.max_page_num = max_page_num\n  \n        # 页面上默认显示11个页码（当前页在中间）\n        self.max_pager_count = max_pager_count\n        self.half_max_pager_count = int((max_pager_count - 1) / 2)\n  \n        # URL前缀\n        self.base_url = base_url\n  \n        # request.GET\n        import copy\n        params = copy.deepcopy(params)\n        get_dict = params.to_dict()\n  \n        self.params = get_dict\n  \n    @property\n    def start(self):\n        return (self.current_page - 1) * self.per_page_count\n  \n    @property\n    def end(self):\n        return self.current_page * self.per_page_count\n  \n    def page_html(self):\n        # 如果总页数 <= 11\n        if self.max_page_num <= self.max_pager_count:\n            pager_start = 1\n            pager_end = self.max_page_num\n        # 如果总页数 > 11\n        else:\n            # 如果当前页 <= 5\n            if self.current_page <= self.half_max_pager_count:\n                pager_start = 1\n                pager_end = self.max_pager_count\n            else:\n                # 当前页 + 5 > 总页码\n                if (self.current_page + self.half_max_pager_count) > self.max_page_num:\n                    pager_end = self.max_page_num\n                    pager_start = self.max_page_num - self.max_pager_count + 1   #倒这数11个\n                else:\n                    pager_start = self.current_page - self.half_max_pager_count\n                    pager_end = self.current_page + self.half_max_pager_count\n  \n        page_html_list = []\n        # {source:[2,], status:[2], gender:[2],consultant:[1],page:[1]}\n        # 首页\n        self.params['page'] = 1\n        first_page = '<li><a href=\"%s?%s\">首页</a></li>'.decode(\"utf-8\") % (self.base_url,urlencode(self.params),)\n        page_html_list.append(first_page)\n        # 上一页\n        self.params[\"page\"] = self.current_page - 1\n        if self.params[\"page\"] < 1:\n            pervious_page = '<li class=\"disabled\"><a href=\"%s?%s\" aria-label=\"Previous\">上一页</span></a></li>'.decode(\"utf-8\") % (self.base_url, urlencode(self.params))\n        else:\n            pervious_page = '<li><a href = \"%s?%s\" aria-label = \"Previous\" >上一页</span></a></li>'.decode(\"utf-8\") % ( self.base_url, urlencode(self.params))\n        page_html_list.append(pervious_page)\n        # 中间页码\n        for i in range(pager_start, pager_end + 1):\n            self.params['page'] = i\n            if i == self.current_page:\n                temp = '<li class=\"active\"><a href=\"%s?%s\">%s</a></li>' % (self.base_url,urlencode(self.params), i,)\n            else:\n                temp = '<li><a href=\"%s?%s\">%s</a></li>' % (self.base_url,urlencode(self.params), i,)\n            page_html_list.append(temp)\n  \n        # 下一页\n        self.params[\"page\"] = self.current_page + 1\n        if self.params[\"page\"] > self.max_page_num:\n            self.params[\"page\"] = self.current_page\n            next_page = '<li class=\"disabled\"><a href = \"%s?%s\" aria-label = \"Next\">下一页</span></a></li >'.decode(\"utf-8\") % (self.base_url, urlencode(self.params))\n        else:\n            next_page = '<li><a href = \"%s?%s\" aria-label = \"Next\">下一页</span></a></li>'.decode(\"utf-8\") % (self.base_url, urlencode(self.params))\n        page_html_list.append(next_page)\n  \n        # 尾页\n        self.params['page'] = self.max_page_num\n        last_page = '<li><a href=\"%s?%s\">尾页</a></li>'.decode(\"utf-8\") % (self.base_url, urlencode(self.params),)\n        page_html_list.append(last_page)\n  \n        return ''.join(page_html_list)\n\n```\n\n\n\n自定义方法中的参数：\ncurrent_page——表示当前页。\ntotal_count——表示数据总条数。\nbase_url——表示分页URL前缀，请求的前缀获取可以通过Flask的request.path方法，无需自己指定。\n例如：我们的路由方法为@app.route('/test')，request.path方法即可获取/test。\nparams——表示请求传入的数据，params可以通过request.args动态获取。\n例如：我们链接点击为：http://localhost:5000/test?page=10，此时request.args获取数据为ImmutableMultiDict([('page', u'10')])\nper_page_count——指定每页显示数。\nmax_pager_count——指定页面最大显示页码\n\n\n\n## 测试类\n\ntest.py:\n\n```python\n#!usr/bin/env python\n# -*- coding:utf-8 -*-\nfrom flask import Flask, render_template, request\nfrom page_utils import Pagination\napp = Flask(__name__)\n  \n@app.route('/test')\ndef test():\n    li = []\n    for i in range(1, 100):\n        li.append(i)\n    pager_obj = Pagination(request.args.get(\"page\", 1), len(li), request.path, request.args, per_page_count=10)\n    print(request.path)\n    print(request.args)\n    index_list = li[pager_obj.start:pager_obj.end]\n    html = pager_obj.page_html()\n    return render_template(\"obj/test.html\", index_list=index_list, html=html)\n  \nif __name__ == '__main__':\n    app.run(debug=True)\n```\n\n\n\n在上面的程序中，li为我们要分页的对象，数组list，我们获取到这个list之后，把他用工具类中的起止方法包起来。\n传递数据用包装后的list，这样就达到了需要哪一段数据我们传递哪一段的效果，包装的方法：index_list = li[pager_obj.start:pager_obj.end]\n\n \n\n我们用一个HTML页面去显示它，分页样式不是重点，我们这里直接引入bootstrap封装好的分页效果，代码如下：\n\ntest.html\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/bootstrap.min.css') }}\">\n    <style>\n        .container{\n            margin-top: 20px;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"row \" style=\"margin-top: 10px\">\n                <ul>\n                    {% for foo in index_list %}\n                        <li>{{ foo }}：这是列表内容~~</li>\n                    {% endfor %}\n                </ul>\n                <nav aria-label=\"Page navigation\" class=\"pull-right\">\n                    <ul class=\"pagination\">\n                        {{ html|safe }}\n                    </ul>\n                </nav>\n        </div>\n    </div>\n</body>\n</html>\n```\n\n","source":"_posts/flask/flask分页.md","raw":"---\ntitle: flask自定义分页\ndate: 2020-02-13 14:00:00\ncategories: \n- flask\ntags:\n- python\n- flask\n---\n\n\n\n## flask 自定义fenye\n\npage_utils.py\n\n```python\n#!usr/bin/env python\n# -*- coding:utf-8 -*-\nfrom urllib import urlencode\nclass Pagination(object):\n    \"\"\"\n    自定义分页\n    \"\"\"\n    def __init__(self, current_page, total_count, base_url, params, per_page_count=10, max_pager_count=11):\n        try:\n            current_page = int(current_page)\n        except Exception as e:\n            current_page = 1\n        if current_page <=0:\n            current_page = 1\n        self.current_page = current_page\n        # 数据总条数\n        self.total_count = total_count\n  \n        # 每页显示10条数据\n        self.per_page_count = per_page_count\n  \n        # 页面上应该显示的最大页码\n        max_page_num, div = divmod(total_count, per_page_count)\n        if div:\n            max_page_num += 1\n        self.max_page_num = max_page_num\n  \n        # 页面上默认显示11个页码（当前页在中间）\n        self.max_pager_count = max_pager_count\n        self.half_max_pager_count = int((max_pager_count - 1) / 2)\n  \n        # URL前缀\n        self.base_url = base_url\n  \n        # request.GET\n        import copy\n        params = copy.deepcopy(params)\n        get_dict = params.to_dict()\n  \n        self.params = get_dict\n  \n    @property\n    def start(self):\n        return (self.current_page - 1) * self.per_page_count\n  \n    @property\n    def end(self):\n        return self.current_page * self.per_page_count\n  \n    def page_html(self):\n        # 如果总页数 <= 11\n        if self.max_page_num <= self.max_pager_count:\n            pager_start = 1\n            pager_end = self.max_page_num\n        # 如果总页数 > 11\n        else:\n            # 如果当前页 <= 5\n            if self.current_page <= self.half_max_pager_count:\n                pager_start = 1\n                pager_end = self.max_pager_count\n            else:\n                # 当前页 + 5 > 总页码\n                if (self.current_page + self.half_max_pager_count) > self.max_page_num:\n                    pager_end = self.max_page_num\n                    pager_start = self.max_page_num - self.max_pager_count + 1   #倒这数11个\n                else:\n                    pager_start = self.current_page - self.half_max_pager_count\n                    pager_end = self.current_page + self.half_max_pager_count\n  \n        page_html_list = []\n        # {source:[2,], status:[2], gender:[2],consultant:[1],page:[1]}\n        # 首页\n        self.params['page'] = 1\n        first_page = '<li><a href=\"%s?%s\">首页</a></li>'.decode(\"utf-8\") % (self.base_url,urlencode(self.params),)\n        page_html_list.append(first_page)\n        # 上一页\n        self.params[\"page\"] = self.current_page - 1\n        if self.params[\"page\"] < 1:\n            pervious_page = '<li class=\"disabled\"><a href=\"%s?%s\" aria-label=\"Previous\">上一页</span></a></li>'.decode(\"utf-8\") % (self.base_url, urlencode(self.params))\n        else:\n            pervious_page = '<li><a href = \"%s?%s\" aria-label = \"Previous\" >上一页</span></a></li>'.decode(\"utf-8\") % ( self.base_url, urlencode(self.params))\n        page_html_list.append(pervious_page)\n        # 中间页码\n        for i in range(pager_start, pager_end + 1):\n            self.params['page'] = i\n            if i == self.current_page:\n                temp = '<li class=\"active\"><a href=\"%s?%s\">%s</a></li>' % (self.base_url,urlencode(self.params), i,)\n            else:\n                temp = '<li><a href=\"%s?%s\">%s</a></li>' % (self.base_url,urlencode(self.params), i,)\n            page_html_list.append(temp)\n  \n        # 下一页\n        self.params[\"page\"] = self.current_page + 1\n        if self.params[\"page\"] > self.max_page_num:\n            self.params[\"page\"] = self.current_page\n            next_page = '<li class=\"disabled\"><a href = \"%s?%s\" aria-label = \"Next\">下一页</span></a></li >'.decode(\"utf-8\") % (self.base_url, urlencode(self.params))\n        else:\n            next_page = '<li><a href = \"%s?%s\" aria-label = \"Next\">下一页</span></a></li>'.decode(\"utf-8\") % (self.base_url, urlencode(self.params))\n        page_html_list.append(next_page)\n  \n        # 尾页\n        self.params['page'] = self.max_page_num\n        last_page = '<li><a href=\"%s?%s\">尾页</a></li>'.decode(\"utf-8\") % (self.base_url, urlencode(self.params),)\n        page_html_list.append(last_page)\n  \n        return ''.join(page_html_list)\n\n```\n\n\n\n自定义方法中的参数：\ncurrent_page——表示当前页。\ntotal_count——表示数据总条数。\nbase_url——表示分页URL前缀，请求的前缀获取可以通过Flask的request.path方法，无需自己指定。\n例如：我们的路由方法为@app.route('/test')，request.path方法即可获取/test。\nparams——表示请求传入的数据，params可以通过request.args动态获取。\n例如：我们链接点击为：http://localhost:5000/test?page=10，此时request.args获取数据为ImmutableMultiDict([('page', u'10')])\nper_page_count——指定每页显示数。\nmax_pager_count——指定页面最大显示页码\n\n\n\n## 测试类\n\ntest.py:\n\n```python\n#!usr/bin/env python\n# -*- coding:utf-8 -*-\nfrom flask import Flask, render_template, request\nfrom page_utils import Pagination\napp = Flask(__name__)\n  \n@app.route('/test')\ndef test():\n    li = []\n    for i in range(1, 100):\n        li.append(i)\n    pager_obj = Pagination(request.args.get(\"page\", 1), len(li), request.path, request.args, per_page_count=10)\n    print(request.path)\n    print(request.args)\n    index_list = li[pager_obj.start:pager_obj.end]\n    html = pager_obj.page_html()\n    return render_template(\"obj/test.html\", index_list=index_list, html=html)\n  \nif __name__ == '__main__':\n    app.run(debug=True)\n```\n\n\n\n在上面的程序中，li为我们要分页的对象，数组list，我们获取到这个list之后，把他用工具类中的起止方法包起来。\n传递数据用包装后的list，这样就达到了需要哪一段数据我们传递哪一段的效果，包装的方法：index_list = li[pager_obj.start:pager_obj.end]\n\n \n\n我们用一个HTML页面去显示它，分页样式不是重点，我们这里直接引入bootstrap封装好的分页效果，代码如下：\n\ntest.html\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/bootstrap.min.css') }}\">\n    <style>\n        .container{\n            margin-top: 20px;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"row \" style=\"margin-top: 10px\">\n                <ul>\n                    {% for foo in index_list %}\n                        <li>{{ foo }}：这是列表内容~~</li>\n                    {% endfor %}\n                </ul>\n                <nav aria-label=\"Page navigation\" class=\"pull-right\">\n                    <ul class=\"pagination\">\n                        {{ html|safe }}\n                    </ul>\n                </nav>\n        </div>\n    </div>\n</body>\n</html>\n```\n\n","slug":"flask/flask分页","published":1,"updated":"2021-01-27T08:20:35.745Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2o0025q0us2ps2cgf5","content":"<h2 id=\"flask-自定义fenye\"><a href=\"#flask-自定义fenye\" class=\"headerlink\" title=\"flask 自定义fenye\"></a>flask 自定义fenye</h2><p>page_utils.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!usr/bin/env python</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding:utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> urllib <span class=\"keyword\">import</span> urlencode</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pagination</span>(<span class=\"params\">object</span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    自定义分页</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, current_page, total_count, base_url, params, per_page_count=<span class=\"number\">10</span>, max_pager_count=<span class=\"number\">11</span></span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            current_page = int(current_page)</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">            current_page = <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> current_page &lt;=<span class=\"number\">0</span>:</span><br><span class=\"line\">            current_page = <span class=\"number\">1</span></span><br><span class=\"line\">        self.current_page = current_page</span><br><span class=\"line\">        <span class=\"comment\"># 数据总条数</span></span><br><span class=\"line\">        self.total_count = total_count</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># 每页显示10条数据</span></span><br><span class=\"line\">        self.per_page_count = per_page_count</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># 页面上应该显示的最大页码</span></span><br><span class=\"line\">        max_page_num, div = divmod(total_count, per_page_count)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> div:</span><br><span class=\"line\">            max_page_num += <span class=\"number\">1</span></span><br><span class=\"line\">        self.max_page_num = max_page_num</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># 页面上默认显示11个页码（当前页在中间）</span></span><br><span class=\"line\">        self.max_pager_count = max_pager_count</span><br><span class=\"line\">        self.half_max_pager_count = int((max_pager_count - <span class=\"number\">1</span>) / <span class=\"number\">2</span>)</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># URL前缀</span></span><br><span class=\"line\">        self.base_url = base_url</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># request.GET</span></span><br><span class=\"line\">        <span class=\"keyword\">import</span> copy</span><br><span class=\"line\">        params = copy.deepcopy(params)</span><br><span class=\"line\">        get_dict = params.to_dict()</span><br><span class=\"line\">  </span><br><span class=\"line\">        self.params = get_dict</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"meta\">    @property</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">start</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (self.current_page - <span class=\"number\">1</span>) * self.per_page_count</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"meta\">    @property</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">end</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.current_page * self.per_page_count</span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">page_html</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"comment\"># 如果总页数 &lt;= 11</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.max_page_num &lt;= self.max_pager_count:</span><br><span class=\"line\">            pager_start = <span class=\"number\">1</span></span><br><span class=\"line\">            pager_end = self.max_page_num</span><br><span class=\"line\">        <span class=\"comment\"># 如果总页数 &gt; 11</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"comment\"># 如果当前页 &lt;= 5</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> self.current_page &lt;= self.half_max_pager_count:</span><br><span class=\"line\">                pager_start = <span class=\"number\">1</span></span><br><span class=\"line\">                pager_end = self.max_pager_count</span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                <span class=\"comment\"># 当前页 + 5 &gt; 总页码</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (self.current_page + self.half_max_pager_count) &gt; self.max_page_num:</span><br><span class=\"line\">                    pager_end = self.max_page_num</span><br><span class=\"line\">                    pager_start = self.max_page_num - self.max_pager_count + <span class=\"number\">1</span>   <span class=\"comment\">#倒这数11个</span></span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    pager_start = self.current_page - self.half_max_pager_count</span><br><span class=\"line\">                    pager_end = self.current_page + self.half_max_pager_count</span><br><span class=\"line\">  </span><br><span class=\"line\">        page_html_list = []</span><br><span class=\"line\">        <span class=\"comment\"># &#123;source:[2,], status:[2], gender:[2],consultant:[1],page:[1]&#125;</span></span><br><span class=\"line\">        <span class=\"comment\"># 首页</span></span><br><span class=\"line\">        self.params[<span class=\"string\">&#x27;page&#x27;</span>] = <span class=\"number\">1</span></span><br><span class=\"line\">        first_page = <span class=\"string\">&#x27;&lt;li&gt;&lt;a href=&quot;%s?%s&quot;&gt;首页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.decode(<span class=\"string\">&quot;utf-8&quot;</span>) % (self.base_url,urlencode(self.params),)</span><br><span class=\"line\">        page_html_list.append(first_page)</span><br><span class=\"line\">        <span class=\"comment\"># 上一页</span></span><br><span class=\"line\">        self.params[<span class=\"string\">&quot;page&quot;</span>] = self.current_page - <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.params[<span class=\"string\">&quot;page&quot;</span>] &lt; <span class=\"number\">1</span>:</span><br><span class=\"line\">            pervious_page = <span class=\"string\">&#x27;&lt;li class=&quot;disabled&quot;&gt;&lt;a href=&quot;%s?%s&quot; aria-label=&quot;Previous&quot;&gt;上一页&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.decode(<span class=\"string\">&quot;utf-8&quot;</span>) % (self.base_url, urlencode(self.params))</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            pervious_page = <span class=\"string\">&#x27;&lt;li&gt;&lt;a href = &quot;%s?%s&quot; aria-label = &quot;Previous&quot; &gt;上一页&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.decode(<span class=\"string\">&quot;utf-8&quot;</span>) % ( self.base_url, urlencode(self.params))</span><br><span class=\"line\">        page_html_list.append(pervious_page)</span><br><span class=\"line\">        <span class=\"comment\"># 中间页码</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(pager_start, pager_end + <span class=\"number\">1</span>):</span><br><span class=\"line\">            self.params[<span class=\"string\">&#x27;page&#x27;</span>] = i</span><br><span class=\"line\">            <span class=\"keyword\">if</span> i == self.current_page:</span><br><span class=\"line\">                temp = <span class=\"string\">&#x27;&lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;%s?%s&quot;&gt;%s&lt;/a&gt;&lt;/li&gt;&#x27;</span> % (self.base_url,urlencode(self.params), i,)</span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                temp = <span class=\"string\">&#x27;&lt;li&gt;&lt;a href=&quot;%s?%s&quot;&gt;%s&lt;/a&gt;&lt;/li&gt;&#x27;</span> % (self.base_url,urlencode(self.params), i,)</span><br><span class=\"line\">            page_html_list.append(temp)</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># 下一页</span></span><br><span class=\"line\">        self.params[<span class=\"string\">&quot;page&quot;</span>] = self.current_page + <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.params[<span class=\"string\">&quot;page&quot;</span>] &gt; self.max_page_num:</span><br><span class=\"line\">            self.params[<span class=\"string\">&quot;page&quot;</span>] = self.current_page</span><br><span class=\"line\">            next_page = <span class=\"string\">&#x27;&lt;li class=&quot;disabled&quot;&gt;&lt;a href = &quot;%s?%s&quot; aria-label = &quot;Next&quot;&gt;下一页&lt;/span&gt;&lt;/a&gt;&lt;/li &gt;&#x27;</span>.decode(<span class=\"string\">&quot;utf-8&quot;</span>) % (self.base_url, urlencode(self.params))</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            next_page = <span class=\"string\">&#x27;&lt;li&gt;&lt;a href = &quot;%s?%s&quot; aria-label = &quot;Next&quot;&gt;下一页&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.decode(<span class=\"string\">&quot;utf-8&quot;</span>) % (self.base_url, urlencode(self.params))</span><br><span class=\"line\">        page_html_list.append(next_page)</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># 尾页</span></span><br><span class=\"line\">        self.params[<span class=\"string\">&#x27;page&#x27;</span>] = self.max_page_num</span><br><span class=\"line\">        last_page = <span class=\"string\">&#x27;&lt;li&gt;&lt;a href=&quot;%s?%s&quot;&gt;尾页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.decode(<span class=\"string\">&quot;utf-8&quot;</span>) % (self.base_url, urlencode(self.params),)</span><br><span class=\"line\">        page_html_list.append(last_page)</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&#x27;</span>.join(page_html_list)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>自定义方法中的参数：<br>current_page——表示当前页。<br>total_count——表示数据总条数。<br>base_url——表示分页URL前缀，请求的前缀获取可以通过Flask的request.path方法，无需自己指定。<br>例如：我们的路由方法为@app.route(‘/test’)，request.path方法即可获取/test。<br>params——表示请求传入的数据，params可以通过request.args动态获取。<br>例如：我们链接点击为：<a href=\"http://localhost:5000/test?page=10%EF%BC%8C%E6%AD%A4%E6%97%B6request.args%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E4%B8%BAImmutableMultiDict\">http://localhost:5000/test?page=10，此时request.args获取数据为ImmutableMultiDict</a>([(‘page’, u’10’)])<br>per_page_count——指定每页显示数。<br>max_pager_count——指定页面最大显示页码</p>\n<h2 id=\"测试类\"><a href=\"#测试类\" class=\"headerlink\" title=\"测试类\"></a>测试类</h2><p>test.py:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!usr/bin/env python</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding:utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, render_template, request</span><br><span class=\"line\"><span class=\"keyword\">from</span> page_utils <span class=\"keyword\">import</span> Pagination</span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"meta\">@app.route(&#x27;/test&#x27;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test</span>():</span></span><br><span class=\"line\">    li = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, <span class=\"number\">100</span>):</span><br><span class=\"line\">        li.append(i)</span><br><span class=\"line\">    pager_obj = Pagination(request.args.get(<span class=\"string\">&quot;page&quot;</span>, <span class=\"number\">1</span>), len(li), request.path, request.args, per_page_count=<span class=\"number\">10</span>)</span><br><span class=\"line\">    print(request.path)</span><br><span class=\"line\">    print(request.args)</span><br><span class=\"line\">    index_list = li[pager_obj.start:pager_obj.end]</span><br><span class=\"line\">    html = pager_obj.page_html()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&quot;obj/test.html&quot;</span>, index_list=index_list, html=html)</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run(debug=<span class=\"literal\">True</span>)</span><br></pre></td></tr></table></figure>\n\n\n\n<p>在上面的程序中，li为我们要分页的对象，数组list，我们获取到这个list之后，把他用工具类中的起止方法包起来。<br>传递数据用包装后的list，这样就达到了需要哪一段数据我们传递哪一段的效果，包装的方法：index_list = li[pager_obj.start:pager_obj.end]</p>\n<p>我们用一个HTML页面去显示它，分页样式不是重点，我们这里直接引入bootstrap封装好的分页效果，代码如下：</p>\n<p>test.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;&#123; url_for(&#x27;static&#x27;, filename=&#x27;css/bootstrap.min.css&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.container</span>&#123;</span></span><br><span class=\"line\">            margin-top: 20px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row &quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;margin-top: 10px&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">                    &#123;% for foo in index_list %&#125;</span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>&#123;&#123; foo &#125;&#125;：这是列表内容~~<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">                    &#123;% endfor %&#125;</span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">nav</span> <span class=\"attr\">aria-label</span>=<span class=\"string\">&quot;Page navigation&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;pull-right&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;pagination&quot;</span>&gt;</span></span><br><span class=\"line\">                        &#123;&#123; html|safe &#125;&#125;</span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"flask-自定义fenye\"><a href=\"#flask-自定义fenye\" class=\"headerlink\" title=\"flask 自定义fenye\"></a>flask 自定义fenye</h2><p>page_utils.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!usr/bin/env python</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding:utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> urllib <span class=\"keyword\">import</span> urlencode</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pagination</span>(<span class=\"params\">object</span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    自定义分页</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, current_page, total_count, base_url, params, per_page_count=<span class=\"number\">10</span>, max_pager_count=<span class=\"number\">11</span></span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            current_page = int(current_page)</span><br><span class=\"line\">        <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">            current_page = <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> current_page &lt;=<span class=\"number\">0</span>:</span><br><span class=\"line\">            current_page = <span class=\"number\">1</span></span><br><span class=\"line\">        self.current_page = current_page</span><br><span class=\"line\">        <span class=\"comment\"># 数据总条数</span></span><br><span class=\"line\">        self.total_count = total_count</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># 每页显示10条数据</span></span><br><span class=\"line\">        self.per_page_count = per_page_count</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># 页面上应该显示的最大页码</span></span><br><span class=\"line\">        max_page_num, div = divmod(total_count, per_page_count)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> div:</span><br><span class=\"line\">            max_page_num += <span class=\"number\">1</span></span><br><span class=\"line\">        self.max_page_num = max_page_num</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># 页面上默认显示11个页码（当前页在中间）</span></span><br><span class=\"line\">        self.max_pager_count = max_pager_count</span><br><span class=\"line\">        self.half_max_pager_count = int((max_pager_count - <span class=\"number\">1</span>) / <span class=\"number\">2</span>)</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># URL前缀</span></span><br><span class=\"line\">        self.base_url = base_url</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># request.GET</span></span><br><span class=\"line\">        <span class=\"keyword\">import</span> copy</span><br><span class=\"line\">        params = copy.deepcopy(params)</span><br><span class=\"line\">        get_dict = params.to_dict()</span><br><span class=\"line\">  </span><br><span class=\"line\">        self.params = get_dict</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"meta\">    @property</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">start</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (self.current_page - <span class=\"number\">1</span>) * self.per_page_count</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"meta\">    @property</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">end</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.current_page * self.per_page_count</span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">page_html</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"comment\"># 如果总页数 &lt;= 11</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.max_page_num &lt;= self.max_pager_count:</span><br><span class=\"line\">            pager_start = <span class=\"number\">1</span></span><br><span class=\"line\">            pager_end = self.max_page_num</span><br><span class=\"line\">        <span class=\"comment\"># 如果总页数 &gt; 11</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"comment\"># 如果当前页 &lt;= 5</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> self.current_page &lt;= self.half_max_pager_count:</span><br><span class=\"line\">                pager_start = <span class=\"number\">1</span></span><br><span class=\"line\">                pager_end = self.max_pager_count</span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                <span class=\"comment\"># 当前页 + 5 &gt; 总页码</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (self.current_page + self.half_max_pager_count) &gt; self.max_page_num:</span><br><span class=\"line\">                    pager_end = self.max_page_num</span><br><span class=\"line\">                    pager_start = self.max_page_num - self.max_pager_count + <span class=\"number\">1</span>   <span class=\"comment\">#倒这数11个</span></span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    pager_start = self.current_page - self.half_max_pager_count</span><br><span class=\"line\">                    pager_end = self.current_page + self.half_max_pager_count</span><br><span class=\"line\">  </span><br><span class=\"line\">        page_html_list = []</span><br><span class=\"line\">        <span class=\"comment\"># &#123;source:[2,], status:[2], gender:[2],consultant:[1],page:[1]&#125;</span></span><br><span class=\"line\">        <span class=\"comment\"># 首页</span></span><br><span class=\"line\">        self.params[<span class=\"string\">&#x27;page&#x27;</span>] = <span class=\"number\">1</span></span><br><span class=\"line\">        first_page = <span class=\"string\">&#x27;&lt;li&gt;&lt;a href=&quot;%s?%s&quot;&gt;首页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.decode(<span class=\"string\">&quot;utf-8&quot;</span>) % (self.base_url,urlencode(self.params),)</span><br><span class=\"line\">        page_html_list.append(first_page)</span><br><span class=\"line\">        <span class=\"comment\"># 上一页</span></span><br><span class=\"line\">        self.params[<span class=\"string\">&quot;page&quot;</span>] = self.current_page - <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.params[<span class=\"string\">&quot;page&quot;</span>] &lt; <span class=\"number\">1</span>:</span><br><span class=\"line\">            pervious_page = <span class=\"string\">&#x27;&lt;li class=&quot;disabled&quot;&gt;&lt;a href=&quot;%s?%s&quot; aria-label=&quot;Previous&quot;&gt;上一页&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.decode(<span class=\"string\">&quot;utf-8&quot;</span>) % (self.base_url, urlencode(self.params))</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            pervious_page = <span class=\"string\">&#x27;&lt;li&gt;&lt;a href = &quot;%s?%s&quot; aria-label = &quot;Previous&quot; &gt;上一页&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.decode(<span class=\"string\">&quot;utf-8&quot;</span>) % ( self.base_url, urlencode(self.params))</span><br><span class=\"line\">        page_html_list.append(pervious_page)</span><br><span class=\"line\">        <span class=\"comment\"># 中间页码</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(pager_start, pager_end + <span class=\"number\">1</span>):</span><br><span class=\"line\">            self.params[<span class=\"string\">&#x27;page&#x27;</span>] = i</span><br><span class=\"line\">            <span class=\"keyword\">if</span> i == self.current_page:</span><br><span class=\"line\">                temp = <span class=\"string\">&#x27;&lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;%s?%s&quot;&gt;%s&lt;/a&gt;&lt;/li&gt;&#x27;</span> % (self.base_url,urlencode(self.params), i,)</span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                temp = <span class=\"string\">&#x27;&lt;li&gt;&lt;a href=&quot;%s?%s&quot;&gt;%s&lt;/a&gt;&lt;/li&gt;&#x27;</span> % (self.base_url,urlencode(self.params), i,)</span><br><span class=\"line\">            page_html_list.append(temp)</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># 下一页</span></span><br><span class=\"line\">        self.params[<span class=\"string\">&quot;page&quot;</span>] = self.current_page + <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.params[<span class=\"string\">&quot;page&quot;</span>] &gt; self.max_page_num:</span><br><span class=\"line\">            self.params[<span class=\"string\">&quot;page&quot;</span>] = self.current_page</span><br><span class=\"line\">            next_page = <span class=\"string\">&#x27;&lt;li class=&quot;disabled&quot;&gt;&lt;a href = &quot;%s?%s&quot; aria-label = &quot;Next&quot;&gt;下一页&lt;/span&gt;&lt;/a&gt;&lt;/li &gt;&#x27;</span>.decode(<span class=\"string\">&quot;utf-8&quot;</span>) % (self.base_url, urlencode(self.params))</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            next_page = <span class=\"string\">&#x27;&lt;li&gt;&lt;a href = &quot;%s?%s&quot; aria-label = &quot;Next&quot;&gt;下一页&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&#x27;</span>.decode(<span class=\"string\">&quot;utf-8&quot;</span>) % (self.base_url, urlencode(self.params))</span><br><span class=\"line\">        page_html_list.append(next_page)</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"comment\"># 尾页</span></span><br><span class=\"line\">        self.params[<span class=\"string\">&#x27;page&#x27;</span>] = self.max_page_num</span><br><span class=\"line\">        last_page = <span class=\"string\">&#x27;&lt;li&gt;&lt;a href=&quot;%s?%s&quot;&gt;尾页&lt;/a&gt;&lt;/li&gt;&#x27;</span>.decode(<span class=\"string\">&quot;utf-8&quot;</span>) % (self.base_url, urlencode(self.params),)</span><br><span class=\"line\">        page_html_list.append(last_page)</span><br><span class=\"line\">  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&#x27;</span>.join(page_html_list)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<p>自定义方法中的参数：<br>current_page——表示当前页。<br>total_count——表示数据总条数。<br>base_url——表示分页URL前缀，请求的前缀获取可以通过Flask的request.path方法，无需自己指定。<br>例如：我们的路由方法为@app.route(‘/test’)，request.path方法即可获取/test。<br>params——表示请求传入的数据，params可以通过request.args动态获取。<br>例如：我们链接点击为：<a href=\"http://localhost:5000/test?page=10%EF%BC%8C%E6%AD%A4%E6%97%B6request.args%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E4%B8%BAImmutableMultiDict\">http://localhost:5000/test?page=10，此时request.args获取数据为ImmutableMultiDict</a>([(‘page’, u’10’)])<br>per_page_count——指定每页显示数。<br>max_pager_count——指定页面最大显示页码</p>\n<h2 id=\"测试类\"><a href=\"#测试类\" class=\"headerlink\" title=\"测试类\"></a>测试类</h2><p>test.py:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!usr/bin/env python</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding:utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, render_template, request</span><br><span class=\"line\"><span class=\"keyword\">from</span> page_utils <span class=\"keyword\">import</span> Pagination</span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"meta\">@app.route(&#x27;/test&#x27;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test</span>():</span></span><br><span class=\"line\">    li = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, <span class=\"number\">100</span>):</span><br><span class=\"line\">        li.append(i)</span><br><span class=\"line\">    pager_obj = Pagination(request.args.get(<span class=\"string\">&quot;page&quot;</span>, <span class=\"number\">1</span>), len(li), request.path, request.args, per_page_count=<span class=\"number\">10</span>)</span><br><span class=\"line\">    print(request.path)</span><br><span class=\"line\">    print(request.args)</span><br><span class=\"line\">    index_list = li[pager_obj.start:pager_obj.end]</span><br><span class=\"line\">    html = pager_obj.page_html()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&quot;obj/test.html&quot;</span>, index_list=index_list, html=html)</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run(debug=<span class=\"literal\">True</span>)</span><br></pre></td></tr></table></figure>\n\n\n\n<p>在上面的程序中，li为我们要分页的对象，数组list，我们获取到这个list之后，把他用工具类中的起止方法包起来。<br>传递数据用包装后的list，这样就达到了需要哪一段数据我们传递哪一段的效果，包装的方法：index_list = li[pager_obj.start:pager_obj.end]</p>\n<p>我们用一个HTML页面去显示它，分页样式不是重点，我们这里直接引入bootstrap封装好的分页效果，代码如下：</p>\n<p>test.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;&#123; url_for(&#x27;static&#x27;, filename=&#x27;css/bootstrap.min.css&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.container</span>&#123;</span></span><br><span class=\"line\">            margin-top: 20px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;row &quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;margin-top: 10px&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">                    &#123;% for foo in index_list %&#125;</span><br><span class=\"line\">                        <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>&#123;&#123; foo &#125;&#125;：这是列表内容~~<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">                    &#123;% endfor %&#125;</span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">nav</span> <span class=\"attr\">aria-label</span>=<span class=\"string\">&quot;Page navigation&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;pull-right&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;pagination&quot;</span>&gt;</span></span><br><span class=\"line\">                        &#123;&#123; html|safe &#125;&#125;</span><br><span class=\"line\">                    <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n"},{"title":"Centos7安装python3","date":"2020-12-12T07:32:00.000Z","_content":"  \n  \n摘要:  Centos7 安装pyhton3 环境\n<!-- more -->\n\n\n### 依赖准备\n```\nyum -y groupinstall \"Development tools\"\nyum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel\nyum install -y libffi-devel zlib1g-dev\nyum install zlib* -y\n```\n\n\n### python3下载页面\n```\nhttps://www.python.org/downloads/source/\n```\n```\nwget https://www.python.org/ftp/python/3.9.0/Python-3.9.0.tar.xz\n```\n\n`注意`： gcc 4.8.5不适用于编译Python3.8 及以上版本，但是可以编译Python 3.7。 使用GCC9.2来编译Python3.9\n```\ntar -xvJf  Python-3.9.0.tar.xz\n```\n创建编译安装目录\n```\nmkdir /usr/local/python3 \n```\n\n### 安装\n```\ncd Python-3.9.0\n./configure --prefix=/usr/local/python3 --enable-optimizations --with-ssl\n\n#第一个指定安装的路径,不指定的话,安装过程中可能软件所需要的文件复制到其他不同目录,删除软件很不方便,复制软件也不方便.\n#第二个可以提高python10%-20%代码运行速度.\n#第三个是为了安装pip需要用到ssl,后面报错会有提到.\n\nmake && make install\n```\n\n创建软链接\n```\nln -s /usr/local/python3/bin/python3 /usr/local/bin/python3\nln -s /usr/local/python3/bin/pip3 /usr/local/bin/pip3\n```\n\n验证是否成功\n```\npython3 -V\npip3 -V\n```\n\n### 修改pip 源\n```\ncd ~\nmkdir .pip\ncd .pip\nvim pip.conf\n\n#进入后添加以下内容,保存退出.\n[global]\nindex-url = https://mirrors.aliyun.com/pypi/simple\n```\n\n### 修改pipenv安装源\n\n在自己的虚拟环境中找到Pipfile文件,将其中的url = \"https://pypi.org/simple\" 修改为你需要的国内镜像,如 https://mirrors.aliyun.com/pypi/simple/\n```\n[root@localhost myproject]# vim Pipfile \n\n\n[[source]]\nname = \"pypi\"\nurl = \"https://pypi.org/simple\" # 改为url = \"https://mirrors.aliyun.com/pypi/simple/\"\nverify_ssl = true\n\n[dev-packages] #这里是开发环境专属包,使用pipenv install --dev package来安装专属开发环境的包\n\n[packages] # 全部环境的通用包,安装在这里.\n\n[requires]\npython_version = \"3.9\"\n```\n\n### 报错处理\n\n```\nzipimport.ZipImportError: can't decompress data; zlib not available Makefile:1099: recipe for target 'install' failed make: *** [install] Error 1\n```\n解决方式\n```\nyum -y install zlib1g-dev\n```\n\n```\nModuleNotFoundError: No module named '_ctypes'\n```\n解决方式\n```\nyum -y install libffi-devel\n```\n\n\n### 配置python 项目环境\n\n\n#### 创建python3 项目环境\n```\ncd /opt\npython3 -m venv py3\n\n```\n\n#### 创建项目目录\n```\ncd /opt/\nmkdir myapp\nsource /opt/py3/bin/activate\n```\n\n#### 自动激活项目环境\n```\ncd /opt/\ngit clone https://github.com/kennethreitz/autoenv.git\n\n# 进入项目路径\ncd myapp\nvim .env\nsource /opt/py3/bin/activate\n\n# 在环境变量添加\necho \"source /opt/autoenv/activate.sh\" >> /root/.bashrc\n\n```\n\n\n\n\n\n","source":"_posts/install/centos7安装python3.md","raw":"---\ntitle: Centos7安装python3\ndate: 2020-12-12 15:32\ncategories:\n- python3 \ntags:\n- python\n---\n  \n  \n摘要:  Centos7 安装pyhton3 环境\n<!-- more -->\n\n\n### 依赖准备\n```\nyum -y groupinstall \"Development tools\"\nyum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel\nyum install -y libffi-devel zlib1g-dev\nyum install zlib* -y\n```\n\n\n### python3下载页面\n```\nhttps://www.python.org/downloads/source/\n```\n```\nwget https://www.python.org/ftp/python/3.9.0/Python-3.9.0.tar.xz\n```\n\n`注意`： gcc 4.8.5不适用于编译Python3.8 及以上版本，但是可以编译Python 3.7。 使用GCC9.2来编译Python3.9\n```\ntar -xvJf  Python-3.9.0.tar.xz\n```\n创建编译安装目录\n```\nmkdir /usr/local/python3 \n```\n\n### 安装\n```\ncd Python-3.9.0\n./configure --prefix=/usr/local/python3 --enable-optimizations --with-ssl\n\n#第一个指定安装的路径,不指定的话,安装过程中可能软件所需要的文件复制到其他不同目录,删除软件很不方便,复制软件也不方便.\n#第二个可以提高python10%-20%代码运行速度.\n#第三个是为了安装pip需要用到ssl,后面报错会有提到.\n\nmake && make install\n```\n\n创建软链接\n```\nln -s /usr/local/python3/bin/python3 /usr/local/bin/python3\nln -s /usr/local/python3/bin/pip3 /usr/local/bin/pip3\n```\n\n验证是否成功\n```\npython3 -V\npip3 -V\n```\n\n### 修改pip 源\n```\ncd ~\nmkdir .pip\ncd .pip\nvim pip.conf\n\n#进入后添加以下内容,保存退出.\n[global]\nindex-url = https://mirrors.aliyun.com/pypi/simple\n```\n\n### 修改pipenv安装源\n\n在自己的虚拟环境中找到Pipfile文件,将其中的url = \"https://pypi.org/simple\" 修改为你需要的国内镜像,如 https://mirrors.aliyun.com/pypi/simple/\n```\n[root@localhost myproject]# vim Pipfile \n\n\n[[source]]\nname = \"pypi\"\nurl = \"https://pypi.org/simple\" # 改为url = \"https://mirrors.aliyun.com/pypi/simple/\"\nverify_ssl = true\n\n[dev-packages] #这里是开发环境专属包,使用pipenv install --dev package来安装专属开发环境的包\n\n[packages] # 全部环境的通用包,安装在这里.\n\n[requires]\npython_version = \"3.9\"\n```\n\n### 报错处理\n\n```\nzipimport.ZipImportError: can't decompress data; zlib not available Makefile:1099: recipe for target 'install' failed make: *** [install] Error 1\n```\n解决方式\n```\nyum -y install zlib1g-dev\n```\n\n```\nModuleNotFoundError: No module named '_ctypes'\n```\n解决方式\n```\nyum -y install libffi-devel\n```\n\n\n### 配置python 项目环境\n\n\n#### 创建python3 项目环境\n```\ncd /opt\npython3 -m venv py3\n\n```\n\n#### 创建项目目录\n```\ncd /opt/\nmkdir myapp\nsource /opt/py3/bin/activate\n```\n\n#### 自动激活项目环境\n```\ncd /opt/\ngit clone https://github.com/kennethreitz/autoenv.git\n\n# 进入项目路径\ncd myapp\nvim .env\nsource /opt/py3/bin/activate\n\n# 在环境变量添加\necho \"source /opt/autoenv/activate.sh\" >> /root/.bashrc\n\n```\n\n\n\n\n\n","slug":"install/centos7安装python3","published":1,"updated":"2021-01-27T08:20:35.752Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2q0029q0usf51f6q1i","content":"<p>摘要:  Centos7 安装pyhton3 环境</p>\n<a id=\"more\"></a>\n\n\n<h3 id=\"依赖准备\"><a href=\"#依赖准备\" class=\"headerlink\" title=\"依赖准备\"></a>依赖准备</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y groupinstall &quot;Development tools&quot;</span><br><span class=\"line\">yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel</span><br><span class=\"line\">yum install -y libffi-devel zlib1g-dev</span><br><span class=\"line\">yum install zlib* -y</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"python3下载页面\"><a href=\"#python3下载页面\" class=\"headerlink\" title=\"python3下载页面\"></a>python3下载页面</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;www.python.org&#x2F;downloads&#x2F;source&#x2F;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;www.python.org&#x2F;ftp&#x2F;python&#x2F;3.9.0&#x2F;Python-3.9.0.tar.xz</span><br></pre></td></tr></table></figure>\n\n<p><code>注意</code>： gcc 4.8.5不适用于编译Python3.8 及以上版本，但是可以编译Python 3.7。 使用GCC9.2来编译Python3.9</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -xvJf  Python-3.9.0.tar.xz</span><br></pre></td></tr></table></figure>\n<p>创建编译安装目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir &#x2F;usr&#x2F;local&#x2F;python3 </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd Python-3.9.0</span><br><span class=\"line\">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;python3 --enable-optimizations --with-ssl</span><br><span class=\"line\"></span><br><span class=\"line\">#第一个指定安装的路径,不指定的话,安装过程中可能软件所需要的文件复制到其他不同目录,删除软件很不方便,复制软件也不方便.</span><br><span class=\"line\">#第二个可以提高python10%-20%代码运行速度.</span><br><span class=\"line\">#第三个是为了安装pip需要用到ssl,后面报错会有提到.</span><br><span class=\"line\"></span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>\n\n<p>创建软链接</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s &#x2F;usr&#x2F;local&#x2F;python3&#x2F;bin&#x2F;python3 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;python3</span><br><span class=\"line\">ln -s &#x2F;usr&#x2F;local&#x2F;python3&#x2F;bin&#x2F;pip3 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;pip3</span><br></pre></td></tr></table></figure>\n\n<p>验证是否成功</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3 -V</span><br><span class=\"line\">pip3 -V</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改pip-源\"><a href=\"#修改pip-源\" class=\"headerlink\" title=\"修改pip 源\"></a>修改pip 源</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~</span><br><span class=\"line\">mkdir .pip</span><br><span class=\"line\">cd .pip</span><br><span class=\"line\">vim pip.conf</span><br><span class=\"line\"></span><br><span class=\"line\">#进入后添加以下内容,保存退出.</span><br><span class=\"line\">[global]</span><br><span class=\"line\">index-url &#x3D; https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改pipenv安装源\"><a href=\"#修改pipenv安装源\" class=\"headerlink\" title=\"修改pipenv安装源\"></a>修改pipenv安装源</h3><p>在自己的虚拟环境中找到Pipfile文件,将其中的url = “<a href=\"https://pypi.org/simple&quot;\">https://pypi.org/simple&quot;</a> 修改为你需要的国内镜像,如 <a href=\"https://mirrors.aliyun.com/pypi/simple/\">https://mirrors.aliyun.com/pypi/simple/</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost myproject]# vim Pipfile </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[[source]]</span><br><span class=\"line\">name &#x3D; &quot;pypi&quot;</span><br><span class=\"line\">url &#x3D; &quot;https:&#x2F;&#x2F;pypi.org&#x2F;simple&quot; # 改为url &#x3D; &quot;https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F;&quot;</span><br><span class=\"line\">verify_ssl &#x3D; true</span><br><span class=\"line\"></span><br><span class=\"line\">[dev-packages] #这里是开发环境专属包,使用pipenv install --dev package来安装专属开发环境的包</span><br><span class=\"line\"></span><br><span class=\"line\">[packages] # 全部环境的通用包,安装在这里.</span><br><span class=\"line\"></span><br><span class=\"line\">[requires]</span><br><span class=\"line\">python_version &#x3D; &quot;3.9&quot;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"报错处理\"><a href=\"#报错处理\" class=\"headerlink\" title=\"报错处理\"></a>报错处理</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zipimport.ZipImportError: can&#39;t decompress data; zlib not available Makefile:1099: recipe for target &#39;install&#39; failed make: *** [install] Error 1</span><br></pre></td></tr></table></figure>\n<p>解决方式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install zlib1g-dev</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ModuleNotFoundError: No module named &#39;_ctypes&#39;</span><br></pre></td></tr></table></figure>\n<p>解决方式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install libffi-devel</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"配置python-项目环境\"><a href=\"#配置python-项目环境\" class=\"headerlink\" title=\"配置python 项目环境\"></a>配置python 项目环境</h3><h4 id=\"创建python3-项目环境\"><a href=\"#创建python3-项目环境\" class=\"headerlink\" title=\"创建python3 项目环境\"></a>创建python3 项目环境</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;opt</span><br><span class=\"line\">python3 -m venv py3</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"创建项目目录\"><a href=\"#创建项目目录\" class=\"headerlink\" title=\"创建项目目录\"></a>创建项目目录</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;opt&#x2F;</span><br><span class=\"line\">mkdir myapp</span><br><span class=\"line\">source &#x2F;opt&#x2F;py3&#x2F;bin&#x2F;activate</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"自动激活项目环境\"><a href=\"#自动激活项目环境\" class=\"headerlink\" title=\"自动激活项目环境\"></a>自动激活项目环境</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;opt&#x2F;</span><br><span class=\"line\">git clone https:&#x2F;&#x2F;github.com&#x2F;kennethreitz&#x2F;autoenv.git</span><br><span class=\"line\"></span><br><span class=\"line\"># 进入项目路径</span><br><span class=\"line\">cd myapp</span><br><span class=\"line\">vim .env</span><br><span class=\"line\">source &#x2F;opt&#x2F;py3&#x2F;bin&#x2F;activate</span><br><span class=\"line\"></span><br><span class=\"line\"># 在环境变量添加</span><br><span class=\"line\">echo &quot;source &#x2F;opt&#x2F;autoenv&#x2F;activate.sh&quot; &gt;&gt; &#x2F;root&#x2F;.bashrc</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n","site":{"data":{}},"excerpt":"<p>摘要:  Centos7 安装pyhton3 环境</p>","more":"<h3 id=\"依赖准备\"><a href=\"#依赖准备\" class=\"headerlink\" title=\"依赖准备\"></a>依赖准备</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y groupinstall &quot;Development tools&quot;</span><br><span class=\"line\">yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel</span><br><span class=\"line\">yum install -y libffi-devel zlib1g-dev</span><br><span class=\"line\">yum install zlib* -y</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"python3下载页面\"><a href=\"#python3下载页面\" class=\"headerlink\" title=\"python3下载页面\"></a>python3下载页面</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;www.python.org&#x2F;downloads&#x2F;source&#x2F;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;www.python.org&#x2F;ftp&#x2F;python&#x2F;3.9.0&#x2F;Python-3.9.0.tar.xz</span><br></pre></td></tr></table></figure>\n\n<p><code>注意</code>： gcc 4.8.5不适用于编译Python3.8 及以上版本，但是可以编译Python 3.7。 使用GCC9.2来编译Python3.9</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -xvJf  Python-3.9.0.tar.xz</span><br></pre></td></tr></table></figure>\n<p>创建编译安装目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir &#x2F;usr&#x2F;local&#x2F;python3 </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd Python-3.9.0</span><br><span class=\"line\">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;python3 --enable-optimizations --with-ssl</span><br><span class=\"line\"></span><br><span class=\"line\">#第一个指定安装的路径,不指定的话,安装过程中可能软件所需要的文件复制到其他不同目录,删除软件很不方便,复制软件也不方便.</span><br><span class=\"line\">#第二个可以提高python10%-20%代码运行速度.</span><br><span class=\"line\">#第三个是为了安装pip需要用到ssl,后面报错会有提到.</span><br><span class=\"line\"></span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>\n\n<p>创建软链接</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s &#x2F;usr&#x2F;local&#x2F;python3&#x2F;bin&#x2F;python3 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;python3</span><br><span class=\"line\">ln -s &#x2F;usr&#x2F;local&#x2F;python3&#x2F;bin&#x2F;pip3 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;pip3</span><br></pre></td></tr></table></figure>\n\n<p>验证是否成功</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3 -V</span><br><span class=\"line\">pip3 -V</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改pip-源\"><a href=\"#修改pip-源\" class=\"headerlink\" title=\"修改pip 源\"></a>修改pip 源</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~</span><br><span class=\"line\">mkdir .pip</span><br><span class=\"line\">cd .pip</span><br><span class=\"line\">vim pip.conf</span><br><span class=\"line\"></span><br><span class=\"line\">#进入后添加以下内容,保存退出.</span><br><span class=\"line\">[global]</span><br><span class=\"line\">index-url &#x3D; https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改pipenv安装源\"><a href=\"#修改pipenv安装源\" class=\"headerlink\" title=\"修改pipenv安装源\"></a>修改pipenv安装源</h3><p>在自己的虚拟环境中找到Pipfile文件,将其中的url = “<a href=\"https://pypi.org/simple&quot;\">https://pypi.org/simple&quot;</a> 修改为你需要的国内镜像,如 <a href=\"https://mirrors.aliyun.com/pypi/simple/\">https://mirrors.aliyun.com/pypi/simple/</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost myproject]# vim Pipfile </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[[source]]</span><br><span class=\"line\">name &#x3D; &quot;pypi&quot;</span><br><span class=\"line\">url &#x3D; &quot;https:&#x2F;&#x2F;pypi.org&#x2F;simple&quot; # 改为url &#x3D; &quot;https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F;&quot;</span><br><span class=\"line\">verify_ssl &#x3D; true</span><br><span class=\"line\"></span><br><span class=\"line\">[dev-packages] #这里是开发环境专属包,使用pipenv install --dev package来安装专属开发环境的包</span><br><span class=\"line\"></span><br><span class=\"line\">[packages] # 全部环境的通用包,安装在这里.</span><br><span class=\"line\"></span><br><span class=\"line\">[requires]</span><br><span class=\"line\">python_version &#x3D; &quot;3.9&quot;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"报错处理\"><a href=\"#报错处理\" class=\"headerlink\" title=\"报错处理\"></a>报错处理</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zipimport.ZipImportError: can&#39;t decompress data; zlib not available Makefile:1099: recipe for target &#39;install&#39; failed make: *** [install] Error 1</span><br></pre></td></tr></table></figure>\n<p>解决方式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install zlib1g-dev</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ModuleNotFoundError: No module named &#39;_ctypes&#39;</span><br></pre></td></tr></table></figure>\n<p>解决方式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install libffi-devel</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"配置python-项目环境\"><a href=\"#配置python-项目环境\" class=\"headerlink\" title=\"配置python 项目环境\"></a>配置python 项目环境</h3><h4 id=\"创建python3-项目环境\"><a href=\"#创建python3-项目环境\" class=\"headerlink\" title=\"创建python3 项目环境\"></a>创建python3 项目环境</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;opt</span><br><span class=\"line\">python3 -m venv py3</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"创建项目目录\"><a href=\"#创建项目目录\" class=\"headerlink\" title=\"创建项目目录\"></a>创建项目目录</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;opt&#x2F;</span><br><span class=\"line\">mkdir myapp</span><br><span class=\"line\">source &#x2F;opt&#x2F;py3&#x2F;bin&#x2F;activate</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"自动激活项目环境\"><a href=\"#自动激活项目环境\" class=\"headerlink\" title=\"自动激活项目环境\"></a>自动激活项目环境</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd &#x2F;opt&#x2F;</span><br><span class=\"line\">git clone https:&#x2F;&#x2F;github.com&#x2F;kennethreitz&#x2F;autoenv.git</span><br><span class=\"line\"></span><br><span class=\"line\"># 进入项目路径</span><br><span class=\"line\">cd myapp</span><br><span class=\"line\">vim .env</span><br><span class=\"line\">source &#x2F;opt&#x2F;py3&#x2F;bin&#x2F;activate</span><br><span class=\"line\"></span><br><span class=\"line\"># 在环境变量添加</span><br><span class=\"line\">echo &quot;source &#x2F;opt&#x2F;autoenv&#x2F;activate.sh&quot; &gt;&gt; &#x2F;root&#x2F;.bashrc</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>"},{"title":"k8s 故障","date":"2020-01-09T03:00:00.000Z","_content":"\n# 删除K8s Namespace时卡在Terminating状态\n\n想要删除K8s里的一个Namespace，结果删除了所有该Namespace资源之后使用`kubectl delete namespace test`发现删除不掉，一直卡在`Terminating`状态，使用`--force`参数依然无法删除，报错:\n\n```\nError from server (Conflict): Operation cannot be fulfilled on namespaces \"test\": The system is ensuring all content is removed from this namespace. Upon completion, this namespace will automatically be purged by the system.\n```\n\n\n\n先运行   `kubectl get namespace test -o json > tmp.json` ，拿到当前namespace描述，然后打开`tmp.json`，删除其中的`spec`字段。因为这边的K8s集群是带认证的，所以又新开了窗口运行`kubectl proxy`跑一个API代理在本地的8081端口。最后运行\n\n```bash\ncurl -k -H \"Content-Type: application/json\" -X PUT --data-binary @tmp.json http://127.0.0.1:8080/api/v1/namespaces/test/finalize\n```\n\n查看 api 地址\n\n```\n# kubectl cluster-info\n\nKubernetes master is running at http://localhost:8080\nCoreDNS is running at http://localhost:8080/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\nkubernetes-dashboard is running at http://localhost:8080/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy\n```\n\n","source":"_posts/k8s/k8s故障.md","raw":"---\ntitle:  k8s 故障\ndate: 2020-01-09 11:00:00\ncategories: \n- k8s\ntags:\n- k8s\n---\n\n# 删除K8s Namespace时卡在Terminating状态\n\n想要删除K8s里的一个Namespace，结果删除了所有该Namespace资源之后使用`kubectl delete namespace test`发现删除不掉，一直卡在`Terminating`状态，使用`--force`参数依然无法删除，报错:\n\n```\nError from server (Conflict): Operation cannot be fulfilled on namespaces \"test\": The system is ensuring all content is removed from this namespace. Upon completion, this namespace will automatically be purged by the system.\n```\n\n\n\n先运行   `kubectl get namespace test -o json > tmp.json` ，拿到当前namespace描述，然后打开`tmp.json`，删除其中的`spec`字段。因为这边的K8s集群是带认证的，所以又新开了窗口运行`kubectl proxy`跑一个API代理在本地的8081端口。最后运行\n\n```bash\ncurl -k -H \"Content-Type: application/json\" -X PUT --data-binary @tmp.json http://127.0.0.1:8080/api/v1/namespaces/test/finalize\n```\n\n查看 api 地址\n\n```\n# kubectl cluster-info\n\nKubernetes master is running at http://localhost:8080\nCoreDNS is running at http://localhost:8080/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\nkubernetes-dashboard is running at http://localhost:8080/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy\n```\n\n","slug":"k8s/k8s故障","published":1,"updated":"2021-01-27T08:20:35.755Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2q002bq0uscati3t4e","content":"<h1 id=\"删除K8s-Namespace时卡在Terminating状态\"><a href=\"#删除K8s-Namespace时卡在Terminating状态\" class=\"headerlink\" title=\"删除K8s Namespace时卡在Terminating状态\"></a>删除K8s Namespace时卡在Terminating状态</h1><p>想要删除K8s里的一个Namespace，结果删除了所有该Namespace资源之后使用<code>kubectl delete namespace test</code>发现删除不掉，一直卡在<code>Terminating</code>状态，使用<code>--force</code>参数依然无法删除，报错:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Error from server (Conflict): Operation cannot be fulfilled on namespaces &quot;test&quot;: The system is ensuring all content is removed from this namespace. Upon completion, this namespace will automatically be purged by the system.</span><br></pre></td></tr></table></figure>\n\n\n\n<p>先运行   <code>kubectl get namespace test -o json &gt; tmp.json</code> ，拿到当前namespace描述，然后打开<code>tmp.json</code>，删除其中的<code>spec</code>字段。因为这边的K8s集群是带认证的，所以又新开了窗口运行<code>kubectl proxy</code>跑一个API代理在本地的8081端口。最后运行</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -k -H <span class=\"string\">&quot;Content-Type: application/json&quot;</span> -X PUT --data-binary @tmp.json http://127.0.0.1:8080/api/v1/namespaces/<span class=\"built_in\">test</span>/finalize</span><br></pre></td></tr></table></figure>\n\n<p>查看 api 地址</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># kubectl cluster-info</span><br><span class=\"line\"></span><br><span class=\"line\">Kubernetes master is running at http:&#x2F;&#x2F;localhost:8080</span><br><span class=\"line\">CoreDNS is running at http:&#x2F;&#x2F;localhost:8080&#x2F;api&#x2F;v1&#x2F;namespaces&#x2F;kube-system&#x2F;services&#x2F;kube-dns:dns&#x2F;proxy</span><br><span class=\"line\">kubernetes-dashboard is running at http:&#x2F;&#x2F;localhost:8080&#x2F;api&#x2F;v1&#x2F;namespaces&#x2F;kube-system&#x2F;services&#x2F;kubernetes-dashboard&#x2F;proxy</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"删除K8s-Namespace时卡在Terminating状态\"><a href=\"#删除K8s-Namespace时卡在Terminating状态\" class=\"headerlink\" title=\"删除K8s Namespace时卡在Terminating状态\"></a>删除K8s Namespace时卡在Terminating状态</h1><p>想要删除K8s里的一个Namespace，结果删除了所有该Namespace资源之后使用<code>kubectl delete namespace test</code>发现删除不掉，一直卡在<code>Terminating</code>状态，使用<code>--force</code>参数依然无法删除，报错:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Error from server (Conflict): Operation cannot be fulfilled on namespaces &quot;test&quot;: The system is ensuring all content is removed from this namespace. Upon completion, this namespace will automatically be purged by the system.</span><br></pre></td></tr></table></figure>\n\n\n\n<p>先运行   <code>kubectl get namespace test -o json &gt; tmp.json</code> ，拿到当前namespace描述，然后打开<code>tmp.json</code>，删除其中的<code>spec</code>字段。因为这边的K8s集群是带认证的，所以又新开了窗口运行<code>kubectl proxy</code>跑一个API代理在本地的8081端口。最后运行</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -k -H <span class=\"string\">&quot;Content-Type: application/json&quot;</span> -X PUT --data-binary @tmp.json http://127.0.0.1:8080/api/v1/namespaces/<span class=\"built_in\">test</span>/finalize</span><br></pre></td></tr></table></figure>\n\n<p>查看 api 地址</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># kubectl cluster-info</span><br><span class=\"line\"></span><br><span class=\"line\">Kubernetes master is running at http:&#x2F;&#x2F;localhost:8080</span><br><span class=\"line\">CoreDNS is running at http:&#x2F;&#x2F;localhost:8080&#x2F;api&#x2F;v1&#x2F;namespaces&#x2F;kube-system&#x2F;services&#x2F;kube-dns:dns&#x2F;proxy</span><br><span class=\"line\">kubernetes-dashboard is running at http:&#x2F;&#x2F;localhost:8080&#x2F;api&#x2F;v1&#x2F;namespaces&#x2F;kube-system&#x2F;services&#x2F;kubernetes-dashboard&#x2F;proxy</span><br></pre></td></tr></table></figure>\n\n"},{"title":"centos7安装redis5","date":"2021-01-14T06:29:00.000Z","_content":"\n摘要: centos7 源码安装redis5\n<!-- more -->\n\n## 下载Redis\n从[Redis官网](https://redis.io/download)下载后上传CentOS目录`/usr/local`, 当然, 你也可以使用wget命令下载\n```\nwget http://download.redis.io/releases/redis-5.0.3.tar.gz\n```\n\n## 安装编译环境\n```\nyum -y install gcc-c++\n```\n\n## 安装及配置Redis\n\n### 安装Redis\n```\n# 解压\ncd /usr/local\ntar -zxvf redis-5.0.8.tar.gz\n\n# 编译Redis\ncd redis-5.0.8\nmake\n\n# 在`/usr/local/`下创建多个文件夹\nmkdir -p /usr/local/redis/{etc,data}\n\n# 安装Redis, 将Redis安装在/usr/local/redis目录下\nmake PREFIX=/usr/local/redis install\n\n# 复制redis.conf配置文件到/usr/local/redis/etc目录下\ncp redis.conf /usr/local/redis/etc\n\n# 添加环境变量, 任何目录下都可以使用redis-server、redis-cli等等\nvim /etc/profile\n# 最后面添加\nexport PATH=$PATH:/usr/local/redis/bin\n\n```\n\n### 修改配置文件\n```\n# 打开配置文件\ncd /usr/local/redis\nvim redis.conf\n\n# 修改后台启动, 默认为daemonize no, 修改为daemonize yes\ndaemonize yes\n\n# 客户端闲置多长时间后断开连接, 默认为0关闭此功能, 修改为300                                      \ntimeout 300\n\n# 设置密码, 默认被注释, 取消注释修改为自定义密码(我的是123456)\nrequirepass 123456\n\n# 监听ip, 允许访问的ip, 默认为127.0.0.1, 修改为0.0.0.0(允许所有服务器ip访问)或者注释掉\nbind 0.0.0.0\n\n# 指定监听端口, 默认为6379, 此处我保持默认\nport 6379\n\n# 修改AOF及RBD存放路径, 默认为./, 修改为/usr/local/redis/data\ndir /usr/local/redis/data\n\n# 修改log存放路径, 默认为\"\", 修改为\"/usr/local/redis/data/redis_6379.log\"\nlogfile \"/usr/local/redis/data/redis_6379.log\"\n\n```\n\n## 启动Redis\n```\n# 启动\nredis-server /usr/local/redis/etc/redis.conf\n\n# 查看Redis是否启动\nps -ef | grep redis\n\n# CentOS本地查看\nredis-cli\n# 输入配置密码即可\nauth 123456\n\n# 远程则自行使用工具查看\n```\n\n### 添加系统服务与开机自启\n\n添加文件\n```\n# 新建文件\nvim /lib/systemd/system/redis.service\n```\n\n```\n# 添加内容\n[Unit]\nDescription=redis.server\nAfter=network.target\n\n[Service]\nType=forking\nPIDFILE=/var/run/redis_6379.pid\nExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.conf\nExecRepload=/bin/kill -s HUP $MAINPID\nExecStop=/bin/kill -s QUIT $MAINPID\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n\n```\n\n```\n# 启动redis服务\nsystemctl start redis.service\n\n# 停止redis服务\nsystemctl stop redis.service\n\n# 重启redis服务\nsystemctl restart redis.service\n\n# 查看redis服务当前状态\nsystemctl status redis.service\n\n# 设置redis服务开机自启动\nsystemctl enable redis.service\n\n# 停止redis服务开机自启动\nsystemctl disable redis.service\n```\n\n","source":"_posts/install/centos7安装redis5.md","raw":"---\ntitle: centos7安装redis5\ndate: 2021-01-14 14:29\ncategories:\n- centos\ntags:\n- redis\n---\n\n摘要: centos7 源码安装redis5\n<!-- more -->\n\n## 下载Redis\n从[Redis官网](https://redis.io/download)下载后上传CentOS目录`/usr/local`, 当然, 你也可以使用wget命令下载\n```\nwget http://download.redis.io/releases/redis-5.0.3.tar.gz\n```\n\n## 安装编译环境\n```\nyum -y install gcc-c++\n```\n\n## 安装及配置Redis\n\n### 安装Redis\n```\n# 解压\ncd /usr/local\ntar -zxvf redis-5.0.8.tar.gz\n\n# 编译Redis\ncd redis-5.0.8\nmake\n\n# 在`/usr/local/`下创建多个文件夹\nmkdir -p /usr/local/redis/{etc,data}\n\n# 安装Redis, 将Redis安装在/usr/local/redis目录下\nmake PREFIX=/usr/local/redis install\n\n# 复制redis.conf配置文件到/usr/local/redis/etc目录下\ncp redis.conf /usr/local/redis/etc\n\n# 添加环境变量, 任何目录下都可以使用redis-server、redis-cli等等\nvim /etc/profile\n# 最后面添加\nexport PATH=$PATH:/usr/local/redis/bin\n\n```\n\n### 修改配置文件\n```\n# 打开配置文件\ncd /usr/local/redis\nvim redis.conf\n\n# 修改后台启动, 默认为daemonize no, 修改为daemonize yes\ndaemonize yes\n\n# 客户端闲置多长时间后断开连接, 默认为0关闭此功能, 修改为300                                      \ntimeout 300\n\n# 设置密码, 默认被注释, 取消注释修改为自定义密码(我的是123456)\nrequirepass 123456\n\n# 监听ip, 允许访问的ip, 默认为127.0.0.1, 修改为0.0.0.0(允许所有服务器ip访问)或者注释掉\nbind 0.0.0.0\n\n# 指定监听端口, 默认为6379, 此处我保持默认\nport 6379\n\n# 修改AOF及RBD存放路径, 默认为./, 修改为/usr/local/redis/data\ndir /usr/local/redis/data\n\n# 修改log存放路径, 默认为\"\", 修改为\"/usr/local/redis/data/redis_6379.log\"\nlogfile \"/usr/local/redis/data/redis_6379.log\"\n\n```\n\n## 启动Redis\n```\n# 启动\nredis-server /usr/local/redis/etc/redis.conf\n\n# 查看Redis是否启动\nps -ef | grep redis\n\n# CentOS本地查看\nredis-cli\n# 输入配置密码即可\nauth 123456\n\n# 远程则自行使用工具查看\n```\n\n### 添加系统服务与开机自启\n\n添加文件\n```\n# 新建文件\nvim /lib/systemd/system/redis.service\n```\n\n```\n# 添加内容\n[Unit]\nDescription=redis.server\nAfter=network.target\n\n[Service]\nType=forking\nPIDFILE=/var/run/redis_6379.pid\nExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.conf\nExecRepload=/bin/kill -s HUP $MAINPID\nExecStop=/bin/kill -s QUIT $MAINPID\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n\n```\n\n```\n# 启动redis服务\nsystemctl start redis.service\n\n# 停止redis服务\nsystemctl stop redis.service\n\n# 重启redis服务\nsystemctl restart redis.service\n\n# 查看redis服务当前状态\nsystemctl status redis.service\n\n# 设置redis服务开机自启动\nsystemctl enable redis.service\n\n# 停止redis服务开机自启动\nsystemctl disable redis.service\n```\n\n","slug":"install/centos7安装redis5","published":1,"updated":"2021-01-27T08:20:35.753Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2r002eq0usf8rt7khj","content":"<p>摘要: centos7 源码安装redis5</p>\n<a id=\"more\"></a>\n\n<h2 id=\"下载Redis\"><a href=\"#下载Redis\" class=\"headerlink\" title=\"下载Redis\"></a>下载Redis</h2><p>从<a href=\"https://redis.io/download\">Redis官网</a>下载后上传CentOS目录<code>/usr/local</code>, 当然, 你也可以使用wget命令下载</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http:&#x2F;&#x2F;download.redis.io&#x2F;releases&#x2F;redis-5.0.3.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装编译环境\"><a href=\"#安装编译环境\" class=\"headerlink\" title=\"安装编译环境\"></a>安装编译环境</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gcc-c++</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装及配置Redis\"><a href=\"#安装及配置Redis\" class=\"headerlink\" title=\"安装及配置Redis\"></a>安装及配置Redis</h2><h3 id=\"安装Redis\"><a href=\"#安装Redis\" class=\"headerlink\" title=\"安装Redis\"></a>安装Redis</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 解压</span><br><span class=\"line\">cd &#x2F;usr&#x2F;local</span><br><span class=\"line\">tar -zxvf redis-5.0.8.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"># 编译Redis</span><br><span class=\"line\">cd redis-5.0.8</span><br><span class=\"line\">make</span><br><span class=\"line\"></span><br><span class=\"line\"># 在&#96;&#x2F;usr&#x2F;local&#x2F;&#96;下创建多个文件夹</span><br><span class=\"line\">mkdir -p &#x2F;usr&#x2F;local&#x2F;redis&#x2F;&#123;etc,data&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># 安装Redis, 将Redis安装在&#x2F;usr&#x2F;local&#x2F;redis目录下</span><br><span class=\"line\">make PREFIX&#x3D;&#x2F;usr&#x2F;local&#x2F;redis install</span><br><span class=\"line\"></span><br><span class=\"line\"># 复制redis.conf配置文件到&#x2F;usr&#x2F;local&#x2F;redis&#x2F;etc目录下</span><br><span class=\"line\">cp redis.conf &#x2F;usr&#x2F;local&#x2F;redis&#x2F;etc</span><br><span class=\"line\"></span><br><span class=\"line\"># 添加环境变量, 任何目录下都可以使用redis-server、redis-cli等等</span><br><span class=\"line\">vim &#x2F;etc&#x2F;profile</span><br><span class=\"line\"># 最后面添加</span><br><span class=\"line\">export PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;redis&#x2F;bin</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 打开配置文件</span><br><span class=\"line\">cd &#x2F;usr&#x2F;local&#x2F;redis</span><br><span class=\"line\">vim redis.conf</span><br><span class=\"line\"></span><br><span class=\"line\"># 修改后台启动, 默认为daemonize no, 修改为daemonize yes</span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\"></span><br><span class=\"line\"># 客户端闲置多长时间后断开连接, 默认为0关闭此功能, 修改为300                                      </span><br><span class=\"line\">timeout 300</span><br><span class=\"line\"></span><br><span class=\"line\"># 设置密码, 默认被注释, 取消注释修改为自定义密码(我的是123456)</span><br><span class=\"line\">requirepass 123456</span><br><span class=\"line\"></span><br><span class=\"line\"># 监听ip, 允许访问的ip, 默认为127.0.0.1, 修改为0.0.0.0(允许所有服务器ip访问)或者注释掉</span><br><span class=\"line\">bind 0.0.0.0</span><br><span class=\"line\"></span><br><span class=\"line\"># 指定监听端口, 默认为6379, 此处我保持默认</span><br><span class=\"line\">port 6379</span><br><span class=\"line\"></span><br><span class=\"line\"># 修改AOF及RBD存放路径, 默认为.&#x2F;, 修改为&#x2F;usr&#x2F;local&#x2F;redis&#x2F;data</span><br><span class=\"line\">dir &#x2F;usr&#x2F;local&#x2F;redis&#x2F;data</span><br><span class=\"line\"></span><br><span class=\"line\"># 修改log存放路径, 默认为&quot;&quot;, 修改为&quot;&#x2F;usr&#x2F;local&#x2F;redis&#x2F;data&#x2F;redis_6379.log&quot;</span><br><span class=\"line\">logfile &quot;&#x2F;usr&#x2F;local&#x2F;redis&#x2F;data&#x2F;redis_6379.log&quot;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"启动Redis\"><a href=\"#启动Redis\" class=\"headerlink\" title=\"启动Redis\"></a>启动Redis</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 启动</span><br><span class=\"line\">redis-server &#x2F;usr&#x2F;local&#x2F;redis&#x2F;etc&#x2F;redis.conf</span><br><span class=\"line\"></span><br><span class=\"line\"># 查看Redis是否启动</span><br><span class=\"line\">ps -ef | grep redis</span><br><span class=\"line\"></span><br><span class=\"line\"># CentOS本地查看</span><br><span class=\"line\">redis-cli</span><br><span class=\"line\"># 输入配置密码即可</span><br><span class=\"line\">auth 123456</span><br><span class=\"line\"></span><br><span class=\"line\"># 远程则自行使用工具查看</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加系统服务与开机自启\"><a href=\"#添加系统服务与开机自启\" class=\"headerlink\" title=\"添加系统服务与开机自启\"></a>添加系统服务与开机自启</h3><p>添加文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 新建文件</span><br><span class=\"line\">vim &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;redis.service</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 添加内容</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description&#x3D;redis.server</span><br><span class=\"line\">After&#x3D;network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type&#x3D;forking</span><br><span class=\"line\">PIDFILE&#x3D;&#x2F;var&#x2F;run&#x2F;redis_6379.pid</span><br><span class=\"line\">ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;redis&#x2F;bin&#x2F;redis-server &#x2F;usr&#x2F;local&#x2F;redis&#x2F;etc&#x2F;redis.conf</span><br><span class=\"line\">ExecRepload&#x3D;&#x2F;bin&#x2F;kill -s HUP $MAINPID</span><br><span class=\"line\">ExecStop&#x3D;&#x2F;bin&#x2F;kill -s QUIT $MAINPID</span><br><span class=\"line\">PrivateTmp&#x3D;true</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy&#x3D;multi-user.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 启动redis服务</span><br><span class=\"line\">systemctl start redis.service</span><br><span class=\"line\"></span><br><span class=\"line\"># 停止redis服务</span><br><span class=\"line\">systemctl stop redis.service</span><br><span class=\"line\"></span><br><span class=\"line\"># 重启redis服务</span><br><span class=\"line\">systemctl restart redis.service</span><br><span class=\"line\"></span><br><span class=\"line\"># 查看redis服务当前状态</span><br><span class=\"line\">systemctl status redis.service</span><br><span class=\"line\"></span><br><span class=\"line\"># 设置redis服务开机自启动</span><br><span class=\"line\">systemctl enable redis.service</span><br><span class=\"line\"></span><br><span class=\"line\"># 停止redis服务开机自启动</span><br><span class=\"line\">systemctl disable redis.service</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"<p>摘要: centos7 源码安装redis5</p>","more":"<h2 id=\"下载Redis\"><a href=\"#下载Redis\" class=\"headerlink\" title=\"下载Redis\"></a>下载Redis</h2><p>从<a href=\"https://redis.io/download\">Redis官网</a>下载后上传CentOS目录<code>/usr/local</code>, 当然, 你也可以使用wget命令下载</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http:&#x2F;&#x2F;download.redis.io&#x2F;releases&#x2F;redis-5.0.3.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装编译环境\"><a href=\"#安装编译环境\" class=\"headerlink\" title=\"安装编译环境\"></a>安装编译环境</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install gcc-c++</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装及配置Redis\"><a href=\"#安装及配置Redis\" class=\"headerlink\" title=\"安装及配置Redis\"></a>安装及配置Redis</h2><h3 id=\"安装Redis\"><a href=\"#安装Redis\" class=\"headerlink\" title=\"安装Redis\"></a>安装Redis</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 解压</span><br><span class=\"line\">cd &#x2F;usr&#x2F;local</span><br><span class=\"line\">tar -zxvf redis-5.0.8.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"># 编译Redis</span><br><span class=\"line\">cd redis-5.0.8</span><br><span class=\"line\">make</span><br><span class=\"line\"></span><br><span class=\"line\"># 在&#96;&#x2F;usr&#x2F;local&#x2F;&#96;下创建多个文件夹</span><br><span class=\"line\">mkdir -p &#x2F;usr&#x2F;local&#x2F;redis&#x2F;&#123;etc,data&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># 安装Redis, 将Redis安装在&#x2F;usr&#x2F;local&#x2F;redis目录下</span><br><span class=\"line\">make PREFIX&#x3D;&#x2F;usr&#x2F;local&#x2F;redis install</span><br><span class=\"line\"></span><br><span class=\"line\"># 复制redis.conf配置文件到&#x2F;usr&#x2F;local&#x2F;redis&#x2F;etc目录下</span><br><span class=\"line\">cp redis.conf &#x2F;usr&#x2F;local&#x2F;redis&#x2F;etc</span><br><span class=\"line\"></span><br><span class=\"line\"># 添加环境变量, 任何目录下都可以使用redis-server、redis-cli等等</span><br><span class=\"line\">vim &#x2F;etc&#x2F;profile</span><br><span class=\"line\"># 最后面添加</span><br><span class=\"line\">export PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;redis&#x2F;bin</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 打开配置文件</span><br><span class=\"line\">cd &#x2F;usr&#x2F;local&#x2F;redis</span><br><span class=\"line\">vim redis.conf</span><br><span class=\"line\"></span><br><span class=\"line\"># 修改后台启动, 默认为daemonize no, 修改为daemonize yes</span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\"></span><br><span class=\"line\"># 客户端闲置多长时间后断开连接, 默认为0关闭此功能, 修改为300                                      </span><br><span class=\"line\">timeout 300</span><br><span class=\"line\"></span><br><span class=\"line\"># 设置密码, 默认被注释, 取消注释修改为自定义密码(我的是123456)</span><br><span class=\"line\">requirepass 123456</span><br><span class=\"line\"></span><br><span class=\"line\"># 监听ip, 允许访问的ip, 默认为127.0.0.1, 修改为0.0.0.0(允许所有服务器ip访问)或者注释掉</span><br><span class=\"line\">bind 0.0.0.0</span><br><span class=\"line\"></span><br><span class=\"line\"># 指定监听端口, 默认为6379, 此处我保持默认</span><br><span class=\"line\">port 6379</span><br><span class=\"line\"></span><br><span class=\"line\"># 修改AOF及RBD存放路径, 默认为.&#x2F;, 修改为&#x2F;usr&#x2F;local&#x2F;redis&#x2F;data</span><br><span class=\"line\">dir &#x2F;usr&#x2F;local&#x2F;redis&#x2F;data</span><br><span class=\"line\"></span><br><span class=\"line\"># 修改log存放路径, 默认为&quot;&quot;, 修改为&quot;&#x2F;usr&#x2F;local&#x2F;redis&#x2F;data&#x2F;redis_6379.log&quot;</span><br><span class=\"line\">logfile &quot;&#x2F;usr&#x2F;local&#x2F;redis&#x2F;data&#x2F;redis_6379.log&quot;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"启动Redis\"><a href=\"#启动Redis\" class=\"headerlink\" title=\"启动Redis\"></a>启动Redis</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 启动</span><br><span class=\"line\">redis-server &#x2F;usr&#x2F;local&#x2F;redis&#x2F;etc&#x2F;redis.conf</span><br><span class=\"line\"></span><br><span class=\"line\"># 查看Redis是否启动</span><br><span class=\"line\">ps -ef | grep redis</span><br><span class=\"line\"></span><br><span class=\"line\"># CentOS本地查看</span><br><span class=\"line\">redis-cli</span><br><span class=\"line\"># 输入配置密码即可</span><br><span class=\"line\">auth 123456</span><br><span class=\"line\"></span><br><span class=\"line\"># 远程则自行使用工具查看</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加系统服务与开机自启\"><a href=\"#添加系统服务与开机自启\" class=\"headerlink\" title=\"添加系统服务与开机自启\"></a>添加系统服务与开机自启</h3><p>添加文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 新建文件</span><br><span class=\"line\">vim &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;redis.service</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 添加内容</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description&#x3D;redis.server</span><br><span class=\"line\">After&#x3D;network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type&#x3D;forking</span><br><span class=\"line\">PIDFILE&#x3D;&#x2F;var&#x2F;run&#x2F;redis_6379.pid</span><br><span class=\"line\">ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;redis&#x2F;bin&#x2F;redis-server &#x2F;usr&#x2F;local&#x2F;redis&#x2F;etc&#x2F;redis.conf</span><br><span class=\"line\">ExecRepload&#x3D;&#x2F;bin&#x2F;kill -s HUP $MAINPID</span><br><span class=\"line\">ExecStop&#x3D;&#x2F;bin&#x2F;kill -s QUIT $MAINPID</span><br><span class=\"line\">PrivateTmp&#x3D;true</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy&#x3D;multi-user.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 启动redis服务</span><br><span class=\"line\">systemctl start redis.service</span><br><span class=\"line\"></span><br><span class=\"line\"># 停止redis服务</span><br><span class=\"line\">systemctl stop redis.service</span><br><span class=\"line\"></span><br><span class=\"line\"># 重启redis服务</span><br><span class=\"line\">systemctl restart redis.service</span><br><span class=\"line\"></span><br><span class=\"line\"># 查看redis服务当前状态</span><br><span class=\"line\">systemctl status redis.service</span><br><span class=\"line\"></span><br><span class=\"line\"># 设置redis服务开机自启动</span><br><span class=\"line\">systemctl enable redis.service</span><br><span class=\"line\"></span><br><span class=\"line\"># 停止redis服务开机自启动</span><br><span class=\"line\">systemctl disable redis.service</span><br></pre></td></tr></table></figure>"},{"title":"ldap安装部署","date":"2020-03-02T06:00:00.000Z","_content":"\n\n\n### 环境准备\n\n#### 1、yum 仓库\n\n```\nwget http://mirrors.aliyun.com/repo/Centos-7.repo\ncp Centos-7.repo /etc/yum.repos.d/\ncd /etc/yum.repos.d/\nmv CentOS-Base.repo CentOS-Base.repo.bak\nmv Centos-7.repo CentOS-Base.repo\n\n(如果找不到软件包，重新设置一下yum源)\nyum localinstall http://rpms.famillecollet.com/enterprise/remi-release-7.rpm\n\nyum clean all\nyum makecache\n```\n\n#### 2、关闭防火墙\n\n```bash\nsed -i '/SELINUX/s/enforcing/disabled/' /etc/selinux/config && setenforce 0 && systemctl disable firewalld.service && systemctl stop firewalld.service && shutdown -r now\n```\n\n\n\n### 安装oepnldap\n\n```bash\nyum -y install openldap compat-openldap openldap-clients openldap-servers openldap-servers-sql openldap-devel migrationtools\n```\n\n查看openldap版本\n\n```\nslapd -VV\n\n@(#) $OpenLDAP: slapd 2.4.44 (Jan 29 2019 17:42:45) $\n\tmockbuild@x86-01.bsys.centos.org:/builddir/build/BUILD/openldap-2.4.44/openldap-2.4.44/servers/slapd\n```\n\n\n\n### 配置openldap\n\n#### 1、方式一，配置openldap管理员\n\n##### a、 这里我配置密码为123456\n\n```\n#slappasswd -s 123456\n\n{SSHA}y34sWhOnwBeR2hUBbTida1U/7s0S63sB\n```\n\n生成的密码字段保存下来\n\n##### b、修改olcDatabase={2}hdb.ldif文件\n\n```\nvim /etc/openldap/slapd.d/cn=config/olcDatabase={2}hdb.ldif\n\n修改olcDatabase={2}hdb.ldif文件,对于该文件增加一行\nolcRootPW: {SSHA}y34sWhOnwBeR2hUBbTida1U/7s0S63sB\n，然后修改域信息：\nolcSuffix: dc=ops,dc=com\nolcRootDN: cn=admin,dc=ops,dc=com\n\n修改后如下\n-----------------------------------------\n# AUTO-GENERATED FILE - DO NOT EDIT!! Use ldapmodify.\n# CRC32 505f2856\ndn: olcDatabase={2}hdb\nobjectClass: olcDatabaseConfig\nobjectClass: olcHdbConfig\nolcDatabase: {2}hdb\nolcDbDirectory: /var/lib/ldap\nolcSuffix: dc=ops,dc=com\nolcRootDN: cn=admin,dc=ops,dc=com\nolcDbIndex: objectClass eq,pres\nolcDbIndex: ou,cn,mail,surname,givenname eq,pres,sub\nstructuralObjectClass: olcHdbConfig\nentryUUID: 9773d930-f089-1039-88b1-3ff9195b4b09\ncreatorsName: cn=config\ncreateTimestamp: 20200302042528Z\nentryCSN: 20200302042528.964500Z#000000#000#000000\nmodifiersName: cn=config\nmodifyTimestamp: 20200302042528Z\nolcRootPW: {SSHA}y34sWhOnwBeR2hUBbTida1U/7s0S63sB\n```\n\n**注意**：`其中cn=adm in中的admin表示OpenLDAP管理员的用户名，而olcRootPW表示OpenLDAP管理员的密码`。\n\n##### c、修改olcDatabase={1}monitor.ldif文件\n\n```\n修改olcDatabase={1}monitor.ldif文件，如下：\nvim /etc/openldap/slapd.d/cn=config/olcDatabase\\=\\{1\\}monitor.ldif\n\nolcAccess: {0}to * by dn.base=\"gidNumber=0+uidNumber=0,cn=peercred,cn=extern\n al,cn=auth\" read by dn.base=\"cn=admin,dc=ops,dc=com\" read by * none\n\n```\n\n注意：该修改中的dn.base是修改OpenLDAP的管理员的相关信息的。\n验证OpenLDAP的基本配置，使用如下命令：\n\n```\n5e5cb0fe ldif_read_file: checksum error on \"/etc/openldap/slapd.d/cn=config/olcDatabase={1}monitor.ldif\"\n5e5cb0fe ldif_read_file: checksum error on \"/etc/openldap/slapd.d/cn=config/olcDatabase={2}hdb.ldif\"\nconfig file testing succeeded\n```\n\n上面的`checksum error `报错不用管, 只要配置文件测试succeeded成功就行\n\n\n\n##### d、修改文件权限\n\n```\nchown  -R ldap.ldap /etc/openldap/\nchown  -R ldap.ldap /var/lib/ldap/\n```\n\n##### e、启动服务\n\n```\nsystemctl enable slapd\nsystemctl start slapd\nsystemctl status slapd\n```\n\n\n\n验证服务\nOpenLDAP默认监听的端口是389，下面我们来看下是不是389端口，如下：\n\n```\ntcp        0      0 0.0.0.0:389             0.0.0.0:*               LISTEN      1472/slapd          \ntcp6       0      0 :::389                  :::*                    LISTEN      1472/slapd \n```\n\n#### 2、方式二，创建olcRootDN作为管理员账号(推荐)\n\n看到前面两个配置文件，官方不推荐我们直接修改配置文件，而是通过`ldapmodify`来更新配置。\n\n类似于update by pk, 这里的pk就是dn了。\n\n##### a、建rootdn.ldif\n\n```\ndn: olcDatabase={2}hdb,cn=config\nchangetype: modify\nreplace: olcRootDN\nolcRootDN: cn=admin,dc=demo,dc=com\n-\nreplace: olcSuffix\nolcSuffix: dc=demo,dc=com\n-\nreplace: olcRootPW\nolcRootPW: <pass>\n```\n\n- 修改olcRootDN， 设置为我们的admin: cn=admin,dc=demo,dc=com\n- 修改olcSuffix， 设置为我们的域名dc=demo,dc=com\n- 修改olcRootPW， 设置我们的admin密码, 这个需要加密，所以暂时放一个占位符，等下替换\n- changetype变更类型， replace表示替换， add表示增加。\n\n**cn=config**是全局配置，必须包含`objectClass: olcGlobal`.\n\n\n\n##### b、然后创建changeroot.sh\n\n```\nadmin_pass=`slappasswd -s admin`\necho \"admin pass is:  ${admin_pass}\"\nsed \"s!<pass>!${admin_pass}!g\"   rootdn.ldif > tmp.ldif\n\necho \"备份默认配置\"\n\ncp /etc/openldap/slapd.d/cn\\=config/olcDatabase\\=\\{2\\}hdb.ldif /etc/openldap/slapd.d/cn\\=config/olcDatabase\\=\\{2\\}hdb.ldif.bak\n\necho \"将要修改的内容：\"\ncat tmp.ldif\n\nldapmodify -Q -Y EXTERNAL -H ldapi:/// -f tmp.ldif\n\necho \"修改后的变化\"\ndiff /etc/openldap/slapd.d/cn\\=config/olcDatabase\\=\\{2\\}hdb.ldif /etc/openldap/slapd.d/cn\\=config/olcDatabase\\=\\{2\\}hdb.ldif.bak\n```\n\n- `slappasswd -s admin` 获取加密后的密码\n- 备份原始文件\n- ldapmodify 更新命令， -H指定host，这里`ldapi:///`表示IPC (Unix-domain socket)协议， -f指定变更的内容。 命令文档: http://man7.org/linux/man-pages/man1/ldapmodify.1.html\n\n使用脚本进行变更，而不是直接命令行交互式变更，这样可以更容易梳理变更逻辑, 而且可以重复使用。\n\n\n\n\n\n### 配置OpenLDAP数据库\n\n##### a、OpenLDAP默认使用的数据库是BerkeleyDB，现在来开始配置OpenLDAP数据库\n\n```\ncp /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG\nchown ldap:ldap -R /var/lib/ldap\nchmod 700 -R /var/lib/ldap\nll /var/lib/ldap/\n```\n\n注意：/var/lib/ldap/就是BerkeleyDB数据库默认存储的路径。\n\n##### b、导入基本Schema\n\n```\nldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/cosine.ldif\nldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/nis.ldif\nldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/inetorgperson.ldif\n```\n\n##### c、修改migrate_common.ph文件\n\nmigrate_common.ph文件主要是用于生成ldif文件使用，修改migrate_common.ph文件\n\n```\nvim /usr/share/migrationtools/migrate_common.ph    71行左右\n\n$DEFAULT_MAIL_DOMAIN = “ops.com”;\n$DEFAULT_BASE = “dc=ops,dc=com”;\n$EXTENDED_SCHEMA = 1;\n```\n\n\n\n#### 添加我们的base组织结构\n\n创建文件base.ldif\n\n```\ndn: dc=ops,dc=com\nobjectClass: top\nobjectClass: dcObject\nobjectClass: organization\no: ldap测试组织\ndc: demo\n\ndn: cn=admin,dc=ops,dc=com\nobjectClass: organizationalRole\ncn: Manager\ndescription: 组织管理人\n\ndn: ou=People,dc=demo,dc=com\nobjectClass: organizationalUnit\nou: People\n\ndn: ou=Group,dc=demo,dc=com\nobjectClass: organizationalUnit\nou: Group\n\n```\n\n使用`ldapadd`添加base:\n\n```\nldapadd -x -D cn=admin,dc=demo,dc=com -w admin -f base.ldif \n```\n\n使用`ldapsearch`来检查内容\n\n```\n[root@a1791f1044ba data]# ldapsearch -x -D cn=admin,dc=ops,dc=com -w 123456 -b \"dc=ops,dc=com\"\n# extended LDIF\n#\n# LDAPv3\n# base <dc=demo,dc=com> with scope subtree\n# filter: (objectclass=*)\n# requesting: ALL\n#\n\n# ops.com\ndn: dc=ops,dc=com\nobjectClass: top\nobjectClass: dcObject\nobjectClass: organization\no:: bGRhcOa1i+ivlee7hOe7hw==\ndc: demo\n\n# Manager, demo.com\ndn: cn=Manager,dc=demo,dc=com\nobjectClass: organizationalRole\ncn: Manager\ndescription:: 57uE57uH566h55CG5Lq6\n\n# People, demo.com\ndn: ou=People,dc=demo,dc=com\nobjectClass: organizationalUnit\nou: People\n\n# Group, demo.com\ndn: ou=Group,dc=demo,dc=com\nobjectClass: organizationalUnit\nou: Group\n\n# search result\nsearch: 2\nresult: 0 Success\n\n# numResponses: 5\n# numEntries: 4\n```\n\n#### 添加用户\n\n添加人员对应的是树的叶子节点，使用的  `oebjectClass： inetOrgPerson`。\n\n添加组织部门对应的是目录，使用的  `objectClass: organizationalUnit`.","source":"_posts/ldap/ldap部署.md","raw":"---\ntitle: ldap安装部署\ndate: 2020-03-02 14:00:00\ncategories: \n- ldap\ntags:\n- ldap\n---\n\n\n\n### 环境准备\n\n#### 1、yum 仓库\n\n```\nwget http://mirrors.aliyun.com/repo/Centos-7.repo\ncp Centos-7.repo /etc/yum.repos.d/\ncd /etc/yum.repos.d/\nmv CentOS-Base.repo CentOS-Base.repo.bak\nmv Centos-7.repo CentOS-Base.repo\n\n(如果找不到软件包，重新设置一下yum源)\nyum localinstall http://rpms.famillecollet.com/enterprise/remi-release-7.rpm\n\nyum clean all\nyum makecache\n```\n\n#### 2、关闭防火墙\n\n```bash\nsed -i '/SELINUX/s/enforcing/disabled/' /etc/selinux/config && setenforce 0 && systemctl disable firewalld.service && systemctl stop firewalld.service && shutdown -r now\n```\n\n\n\n### 安装oepnldap\n\n```bash\nyum -y install openldap compat-openldap openldap-clients openldap-servers openldap-servers-sql openldap-devel migrationtools\n```\n\n查看openldap版本\n\n```\nslapd -VV\n\n@(#) $OpenLDAP: slapd 2.4.44 (Jan 29 2019 17:42:45) $\n\tmockbuild@x86-01.bsys.centos.org:/builddir/build/BUILD/openldap-2.4.44/openldap-2.4.44/servers/slapd\n```\n\n\n\n### 配置openldap\n\n#### 1、方式一，配置openldap管理员\n\n##### a、 这里我配置密码为123456\n\n```\n#slappasswd -s 123456\n\n{SSHA}y34sWhOnwBeR2hUBbTida1U/7s0S63sB\n```\n\n生成的密码字段保存下来\n\n##### b、修改olcDatabase={2}hdb.ldif文件\n\n```\nvim /etc/openldap/slapd.d/cn=config/olcDatabase={2}hdb.ldif\n\n修改olcDatabase={2}hdb.ldif文件,对于该文件增加一行\nolcRootPW: {SSHA}y34sWhOnwBeR2hUBbTida1U/7s0S63sB\n，然后修改域信息：\nolcSuffix: dc=ops,dc=com\nolcRootDN: cn=admin,dc=ops,dc=com\n\n修改后如下\n-----------------------------------------\n# AUTO-GENERATED FILE - DO NOT EDIT!! Use ldapmodify.\n# CRC32 505f2856\ndn: olcDatabase={2}hdb\nobjectClass: olcDatabaseConfig\nobjectClass: olcHdbConfig\nolcDatabase: {2}hdb\nolcDbDirectory: /var/lib/ldap\nolcSuffix: dc=ops,dc=com\nolcRootDN: cn=admin,dc=ops,dc=com\nolcDbIndex: objectClass eq,pres\nolcDbIndex: ou,cn,mail,surname,givenname eq,pres,sub\nstructuralObjectClass: olcHdbConfig\nentryUUID: 9773d930-f089-1039-88b1-3ff9195b4b09\ncreatorsName: cn=config\ncreateTimestamp: 20200302042528Z\nentryCSN: 20200302042528.964500Z#000000#000#000000\nmodifiersName: cn=config\nmodifyTimestamp: 20200302042528Z\nolcRootPW: {SSHA}y34sWhOnwBeR2hUBbTida1U/7s0S63sB\n```\n\n**注意**：`其中cn=adm in中的admin表示OpenLDAP管理员的用户名，而olcRootPW表示OpenLDAP管理员的密码`。\n\n##### c、修改olcDatabase={1}monitor.ldif文件\n\n```\n修改olcDatabase={1}monitor.ldif文件，如下：\nvim /etc/openldap/slapd.d/cn=config/olcDatabase\\=\\{1\\}monitor.ldif\n\nolcAccess: {0}to * by dn.base=\"gidNumber=0+uidNumber=0,cn=peercred,cn=extern\n al,cn=auth\" read by dn.base=\"cn=admin,dc=ops,dc=com\" read by * none\n\n```\n\n注意：该修改中的dn.base是修改OpenLDAP的管理员的相关信息的。\n验证OpenLDAP的基本配置，使用如下命令：\n\n```\n5e5cb0fe ldif_read_file: checksum error on \"/etc/openldap/slapd.d/cn=config/olcDatabase={1}monitor.ldif\"\n5e5cb0fe ldif_read_file: checksum error on \"/etc/openldap/slapd.d/cn=config/olcDatabase={2}hdb.ldif\"\nconfig file testing succeeded\n```\n\n上面的`checksum error `报错不用管, 只要配置文件测试succeeded成功就行\n\n\n\n##### d、修改文件权限\n\n```\nchown  -R ldap.ldap /etc/openldap/\nchown  -R ldap.ldap /var/lib/ldap/\n```\n\n##### e、启动服务\n\n```\nsystemctl enable slapd\nsystemctl start slapd\nsystemctl status slapd\n```\n\n\n\n验证服务\nOpenLDAP默认监听的端口是389，下面我们来看下是不是389端口，如下：\n\n```\ntcp        0      0 0.0.0.0:389             0.0.0.0:*               LISTEN      1472/slapd          \ntcp6       0      0 :::389                  :::*                    LISTEN      1472/slapd \n```\n\n#### 2、方式二，创建olcRootDN作为管理员账号(推荐)\n\n看到前面两个配置文件，官方不推荐我们直接修改配置文件，而是通过`ldapmodify`来更新配置。\n\n类似于update by pk, 这里的pk就是dn了。\n\n##### a、建rootdn.ldif\n\n```\ndn: olcDatabase={2}hdb,cn=config\nchangetype: modify\nreplace: olcRootDN\nolcRootDN: cn=admin,dc=demo,dc=com\n-\nreplace: olcSuffix\nolcSuffix: dc=demo,dc=com\n-\nreplace: olcRootPW\nolcRootPW: <pass>\n```\n\n- 修改olcRootDN， 设置为我们的admin: cn=admin,dc=demo,dc=com\n- 修改olcSuffix， 设置为我们的域名dc=demo,dc=com\n- 修改olcRootPW， 设置我们的admin密码, 这个需要加密，所以暂时放一个占位符，等下替换\n- changetype变更类型， replace表示替换， add表示增加。\n\n**cn=config**是全局配置，必须包含`objectClass: olcGlobal`.\n\n\n\n##### b、然后创建changeroot.sh\n\n```\nadmin_pass=`slappasswd -s admin`\necho \"admin pass is:  ${admin_pass}\"\nsed \"s!<pass>!${admin_pass}!g\"   rootdn.ldif > tmp.ldif\n\necho \"备份默认配置\"\n\ncp /etc/openldap/slapd.d/cn\\=config/olcDatabase\\=\\{2\\}hdb.ldif /etc/openldap/slapd.d/cn\\=config/olcDatabase\\=\\{2\\}hdb.ldif.bak\n\necho \"将要修改的内容：\"\ncat tmp.ldif\n\nldapmodify -Q -Y EXTERNAL -H ldapi:/// -f tmp.ldif\n\necho \"修改后的变化\"\ndiff /etc/openldap/slapd.d/cn\\=config/olcDatabase\\=\\{2\\}hdb.ldif /etc/openldap/slapd.d/cn\\=config/olcDatabase\\=\\{2\\}hdb.ldif.bak\n```\n\n- `slappasswd -s admin` 获取加密后的密码\n- 备份原始文件\n- ldapmodify 更新命令， -H指定host，这里`ldapi:///`表示IPC (Unix-domain socket)协议， -f指定变更的内容。 命令文档: http://man7.org/linux/man-pages/man1/ldapmodify.1.html\n\n使用脚本进行变更，而不是直接命令行交互式变更，这样可以更容易梳理变更逻辑, 而且可以重复使用。\n\n\n\n\n\n### 配置OpenLDAP数据库\n\n##### a、OpenLDAP默认使用的数据库是BerkeleyDB，现在来开始配置OpenLDAP数据库\n\n```\ncp /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG\nchown ldap:ldap -R /var/lib/ldap\nchmod 700 -R /var/lib/ldap\nll /var/lib/ldap/\n```\n\n注意：/var/lib/ldap/就是BerkeleyDB数据库默认存储的路径。\n\n##### b、导入基本Schema\n\n```\nldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/cosine.ldif\nldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/nis.ldif\nldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/inetorgperson.ldif\n```\n\n##### c、修改migrate_common.ph文件\n\nmigrate_common.ph文件主要是用于生成ldif文件使用，修改migrate_common.ph文件\n\n```\nvim /usr/share/migrationtools/migrate_common.ph    71行左右\n\n$DEFAULT_MAIL_DOMAIN = “ops.com”;\n$DEFAULT_BASE = “dc=ops,dc=com”;\n$EXTENDED_SCHEMA = 1;\n```\n\n\n\n#### 添加我们的base组织结构\n\n创建文件base.ldif\n\n```\ndn: dc=ops,dc=com\nobjectClass: top\nobjectClass: dcObject\nobjectClass: organization\no: ldap测试组织\ndc: demo\n\ndn: cn=admin,dc=ops,dc=com\nobjectClass: organizationalRole\ncn: Manager\ndescription: 组织管理人\n\ndn: ou=People,dc=demo,dc=com\nobjectClass: organizationalUnit\nou: People\n\ndn: ou=Group,dc=demo,dc=com\nobjectClass: organizationalUnit\nou: Group\n\n```\n\n使用`ldapadd`添加base:\n\n```\nldapadd -x -D cn=admin,dc=demo,dc=com -w admin -f base.ldif \n```\n\n使用`ldapsearch`来检查内容\n\n```\n[root@a1791f1044ba data]# ldapsearch -x -D cn=admin,dc=ops,dc=com -w 123456 -b \"dc=ops,dc=com\"\n# extended LDIF\n#\n# LDAPv3\n# base <dc=demo,dc=com> with scope subtree\n# filter: (objectclass=*)\n# requesting: ALL\n#\n\n# ops.com\ndn: dc=ops,dc=com\nobjectClass: top\nobjectClass: dcObject\nobjectClass: organization\no:: bGRhcOa1i+ivlee7hOe7hw==\ndc: demo\n\n# Manager, demo.com\ndn: cn=Manager,dc=demo,dc=com\nobjectClass: organizationalRole\ncn: Manager\ndescription:: 57uE57uH566h55CG5Lq6\n\n# People, demo.com\ndn: ou=People,dc=demo,dc=com\nobjectClass: organizationalUnit\nou: People\n\n# Group, demo.com\ndn: ou=Group,dc=demo,dc=com\nobjectClass: organizationalUnit\nou: Group\n\n# search result\nsearch: 2\nresult: 0 Success\n\n# numResponses: 5\n# numEntries: 4\n```\n\n#### 添加用户\n\n添加人员对应的是树的叶子节点，使用的  `oebjectClass： inetOrgPerson`。\n\n添加组织部门对应的是目录，使用的  `objectClass: organizationalUnit`.","slug":"ldap/ldap部署","published":1,"updated":"2021-01-27T08:20:35.759Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2s002hq0us16821dxs","content":"<h3 id=\"环境准备\"><a href=\"#环境准备\" class=\"headerlink\" title=\"环境准备\"></a>环境准备</h3><h4 id=\"1、yum-仓库\"><a href=\"#1、yum-仓库\" class=\"headerlink\" title=\"1、yum 仓库\"></a>1、yum 仓库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;repo&#x2F;Centos-7.repo</span><br><span class=\"line\">cp Centos-7.repo &#x2F;etc&#x2F;yum.repos.d&#x2F;</span><br><span class=\"line\">cd &#x2F;etc&#x2F;yum.repos.d&#x2F;</span><br><span class=\"line\">mv CentOS-Base.repo CentOS-Base.repo.bak</span><br><span class=\"line\">mv Centos-7.repo CentOS-Base.repo</span><br><span class=\"line\"></span><br><span class=\"line\">(如果找不到软件包，重新设置一下yum源)</span><br><span class=\"line\">yum localinstall http:&#x2F;&#x2F;rpms.famillecollet.com&#x2F;enterprise&#x2F;remi-release-7.rpm</span><br><span class=\"line\"></span><br><span class=\"line\">yum clean all</span><br><span class=\"line\">yum makecache</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2、关闭防火墙\"><a href=\"#2、关闭防火墙\" class=\"headerlink\" title=\"2、关闭防火墙\"></a>2、关闭防火墙</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sed -i <span class=\"string\">&#x27;/SELINUX/s/enforcing/disabled/&#x27;</span> /etc/selinux/config &amp;&amp; setenforce 0 &amp;&amp; systemctl <span class=\"built_in\">disable</span> firewalld.service &amp;&amp; systemctl stop firewalld.service &amp;&amp; shutdown -r now</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"安装oepnldap\"><a href=\"#安装oepnldap\" class=\"headerlink\" title=\"安装oepnldap\"></a>安装oepnldap</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install openldap compat-openldap openldap-clients openldap-servers openldap-servers-sql openldap-devel migrationtools</span><br></pre></td></tr></table></figure>\n\n<p>查看openldap版本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">slapd -VV</span><br><span class=\"line\"></span><br><span class=\"line\">@(#) $OpenLDAP: slapd 2.4.44 (Jan 29 2019 17:42:45) $</span><br><span class=\"line\">\tmockbuild@x86-01.bsys.centos.org:&#x2F;builddir&#x2F;build&#x2F;BUILD&#x2F;openldap-2.4.44&#x2F;openldap-2.4.44&#x2F;servers&#x2F;slapd</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"配置openldap\"><a href=\"#配置openldap\" class=\"headerlink\" title=\"配置openldap\"></a>配置openldap</h3><h4 id=\"1、方式一，配置openldap管理员\"><a href=\"#1、方式一，配置openldap管理员\" class=\"headerlink\" title=\"1、方式一，配置openldap管理员\"></a>1、方式一，配置openldap管理员</h4><h5 id=\"a、-这里我配置密码为123456\"><a href=\"#a、-这里我配置密码为123456\" class=\"headerlink\" title=\"a、 这里我配置密码为123456\"></a>a、 这里我配置密码为123456</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#slappasswd -s 123456</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;SSHA&#125;y34sWhOnwBeR2hUBbTida1U&#x2F;7s0S63sB</span><br></pre></td></tr></table></figure>\n\n<p>生成的密码字段保存下来</p>\n<h5 id=\"b、修改olcDatabase-2-hdb-ldif文件\"><a href=\"#b、修改olcDatabase-2-hdb-ldif文件\" class=\"headerlink\" title=\"b、修改olcDatabase={2}hdb.ldif文件\"></a>b、修改olcDatabase={2}hdb.ldif文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn&#x3D;config&#x2F;olcDatabase&#x3D;&#123;2&#125;hdb.ldif</span><br><span class=\"line\"></span><br><span class=\"line\">修改olcDatabase&#x3D;&#123;2&#125;hdb.ldif文件,对于该文件增加一行</span><br><span class=\"line\">olcRootPW: &#123;SSHA&#125;y34sWhOnwBeR2hUBbTida1U&#x2F;7s0S63sB</span><br><span class=\"line\">，然后修改域信息：</span><br><span class=\"line\">olcSuffix: dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\">olcRootDN: cn&#x3D;admin,dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\"></span><br><span class=\"line\">修改后如下</span><br><span class=\"line\">-----------------------------------------</span><br><span class=\"line\"># AUTO-GENERATED FILE - DO NOT EDIT!! Use ldapmodify.</span><br><span class=\"line\"># CRC32 505f2856</span><br><span class=\"line\">dn: olcDatabase&#x3D;&#123;2&#125;hdb</span><br><span class=\"line\">objectClass: olcDatabaseConfig</span><br><span class=\"line\">objectClass: olcHdbConfig</span><br><span class=\"line\">olcDatabase: &#123;2&#125;hdb</span><br><span class=\"line\">olcDbDirectory: &#x2F;var&#x2F;lib&#x2F;ldap</span><br><span class=\"line\">olcSuffix: dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\">olcRootDN: cn&#x3D;admin,dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\">olcDbIndex: objectClass eq,pres</span><br><span class=\"line\">olcDbIndex: ou,cn,mail,surname,givenname eq,pres,sub</span><br><span class=\"line\">structuralObjectClass: olcHdbConfig</span><br><span class=\"line\">entryUUID: 9773d930-f089-1039-88b1-3ff9195b4b09</span><br><span class=\"line\">creatorsName: cn&#x3D;config</span><br><span class=\"line\">createTimestamp: 20200302042528Z</span><br><span class=\"line\">entryCSN: 20200302042528.964500Z#000000#000#000000</span><br><span class=\"line\">modifiersName: cn&#x3D;config</span><br><span class=\"line\">modifyTimestamp: 20200302042528Z</span><br><span class=\"line\">olcRootPW: &#123;SSHA&#125;y34sWhOnwBeR2hUBbTida1U&#x2F;7s0S63sB</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意</strong>：<code>其中cn=adm in中的admin表示OpenLDAP管理员的用户名，而olcRootPW表示OpenLDAP管理员的密码</code>。</p>\n<h5 id=\"c、修改olcDatabase-1-monitor-ldif文件\"><a href=\"#c、修改olcDatabase-1-monitor-ldif文件\" class=\"headerlink\" title=\"c、修改olcDatabase={1}monitor.ldif文件\"></a>c、修改olcDatabase={1}monitor.ldif文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">修改olcDatabase&#x3D;&#123;1&#125;monitor.ldif文件，如下：</span><br><span class=\"line\">vim &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn&#x3D;config&#x2F;olcDatabase\\&#x3D;\\&#123;1\\&#125;monitor.ldif</span><br><span class=\"line\"></span><br><span class=\"line\">olcAccess: &#123;0&#125;to * by dn.base&#x3D;&quot;gidNumber&#x3D;0+uidNumber&#x3D;0,cn&#x3D;peercred,cn&#x3D;extern</span><br><span class=\"line\"> al,cn&#x3D;auth&quot; read by dn.base&#x3D;&quot;cn&#x3D;admin,dc&#x3D;ops,dc&#x3D;com&quot; read by * none</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>注意：该修改中的dn.base是修改OpenLDAP的管理员的相关信息的。<br>验证OpenLDAP的基本配置，使用如下命令：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">5e5cb0fe ldif_read_file: checksum error on &quot;&#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn&#x3D;config&#x2F;olcDatabase&#x3D;&#123;1&#125;monitor.ldif&quot;</span><br><span class=\"line\">5e5cb0fe ldif_read_file: checksum error on &quot;&#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn&#x3D;config&#x2F;olcDatabase&#x3D;&#123;2&#125;hdb.ldif&quot;</span><br><span class=\"line\">config file testing succeeded</span><br></pre></td></tr></table></figure>\n\n<p>上面的<code>checksum error </code>报错不用管, 只要配置文件测试succeeded成功就行</p>\n<h5 id=\"d、修改文件权限\"><a href=\"#d、修改文件权限\" class=\"headerlink\" title=\"d、修改文件权限\"></a>d、修改文件权限</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chown  -R ldap.ldap &#x2F;etc&#x2F;openldap&#x2F;</span><br><span class=\"line\">chown  -R ldap.ldap &#x2F;var&#x2F;lib&#x2F;ldap&#x2F;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"e、启动服务\"><a href=\"#e、启动服务\" class=\"headerlink\" title=\"e、启动服务\"></a>e、启动服务</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable slapd</span><br><span class=\"line\">systemctl start slapd</span><br><span class=\"line\">systemctl status slapd</span><br></pre></td></tr></table></figure>\n\n\n\n<p>验证服务<br>OpenLDAP默认监听的端口是389，下面我们来看下是不是389端口，如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tcp        0      0 0.0.0.0:389             0.0.0.0:*               LISTEN      1472&#x2F;slapd          </span><br><span class=\"line\">tcp6       0      0 :::389                  :::*                    LISTEN      1472&#x2F;slapd </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2、方式二，创建olcRootDN作为管理员账号-推荐\"><a href=\"#2、方式二，创建olcRootDN作为管理员账号-推荐\" class=\"headerlink\" title=\"2、方式二，创建olcRootDN作为管理员账号(推荐)\"></a>2、方式二，创建olcRootDN作为管理员账号(推荐)</h4><p>看到前面两个配置文件，官方不推荐我们直接修改配置文件，而是通过<code>ldapmodify</code>来更新配置。</p>\n<p>类似于update by pk, 这里的pk就是dn了。</p>\n<h5 id=\"a、建rootdn-ldif\"><a href=\"#a、建rootdn-ldif\" class=\"headerlink\" title=\"a、建rootdn.ldif\"></a>a、建rootdn.ldif</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dn: olcDatabase&#x3D;&#123;2&#125;hdb,cn&#x3D;config</span><br><span class=\"line\">changetype: modify</span><br><span class=\"line\">replace: olcRootDN</span><br><span class=\"line\">olcRootDN: cn&#x3D;admin,dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">-</span><br><span class=\"line\">replace: olcSuffix</span><br><span class=\"line\">olcSuffix: dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">-</span><br><span class=\"line\">replace: olcRootPW</span><br><span class=\"line\">olcRootPW: &lt;pass&gt;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>修改olcRootDN， 设置为我们的admin: cn=admin,dc=demo,dc=com</li>\n<li>修改olcSuffix， 设置为我们的域名dc=demo,dc=com</li>\n<li>修改olcRootPW， 设置我们的admin密码, 这个需要加密，所以暂时放一个占位符，等下替换</li>\n<li>changetype变更类型， replace表示替换， add表示增加。</li>\n</ul>\n<p><strong>cn=config</strong>是全局配置，必须包含<code>objectClass: olcGlobal</code>.</p>\n<h5 id=\"b、然后创建changeroot-sh\"><a href=\"#b、然后创建changeroot-sh\" class=\"headerlink\" title=\"b、然后创建changeroot.sh\"></a>b、然后创建changeroot.sh</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">admin_pass&#x3D;&#96;slappasswd -s admin&#96;</span><br><span class=\"line\">echo &quot;admin pass is:  $&#123;admin_pass&#125;&quot;</span><br><span class=\"line\">sed &quot;s!&lt;pass&gt;!$&#123;admin_pass&#125;!g&quot;   rootdn.ldif &gt; tmp.ldif</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;备份默认配置&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">cp &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn\\&#x3D;config&#x2F;olcDatabase\\&#x3D;\\&#123;2\\&#125;hdb.ldif &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn\\&#x3D;config&#x2F;olcDatabase\\&#x3D;\\&#123;2\\&#125;hdb.ldif.bak</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;将要修改的内容：&quot;</span><br><span class=\"line\">cat tmp.ldif</span><br><span class=\"line\"></span><br><span class=\"line\">ldapmodify -Q -Y EXTERNAL -H ldapi:&#x2F;&#x2F;&#x2F; -f tmp.ldif</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;修改后的变化&quot;</span><br><span class=\"line\">diff &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn\\&#x3D;config&#x2F;olcDatabase\\&#x3D;\\&#123;2\\&#125;hdb.ldif &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn\\&#x3D;config&#x2F;olcDatabase\\&#x3D;\\&#123;2\\&#125;hdb.ldif.bak</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>slappasswd -s admin</code> 获取加密后的密码</li>\n<li>备份原始文件</li>\n<li>ldapmodify 更新命令， -H指定host，这里<code>ldapi:///</code>表示IPC (Unix-domain socket)协议， -f指定变更的内容。 命令文档: <a href=\"http://man7.org/linux/man-pages/man1/ldapmodify.1.html\">http://man7.org/linux/man-pages/man1/ldapmodify.1.html</a></li>\n</ul>\n<p>使用脚本进行变更，而不是直接命令行交互式变更，这样可以更容易梳理变更逻辑, 而且可以重复使用。</p>\n<h3 id=\"配置OpenLDAP数据库\"><a href=\"#配置OpenLDAP数据库\" class=\"headerlink\" title=\"配置OpenLDAP数据库\"></a>配置OpenLDAP数据库</h3><h5 id=\"a、OpenLDAP默认使用的数据库是BerkeleyDB，现在来开始配置OpenLDAP数据库\"><a href=\"#a、OpenLDAP默认使用的数据库是BerkeleyDB，现在来开始配置OpenLDAP数据库\" class=\"headerlink\" title=\"a、OpenLDAP默认使用的数据库是BerkeleyDB，现在来开始配置OpenLDAP数据库\"></a>a、OpenLDAP默认使用的数据库是BerkeleyDB，现在来开始配置OpenLDAP数据库</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp &#x2F;usr&#x2F;share&#x2F;openldap-servers&#x2F;DB_CONFIG.example &#x2F;var&#x2F;lib&#x2F;ldap&#x2F;DB_CONFIG</span><br><span class=\"line\">chown ldap:ldap -R &#x2F;var&#x2F;lib&#x2F;ldap</span><br><span class=\"line\">chmod 700 -R &#x2F;var&#x2F;lib&#x2F;ldap</span><br><span class=\"line\">ll &#x2F;var&#x2F;lib&#x2F;ldap&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>注意：/var/lib/ldap/就是BerkeleyDB数据库默认存储的路径。</p>\n<h5 id=\"b、导入基本Schema\"><a href=\"#b、导入基本Schema\" class=\"headerlink\" title=\"b、导入基本Schema\"></a>b、导入基本Schema</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ldapadd -Y EXTERNAL -H ldapi:&#x2F;&#x2F;&#x2F; -f &#x2F;etc&#x2F;openldap&#x2F;schema&#x2F;cosine.ldif</span><br><span class=\"line\">ldapadd -Y EXTERNAL -H ldapi:&#x2F;&#x2F;&#x2F; -f &#x2F;etc&#x2F;openldap&#x2F;schema&#x2F;nis.ldif</span><br><span class=\"line\">ldapadd -Y EXTERNAL -H ldapi:&#x2F;&#x2F;&#x2F; -f &#x2F;etc&#x2F;openldap&#x2F;schema&#x2F;inetorgperson.ldif</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"c、修改migrate-common-ph文件\"><a href=\"#c、修改migrate-common-ph文件\" class=\"headerlink\" title=\"c、修改migrate_common.ph文件\"></a>c、修改migrate_common.ph文件</h5><p>migrate_common.ph文件主要是用于生成ldif文件使用，修改migrate_common.ph文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;usr&#x2F;share&#x2F;migrationtools&#x2F;migrate_common.ph    71行左右</span><br><span class=\"line\"></span><br><span class=\"line\">$DEFAULT_MAIL_DOMAIN &#x3D; “ops.com”;</span><br><span class=\"line\">$DEFAULT_BASE &#x3D; “dc&#x3D;ops,dc&#x3D;com”;</span><br><span class=\"line\">$EXTENDED_SCHEMA &#x3D; 1;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"添加我们的base组织结构\"><a href=\"#添加我们的base组织结构\" class=\"headerlink\" title=\"添加我们的base组织结构\"></a>添加我们的base组织结构</h4><p>创建文件base.ldif</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dn: dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\">objectClass: top</span><br><span class=\"line\">objectClass: dcObject</span><br><span class=\"line\">objectClass: organization</span><br><span class=\"line\">o: ldap测试组织</span><br><span class=\"line\">dc: demo</span><br><span class=\"line\"></span><br><span class=\"line\">dn: cn&#x3D;admin,dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\">objectClass: organizationalRole</span><br><span class=\"line\">cn: Manager</span><br><span class=\"line\">description: 组织管理人</span><br><span class=\"line\"></span><br><span class=\"line\">dn: ou&#x3D;People,dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">objectClass: organizationalUnit</span><br><span class=\"line\">ou: People</span><br><span class=\"line\"></span><br><span class=\"line\">dn: ou&#x3D;Group,dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">objectClass: organizationalUnit</span><br><span class=\"line\">ou: Group</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>使用<code>ldapadd</code>添加base:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ldapadd -x -D cn&#x3D;admin,dc&#x3D;demo,dc&#x3D;com -w admin -f base.ldif </span><br></pre></td></tr></table></figure>\n\n<p>使用<code>ldapsearch</code>来检查内容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@a1791f1044ba data]# ldapsearch -x -D cn&#x3D;admin,dc&#x3D;ops,dc&#x3D;com -w 123456 -b &quot;dc&#x3D;ops,dc&#x3D;com&quot;</span><br><span class=\"line\"># extended LDIF</span><br><span class=\"line\">#</span><br><span class=\"line\"># LDAPv3</span><br><span class=\"line\"># base &lt;dc&#x3D;demo,dc&#x3D;com&gt; with scope subtree</span><br><span class=\"line\"># filter: (objectclass&#x3D;*)</span><br><span class=\"line\"># requesting: ALL</span><br><span class=\"line\">#</span><br><span class=\"line\"></span><br><span class=\"line\"># ops.com</span><br><span class=\"line\">dn: dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\">objectClass: top</span><br><span class=\"line\">objectClass: dcObject</span><br><span class=\"line\">objectClass: organization</span><br><span class=\"line\">o:: bGRhcOa1i+ivlee7hOe7hw&#x3D;&#x3D;</span><br><span class=\"line\">dc: demo</span><br><span class=\"line\"></span><br><span class=\"line\"># Manager, demo.com</span><br><span class=\"line\">dn: cn&#x3D;Manager,dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">objectClass: organizationalRole</span><br><span class=\"line\">cn: Manager</span><br><span class=\"line\">description:: 57uE57uH566h55CG5Lq6</span><br><span class=\"line\"></span><br><span class=\"line\"># People, demo.com</span><br><span class=\"line\">dn: ou&#x3D;People,dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">objectClass: organizationalUnit</span><br><span class=\"line\">ou: People</span><br><span class=\"line\"></span><br><span class=\"line\"># Group, demo.com</span><br><span class=\"line\">dn: ou&#x3D;Group,dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">objectClass: organizationalUnit</span><br><span class=\"line\">ou: Group</span><br><span class=\"line\"></span><br><span class=\"line\"># search result</span><br><span class=\"line\">search: 2</span><br><span class=\"line\">result: 0 Success</span><br><span class=\"line\"></span><br><span class=\"line\"># numResponses: 5</span><br><span class=\"line\"># numEntries: 4</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"添加用户\"><a href=\"#添加用户\" class=\"headerlink\" title=\"添加用户\"></a>添加用户</h4><p>添加人员对应的是树的叶子节点，使用的  <code>oebjectClass： inetOrgPerson</code>。</p>\n<p>添加组织部门对应的是目录，使用的  <code>objectClass: organizationalUnit</code>.</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"环境准备\"><a href=\"#环境准备\" class=\"headerlink\" title=\"环境准备\"></a>环境准备</h3><h4 id=\"1、yum-仓库\"><a href=\"#1、yum-仓库\" class=\"headerlink\" title=\"1、yum 仓库\"></a>1、yum 仓库</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;repo&#x2F;Centos-7.repo</span><br><span class=\"line\">cp Centos-7.repo &#x2F;etc&#x2F;yum.repos.d&#x2F;</span><br><span class=\"line\">cd &#x2F;etc&#x2F;yum.repos.d&#x2F;</span><br><span class=\"line\">mv CentOS-Base.repo CentOS-Base.repo.bak</span><br><span class=\"line\">mv Centos-7.repo CentOS-Base.repo</span><br><span class=\"line\"></span><br><span class=\"line\">(如果找不到软件包，重新设置一下yum源)</span><br><span class=\"line\">yum localinstall http:&#x2F;&#x2F;rpms.famillecollet.com&#x2F;enterprise&#x2F;remi-release-7.rpm</span><br><span class=\"line\"></span><br><span class=\"line\">yum clean all</span><br><span class=\"line\">yum makecache</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2、关闭防火墙\"><a href=\"#2、关闭防火墙\" class=\"headerlink\" title=\"2、关闭防火墙\"></a>2、关闭防火墙</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sed -i <span class=\"string\">&#x27;/SELINUX/s/enforcing/disabled/&#x27;</span> /etc/selinux/config &amp;&amp; setenforce 0 &amp;&amp; systemctl <span class=\"built_in\">disable</span> firewalld.service &amp;&amp; systemctl stop firewalld.service &amp;&amp; shutdown -r now</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"安装oepnldap\"><a href=\"#安装oepnldap\" class=\"headerlink\" title=\"安装oepnldap\"></a>安装oepnldap</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install openldap compat-openldap openldap-clients openldap-servers openldap-servers-sql openldap-devel migrationtools</span><br></pre></td></tr></table></figure>\n\n<p>查看openldap版本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">slapd -VV</span><br><span class=\"line\"></span><br><span class=\"line\">@(#) $OpenLDAP: slapd 2.4.44 (Jan 29 2019 17:42:45) $</span><br><span class=\"line\">\tmockbuild@x86-01.bsys.centos.org:&#x2F;builddir&#x2F;build&#x2F;BUILD&#x2F;openldap-2.4.44&#x2F;openldap-2.4.44&#x2F;servers&#x2F;slapd</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"配置openldap\"><a href=\"#配置openldap\" class=\"headerlink\" title=\"配置openldap\"></a>配置openldap</h3><h4 id=\"1、方式一，配置openldap管理员\"><a href=\"#1、方式一，配置openldap管理员\" class=\"headerlink\" title=\"1、方式一，配置openldap管理员\"></a>1、方式一，配置openldap管理员</h4><h5 id=\"a、-这里我配置密码为123456\"><a href=\"#a、-这里我配置密码为123456\" class=\"headerlink\" title=\"a、 这里我配置密码为123456\"></a>a、 这里我配置密码为123456</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#slappasswd -s 123456</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;SSHA&#125;y34sWhOnwBeR2hUBbTida1U&#x2F;7s0S63sB</span><br></pre></td></tr></table></figure>\n\n<p>生成的密码字段保存下来</p>\n<h5 id=\"b、修改olcDatabase-2-hdb-ldif文件\"><a href=\"#b、修改olcDatabase-2-hdb-ldif文件\" class=\"headerlink\" title=\"b、修改olcDatabase={2}hdb.ldif文件\"></a>b、修改olcDatabase={2}hdb.ldif文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn&#x3D;config&#x2F;olcDatabase&#x3D;&#123;2&#125;hdb.ldif</span><br><span class=\"line\"></span><br><span class=\"line\">修改olcDatabase&#x3D;&#123;2&#125;hdb.ldif文件,对于该文件增加一行</span><br><span class=\"line\">olcRootPW: &#123;SSHA&#125;y34sWhOnwBeR2hUBbTida1U&#x2F;7s0S63sB</span><br><span class=\"line\">，然后修改域信息：</span><br><span class=\"line\">olcSuffix: dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\">olcRootDN: cn&#x3D;admin,dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\"></span><br><span class=\"line\">修改后如下</span><br><span class=\"line\">-----------------------------------------</span><br><span class=\"line\"># AUTO-GENERATED FILE - DO NOT EDIT!! Use ldapmodify.</span><br><span class=\"line\"># CRC32 505f2856</span><br><span class=\"line\">dn: olcDatabase&#x3D;&#123;2&#125;hdb</span><br><span class=\"line\">objectClass: olcDatabaseConfig</span><br><span class=\"line\">objectClass: olcHdbConfig</span><br><span class=\"line\">olcDatabase: &#123;2&#125;hdb</span><br><span class=\"line\">olcDbDirectory: &#x2F;var&#x2F;lib&#x2F;ldap</span><br><span class=\"line\">olcSuffix: dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\">olcRootDN: cn&#x3D;admin,dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\">olcDbIndex: objectClass eq,pres</span><br><span class=\"line\">olcDbIndex: ou,cn,mail,surname,givenname eq,pres,sub</span><br><span class=\"line\">structuralObjectClass: olcHdbConfig</span><br><span class=\"line\">entryUUID: 9773d930-f089-1039-88b1-3ff9195b4b09</span><br><span class=\"line\">creatorsName: cn&#x3D;config</span><br><span class=\"line\">createTimestamp: 20200302042528Z</span><br><span class=\"line\">entryCSN: 20200302042528.964500Z#000000#000#000000</span><br><span class=\"line\">modifiersName: cn&#x3D;config</span><br><span class=\"line\">modifyTimestamp: 20200302042528Z</span><br><span class=\"line\">olcRootPW: &#123;SSHA&#125;y34sWhOnwBeR2hUBbTida1U&#x2F;7s0S63sB</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意</strong>：<code>其中cn=adm in中的admin表示OpenLDAP管理员的用户名，而olcRootPW表示OpenLDAP管理员的密码</code>。</p>\n<h5 id=\"c、修改olcDatabase-1-monitor-ldif文件\"><a href=\"#c、修改olcDatabase-1-monitor-ldif文件\" class=\"headerlink\" title=\"c、修改olcDatabase={1}monitor.ldif文件\"></a>c、修改olcDatabase={1}monitor.ldif文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">修改olcDatabase&#x3D;&#123;1&#125;monitor.ldif文件，如下：</span><br><span class=\"line\">vim &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn&#x3D;config&#x2F;olcDatabase\\&#x3D;\\&#123;1\\&#125;monitor.ldif</span><br><span class=\"line\"></span><br><span class=\"line\">olcAccess: &#123;0&#125;to * by dn.base&#x3D;&quot;gidNumber&#x3D;0+uidNumber&#x3D;0,cn&#x3D;peercred,cn&#x3D;extern</span><br><span class=\"line\"> al,cn&#x3D;auth&quot; read by dn.base&#x3D;&quot;cn&#x3D;admin,dc&#x3D;ops,dc&#x3D;com&quot; read by * none</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>注意：该修改中的dn.base是修改OpenLDAP的管理员的相关信息的。<br>验证OpenLDAP的基本配置，使用如下命令：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">5e5cb0fe ldif_read_file: checksum error on &quot;&#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn&#x3D;config&#x2F;olcDatabase&#x3D;&#123;1&#125;monitor.ldif&quot;</span><br><span class=\"line\">5e5cb0fe ldif_read_file: checksum error on &quot;&#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn&#x3D;config&#x2F;olcDatabase&#x3D;&#123;2&#125;hdb.ldif&quot;</span><br><span class=\"line\">config file testing succeeded</span><br></pre></td></tr></table></figure>\n\n<p>上面的<code>checksum error </code>报错不用管, 只要配置文件测试succeeded成功就行</p>\n<h5 id=\"d、修改文件权限\"><a href=\"#d、修改文件权限\" class=\"headerlink\" title=\"d、修改文件权限\"></a>d、修改文件权限</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chown  -R ldap.ldap &#x2F;etc&#x2F;openldap&#x2F;</span><br><span class=\"line\">chown  -R ldap.ldap &#x2F;var&#x2F;lib&#x2F;ldap&#x2F;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"e、启动服务\"><a href=\"#e、启动服务\" class=\"headerlink\" title=\"e、启动服务\"></a>e、启动服务</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable slapd</span><br><span class=\"line\">systemctl start slapd</span><br><span class=\"line\">systemctl status slapd</span><br></pre></td></tr></table></figure>\n\n\n\n<p>验证服务<br>OpenLDAP默认监听的端口是389，下面我们来看下是不是389端口，如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tcp        0      0 0.0.0.0:389             0.0.0.0:*               LISTEN      1472&#x2F;slapd          </span><br><span class=\"line\">tcp6       0      0 :::389                  :::*                    LISTEN      1472&#x2F;slapd </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2、方式二，创建olcRootDN作为管理员账号-推荐\"><a href=\"#2、方式二，创建olcRootDN作为管理员账号-推荐\" class=\"headerlink\" title=\"2、方式二，创建olcRootDN作为管理员账号(推荐)\"></a>2、方式二，创建olcRootDN作为管理员账号(推荐)</h4><p>看到前面两个配置文件，官方不推荐我们直接修改配置文件，而是通过<code>ldapmodify</code>来更新配置。</p>\n<p>类似于update by pk, 这里的pk就是dn了。</p>\n<h5 id=\"a、建rootdn-ldif\"><a href=\"#a、建rootdn-ldif\" class=\"headerlink\" title=\"a、建rootdn.ldif\"></a>a、建rootdn.ldif</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dn: olcDatabase&#x3D;&#123;2&#125;hdb,cn&#x3D;config</span><br><span class=\"line\">changetype: modify</span><br><span class=\"line\">replace: olcRootDN</span><br><span class=\"line\">olcRootDN: cn&#x3D;admin,dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">-</span><br><span class=\"line\">replace: olcSuffix</span><br><span class=\"line\">olcSuffix: dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">-</span><br><span class=\"line\">replace: olcRootPW</span><br><span class=\"line\">olcRootPW: &lt;pass&gt;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>修改olcRootDN， 设置为我们的admin: cn=admin,dc=demo,dc=com</li>\n<li>修改olcSuffix， 设置为我们的域名dc=demo,dc=com</li>\n<li>修改olcRootPW， 设置我们的admin密码, 这个需要加密，所以暂时放一个占位符，等下替换</li>\n<li>changetype变更类型， replace表示替换， add表示增加。</li>\n</ul>\n<p><strong>cn=config</strong>是全局配置，必须包含<code>objectClass: olcGlobal</code>.</p>\n<h5 id=\"b、然后创建changeroot-sh\"><a href=\"#b、然后创建changeroot-sh\" class=\"headerlink\" title=\"b、然后创建changeroot.sh\"></a>b、然后创建changeroot.sh</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">admin_pass&#x3D;&#96;slappasswd -s admin&#96;</span><br><span class=\"line\">echo &quot;admin pass is:  $&#123;admin_pass&#125;&quot;</span><br><span class=\"line\">sed &quot;s!&lt;pass&gt;!$&#123;admin_pass&#125;!g&quot;   rootdn.ldif &gt; tmp.ldif</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;备份默认配置&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">cp &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn\\&#x3D;config&#x2F;olcDatabase\\&#x3D;\\&#123;2\\&#125;hdb.ldif &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn\\&#x3D;config&#x2F;olcDatabase\\&#x3D;\\&#123;2\\&#125;hdb.ldif.bak</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;将要修改的内容：&quot;</span><br><span class=\"line\">cat tmp.ldif</span><br><span class=\"line\"></span><br><span class=\"line\">ldapmodify -Q -Y EXTERNAL -H ldapi:&#x2F;&#x2F;&#x2F; -f tmp.ldif</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;修改后的变化&quot;</span><br><span class=\"line\">diff &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn\\&#x3D;config&#x2F;olcDatabase\\&#x3D;\\&#123;2\\&#125;hdb.ldif &#x2F;etc&#x2F;openldap&#x2F;slapd.d&#x2F;cn\\&#x3D;config&#x2F;olcDatabase\\&#x3D;\\&#123;2\\&#125;hdb.ldif.bak</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>slappasswd -s admin</code> 获取加密后的密码</li>\n<li>备份原始文件</li>\n<li>ldapmodify 更新命令， -H指定host，这里<code>ldapi:///</code>表示IPC (Unix-domain socket)协议， -f指定变更的内容。 命令文档: <a href=\"http://man7.org/linux/man-pages/man1/ldapmodify.1.html\">http://man7.org/linux/man-pages/man1/ldapmodify.1.html</a></li>\n</ul>\n<p>使用脚本进行变更，而不是直接命令行交互式变更，这样可以更容易梳理变更逻辑, 而且可以重复使用。</p>\n<h3 id=\"配置OpenLDAP数据库\"><a href=\"#配置OpenLDAP数据库\" class=\"headerlink\" title=\"配置OpenLDAP数据库\"></a>配置OpenLDAP数据库</h3><h5 id=\"a、OpenLDAP默认使用的数据库是BerkeleyDB，现在来开始配置OpenLDAP数据库\"><a href=\"#a、OpenLDAP默认使用的数据库是BerkeleyDB，现在来开始配置OpenLDAP数据库\" class=\"headerlink\" title=\"a、OpenLDAP默认使用的数据库是BerkeleyDB，现在来开始配置OpenLDAP数据库\"></a>a、OpenLDAP默认使用的数据库是BerkeleyDB，现在来开始配置OpenLDAP数据库</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp &#x2F;usr&#x2F;share&#x2F;openldap-servers&#x2F;DB_CONFIG.example &#x2F;var&#x2F;lib&#x2F;ldap&#x2F;DB_CONFIG</span><br><span class=\"line\">chown ldap:ldap -R &#x2F;var&#x2F;lib&#x2F;ldap</span><br><span class=\"line\">chmod 700 -R &#x2F;var&#x2F;lib&#x2F;ldap</span><br><span class=\"line\">ll &#x2F;var&#x2F;lib&#x2F;ldap&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>注意：/var/lib/ldap/就是BerkeleyDB数据库默认存储的路径。</p>\n<h5 id=\"b、导入基本Schema\"><a href=\"#b、导入基本Schema\" class=\"headerlink\" title=\"b、导入基本Schema\"></a>b、导入基本Schema</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ldapadd -Y EXTERNAL -H ldapi:&#x2F;&#x2F;&#x2F; -f &#x2F;etc&#x2F;openldap&#x2F;schema&#x2F;cosine.ldif</span><br><span class=\"line\">ldapadd -Y EXTERNAL -H ldapi:&#x2F;&#x2F;&#x2F; -f &#x2F;etc&#x2F;openldap&#x2F;schema&#x2F;nis.ldif</span><br><span class=\"line\">ldapadd -Y EXTERNAL -H ldapi:&#x2F;&#x2F;&#x2F; -f &#x2F;etc&#x2F;openldap&#x2F;schema&#x2F;inetorgperson.ldif</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"c、修改migrate-common-ph文件\"><a href=\"#c、修改migrate-common-ph文件\" class=\"headerlink\" title=\"c、修改migrate_common.ph文件\"></a>c、修改migrate_common.ph文件</h5><p>migrate_common.ph文件主要是用于生成ldif文件使用，修改migrate_common.ph文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;usr&#x2F;share&#x2F;migrationtools&#x2F;migrate_common.ph    71行左右</span><br><span class=\"line\"></span><br><span class=\"line\">$DEFAULT_MAIL_DOMAIN &#x3D; “ops.com”;</span><br><span class=\"line\">$DEFAULT_BASE &#x3D; “dc&#x3D;ops,dc&#x3D;com”;</span><br><span class=\"line\">$EXTENDED_SCHEMA &#x3D; 1;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"添加我们的base组织结构\"><a href=\"#添加我们的base组织结构\" class=\"headerlink\" title=\"添加我们的base组织结构\"></a>添加我们的base组织结构</h4><p>创建文件base.ldif</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dn: dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\">objectClass: top</span><br><span class=\"line\">objectClass: dcObject</span><br><span class=\"line\">objectClass: organization</span><br><span class=\"line\">o: ldap测试组织</span><br><span class=\"line\">dc: demo</span><br><span class=\"line\"></span><br><span class=\"line\">dn: cn&#x3D;admin,dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\">objectClass: organizationalRole</span><br><span class=\"line\">cn: Manager</span><br><span class=\"line\">description: 组织管理人</span><br><span class=\"line\"></span><br><span class=\"line\">dn: ou&#x3D;People,dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">objectClass: organizationalUnit</span><br><span class=\"line\">ou: People</span><br><span class=\"line\"></span><br><span class=\"line\">dn: ou&#x3D;Group,dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">objectClass: organizationalUnit</span><br><span class=\"line\">ou: Group</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>使用<code>ldapadd</code>添加base:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ldapadd -x -D cn&#x3D;admin,dc&#x3D;demo,dc&#x3D;com -w admin -f base.ldif </span><br></pre></td></tr></table></figure>\n\n<p>使用<code>ldapsearch</code>来检查内容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@a1791f1044ba data]# ldapsearch -x -D cn&#x3D;admin,dc&#x3D;ops,dc&#x3D;com -w 123456 -b &quot;dc&#x3D;ops,dc&#x3D;com&quot;</span><br><span class=\"line\"># extended LDIF</span><br><span class=\"line\">#</span><br><span class=\"line\"># LDAPv3</span><br><span class=\"line\"># base &lt;dc&#x3D;demo,dc&#x3D;com&gt; with scope subtree</span><br><span class=\"line\"># filter: (objectclass&#x3D;*)</span><br><span class=\"line\"># requesting: ALL</span><br><span class=\"line\">#</span><br><span class=\"line\"></span><br><span class=\"line\"># ops.com</span><br><span class=\"line\">dn: dc&#x3D;ops,dc&#x3D;com</span><br><span class=\"line\">objectClass: top</span><br><span class=\"line\">objectClass: dcObject</span><br><span class=\"line\">objectClass: organization</span><br><span class=\"line\">o:: bGRhcOa1i+ivlee7hOe7hw&#x3D;&#x3D;</span><br><span class=\"line\">dc: demo</span><br><span class=\"line\"></span><br><span class=\"line\"># Manager, demo.com</span><br><span class=\"line\">dn: cn&#x3D;Manager,dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">objectClass: organizationalRole</span><br><span class=\"line\">cn: Manager</span><br><span class=\"line\">description:: 57uE57uH566h55CG5Lq6</span><br><span class=\"line\"></span><br><span class=\"line\"># People, demo.com</span><br><span class=\"line\">dn: ou&#x3D;People,dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">objectClass: organizationalUnit</span><br><span class=\"line\">ou: People</span><br><span class=\"line\"></span><br><span class=\"line\"># Group, demo.com</span><br><span class=\"line\">dn: ou&#x3D;Group,dc&#x3D;demo,dc&#x3D;com</span><br><span class=\"line\">objectClass: organizationalUnit</span><br><span class=\"line\">ou: Group</span><br><span class=\"line\"></span><br><span class=\"line\"># search result</span><br><span class=\"line\">search: 2</span><br><span class=\"line\">result: 0 Success</span><br><span class=\"line\"></span><br><span class=\"line\"># numResponses: 5</span><br><span class=\"line\"># numEntries: 4</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"添加用户\"><a href=\"#添加用户\" class=\"headerlink\" title=\"添加用户\"></a>添加用户</h4><p>添加人员对应的是树的叶子节点，使用的  <code>oebjectClass： inetOrgPerson</code>。</p>\n<p>添加组织部门对应的是目录，使用的  <code>objectClass: organizationalUnit</code>.</p>\n"},{"title":"jenkins 常见问题","date":"2019-12-18T02:00:00.000Z","_content":"\n\n\n\n\n### jenkins 工作目录修改\n\n**旧**：\n\n```\n系统管理→系统设置→主目录（的右边问号下面）→高级（是不是忽略了啊\\(^o^)/~）→工作空间根目录\n```\n\n点开后面的问号可以看见3个参数（配置路径需要的）：\n\n1. - `${JENKINS_HOME}` — **Jenkins** home directory.#JENKINS_HOME这个参数不用说了\n   - `${ITEM_ROOTDIR}` — Root directory of a job for which the default workspace is allocated.#ITEM_ROOTDIR：默认的工作空间目录。完整的路径就是JENKINS_HOME/jobs/xxxx/workspace \n   - `${ITEM_FULL_NAME}` — '/'-separated job name, like \"foo/bar\".#ITEM_FULL_NAME：job的名称，这个就是我们需要的。\n\n 我们只需要把workspace目录赶出JENKINS_HOME目录就行了。上配置：\n\n```\nworkspace：/home/froad/workspace/${ITEM_FULL_NAME}#前面的目录随便你改，只需要在最后带上${ITEM_FULL_NAME}JENKINS_HOME：/home/froad/.jenkins#给你们对比着看\n#好了，这下.svn目录不打架了。我也不用头疼了。\n```\n\n删除已经存在的workspace目录\n\n```\nfind . -type d -name\"workspace\"|xargs rm -rf#看见find后面的那个点了么，改成你的路径就行了\n```\n\n**新**：\n\n```\n在  config.xml   文件内，查找 workspaceDir 关键字，将你的自定义 工作空间根目录 地址替换默认的地址\n```\n\n```\n  <workspaceDir>/opt/jenkins/workspace/${ITEM_FULL_NAME}</workspaceDir>\n```\n\n重启jenkins","source":"_posts/jenkins/jenkins.md","raw":"---\ntitle: jenkins 常见问题\ndate: 2019-12-18 10:00:00\ncategories: \n- jenkins\ntags:\n- jenkins\n---\n\n\n\n\n\n### jenkins 工作目录修改\n\n**旧**：\n\n```\n系统管理→系统设置→主目录（的右边问号下面）→高级（是不是忽略了啊\\(^o^)/~）→工作空间根目录\n```\n\n点开后面的问号可以看见3个参数（配置路径需要的）：\n\n1. - `${JENKINS_HOME}` — **Jenkins** home directory.#JENKINS_HOME这个参数不用说了\n   - `${ITEM_ROOTDIR}` — Root directory of a job for which the default workspace is allocated.#ITEM_ROOTDIR：默认的工作空间目录。完整的路径就是JENKINS_HOME/jobs/xxxx/workspace \n   - `${ITEM_FULL_NAME}` — '/'-separated job name, like \"foo/bar\".#ITEM_FULL_NAME：job的名称，这个就是我们需要的。\n\n 我们只需要把workspace目录赶出JENKINS_HOME目录就行了。上配置：\n\n```\nworkspace：/home/froad/workspace/${ITEM_FULL_NAME}#前面的目录随便你改，只需要在最后带上${ITEM_FULL_NAME}JENKINS_HOME：/home/froad/.jenkins#给你们对比着看\n#好了，这下.svn目录不打架了。我也不用头疼了。\n```\n\n删除已经存在的workspace目录\n\n```\nfind . -type d -name\"workspace\"|xargs rm -rf#看见find后面的那个点了么，改成你的路径就行了\n```\n\n**新**：\n\n```\n在  config.xml   文件内，查找 workspaceDir 关键字，将你的自定义 工作空间根目录 地址替换默认的地址\n```\n\n```\n  <workspaceDir>/opt/jenkins/workspace/${ITEM_FULL_NAME}</workspaceDir>\n```\n\n重启jenkins","slug":"jenkins/jenkins","published":1,"updated":"2021-01-27T08:20:35.754Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2t002kq0usb0nxhwv2","content":"<h3 id=\"jenkins-工作目录修改\"><a href=\"#jenkins-工作目录修改\" class=\"headerlink\" title=\"jenkins 工作目录修改\"></a>jenkins 工作目录修改</h3><p><strong>旧</strong>：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">系统管理→系统设置→主目录（的右边问号下面）→高级（是不是忽略了啊\\(^o^)&#x2F;~）→工作空间根目录</span><br></pre></td></tr></table></figure>\n\n<p>点开后面的问号可以看见3个参数（配置路径需要的）：</p>\n<ol>\n<li><ul>\n<li><code>$&#123;JENKINS_HOME&#125;</code> — <strong>Jenkins</strong> home directory.#JENKINS_HOME这个参数不用说了</li>\n<li><code>$&#123;ITEM_ROOTDIR&#125;</code> — Root directory of a job for which the default workspace is allocated.#ITEM_ROOTDIR：默认的工作空间目录。完整的路径就是JENKINS_HOME/jobs/xxxx/workspace </li>\n<li><code>$&#123;ITEM_FULL_NAME&#125;</code> — ‘/‘-separated job name, like “foo/bar”.#ITEM_FULL_NAME：job的名称，这个就是我们需要的。</li>\n</ul>\n<p>我们只需要把workspace目录赶出JENKINS_HOME目录就行了。上配置：</p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">workspace：&#x2F;home&#x2F;froad&#x2F;workspace&#x2F;$&#123;ITEM_FULL_NAME&#125;#前面的目录随便你改，只需要在最后带上$&#123;ITEM_FULL_NAME&#125;JENKINS_HOME：&#x2F;home&#x2F;froad&#x2F;.jenkins#给你们对比着看</span><br><span class=\"line\">#好了，这下.svn目录不打架了。我也不用头疼了。</span><br></pre></td></tr></table></figure>\n\n<p>删除已经存在的workspace目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find . -type d -name&quot;workspace&quot;|xargs rm -rf#看见find后面的那个点了么，改成你的路径就行了</span><br></pre></td></tr></table></figure>\n\n<p><strong>新</strong>：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在  config.xml   文件内，查找 workspaceDir 关键字，将你的自定义 工作空间根目录 地址替换默认的地址</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;workspaceDir&gt;&#x2F;opt&#x2F;jenkins&#x2F;workspace&#x2F;$&#123;ITEM_FULL_NAME&#125;&lt;&#x2F;workspaceDir&gt;</span><br></pre></td></tr></table></figure>\n\n<p>重启jenkins</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"jenkins-工作目录修改\"><a href=\"#jenkins-工作目录修改\" class=\"headerlink\" title=\"jenkins 工作目录修改\"></a>jenkins 工作目录修改</h3><p><strong>旧</strong>：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">系统管理→系统设置→主目录（的右边问号下面）→高级（是不是忽略了啊\\(^o^)&#x2F;~）→工作空间根目录</span><br></pre></td></tr></table></figure>\n\n<p>点开后面的问号可以看见3个参数（配置路径需要的）：</p>\n<ol>\n<li><ul>\n<li><code>$&#123;JENKINS_HOME&#125;</code> — <strong>Jenkins</strong> home directory.#JENKINS_HOME这个参数不用说了</li>\n<li><code>$&#123;ITEM_ROOTDIR&#125;</code> — Root directory of a job for which the default workspace is allocated.#ITEM_ROOTDIR：默认的工作空间目录。完整的路径就是JENKINS_HOME/jobs/xxxx/workspace </li>\n<li><code>$&#123;ITEM_FULL_NAME&#125;</code> — ‘/‘-separated job name, like “foo/bar”.#ITEM_FULL_NAME：job的名称，这个就是我们需要的。</li>\n</ul>\n<p>我们只需要把workspace目录赶出JENKINS_HOME目录就行了。上配置：</p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">workspace：&#x2F;home&#x2F;froad&#x2F;workspace&#x2F;$&#123;ITEM_FULL_NAME&#125;#前面的目录随便你改，只需要在最后带上$&#123;ITEM_FULL_NAME&#125;JENKINS_HOME：&#x2F;home&#x2F;froad&#x2F;.jenkins#给你们对比着看</span><br><span class=\"line\">#好了，这下.svn目录不打架了。我也不用头疼了。</span><br></pre></td></tr></table></figure>\n\n<p>删除已经存在的workspace目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find . -type d -name&quot;workspace&quot;|xargs rm -rf#看见find后面的那个点了么，改成你的路径就行了</span><br></pre></td></tr></table></figure>\n\n<p><strong>新</strong>：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在  config.xml   文件内，查找 workspaceDir 关键字，将你的自定义 工作空间根目录 地址替换默认的地址</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;workspaceDir&gt;&#x2F;opt&#x2F;jenkins&#x2F;workspace&#x2F;$&#123;ITEM_FULL_NAME&#125;&lt;&#x2F;workspaceDir&gt;</span><br></pre></td></tr></table></figure>\n\n<p>重启jenkins</p>\n"},{"title":"minio安装","date":"2019-12-13T06:00:00.000Z","_content":"\n\n摘要：\n<!-- more -->\n\n### 分布式Minio有什么好处?\n\n在大数据领域，通常的设计理念都是无中心和分布式。Minio分布式模式可以帮助你搭建一个高可用的对象存储服务，你可以使用这些存储设备，而不用考虑其真实物理位置。\n\n**数据保护**\n\n分布式Minio采用 erasure code（纠删码）来防范多个节点宕机和位衰减bit rot。\n\n分布式Minio至少需要4个节点，使用分布式Minio自动引入了纠删码功能。\n\n**高可用**\n\n单机Minio服务存在单点故障，相反，如果是一个N节点的分布式Minio,只要有N/2节点在线，你的数据就是安全的。不过你需要至少有N/2+1个节点 Quorum 来创建新的对象。\n\n例如，一个8节点的Minio集群，每个节点一块盘，就算4个节点宕机，这个集群仍然是可读的，不过你需要5个节点才能写数据。\n\n**限制**\n\n分布式Minio单租户存在最少4个盘最多16个盘的限制（受限于纠删码）。这种限制确保了Minio的简洁，同时仍拥有伸缩性。如果你需要搭建一个多租户环境，你可以轻松的使用编排工具（Kubernetes）来管理多个Minio实例。\n\n注意，只要遵守分布式Minio的限制，你可以组合不同的节点和每个节点几块盘。比如，你可以使用2个节点，每个节点4块盘，也可以使用4个节点，每个节点两块盘，诸如此类。\n\n**一致性**\n\nMinio在分布式和单机模式下，所有读写操作都严格遵守read-after-write一致性模型。\n\n\n\n### 纠删码 (多块硬盘 / 服务)\n\n| 项目           | 参数    |\n| -------------- | ------- |\n| 最大驱动器数量 | 16      |\n| 最小驱动器数量 | 4       |\n| 读仲裁         | N / 2   |\n| 写仲裁         | N / 2+1 |\n\n\n\n\n\n## Minio分布式集群搭建\n\n生产环境建议最少4节点\n\n|  节点   |      IP       |       data       |      home      |\n| :-----: | :-----------: | :--------------: | :------------: |\n| minio01 | 172.28.105.11 | /data/minio_data | /opt/minio/bin |\n| minio02 | 172.28.105.12 | /data/minio_data | /opt/minio/bin |\n| minio03 | 172.28.105.13 | /data/minio_data | /opt/minio/bin |\n| minio04 | 172.28.105.14 | /data/minio_data | /opt/minio/bin |\n\n\n\n### 获取Minio\n\n```\nwget https://dl.min.io/server/minio/release/linux-amd64/minio\n```\n\n### 目录创建\n\n```\nmkdir -p /data/minio_data\nmkdir -p /etc/minio\nmkdir -p /opt/minio/bin\n```\n\n### 集群启动文件\n\n创建/opt/minio/bin/run.sh\n\n```shell\n#!/bin/bash\nexport MINIO_ACCESS_KEY=root\nexport MINIO_SECRET_KEY=12345678\n\n/data/minio/run/minio server --config-dir /etc/minio \\\nhttp://172.28.105.11/data/minio_data \\\nhttp://172.28.105.12/data/minio_data \\\nhttp://172.28.105.13/data/minio_data \\\nhttp://172.28.105.14/data/minio_data \\\n```\n\n- MINIO_ACCESS_KEY：  用户名，长度最小是5个字符\n- MINIO_SECRET_KEY：  密码，密码不能设置过于简单，不然minio会启动失败，长度最小是8个字符\n- --config-dir：  指定集群配置文件目录\n\n### 创建服务\n\n创建/usr/lib/systemd/system/minio.service\n\n- WorkingDirectory：二进制文件目录\n- ExecStart：指定集群启动脚本\n\n\n\n```shell\ncat > /usr/lib/systemd/system/minio.service <<EOF\n[Unit]\nDescription=Minio service\nDocumentation=https://docs.minio.io/\n\n[Service]\nWorkingDirectory=/opt/minio/\nExecStart=/opt/minio/bin/run.sh\n\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\nEOF\n```\n\n### 二进制文件\n\n将minio二进制文件上传到/data/minio/run目录\n\n```\ncp minio /opt/minio/bin\nchmo +x /opt/minio/bin/minio\nchmo +x /opt/minio/bin/run.sh\nchmod +x /usr/lib/systemd/system/minio.service\n```\n\n\n\n### 启动集群\n\n```shell\nsystemctl daemon-reload\nsystemctl enable minio && systemctl start minio\n```\n\n\n\n\n\n## 通过nginx代理集群\n\n### 配置负载均衡\n\n```shell\n#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n\tupstream minio{\n\t        server 172.28.105.11:9000;\n\t        server 172.28.105.12:9000;\n\t        server 172.28.105.13:9000;\n\t        server 172.28.105.14:9000;\n\t}\n\n    server {\n        listen 9001;\n        server_name 172.28.105.10;\n        location / {\n                proxy_pass http://minio;\n                proxy_set_header Host $http_host;\n                client_max_body_size 1000m;\n        }\n\t}\n\n}\n```\n\n\n\n\n\n## mc客户端配置\n\n### 下载\n\n```\nwget https://dl.min.io/client/mc/release/linux-amd64/mc\n```\n\n### 简单操作\n\n```\nmc config host add <ALIAS> <YOUR-S3-ENDPOINT> <YOUR-ACCESS-KEY> <YOUR-SECRET-KEY> [--api API-SIGNATURE]\n```\n\n\n\n```csharp\nmc config host add myminio http://172.28.105.11:9000 6FN56FQD3BBYYFHRV8CV 99HwhtPhIpVph+eyNh5ouRcorCBAvGUiVM3LXtuq\n\nmc ls play                    # 列出所有桶\nmc mb myminio/testbucket        # 创建桶\nmc cp io.out myminio/testbucket       # 拷贝测试文件\nmc ls myminio/testbucket           # 列出目录\nmc policy public  myminio/testbucket      # 设置公开权限  [none, download, upload, public]\n```","source":"_posts/minio/minio.md","raw":"---\ntitle: minio安装\ndate: 2019-12-13 14:00:00\ncategories: \n- minio\ntags:\n- minio\n---\n\n\n摘要：\n<!-- more -->\n\n### 分布式Minio有什么好处?\n\n在大数据领域，通常的设计理念都是无中心和分布式。Minio分布式模式可以帮助你搭建一个高可用的对象存储服务，你可以使用这些存储设备，而不用考虑其真实物理位置。\n\n**数据保护**\n\n分布式Minio采用 erasure code（纠删码）来防范多个节点宕机和位衰减bit rot。\n\n分布式Minio至少需要4个节点，使用分布式Minio自动引入了纠删码功能。\n\n**高可用**\n\n单机Minio服务存在单点故障，相反，如果是一个N节点的分布式Minio,只要有N/2节点在线，你的数据就是安全的。不过你需要至少有N/2+1个节点 Quorum 来创建新的对象。\n\n例如，一个8节点的Minio集群，每个节点一块盘，就算4个节点宕机，这个集群仍然是可读的，不过你需要5个节点才能写数据。\n\n**限制**\n\n分布式Minio单租户存在最少4个盘最多16个盘的限制（受限于纠删码）。这种限制确保了Minio的简洁，同时仍拥有伸缩性。如果你需要搭建一个多租户环境，你可以轻松的使用编排工具（Kubernetes）来管理多个Minio实例。\n\n注意，只要遵守分布式Minio的限制，你可以组合不同的节点和每个节点几块盘。比如，你可以使用2个节点，每个节点4块盘，也可以使用4个节点，每个节点两块盘，诸如此类。\n\n**一致性**\n\nMinio在分布式和单机模式下，所有读写操作都严格遵守read-after-write一致性模型。\n\n\n\n### 纠删码 (多块硬盘 / 服务)\n\n| 项目           | 参数    |\n| -------------- | ------- |\n| 最大驱动器数量 | 16      |\n| 最小驱动器数量 | 4       |\n| 读仲裁         | N / 2   |\n| 写仲裁         | N / 2+1 |\n\n\n\n\n\n## Minio分布式集群搭建\n\n生产环境建议最少4节点\n\n|  节点   |      IP       |       data       |      home      |\n| :-----: | :-----------: | :--------------: | :------------: |\n| minio01 | 172.28.105.11 | /data/minio_data | /opt/minio/bin |\n| minio02 | 172.28.105.12 | /data/minio_data | /opt/minio/bin |\n| minio03 | 172.28.105.13 | /data/minio_data | /opt/minio/bin |\n| minio04 | 172.28.105.14 | /data/minio_data | /opt/minio/bin |\n\n\n\n### 获取Minio\n\n```\nwget https://dl.min.io/server/minio/release/linux-amd64/minio\n```\n\n### 目录创建\n\n```\nmkdir -p /data/minio_data\nmkdir -p /etc/minio\nmkdir -p /opt/minio/bin\n```\n\n### 集群启动文件\n\n创建/opt/minio/bin/run.sh\n\n```shell\n#!/bin/bash\nexport MINIO_ACCESS_KEY=root\nexport MINIO_SECRET_KEY=12345678\n\n/data/minio/run/minio server --config-dir /etc/minio \\\nhttp://172.28.105.11/data/minio_data \\\nhttp://172.28.105.12/data/minio_data \\\nhttp://172.28.105.13/data/minio_data \\\nhttp://172.28.105.14/data/minio_data \\\n```\n\n- MINIO_ACCESS_KEY：  用户名，长度最小是5个字符\n- MINIO_SECRET_KEY：  密码，密码不能设置过于简单，不然minio会启动失败，长度最小是8个字符\n- --config-dir：  指定集群配置文件目录\n\n### 创建服务\n\n创建/usr/lib/systemd/system/minio.service\n\n- WorkingDirectory：二进制文件目录\n- ExecStart：指定集群启动脚本\n\n\n\n```shell\ncat > /usr/lib/systemd/system/minio.service <<EOF\n[Unit]\nDescription=Minio service\nDocumentation=https://docs.minio.io/\n\n[Service]\nWorkingDirectory=/opt/minio/\nExecStart=/opt/minio/bin/run.sh\n\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\nEOF\n```\n\n### 二进制文件\n\n将minio二进制文件上传到/data/minio/run目录\n\n```\ncp minio /opt/minio/bin\nchmo +x /opt/minio/bin/minio\nchmo +x /opt/minio/bin/run.sh\nchmod +x /usr/lib/systemd/system/minio.service\n```\n\n\n\n### 启动集群\n\n```shell\nsystemctl daemon-reload\nsystemctl enable minio && systemctl start minio\n```\n\n\n\n\n\n## 通过nginx代理集群\n\n### 配置负载均衡\n\n```shell\n#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n\tupstream minio{\n\t        server 172.28.105.11:9000;\n\t        server 172.28.105.12:9000;\n\t        server 172.28.105.13:9000;\n\t        server 172.28.105.14:9000;\n\t}\n\n    server {\n        listen 9001;\n        server_name 172.28.105.10;\n        location / {\n                proxy_pass http://minio;\n                proxy_set_header Host $http_host;\n                client_max_body_size 1000m;\n        }\n\t}\n\n}\n```\n\n\n\n\n\n## mc客户端配置\n\n### 下载\n\n```\nwget https://dl.min.io/client/mc/release/linux-amd64/mc\n```\n\n### 简单操作\n\n```\nmc config host add <ALIAS> <YOUR-S3-ENDPOINT> <YOUR-ACCESS-KEY> <YOUR-SECRET-KEY> [--api API-SIGNATURE]\n```\n\n\n\n```csharp\nmc config host add myminio http://172.28.105.11:9000 6FN56FQD3BBYYFHRV8CV 99HwhtPhIpVph+eyNh5ouRcorCBAvGUiVM3LXtuq\n\nmc ls play                    # 列出所有桶\nmc mb myminio/testbucket        # 创建桶\nmc cp io.out myminio/testbucket       # 拷贝测试文件\nmc ls myminio/testbucket           # 列出目录\nmc policy public  myminio/testbucket      # 设置公开权限  [none, download, upload, public]\n```","slug":"minio/minio","published":1,"updated":"2021-01-27T08:20:35.760Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2u002mq0usblag398f","content":"<p>摘要：</p>\n<a id=\"more\"></a>\n\n<h3 id=\"分布式Minio有什么好处\"><a href=\"#分布式Minio有什么好处\" class=\"headerlink\" title=\"分布式Minio有什么好处?\"></a>分布式Minio有什么好处?</h3><p>在大数据领域，通常的设计理念都是无中心和分布式。Minio分布式模式可以帮助你搭建一个高可用的对象存储服务，你可以使用这些存储设备，而不用考虑其真实物理位置。</p>\n<p><strong>数据保护</strong></p>\n<p>分布式Minio采用 erasure code（纠删码）来防范多个节点宕机和位衰减bit rot。</p>\n<p>分布式Minio至少需要4个节点，使用分布式Minio自动引入了纠删码功能。</p>\n<p><strong>高可用</strong></p>\n<p>单机Minio服务存在单点故障，相反，如果是一个N节点的分布式Minio,只要有N/2节点在线，你的数据就是安全的。不过你需要至少有N/2+1个节点 Quorum 来创建新的对象。</p>\n<p>例如，一个8节点的Minio集群，每个节点一块盘，就算4个节点宕机，这个集群仍然是可读的，不过你需要5个节点才能写数据。</p>\n<p><strong>限制</strong></p>\n<p>分布式Minio单租户存在最少4个盘最多16个盘的限制（受限于纠删码）。这种限制确保了Minio的简洁，同时仍拥有伸缩性。如果你需要搭建一个多租户环境，你可以轻松的使用编排工具（Kubernetes）来管理多个Minio实例。</p>\n<p>注意，只要遵守分布式Minio的限制，你可以组合不同的节点和每个节点几块盘。比如，你可以使用2个节点，每个节点4块盘，也可以使用4个节点，每个节点两块盘，诸如此类。</p>\n<p><strong>一致性</strong></p>\n<p>Minio在分布式和单机模式下，所有读写操作都严格遵守read-after-write一致性模型。</p>\n<h3 id=\"纠删码-多块硬盘-服务\"><a href=\"#纠删码-多块硬盘-服务\" class=\"headerlink\" title=\"纠删码 (多块硬盘 / 服务)\"></a>纠删码 (多块硬盘 / 服务)</h3><table>\n<thead>\n<tr>\n<th>项目</th>\n<th>参数</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>最大驱动器数量</td>\n<td>16</td>\n</tr>\n<tr>\n<td>最小驱动器数量</td>\n<td>4</td>\n</tr>\n<tr>\n<td>读仲裁</td>\n<td>N / 2</td>\n</tr>\n<tr>\n<td>写仲裁</td>\n<td>N / 2+1</td>\n</tr>\n</tbody></table>\n<h2 id=\"Minio分布式集群搭建\"><a href=\"#Minio分布式集群搭建\" class=\"headerlink\" title=\"Minio分布式集群搭建\"></a>Minio分布式集群搭建</h2><p>生产环境建议最少4节点</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">节点</th>\n<th align=\"center\">IP</th>\n<th align=\"center\">data</th>\n<th align=\"center\">home</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">minio01</td>\n<td align=\"center\">172.28.105.11</td>\n<td align=\"center\">/data/minio_data</td>\n<td align=\"center\">/opt/minio/bin</td>\n</tr>\n<tr>\n<td align=\"center\">minio02</td>\n<td align=\"center\">172.28.105.12</td>\n<td align=\"center\">/data/minio_data</td>\n<td align=\"center\">/opt/minio/bin</td>\n</tr>\n<tr>\n<td align=\"center\">minio03</td>\n<td align=\"center\">172.28.105.13</td>\n<td align=\"center\">/data/minio_data</td>\n<td align=\"center\">/opt/minio/bin</td>\n</tr>\n<tr>\n<td align=\"center\">minio04</td>\n<td align=\"center\">172.28.105.14</td>\n<td align=\"center\">/data/minio_data</td>\n<td align=\"center\">/opt/minio/bin</td>\n</tr>\n</tbody></table>\n<h3 id=\"获取Minio\"><a href=\"#获取Minio\" class=\"headerlink\" title=\"获取Minio\"></a>获取Minio</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;dl.min.io&#x2F;server&#x2F;minio&#x2F;release&#x2F;linux-amd64&#x2F;minio</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"目录创建\"><a href=\"#目录创建\" class=\"headerlink\" title=\"目录创建\"></a>目录创建</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p &#x2F;data&#x2F;minio_data</span><br><span class=\"line\">mkdir -p &#x2F;etc&#x2F;minio</span><br><span class=\"line\">mkdir -p &#x2F;opt&#x2F;minio&#x2F;bin</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"集群启动文件\"><a href=\"#集群启动文件\" class=\"headerlink\" title=\"集群启动文件\"></a>集群启动文件</h3><p>创建/opt/minio/bin/run.sh</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">export MINIO_ACCESS_KEY=root</span><br><span class=\"line\">export MINIO_SECRET_KEY=12345678</span><br><span class=\"line\"></span><br><span class=\"line\">/data/minio/run/minio server --config-dir /etc/minio \\</span><br><span class=\"line\">http://172.28.105.11/data/minio_data \\</span><br><span class=\"line\">http://172.28.105.12/data/minio_data \\</span><br><span class=\"line\">http://172.28.105.13/data/minio_data \\</span><br><span class=\"line\">http://172.28.105.14/data/minio_data \\</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>MINIO_ACCESS_KEY：  用户名，长度最小是5个字符</li>\n<li>MINIO_SECRET_KEY：  密码，密码不能设置过于简单，不然minio会启动失败，长度最小是8个字符</li>\n<li>–config-dir：  指定集群配置文件目录</li>\n</ul>\n<h3 id=\"创建服务\"><a href=\"#创建服务\" class=\"headerlink\" title=\"创建服务\"></a>创建服务</h3><p>创建/usr/lib/systemd/system/minio.service</p>\n<ul>\n<li>WorkingDirectory：二进制文件目录</li>\n<li>ExecStart：指定集群启动脚本</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat &gt; /usr/lib/systemd/system/minio.service &lt;&lt;EOF</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Minio service</span><br><span class=\"line\">Documentation=https://docs.minio.io/</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">WorkingDirectory=/opt/minio/</span><br><span class=\"line\">ExecStart=/opt/minio/bin/run.sh</span><br><span class=\"line\"></span><br><span class=\"line\">Restart=on-failure</span><br><span class=\"line\">RestartSec=5</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"二进制文件\"><a href=\"#二进制文件\" class=\"headerlink\" title=\"二进制文件\"></a>二进制文件</h3><p>将minio二进制文件上传到/data/minio/run目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp minio &#x2F;opt&#x2F;minio&#x2F;bin</span><br><span class=\"line\">chmo +x &#x2F;opt&#x2F;minio&#x2F;bin&#x2F;minio</span><br><span class=\"line\">chmo +x &#x2F;opt&#x2F;minio&#x2F;bin&#x2F;run.sh</span><br><span class=\"line\">chmod +x &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;minio.service</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"启动集群\"><a href=\"#启动集群\" class=\"headerlink\" title=\"启动集群\"></a>启动集群</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl enable minio &amp;&amp; systemctl start minio</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"通过nginx代理集群\"><a href=\"#通过nginx代理集群\" class=\"headerlink\" title=\"通过nginx代理集群\"></a>通过nginx代理集群</h2><h3 id=\"配置负载均衡\"><a href=\"#配置负载均衡\" class=\"headerlink\" title=\"配置负载均衡\"></a>配置负载均衡</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">user  nobody;</span></span><br><span class=\"line\">worker_processes  1;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">error_log  logs/error.log;</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">error_log  logs/error.log  notice;</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">error_log  logs/error.log  info;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">pid        logs/nginx.pid;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">    worker_connections  1024;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">http &#123;</span><br><span class=\"line\">    include       mime.types;</span><br><span class=\"line\">    default_type  application/octet-stream;</span><br><span class=\"line\"></span><br><span class=\"line\">    #log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class=\"line\">    #                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class=\"line\">    #                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">    #access_log  logs/access.log  main;</span><br><span class=\"line\"></span><br><span class=\"line\">    sendfile        on;</span><br><span class=\"line\">    #tcp_nopush     on;</span><br><span class=\"line\"></span><br><span class=\"line\">    #keepalive_timeout  0;</span><br><span class=\"line\">    keepalive_timeout  65;</span><br><span class=\"line\"></span><br><span class=\"line\">    #gzip  on;</span><br><span class=\"line\"></span><br><span class=\"line\">\tupstream minio&#123;</span><br><span class=\"line\">\t        server 172.28.105.11:9000;</span><br><span class=\"line\">\t        server 172.28.105.12:9000;</span><br><span class=\"line\">\t        server 172.28.105.13:9000;</span><br><span class=\"line\">\t        server 172.28.105.14:9000;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen 9001;</span><br><span class=\"line\">        server_name 172.28.105.10;</span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">                proxy_pass http://minio;</span><br><span class=\"line\">                proxy_set_header Host $http_host;</span><br><span class=\"line\">                client_max_body_size 1000m;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"mc客户端配置\"><a href=\"#mc客户端配置\" class=\"headerlink\" title=\"mc客户端配置\"></a>mc客户端配置</h2><h3 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;dl.min.io&#x2F;client&#x2F;mc&#x2F;release&#x2F;linux-amd64&#x2F;mc</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"简单操作\"><a href=\"#简单操作\" class=\"headerlink\" title=\"简单操作\"></a>简单操作</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mc config host add &lt;ALIAS&gt; &lt;YOUR-S3-ENDPOINT&gt; &lt;YOUR-ACCESS-KEY&gt; &lt;YOUR-SECRET-KEY&gt; [--api API-SIGNATURE]</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mc config host <span class=\"keyword\">add</span> myminio http:<span class=\"comment\">//172.28.105.11:9000 6FN56FQD3BBYYFHRV8CV 99HwhtPhIpVph+eyNh5ouRcorCBAvGUiVM3LXtuq</span></span><br><span class=\"line\"></span><br><span class=\"line\">mc ls play                    <span class=\"meta\"># 列出所有桶</span></span><br><span class=\"line\">mc mb myminio/testbucket        <span class=\"meta\"># 创建桶</span></span><br><span class=\"line\">mc cp io.<span class=\"keyword\">out</span> myminio/testbucket       <span class=\"meta\"># 拷贝测试文件</span></span><br><span class=\"line\">mc ls myminio/testbucket           <span class=\"meta\"># 列出目录</span></span><br><span class=\"line\">mc policy <span class=\"keyword\">public</span>  myminio/testbucket      <span class=\"meta\"># 设置公开权限  [none, download, upload, public]</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<p>摘要：</p>","more":"<h3 id=\"分布式Minio有什么好处\"><a href=\"#分布式Minio有什么好处\" class=\"headerlink\" title=\"分布式Minio有什么好处?\"></a>分布式Minio有什么好处?</h3><p>在大数据领域，通常的设计理念都是无中心和分布式。Minio分布式模式可以帮助你搭建一个高可用的对象存储服务，你可以使用这些存储设备，而不用考虑其真实物理位置。</p>\n<p><strong>数据保护</strong></p>\n<p>分布式Minio采用 erasure code（纠删码）来防范多个节点宕机和位衰减bit rot。</p>\n<p>分布式Minio至少需要4个节点，使用分布式Minio自动引入了纠删码功能。</p>\n<p><strong>高可用</strong></p>\n<p>单机Minio服务存在单点故障，相反，如果是一个N节点的分布式Minio,只要有N/2节点在线，你的数据就是安全的。不过你需要至少有N/2+1个节点 Quorum 来创建新的对象。</p>\n<p>例如，一个8节点的Minio集群，每个节点一块盘，就算4个节点宕机，这个集群仍然是可读的，不过你需要5个节点才能写数据。</p>\n<p><strong>限制</strong></p>\n<p>分布式Minio单租户存在最少4个盘最多16个盘的限制（受限于纠删码）。这种限制确保了Minio的简洁，同时仍拥有伸缩性。如果你需要搭建一个多租户环境，你可以轻松的使用编排工具（Kubernetes）来管理多个Minio实例。</p>\n<p>注意，只要遵守分布式Minio的限制，你可以组合不同的节点和每个节点几块盘。比如，你可以使用2个节点，每个节点4块盘，也可以使用4个节点，每个节点两块盘，诸如此类。</p>\n<p><strong>一致性</strong></p>\n<p>Minio在分布式和单机模式下，所有读写操作都严格遵守read-after-write一致性模型。</p>\n<h3 id=\"纠删码-多块硬盘-服务\"><a href=\"#纠删码-多块硬盘-服务\" class=\"headerlink\" title=\"纠删码 (多块硬盘 / 服务)\"></a>纠删码 (多块硬盘 / 服务)</h3><table>\n<thead>\n<tr>\n<th>项目</th>\n<th>参数</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>最大驱动器数量</td>\n<td>16</td>\n</tr>\n<tr>\n<td>最小驱动器数量</td>\n<td>4</td>\n</tr>\n<tr>\n<td>读仲裁</td>\n<td>N / 2</td>\n</tr>\n<tr>\n<td>写仲裁</td>\n<td>N / 2+1</td>\n</tr>\n</tbody></table>\n<h2 id=\"Minio分布式集群搭建\"><a href=\"#Minio分布式集群搭建\" class=\"headerlink\" title=\"Minio分布式集群搭建\"></a>Minio分布式集群搭建</h2><p>生产环境建议最少4节点</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">节点</th>\n<th align=\"center\">IP</th>\n<th align=\"center\">data</th>\n<th align=\"center\">home</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">minio01</td>\n<td align=\"center\">172.28.105.11</td>\n<td align=\"center\">/data/minio_data</td>\n<td align=\"center\">/opt/minio/bin</td>\n</tr>\n<tr>\n<td align=\"center\">minio02</td>\n<td align=\"center\">172.28.105.12</td>\n<td align=\"center\">/data/minio_data</td>\n<td align=\"center\">/opt/minio/bin</td>\n</tr>\n<tr>\n<td align=\"center\">minio03</td>\n<td align=\"center\">172.28.105.13</td>\n<td align=\"center\">/data/minio_data</td>\n<td align=\"center\">/opt/minio/bin</td>\n</tr>\n<tr>\n<td align=\"center\">minio04</td>\n<td align=\"center\">172.28.105.14</td>\n<td align=\"center\">/data/minio_data</td>\n<td align=\"center\">/opt/minio/bin</td>\n</tr>\n</tbody></table>\n<h3 id=\"获取Minio\"><a href=\"#获取Minio\" class=\"headerlink\" title=\"获取Minio\"></a>获取Minio</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;dl.min.io&#x2F;server&#x2F;minio&#x2F;release&#x2F;linux-amd64&#x2F;minio</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"目录创建\"><a href=\"#目录创建\" class=\"headerlink\" title=\"目录创建\"></a>目录创建</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p &#x2F;data&#x2F;minio_data</span><br><span class=\"line\">mkdir -p &#x2F;etc&#x2F;minio</span><br><span class=\"line\">mkdir -p &#x2F;opt&#x2F;minio&#x2F;bin</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"集群启动文件\"><a href=\"#集群启动文件\" class=\"headerlink\" title=\"集群启动文件\"></a>集群启动文件</h3><p>创建/opt/minio/bin/run.sh</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">export MINIO_ACCESS_KEY=root</span><br><span class=\"line\">export MINIO_SECRET_KEY=12345678</span><br><span class=\"line\"></span><br><span class=\"line\">/data/minio/run/minio server --config-dir /etc/minio \\</span><br><span class=\"line\">http://172.28.105.11/data/minio_data \\</span><br><span class=\"line\">http://172.28.105.12/data/minio_data \\</span><br><span class=\"line\">http://172.28.105.13/data/minio_data \\</span><br><span class=\"line\">http://172.28.105.14/data/minio_data \\</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>MINIO_ACCESS_KEY：  用户名，长度最小是5个字符</li>\n<li>MINIO_SECRET_KEY：  密码，密码不能设置过于简单，不然minio会启动失败，长度最小是8个字符</li>\n<li>–config-dir：  指定集群配置文件目录</li>\n</ul>\n<h3 id=\"创建服务\"><a href=\"#创建服务\" class=\"headerlink\" title=\"创建服务\"></a>创建服务</h3><p>创建/usr/lib/systemd/system/minio.service</p>\n<ul>\n<li>WorkingDirectory：二进制文件目录</li>\n<li>ExecStart：指定集群启动脚本</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat &gt; /usr/lib/systemd/system/minio.service &lt;&lt;EOF</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Minio service</span><br><span class=\"line\">Documentation=https://docs.minio.io/</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">WorkingDirectory=/opt/minio/</span><br><span class=\"line\">ExecStart=/opt/minio/bin/run.sh</span><br><span class=\"line\"></span><br><span class=\"line\">Restart=on-failure</span><br><span class=\"line\">RestartSec=5</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"二进制文件\"><a href=\"#二进制文件\" class=\"headerlink\" title=\"二进制文件\"></a>二进制文件</h3><p>将minio二进制文件上传到/data/minio/run目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp minio &#x2F;opt&#x2F;minio&#x2F;bin</span><br><span class=\"line\">chmo +x &#x2F;opt&#x2F;minio&#x2F;bin&#x2F;minio</span><br><span class=\"line\">chmo +x &#x2F;opt&#x2F;minio&#x2F;bin&#x2F;run.sh</span><br><span class=\"line\">chmod +x &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;minio.service</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"启动集群\"><a href=\"#启动集群\" class=\"headerlink\" title=\"启动集群\"></a>启动集群</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl enable minio &amp;&amp; systemctl start minio</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"通过nginx代理集群\"><a href=\"#通过nginx代理集群\" class=\"headerlink\" title=\"通过nginx代理集群\"></a>通过nginx代理集群</h2><h3 id=\"配置负载均衡\"><a href=\"#配置负载均衡\" class=\"headerlink\" title=\"配置负载均衡\"></a>配置负载均衡</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">user  nobody;</span></span><br><span class=\"line\">worker_processes  1;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">error_log  logs/error.log;</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">error_log  logs/error.log  notice;</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">error_log  logs/error.log  info;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">pid        logs/nginx.pid;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">    worker_connections  1024;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">http &#123;</span><br><span class=\"line\">    include       mime.types;</span><br><span class=\"line\">    default_type  application/octet-stream;</span><br><span class=\"line\"></span><br><span class=\"line\">    #log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class=\"line\">    #                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class=\"line\">    #                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">    #access_log  logs/access.log  main;</span><br><span class=\"line\"></span><br><span class=\"line\">    sendfile        on;</span><br><span class=\"line\">    #tcp_nopush     on;</span><br><span class=\"line\"></span><br><span class=\"line\">    #keepalive_timeout  0;</span><br><span class=\"line\">    keepalive_timeout  65;</span><br><span class=\"line\"></span><br><span class=\"line\">    #gzip  on;</span><br><span class=\"line\"></span><br><span class=\"line\">\tupstream minio&#123;</span><br><span class=\"line\">\t        server 172.28.105.11:9000;</span><br><span class=\"line\">\t        server 172.28.105.12:9000;</span><br><span class=\"line\">\t        server 172.28.105.13:9000;</span><br><span class=\"line\">\t        server 172.28.105.14:9000;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen 9001;</span><br><span class=\"line\">        server_name 172.28.105.10;</span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">                proxy_pass http://minio;</span><br><span class=\"line\">                proxy_set_header Host $http_host;</span><br><span class=\"line\">                client_max_body_size 1000m;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"mc客户端配置\"><a href=\"#mc客户端配置\" class=\"headerlink\" title=\"mc客户端配置\"></a>mc客户端配置</h2><h3 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;dl.min.io&#x2F;client&#x2F;mc&#x2F;release&#x2F;linux-amd64&#x2F;mc</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"简单操作\"><a href=\"#简单操作\" class=\"headerlink\" title=\"简单操作\"></a>简单操作</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mc config host add &lt;ALIAS&gt; &lt;YOUR-S3-ENDPOINT&gt; &lt;YOUR-ACCESS-KEY&gt; &lt;YOUR-SECRET-KEY&gt; [--api API-SIGNATURE]</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mc config host <span class=\"keyword\">add</span> myminio http:<span class=\"comment\">//172.28.105.11:9000 6FN56FQD3BBYYFHRV8CV 99HwhtPhIpVph+eyNh5ouRcorCBAvGUiVM3LXtuq</span></span><br><span class=\"line\"></span><br><span class=\"line\">mc ls play                    <span class=\"meta\"># 列出所有桶</span></span><br><span class=\"line\">mc mb myminio/testbucket        <span class=\"meta\"># 创建桶</span></span><br><span class=\"line\">mc cp io.<span class=\"keyword\">out</span> myminio/testbucket       <span class=\"meta\"># 拷贝测试文件</span></span><br><span class=\"line\">mc ls myminio/testbucket           <span class=\"meta\"># 列出目录</span></span><br><span class=\"line\">mc policy <span class=\"keyword\">public</span>  myminio/testbucket      <span class=\"meta\"># 设置公开权限  [none, download, upload, public]</span></span><br></pre></td></tr></table></figure>"},{"title":"MySQL审计工具Audit插件使用","date":"2019-12-13T06:00:00.000Z","_content":"\n## MySQL审计工具Audit插件使用\n\n### 一、介绍MySQL AUDIT\n\n`MySQL AUDIT Plugin`是一个 `MySQL`安全审计插件，由McAfee提供，设计强调安全性和审计能力。该插件可用作独立审计解决方案，或配置为数据传送给外部监测工具。支持版本为`MySQL (5.1, 5.5, 5.6, 5.7)，MariaDB (5.5, 10.0, 10.1) ，Platform (32 or 64 bit)`。从Mariadb 10.0版本开始audit插件直接内嵌了，名称为server_audit.so，可以直接加载使用。\n\n源码地址：https://github.com/mcafee/mysql-audit/\n\nWIKI地址：https://github.com/mcafee/mysql-audit/wiki\n\n二进制地址：https://bintray.com/mcafee/mysql-audit-plugin/release\n\nmacfee的mysql audit插件虽然日志信息比较大，对性能影响大，但是如果想要开启审计，那也应该忍受了。\n\n\n\n<hr/>\n### 二、安装使用MySQL AUDIT\n\n1、下载mysql 对应版本的 audit插件\n\nhttps://bintray.com/mcafee/mysql-audit-plugin/release#files\n\n```\n\n```\n\n2、查看MySQL的插件目录\n\n```\n> SHOW GLOBAL VARIABLES LIKE 'plugin_dir'\n\n+---------------+------------------------------+\n| Variable_name | Value                        |\n+---------------+------------------------------+\n| plugin_dir    | /usr/local/mysql/lib/plugin/ |\n+---------------+------------------------------+\n1 row in set (0.02 sec)\n```\n\n3、复制库文件到MySQL库目录下\n\n```\ncp cp audit-plugin-mysql-5.7-1.1.4-725/lib/libaudit_plugin.so /usr/local/mysql/lib/plugin/\n```\n\n4、加载Audit插件\n\n```\n> install plugin audit soname 'libaudit_plugin.so';\n```\n\n5、查看版本\n\n```\n> show plugins;\n......\n| BLACKHOLE                  | ACTIVE   | STORAGE ENGINE     | NULL               | GPL     |\n| partition                  | ACTIVE   | STORAGE ENGINE     | NULL               | GPL     |\n| AUDIT                      | ACTIVE   | AUDIT              | libaudit_plugin.so | GPL     |\n+----------------------------+----------+--------------------+--------------------+---------+\n43 rows in set (0.09 sec)\n\n> show global status like '%audit%';\n+------------------------+-----------+\n| Variable_name          | Value     |\n+------------------------+-----------+\n| Audit_protocol_version | 1.0       |\n| Audit_version          | 1.1.7-866 |\n+------------------------+-----------+\n2 rows in set (0.08 sec)\n\n```\n\n6、开启Audit功能：\n\n```\n> SET GLOBAL audit_json_file=ON;\nQuery OK, 0 rows affected (0.00 sec)\n\n```\n\n7、查看插件有哪些可配置的参数：\n\n```\n>  SHOW GLOBAL VARIABLES LIKE '%audi%'; \n```\n\n\n\n```\n其中我们需要关注的参数有：\n\n1. audit_json_file\n是否开启audit功能。\n\n2. audit_json_log_file\n记录文件的路径和名称信息（默认放在mysql数据目录下）。\n\n3. audit_record_cmds\naudit记录的命令，默认为记录所有命令。可以设置为任意dml、dcl、ddl的组合。如：audit_record_cmds=select,insert,delete,update。还可以在线设置set global audit_record_cmds=NULL。(表示记录所有命令)\n\n4. audit_record_objs\naudit记录操作的对象，默认为记录所有对象，可以用SET GLOBAL audit_record_objs=NULL设置为默认。也可以指定为下面的格式：audit_record_objs=,test.*,mysql.*,information_schema.*。\n\n5. audit_whitelist_users\n用户白名单。\n\n\nhttps://github.com/mcafee/mysql-audit/wiki/Configuration\n```\n\n### 三、[libaudit_plugin.so安装]\n\n\n\n1、上传audit到mysql的plugin目录\n\n2、配置my.cnf 文件\n\n```\nvim /etc/my.cnf\n[mysqld]\nplugin-load=AUDIT=libaudit_plugin.so\naudit_json_file=1\naudit_json_file=ON\naudit_record_cmds=connect,Quit,show,select,insert,update,delete\naudit_whitelist_users=blacklist,mysql2,gmetric,procdb\n\n```\n\n3、启动登录mysql\n\n```\nINSTALL PLUGIN AUDIT SONAME 'libaudit_plugin.so';\nSET GLOBAL audit_json_file=ON;\nSET GLOBAL audit_whitelist_users='qrr,mysql2,gmetric,procdb,{}'\n\n{}:表示空用户\n```\n\n\n\n","source":"_posts/mysql/MySQL审计工具Audit插件使用.md","raw":"---\ntitle: MySQL审计工具Audit插件使用\ndate: 2019-12-13 14:00:00\ncategories: \n- mysql\ntags:\n- mysql\n---\n\n## MySQL审计工具Audit插件使用\n\n### 一、介绍MySQL AUDIT\n\n`MySQL AUDIT Plugin`是一个 `MySQL`安全审计插件，由McAfee提供，设计强调安全性和审计能力。该插件可用作独立审计解决方案，或配置为数据传送给外部监测工具。支持版本为`MySQL (5.1, 5.5, 5.6, 5.7)，MariaDB (5.5, 10.0, 10.1) ，Platform (32 or 64 bit)`。从Mariadb 10.0版本开始audit插件直接内嵌了，名称为server_audit.so，可以直接加载使用。\n\n源码地址：https://github.com/mcafee/mysql-audit/\n\nWIKI地址：https://github.com/mcafee/mysql-audit/wiki\n\n二进制地址：https://bintray.com/mcafee/mysql-audit-plugin/release\n\nmacfee的mysql audit插件虽然日志信息比较大，对性能影响大，但是如果想要开启审计，那也应该忍受了。\n\n\n\n<hr/>\n### 二、安装使用MySQL AUDIT\n\n1、下载mysql 对应版本的 audit插件\n\nhttps://bintray.com/mcafee/mysql-audit-plugin/release#files\n\n```\n\n```\n\n2、查看MySQL的插件目录\n\n```\n> SHOW GLOBAL VARIABLES LIKE 'plugin_dir'\n\n+---------------+------------------------------+\n| Variable_name | Value                        |\n+---------------+------------------------------+\n| plugin_dir    | /usr/local/mysql/lib/plugin/ |\n+---------------+------------------------------+\n1 row in set (0.02 sec)\n```\n\n3、复制库文件到MySQL库目录下\n\n```\ncp cp audit-plugin-mysql-5.7-1.1.4-725/lib/libaudit_plugin.so /usr/local/mysql/lib/plugin/\n```\n\n4、加载Audit插件\n\n```\n> install plugin audit soname 'libaudit_plugin.so';\n```\n\n5、查看版本\n\n```\n> show plugins;\n......\n| BLACKHOLE                  | ACTIVE   | STORAGE ENGINE     | NULL               | GPL     |\n| partition                  | ACTIVE   | STORAGE ENGINE     | NULL               | GPL     |\n| AUDIT                      | ACTIVE   | AUDIT              | libaudit_plugin.so | GPL     |\n+----------------------------+----------+--------------------+--------------------+---------+\n43 rows in set (0.09 sec)\n\n> show global status like '%audit%';\n+------------------------+-----------+\n| Variable_name          | Value     |\n+------------------------+-----------+\n| Audit_protocol_version | 1.0       |\n| Audit_version          | 1.1.7-866 |\n+------------------------+-----------+\n2 rows in set (0.08 sec)\n\n```\n\n6、开启Audit功能：\n\n```\n> SET GLOBAL audit_json_file=ON;\nQuery OK, 0 rows affected (0.00 sec)\n\n```\n\n7、查看插件有哪些可配置的参数：\n\n```\n>  SHOW GLOBAL VARIABLES LIKE '%audi%'; \n```\n\n\n\n```\n其中我们需要关注的参数有：\n\n1. audit_json_file\n是否开启audit功能。\n\n2. audit_json_log_file\n记录文件的路径和名称信息（默认放在mysql数据目录下）。\n\n3. audit_record_cmds\naudit记录的命令，默认为记录所有命令。可以设置为任意dml、dcl、ddl的组合。如：audit_record_cmds=select,insert,delete,update。还可以在线设置set global audit_record_cmds=NULL。(表示记录所有命令)\n\n4. audit_record_objs\naudit记录操作的对象，默认为记录所有对象，可以用SET GLOBAL audit_record_objs=NULL设置为默认。也可以指定为下面的格式：audit_record_objs=,test.*,mysql.*,information_schema.*。\n\n5. audit_whitelist_users\n用户白名单。\n\n\nhttps://github.com/mcafee/mysql-audit/wiki/Configuration\n```\n\n### 三、[libaudit_plugin.so安装]\n\n\n\n1、上传audit到mysql的plugin目录\n\n2、配置my.cnf 文件\n\n```\nvim /etc/my.cnf\n[mysqld]\nplugin-load=AUDIT=libaudit_plugin.so\naudit_json_file=1\naudit_json_file=ON\naudit_record_cmds=connect,Quit,show,select,insert,update,delete\naudit_whitelist_users=blacklist,mysql2,gmetric,procdb\n\n```\n\n3、启动登录mysql\n\n```\nINSTALL PLUGIN AUDIT SONAME 'libaudit_plugin.so';\nSET GLOBAL audit_json_file=ON;\nSET GLOBAL audit_whitelist_users='qrr,mysql2,gmetric,procdb,{}'\n\n{}:表示空用户\n```\n\n\n\n","slug":"mysql/MySQL审计工具Audit插件使用","published":1,"updated":"2021-01-27T08:20:35.763Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2v002qq0ushg3xhh6p","content":"<h2 id=\"MySQL审计工具Audit插件使用\"><a href=\"#MySQL审计工具Audit插件使用\" class=\"headerlink\" title=\"MySQL审计工具Audit插件使用\"></a>MySQL审计工具Audit插件使用</h2><h3 id=\"一、介绍MySQL-AUDIT\"><a href=\"#一、介绍MySQL-AUDIT\" class=\"headerlink\" title=\"一、介绍MySQL AUDIT\"></a>一、介绍MySQL AUDIT</h3><p><code>MySQL AUDIT Plugin</code>是一个 <code>MySQL</code>安全审计插件，由McAfee提供，设计强调安全性和审计能力。该插件可用作独立审计解决方案，或配置为数据传送给外部监测工具。支持版本为<code>MySQL (5.1, 5.5, 5.6, 5.7)，MariaDB (5.5, 10.0, 10.1) ，Platform (32 or 64 bit)</code>。从Mariadb 10.0版本开始audit插件直接内嵌了，名称为server_audit.so，可以直接加载使用。</p>\n<p>源码地址：<a href=\"https://github.com/mcafee/mysql-audit/\">https://github.com/mcafee/mysql-audit/</a></p>\n<p>WIKI地址：<a href=\"https://github.com/mcafee/mysql-audit/wiki\">https://github.com/mcafee/mysql-audit/wiki</a></p>\n<p>二进制地址：<a href=\"https://bintray.com/mcafee/mysql-audit-plugin/release\">https://bintray.com/mcafee/mysql-audit-plugin/release</a></p>\n<p>macfee的mysql audit插件虽然日志信息比较大，对性能影响大，但是如果想要开启审计，那也应该忍受了。</p>\n<hr/>\n### 二、安装使用MySQL AUDIT\n\n<p>1、下载mysql 对应版本的 audit插件</p>\n<p><a href=\"https://bintray.com/mcafee/mysql-audit-plugin/release#files\">https://bintray.com/mcafee/mysql-audit-plugin/release#files</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>2、查看MySQL的插件目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; SHOW GLOBAL VARIABLES LIKE &#39;plugin_dir&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">+---------------+------------------------------+</span><br><span class=\"line\">| Variable_name | Value                        |</span><br><span class=\"line\">+---------------+------------------------------+</span><br><span class=\"line\">| plugin_dir    | &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib&#x2F;plugin&#x2F; |</span><br><span class=\"line\">+---------------+------------------------------+</span><br><span class=\"line\">1 row in set (0.02 sec)</span><br></pre></td></tr></table></figure>\n\n<p>3、复制库文件到MySQL库目录下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp cp audit-plugin-mysql-5.7-1.1.4-725&#x2F;lib&#x2F;libaudit_plugin.so &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib&#x2F;plugin&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>4、加载Audit插件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; install plugin audit soname &#39;libaudit_plugin.so&#39;;</span><br></pre></td></tr></table></figure>\n\n<p>5、查看版本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; show plugins;</span><br><span class=\"line\">......</span><br><span class=\"line\">| BLACKHOLE                  | ACTIVE   | STORAGE ENGINE     | NULL               | GPL     |</span><br><span class=\"line\">| partition                  | ACTIVE   | STORAGE ENGINE     | NULL               | GPL     |</span><br><span class=\"line\">| AUDIT                      | ACTIVE   | AUDIT              | libaudit_plugin.so | GPL     |</span><br><span class=\"line\">+----------------------------+----------+--------------------+--------------------+---------+</span><br><span class=\"line\">43 rows in set (0.09 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">&gt; show global status like &#39;%audit%&#39;;</span><br><span class=\"line\">+------------------------+-----------+</span><br><span class=\"line\">| Variable_name          | Value     |</span><br><span class=\"line\">+------------------------+-----------+</span><br><span class=\"line\">| Audit_protocol_version | 1.0       |</span><br><span class=\"line\">| Audit_version          | 1.1.7-866 |</span><br><span class=\"line\">+------------------------+-----------+</span><br><span class=\"line\">2 rows in set (0.08 sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>6、开启Audit功能：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; SET GLOBAL audit_json_file&#x3D;ON;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>7、查看插件有哪些可配置的参数：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;  SHOW GLOBAL VARIABLES LIKE &#39;%audi%&#39;; </span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">其中我们需要关注的参数有：</span><br><span class=\"line\"></span><br><span class=\"line\">1. audit_json_file</span><br><span class=\"line\">是否开启audit功能。</span><br><span class=\"line\"></span><br><span class=\"line\">2. audit_json_log_file</span><br><span class=\"line\">记录文件的路径和名称信息（默认放在mysql数据目录下）。</span><br><span class=\"line\"></span><br><span class=\"line\">3. audit_record_cmds</span><br><span class=\"line\">audit记录的命令，默认为记录所有命令。可以设置为任意dml、dcl、ddl的组合。如：audit_record_cmds&#x3D;select,insert,delete,update。还可以在线设置set global audit_record_cmds&#x3D;NULL。(表示记录所有命令)</span><br><span class=\"line\"></span><br><span class=\"line\">4. audit_record_objs</span><br><span class=\"line\">audit记录操作的对象，默认为记录所有对象，可以用SET GLOBAL audit_record_objs&#x3D;NULL设置为默认。也可以指定为下面的格式：audit_record_objs&#x3D;,test.*,mysql.*,information_schema.*。</span><br><span class=\"line\"></span><br><span class=\"line\">5. audit_whitelist_users</span><br><span class=\"line\">用户白名单。</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;mcafee&#x2F;mysql-audit&#x2F;wiki&#x2F;Configuration</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"三、-libaudit-plugin-so安装\"><a href=\"#三、-libaudit-plugin-so安装\" class=\"headerlink\" title=\"三、[libaudit_plugin.so安装]\"></a>三、[libaudit_plugin.so安装]</h3><p>1、上传audit到mysql的plugin目录</p>\n<p>2、配置my.cnf 文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;etc&#x2F;my.cnf</span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\">plugin-load&#x3D;AUDIT&#x3D;libaudit_plugin.so</span><br><span class=\"line\">audit_json_file&#x3D;1</span><br><span class=\"line\">audit_json_file&#x3D;ON</span><br><span class=\"line\">audit_record_cmds&#x3D;connect,Quit,show,select,insert,update,delete</span><br><span class=\"line\">audit_whitelist_users&#x3D;blacklist,mysql2,gmetric,procdb</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>3、启动登录mysql</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INSTALL PLUGIN AUDIT SONAME &#39;libaudit_plugin.so&#39;;</span><br><span class=\"line\">SET GLOBAL audit_json_file&#x3D;ON;</span><br><span class=\"line\">SET GLOBAL audit_whitelist_users&#x3D;&#39;qrr,mysql2,gmetric,procdb,&#123;&#125;&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;&#125;:表示空用户</span><br></pre></td></tr></table></figure>\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"MySQL审计工具Audit插件使用\"><a href=\"#MySQL审计工具Audit插件使用\" class=\"headerlink\" title=\"MySQL审计工具Audit插件使用\"></a>MySQL审计工具Audit插件使用</h2><h3 id=\"一、介绍MySQL-AUDIT\"><a href=\"#一、介绍MySQL-AUDIT\" class=\"headerlink\" title=\"一、介绍MySQL AUDIT\"></a>一、介绍MySQL AUDIT</h3><p><code>MySQL AUDIT Plugin</code>是一个 <code>MySQL</code>安全审计插件，由McAfee提供，设计强调安全性和审计能力。该插件可用作独立审计解决方案，或配置为数据传送给外部监测工具。支持版本为<code>MySQL (5.1, 5.5, 5.6, 5.7)，MariaDB (5.5, 10.0, 10.1) ，Platform (32 or 64 bit)</code>。从Mariadb 10.0版本开始audit插件直接内嵌了，名称为server_audit.so，可以直接加载使用。</p>\n<p>源码地址：<a href=\"https://github.com/mcafee/mysql-audit/\">https://github.com/mcafee/mysql-audit/</a></p>\n<p>WIKI地址：<a href=\"https://github.com/mcafee/mysql-audit/wiki\">https://github.com/mcafee/mysql-audit/wiki</a></p>\n<p>二进制地址：<a href=\"https://bintray.com/mcafee/mysql-audit-plugin/release\">https://bintray.com/mcafee/mysql-audit-plugin/release</a></p>\n<p>macfee的mysql audit插件虽然日志信息比较大，对性能影响大，但是如果想要开启审计，那也应该忍受了。</p>\n<hr/>\n### 二、安装使用MySQL AUDIT\n\n<p>1、下载mysql 对应版本的 audit插件</p>\n<p><a href=\"https://bintray.com/mcafee/mysql-audit-plugin/release#files\">https://bintray.com/mcafee/mysql-audit-plugin/release#files</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>2、查看MySQL的插件目录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; SHOW GLOBAL VARIABLES LIKE &#39;plugin_dir&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">+---------------+------------------------------+</span><br><span class=\"line\">| Variable_name | Value                        |</span><br><span class=\"line\">+---------------+------------------------------+</span><br><span class=\"line\">| plugin_dir    | &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib&#x2F;plugin&#x2F; |</span><br><span class=\"line\">+---------------+------------------------------+</span><br><span class=\"line\">1 row in set (0.02 sec)</span><br></pre></td></tr></table></figure>\n\n<p>3、复制库文件到MySQL库目录下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp cp audit-plugin-mysql-5.7-1.1.4-725&#x2F;lib&#x2F;libaudit_plugin.so &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib&#x2F;plugin&#x2F;</span><br></pre></td></tr></table></figure>\n\n<p>4、加载Audit插件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; install plugin audit soname &#39;libaudit_plugin.so&#39;;</span><br></pre></td></tr></table></figure>\n\n<p>5、查看版本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; show plugins;</span><br><span class=\"line\">......</span><br><span class=\"line\">| BLACKHOLE                  | ACTIVE   | STORAGE ENGINE     | NULL               | GPL     |</span><br><span class=\"line\">| partition                  | ACTIVE   | STORAGE ENGINE     | NULL               | GPL     |</span><br><span class=\"line\">| AUDIT                      | ACTIVE   | AUDIT              | libaudit_plugin.so | GPL     |</span><br><span class=\"line\">+----------------------------+----------+--------------------+--------------------+---------+</span><br><span class=\"line\">43 rows in set (0.09 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">&gt; show global status like &#39;%audit%&#39;;</span><br><span class=\"line\">+------------------------+-----------+</span><br><span class=\"line\">| Variable_name          | Value     |</span><br><span class=\"line\">+------------------------+-----------+</span><br><span class=\"line\">| Audit_protocol_version | 1.0       |</span><br><span class=\"line\">| Audit_version          | 1.1.7-866 |</span><br><span class=\"line\">+------------------------+-----------+</span><br><span class=\"line\">2 rows in set (0.08 sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>6、开启Audit功能：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; SET GLOBAL audit_json_file&#x3D;ON;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>7、查看插件有哪些可配置的参数：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;  SHOW GLOBAL VARIABLES LIKE &#39;%audi%&#39;; </span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">其中我们需要关注的参数有：</span><br><span class=\"line\"></span><br><span class=\"line\">1. audit_json_file</span><br><span class=\"line\">是否开启audit功能。</span><br><span class=\"line\"></span><br><span class=\"line\">2. audit_json_log_file</span><br><span class=\"line\">记录文件的路径和名称信息（默认放在mysql数据目录下）。</span><br><span class=\"line\"></span><br><span class=\"line\">3. audit_record_cmds</span><br><span class=\"line\">audit记录的命令，默认为记录所有命令。可以设置为任意dml、dcl、ddl的组合。如：audit_record_cmds&#x3D;select,insert,delete,update。还可以在线设置set global audit_record_cmds&#x3D;NULL。(表示记录所有命令)</span><br><span class=\"line\"></span><br><span class=\"line\">4. audit_record_objs</span><br><span class=\"line\">audit记录操作的对象，默认为记录所有对象，可以用SET GLOBAL audit_record_objs&#x3D;NULL设置为默认。也可以指定为下面的格式：audit_record_objs&#x3D;,test.*,mysql.*,information_schema.*。</span><br><span class=\"line\"></span><br><span class=\"line\">5. audit_whitelist_users</span><br><span class=\"line\">用户白名单。</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;mcafee&#x2F;mysql-audit&#x2F;wiki&#x2F;Configuration</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"三、-libaudit-plugin-so安装\"><a href=\"#三、-libaudit-plugin-so安装\" class=\"headerlink\" title=\"三、[libaudit_plugin.so安装]\"></a>三、[libaudit_plugin.so安装]</h3><p>1、上传audit到mysql的plugin目录</p>\n<p>2、配置my.cnf 文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;etc&#x2F;my.cnf</span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\">plugin-load&#x3D;AUDIT&#x3D;libaudit_plugin.so</span><br><span class=\"line\">audit_json_file&#x3D;1</span><br><span class=\"line\">audit_json_file&#x3D;ON</span><br><span class=\"line\">audit_record_cmds&#x3D;connect,Quit,show,select,insert,update,delete</span><br><span class=\"line\">audit_whitelist_users&#x3D;blacklist,mysql2,gmetric,procdb</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>3、启动登录mysql</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INSTALL PLUGIN AUDIT SONAME &#39;libaudit_plugin.so&#39;;</span><br><span class=\"line\">SET GLOBAL audit_json_file&#x3D;ON;</span><br><span class=\"line\">SET GLOBAL audit_whitelist_users&#x3D;&#39;qrr,mysql2,gmetric,procdb,&#123;&#125;&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;&#125;:表示空用户</span><br></pre></td></tr></table></figure>\n\n\n\n"},{"title":"init-connect+binlog实现mysql审计","date":"2019-12-13T06:00:00.000Z","_content":"\n**一、简介**\n\n1、概述\n\nmysql本身已经提供了详细的sql执行记录–general log ，但是开启它有以下几个缺点：\n\n1）无论sql有无语法错误，只要执行了就会记录，导致记录大量无用信息，后期的筛选有难度。\n\n2）sql并发量很大时，log的记录会对io造成一定的印象，是数据库效率降低。\n\n3）日志文件很容易快速膨胀，不妥善处理会对磁盘空间造成一定影响。\n\n2、原理\n\n1） 由于审计的关键在于DML语句，而所有的DML语句都可以通过binlog记录。\n\n2）不过遗憾的是目前MySQL binlog 中只记录，产生这条记录的connection id（随连接数自增，循环使用），这对之后的反查没有任何帮助。\n\n3）因此考虑通过init-connect，在每次连接的初始化阶段，记录下这个连接的用户，和connection_id信息。\n\n4）在后期审计进行行为追踪时，根据binlog记录的行为及对应的connection-id 结合 之前连接日志记录 进行分析，得出最后的结论。\n\n**备注：根据自己的实际环境使用审计方式，切记谨慎使用。**\n\n3、相对于audit审计插件\n\n 缺点：只对有低级权限的用户的操作有记录，权限高的则没有 。\n\n 优点：日志信息比较小，对性能影响小\n\n\n\n**二、安装审计功能**\n\n1、创建审计用的库表。\n\n```\nmysql> create database db_monitor charset utf8;\nmysql> use db_monitor\nCREATE TABLE accesslog\n( thread_id int(11) DEFAULT NULL,  #进程id\nlog_time datetime default null,  #登录时间\nlocalname varchar(50) DEFAULT NULL, #登录名称，带详细ip\nmatchname varchar(50) DEFAULT NULL,  #登录用户\nkey idx_log_time(log_time)\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8;\n```\n\n\n\n\n\n2、配置init-connect参数\n\n\\# vim /etc/my.cnf\n\n[mysqld]\n\nserver-id = 130\n\nfederated\n\nlog-bin = mysql-bin\n\nbinlog_format = mixed\n\ninit_connect='insert into db_monitor.accesslog(thread_id,log_time,localname,matchname) values(connection_id(),now(),user(),current_user());'\n\n3、删除默认用户：\n\nmysql> delete from user where Host='localhost' and User='';\n\n4、创建普通用户，不能有super权限，而且用户必须有对access_log库的access_log表的insert权限，否则会登录失败。\n\nmysql> GRANT CREATE,DROP,ALTER,INSERT,DELETE,UPDATE,SELECT ON *.* TO audi01@'%' IDENTIFIED BY '147258';\n\nmysql> flush privileges;\n\n5、赋予用户access_log的insert、select权限，然后重新赋予权限：\n\nmysql> GRANT SELECT,INSERT ON db_monitor.* TO audi01@'%';\n\nmysql> flush privileges;\n\n6、查看，使用audi01用户登录查看\n\nmysql> select * from accesslog;\n\nmysql> delete from accesslog where thread_id=10;","source":"_posts/mysql/init_connect实现mysql审计.md","raw":"---\ntitle: init-connect+binlog实现mysql审计\ndate: 2019-12-13 14:00:00\ncategories: \n- bigdata\ntags:\n- flume\n---\n\n**一、简介**\n\n1、概述\n\nmysql本身已经提供了详细的sql执行记录–general log ，但是开启它有以下几个缺点：\n\n1）无论sql有无语法错误，只要执行了就会记录，导致记录大量无用信息，后期的筛选有难度。\n\n2）sql并发量很大时，log的记录会对io造成一定的印象，是数据库效率降低。\n\n3）日志文件很容易快速膨胀，不妥善处理会对磁盘空间造成一定影响。\n\n2、原理\n\n1） 由于审计的关键在于DML语句，而所有的DML语句都可以通过binlog记录。\n\n2）不过遗憾的是目前MySQL binlog 中只记录，产生这条记录的connection id（随连接数自增，循环使用），这对之后的反查没有任何帮助。\n\n3）因此考虑通过init-connect，在每次连接的初始化阶段，记录下这个连接的用户，和connection_id信息。\n\n4）在后期审计进行行为追踪时，根据binlog记录的行为及对应的connection-id 结合 之前连接日志记录 进行分析，得出最后的结论。\n\n**备注：根据自己的实际环境使用审计方式，切记谨慎使用。**\n\n3、相对于audit审计插件\n\n 缺点：只对有低级权限的用户的操作有记录，权限高的则没有 。\n\n 优点：日志信息比较小，对性能影响小\n\n\n\n**二、安装审计功能**\n\n1、创建审计用的库表。\n\n```\nmysql> create database db_monitor charset utf8;\nmysql> use db_monitor\nCREATE TABLE accesslog\n( thread_id int(11) DEFAULT NULL,  #进程id\nlog_time datetime default null,  #登录时间\nlocalname varchar(50) DEFAULT NULL, #登录名称，带详细ip\nmatchname varchar(50) DEFAULT NULL,  #登录用户\nkey idx_log_time(log_time)\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8;\n```\n\n\n\n\n\n2、配置init-connect参数\n\n\\# vim /etc/my.cnf\n\n[mysqld]\n\nserver-id = 130\n\nfederated\n\nlog-bin = mysql-bin\n\nbinlog_format = mixed\n\ninit_connect='insert into db_monitor.accesslog(thread_id,log_time,localname,matchname) values(connection_id(),now(),user(),current_user());'\n\n3、删除默认用户：\n\nmysql> delete from user where Host='localhost' and User='';\n\n4、创建普通用户，不能有super权限，而且用户必须有对access_log库的access_log表的insert权限，否则会登录失败。\n\nmysql> GRANT CREATE,DROP,ALTER,INSERT,DELETE,UPDATE,SELECT ON *.* TO audi01@'%' IDENTIFIED BY '147258';\n\nmysql> flush privileges;\n\n5、赋予用户access_log的insert、select权限，然后重新赋予权限：\n\nmysql> GRANT SELECT,INSERT ON db_monitor.* TO audi01@'%';\n\nmysql> flush privileges;\n\n6、查看，使用audi01用户登录查看\n\nmysql> select * from accesslog;\n\nmysql> delete from accesslog where thread_id=10;","slug":"mysql/init_connect实现mysql审计","published":1,"updated":"2021-01-27T08:20:35.764Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2w002sq0us5uyrch03","content":"<p><strong>一、简介</strong></p>\n<p>1、概述</p>\n<p>mysql本身已经提供了详细的sql执行记录–general log ，但是开启它有以下几个缺点：</p>\n<p>1）无论sql有无语法错误，只要执行了就会记录，导致记录大量无用信息，后期的筛选有难度。</p>\n<p>2）sql并发量很大时，log的记录会对io造成一定的印象，是数据库效率降低。</p>\n<p>3）日志文件很容易快速膨胀，不妥善处理会对磁盘空间造成一定影响。</p>\n<p>2、原理</p>\n<p>1） 由于审计的关键在于DML语句，而所有的DML语句都可以通过binlog记录。</p>\n<p>2）不过遗憾的是目前MySQL binlog 中只记录，产生这条记录的connection id（随连接数自增，循环使用），这对之后的反查没有任何帮助。</p>\n<p>3）因此考虑通过init-connect，在每次连接的初始化阶段，记录下这个连接的用户，和connection_id信息。</p>\n<p>4）在后期审计进行行为追踪时，根据binlog记录的行为及对应的connection-id 结合 之前连接日志记录 进行分析，得出最后的结论。</p>\n<p><strong>备注：根据自己的实际环境使用审计方式，切记谨慎使用。</strong></p>\n<p>3、相对于audit审计插件</p>\n<p> 缺点：只对有低级权限的用户的操作有记录，权限高的则没有 。</p>\n<p> 优点：日志信息比较小，对性能影响小</p>\n<p><strong>二、安装审计功能</strong></p>\n<p>1、创建审计用的库表。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; create database db_monitor charset utf8;</span><br><span class=\"line\">mysql&gt; use db_monitor</span><br><span class=\"line\">CREATE TABLE accesslog</span><br><span class=\"line\">( thread_id int(11) DEFAULT NULL,  #进程id</span><br><span class=\"line\">log_time datetime default null,  #登录时间</span><br><span class=\"line\">localname varchar(50) DEFAULT NULL, #登录名称，带详细ip</span><br><span class=\"line\">matchname varchar(50) DEFAULT NULL,  #登录用户</span><br><span class=\"line\">key idx_log_time(log_time)</span><br><span class=\"line\">) ENGINE&#x3D;InnoDB  DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>2、配置init-connect参数</p>\n<p># vim /etc/my.cnf</p>\n<p>[mysqld]</p>\n<p>server-id = 130</p>\n<p>federated</p>\n<p>log-bin = mysql-bin</p>\n<p>binlog_format = mixed</p>\n<p>init_connect=’insert into db_monitor.accesslog(thread_id,log_time,localname,matchname) values(connection_id(),now(),user(),current_user());’</p>\n<p>3、删除默认用户：</p>\n<p>mysql&gt; delete from user where Host=’localhost’ and User=’’;</p>\n<p>4、创建普通用户，不能有super权限，而且用户必须有对access_log库的access_log表的insert权限，否则会登录失败。</p>\n<p>mysql&gt; GRANT CREATE,DROP,ALTER,INSERT,DELETE,UPDATE,SELECT ON <em>.</em> TO audi01@’%’ IDENTIFIED BY ‘147258’;</p>\n<p>mysql&gt; flush privileges;</p>\n<p>5、赋予用户access_log的insert、select权限，然后重新赋予权限：</p>\n<p>mysql&gt; GRANT SELECT,INSERT ON db_monitor.* TO audi01@’%’;</p>\n<p>mysql&gt; flush privileges;</p>\n<p>6、查看，使用audi01用户登录查看</p>\n<p>mysql&gt; select * from accesslog;</p>\n<p>mysql&gt; delete from accesslog where thread_id=10;</p>\n","site":{"data":{}},"excerpt":"","more":"<p><strong>一、简介</strong></p>\n<p>1、概述</p>\n<p>mysql本身已经提供了详细的sql执行记录–general log ，但是开启它有以下几个缺点：</p>\n<p>1）无论sql有无语法错误，只要执行了就会记录，导致记录大量无用信息，后期的筛选有难度。</p>\n<p>2）sql并发量很大时，log的记录会对io造成一定的印象，是数据库效率降低。</p>\n<p>3）日志文件很容易快速膨胀，不妥善处理会对磁盘空间造成一定影响。</p>\n<p>2、原理</p>\n<p>1） 由于审计的关键在于DML语句，而所有的DML语句都可以通过binlog记录。</p>\n<p>2）不过遗憾的是目前MySQL binlog 中只记录，产生这条记录的connection id（随连接数自增，循环使用），这对之后的反查没有任何帮助。</p>\n<p>3）因此考虑通过init-connect，在每次连接的初始化阶段，记录下这个连接的用户，和connection_id信息。</p>\n<p>4）在后期审计进行行为追踪时，根据binlog记录的行为及对应的connection-id 结合 之前连接日志记录 进行分析，得出最后的结论。</p>\n<p><strong>备注：根据自己的实际环境使用审计方式，切记谨慎使用。</strong></p>\n<p>3、相对于audit审计插件</p>\n<p> 缺点：只对有低级权限的用户的操作有记录，权限高的则没有 。</p>\n<p> 优点：日志信息比较小，对性能影响小</p>\n<p><strong>二、安装审计功能</strong></p>\n<p>1、创建审计用的库表。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; create database db_monitor charset utf8;</span><br><span class=\"line\">mysql&gt; use db_monitor</span><br><span class=\"line\">CREATE TABLE accesslog</span><br><span class=\"line\">( thread_id int(11) DEFAULT NULL,  #进程id</span><br><span class=\"line\">log_time datetime default null,  #登录时间</span><br><span class=\"line\">localname varchar(50) DEFAULT NULL, #登录名称，带详细ip</span><br><span class=\"line\">matchname varchar(50) DEFAULT NULL,  #登录用户</span><br><span class=\"line\">key idx_log_time(log_time)</span><br><span class=\"line\">) ENGINE&#x3D;InnoDB  DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>2、配置init-connect参数</p>\n<p># vim /etc/my.cnf</p>\n<p>[mysqld]</p>\n<p>server-id = 130</p>\n<p>federated</p>\n<p>log-bin = mysql-bin</p>\n<p>binlog_format = mixed</p>\n<p>init_connect=’insert into db_monitor.accesslog(thread_id,log_time,localname,matchname) values(connection_id(),now(),user(),current_user());’</p>\n<p>3、删除默认用户：</p>\n<p>mysql&gt; delete from user where Host=’localhost’ and User=’’;</p>\n<p>4、创建普通用户，不能有super权限，而且用户必须有对access_log库的access_log表的insert权限，否则会登录失败。</p>\n<p>mysql&gt; GRANT CREATE,DROP,ALTER,INSERT,DELETE,UPDATE,SELECT ON <em>.</em> TO audi01@’%’ IDENTIFIED BY ‘147258’;</p>\n<p>mysql&gt; flush privileges;</p>\n<p>5、赋予用户access_log的insert、select权限，然后重新赋予权限：</p>\n<p>mysql&gt; GRANT SELECT,INSERT ON db_monitor.* TO audi01@’%’;</p>\n<p>mysql&gt; flush privileges;</p>\n<p>6、查看，使用audi01用户登录查看</p>\n<p>mysql&gt; select * from accesslog;</p>\n<p>mysql&gt; delete from accesslog where thread_id=10;</p>\n"},{"title":"node_exporter 安装脚本","date":"2020-09-21T10:47:00.000Z","_content":"  \n  \n摘要: 安装node_exporter脚本， 用于监控数据采集\n<!-- more -->\n\n```bash\n#!/bin/bash\n#\n#   rhel7.4 安装node_exporter 用于监控数据采集\n#   Usage:\n#         sh addNode.sh\n#Logs: /var/log/messages\n#History:  2019/8/2 v3\n#Create_Time: 2019-08-02\n# USE: small_wei\n#\n#\n#WEB_PATH='http://12.0.94.46:8086'       #这里是我测试环境下的文件下载链接路径\n# https://github.com/prometheus/node_exporter   官方下载地址\nWEB_PATH='https://package-dev-qafc.ztocwst.com/res/node_exporter'\nInstall_PATH=/opt/node_exporter\nServer_file=/usr/lib/systemd/system\nprot=6301\nRED_COLOR='\\E[1;31m'  #红\nGREEN_COLOR='\\E[1;32m' #绿\nRES='\\E[0m'\nnode_user=prometheus\nnode_group=prometheus\nTime_date=$(date +\"%Y%m%d%H%M%S\")\nif [ ! $(id -u) == 0 ];then\n    echo -e \"${GREEN_COLOR}Please run with the root user!${RES}\"\n    exit 22\nfi\n#防止重复执行\nif [ $(ps -ef | grep $0 |grep -v grep | wc -l) -gt 2 ];then    #理论值为 1,但这里是 2 \n        echo -e \"${RED_COLOR} $0  The script is executing, do not repeat!, Run id is $$${RES}\"\n        exit 22\nfi\n#create group if not exists\negrep \"^${node_group}\" /etc/group 2>/dev/null\nif [ $? -ne 0 ];then\n    groupadd ${node_group}\n    echo -e \"${node_group} group Creating a successful\"\nfi\n#create user if not exists\negrep \"^${node_user}\" /etc/passwd 2>/dev/null\nif [ $? -ne 0 ];then\n    useradd -g ${node_group} ${node_user}\n    echo -e \"${node_user} user Creating a successful\"\nfi\nport=`netstat -tunlp|grep ${prot}`\nif test -z \"${port}\"\nthen\n    [[ ! -d ${Install_PATH} ]] && mkdir -p ${Install_PATH} || echo \"存在\"\n    chown -R ${node_user}:${node_user} ${Install_PATH}\n    cd ${Install_PATH}\n    curl -u ztycroot:dwI6TNCe -O $WEB_PATH\n    chmod +x  ${Install_PATH}/node_exporter\n    if [[ $? == 0 ]];then\n        echo -e \"${GREEN_COLOR}Environment readiness complete${RES}\"\n    fi\n#-----------------\n    if [  -f \"${Server_file}/node_exporter.service\" ];then\n\t    [[ ! -d /ztocwst/back/ ]] && mkdir -p /ztocwst/back/ || echo \"已存在\"\n        cp -f ${Server_file}/node_exporter.service /ztocwst/back/node_exporter.service.bak${Time_date}\n    fi\n    if [ $? == 0 ];then\n        echo -e \"${GREEN_COLOR}node_exporter.service.bak${Time_date}  File The backup successful${RES}\"\n    else\n        echo -e \"${RED_COLOR}node_exporter.service.bak${Time_date} File backup failed${RES}\"\n        exit 22\n    fi\ncat >${Server_file}/node_exporter.service <<-EOF\n[Unit]\nDescription=Prometheus node exporter\nDocumentation=https://prometheus.io/\nAfter=local-fs.target network-online.target network.target\nWants=local-fs.target network-online.target network.target\n[Service]\nUser=${node_user}\nGroup=${node_group}\nType=simple\n#ExecStart=${Install_PATH}/node_exporter --web.listen-address=:9100 --log.level=error\n#ExecStart=${Install_PATH}/node_exporter --web.listen-address=:${prot} --log.level=error\n\nExecStart=${Install_PATH}/node_exporter --web.listen-address=:${prot} --log.level=error \\\\\n          --no-collector.softnet \\\\\n          --no-collector.nfs \\\\\n          --no-collector.hwmon \\\\\n          --no-collector.mdadm\n\nExecReload=/bin/kill -HUP $MAINPID\nTimeoutStopSec=20s\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n    systemctl daemon-reload\n    systemctl restart node_exporter\n    if [ $? == 0 ];then\n        echo -e  \"${GREEN_COLOR}node_exporte  Server start success!${RES}\"\n    else\n        echo -e  \"${RED_COLOR}node_exporte  Server start ERROR!${RES}\"\n        exit 22\n    fi\n#------------------\nelse\n    echo -e \"${GREEN_COLOR}port:${prot} is busy,failed${RES}\"\nfi\nsystemctl enable node_exporter\nsystemctl status node_exporter\n#验证\ncode=`curl -I -m 3 -o /dev/null -s -w %{http_code}  127.0.0.1:${prot}`\nif [ ${code} == 200 ];then\n    echo -e  \"${GREEN_COLOR}register node in consul success${RES}\"\nelse\n    echo -e \"${RED_COLOR}Registration failed or registered, please check! ${RES}\"\n    exit 22\nfi\n```\n\n","source":"_posts/prometheus/node_exporter安装脚本.md","raw":"---\ntitle:  node_exporter 安装脚本\ndate: 2020-09-21 18:47\ncategories:\n- prometheus\ntags:\n- prometheus\n- node_exporter\n---\n  \n  \n摘要: 安装node_exporter脚本， 用于监控数据采集\n<!-- more -->\n\n```bash\n#!/bin/bash\n#\n#   rhel7.4 安装node_exporter 用于监控数据采集\n#   Usage:\n#         sh addNode.sh\n#Logs: /var/log/messages\n#History:  2019/8/2 v3\n#Create_Time: 2019-08-02\n# USE: small_wei\n#\n#\n#WEB_PATH='http://12.0.94.46:8086'       #这里是我测试环境下的文件下载链接路径\n# https://github.com/prometheus/node_exporter   官方下载地址\nWEB_PATH='https://package-dev-qafc.ztocwst.com/res/node_exporter'\nInstall_PATH=/opt/node_exporter\nServer_file=/usr/lib/systemd/system\nprot=6301\nRED_COLOR='\\E[1;31m'  #红\nGREEN_COLOR='\\E[1;32m' #绿\nRES='\\E[0m'\nnode_user=prometheus\nnode_group=prometheus\nTime_date=$(date +\"%Y%m%d%H%M%S\")\nif [ ! $(id -u) == 0 ];then\n    echo -e \"${GREEN_COLOR}Please run with the root user!${RES}\"\n    exit 22\nfi\n#防止重复执行\nif [ $(ps -ef | grep $0 |grep -v grep | wc -l) -gt 2 ];then    #理论值为 1,但这里是 2 \n        echo -e \"${RED_COLOR} $0  The script is executing, do not repeat!, Run id is $$${RES}\"\n        exit 22\nfi\n#create group if not exists\negrep \"^${node_group}\" /etc/group 2>/dev/null\nif [ $? -ne 0 ];then\n    groupadd ${node_group}\n    echo -e \"${node_group} group Creating a successful\"\nfi\n#create user if not exists\negrep \"^${node_user}\" /etc/passwd 2>/dev/null\nif [ $? -ne 0 ];then\n    useradd -g ${node_group} ${node_user}\n    echo -e \"${node_user} user Creating a successful\"\nfi\nport=`netstat -tunlp|grep ${prot}`\nif test -z \"${port}\"\nthen\n    [[ ! -d ${Install_PATH} ]] && mkdir -p ${Install_PATH} || echo \"存在\"\n    chown -R ${node_user}:${node_user} ${Install_PATH}\n    cd ${Install_PATH}\n    curl -u ztycroot:dwI6TNCe -O $WEB_PATH\n    chmod +x  ${Install_PATH}/node_exporter\n    if [[ $? == 0 ]];then\n        echo -e \"${GREEN_COLOR}Environment readiness complete${RES}\"\n    fi\n#-----------------\n    if [  -f \"${Server_file}/node_exporter.service\" ];then\n\t    [[ ! -d /ztocwst/back/ ]] && mkdir -p /ztocwst/back/ || echo \"已存在\"\n        cp -f ${Server_file}/node_exporter.service /ztocwst/back/node_exporter.service.bak${Time_date}\n    fi\n    if [ $? == 0 ];then\n        echo -e \"${GREEN_COLOR}node_exporter.service.bak${Time_date}  File The backup successful${RES}\"\n    else\n        echo -e \"${RED_COLOR}node_exporter.service.bak${Time_date} File backup failed${RES}\"\n        exit 22\n    fi\ncat >${Server_file}/node_exporter.service <<-EOF\n[Unit]\nDescription=Prometheus node exporter\nDocumentation=https://prometheus.io/\nAfter=local-fs.target network-online.target network.target\nWants=local-fs.target network-online.target network.target\n[Service]\nUser=${node_user}\nGroup=${node_group}\nType=simple\n#ExecStart=${Install_PATH}/node_exporter --web.listen-address=:9100 --log.level=error\n#ExecStart=${Install_PATH}/node_exporter --web.listen-address=:${prot} --log.level=error\n\nExecStart=${Install_PATH}/node_exporter --web.listen-address=:${prot} --log.level=error \\\\\n          --no-collector.softnet \\\\\n          --no-collector.nfs \\\\\n          --no-collector.hwmon \\\\\n          --no-collector.mdadm\n\nExecReload=/bin/kill -HUP $MAINPID\nTimeoutStopSec=20s\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n    systemctl daemon-reload\n    systemctl restart node_exporter\n    if [ $? == 0 ];then\n        echo -e  \"${GREEN_COLOR}node_exporte  Server start success!${RES}\"\n    else\n        echo -e  \"${RED_COLOR}node_exporte  Server start ERROR!${RES}\"\n        exit 22\n    fi\n#------------------\nelse\n    echo -e \"${GREEN_COLOR}port:${prot} is busy,failed${RES}\"\nfi\nsystemctl enable node_exporter\nsystemctl status node_exporter\n#验证\ncode=`curl -I -m 3 -o /dev/null -s -w %{http_code}  127.0.0.1:${prot}`\nif [ ${code} == 200 ];then\n    echo -e  \"${GREEN_COLOR}register node in consul success${RES}\"\nelse\n    echo -e \"${RED_COLOR}Registration failed or registered, please check! ${RES}\"\n    exit 22\nfi\n```\n\n","slug":"prometheus/node_exporter安装脚本","published":1,"updated":"2021-01-27T08:20:35.767Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2x002wq0us1x4dbd4a","content":"<p>摘要: 安装node_exporter脚本， 用于监控数据采集</p>\n<a id=\"more\"></a>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#   rhel7.4 安装node_exporter 用于监控数据采集</span></span><br><span class=\"line\"><span class=\"comment\">#   Usage:</span></span><br><span class=\"line\"><span class=\"comment\">#         sh addNode.sh</span></span><br><span class=\"line\"><span class=\"comment\">#Logs: /var/log/messages</span></span><br><span class=\"line\"><span class=\"comment\">#History:  2019/8/2 v3</span></span><br><span class=\"line\"><span class=\"comment\">#Create_Time: 2019-08-02</span></span><br><span class=\"line\"><span class=\"comment\"># USE: small_wei</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#WEB_PATH=&#x27;http://12.0.94.46:8086&#x27;       #这里是我测试环境下的文件下载链接路径</span></span><br><span class=\"line\"><span class=\"comment\"># https://github.com/prometheus/node_exporter   官方下载地址</span></span><br><span class=\"line\">WEB_PATH=<span class=\"string\">&#x27;https://package-dev-qafc.ztocwst.com/res/node_exporter&#x27;</span></span><br><span class=\"line\">Install_PATH=/opt/node_exporter</span><br><span class=\"line\">Server_file=/usr/lib/systemd/system</span><br><span class=\"line\">prot=6301</span><br><span class=\"line\">RED_COLOR=<span class=\"string\">&#x27;\\E[1;31m&#x27;</span>  <span class=\"comment\">#红</span></span><br><span class=\"line\">GREEN_COLOR=<span class=\"string\">&#x27;\\E[1;32m&#x27;</span> <span class=\"comment\">#绿</span></span><br><span class=\"line\">RES=<span class=\"string\">&#x27;\\E[0m&#x27;</span></span><br><span class=\"line\">node_user=prometheus</span><br><span class=\"line\">node_group=prometheus</span><br><span class=\"line\">Time_date=$(date +<span class=\"string\">&quot;%Y%m%d%H%M%S&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ ! $(id -u) == 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;GREEN_COLOR&#125;</span>Please run with the root user!<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 22</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"comment\">#防止重复执行</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ $(ps -ef | grep <span class=\"variable\">$0</span> |grep -v grep | wc -l) -gt 2 ];<span class=\"keyword\">then</span>    <span class=\"comment\">#理论值为 1,但这里是 2 </span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;RED_COLOR&#125;</span> <span class=\"variable\">$0</span>  The script is executing, do not repeat!, Run id is $$<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 22</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"comment\">#create group if not exists</span></span><br><span class=\"line\">egrep <span class=\"string\">&quot;^<span class=\"variable\">$&#123;node_group&#125;</span>&quot;</span> /etc/group 2&gt;/dev/null</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ $? -ne 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    groupadd <span class=\"variable\">$&#123;node_group&#125;</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;node_group&#125;</span> group Creating a successful&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"comment\">#create user if not exists</span></span><br><span class=\"line\">egrep <span class=\"string\">&quot;^<span class=\"variable\">$&#123;node_user&#125;</span>&quot;</span> /etc/passwd 2&gt;/dev/null</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ $? -ne 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    useradd -g <span class=\"variable\">$&#123;node_group&#125;</span> <span class=\"variable\">$&#123;node_user&#125;</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;node_user&#125;</span> user Creating a successful&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\">port=`netstat -tunlp|grep <span class=\"variable\">$&#123;prot&#125;</span>`</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">test</span> -z <span class=\"string\">&quot;<span class=\"variable\">$&#123;port&#125;</span>&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    [[ ! -d <span class=\"variable\">$&#123;Install_PATH&#125;</span> ]] &amp;&amp; mkdir -p <span class=\"variable\">$&#123;Install_PATH&#125;</span> || <span class=\"built_in\">echo</span> <span class=\"string\">&quot;存在&quot;</span></span><br><span class=\"line\">    chown -R <span class=\"variable\">$&#123;node_user&#125;</span>:<span class=\"variable\">$&#123;node_user&#125;</span> <span class=\"variable\">$&#123;Install_PATH&#125;</span></span><br><span class=\"line\">    <span class=\"built_in\">cd</span> <span class=\"variable\">$&#123;Install_PATH&#125;</span></span><br><span class=\"line\">    curl -u ztycroot:dwI6TNCe -O <span class=\"variable\">$WEB_PATH</span></span><br><span class=\"line\">    chmod +x  <span class=\"variable\">$&#123;Install_PATH&#125;</span>/node_exporter</span><br><span class=\"line\">    <span class=\"keyword\">if</span> [[ $? == 0 ]];<span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;GREEN_COLOR&#125;</span>Environment readiness complete<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"comment\">#-----------------</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [  -f <span class=\"string\">&quot;<span class=\"variable\">$&#123;Server_file&#125;</span>/node_exporter.service&quot;</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">\t    [[ ! -d /ztocwst/back/ ]] &amp;&amp; mkdir -p /ztocwst/back/ || <span class=\"built_in\">echo</span> <span class=\"string\">&quot;已存在&quot;</span></span><br><span class=\"line\">        cp -f <span class=\"variable\">$&#123;Server_file&#125;</span>/node_exporter.service /ztocwst/back/node_exporter.service.bak<span class=\"variable\">$&#123;Time_date&#125;</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ $? == 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;GREEN_COLOR&#125;</span>node_exporter.service.bak<span class=\"variable\">$&#123;Time_date&#125;</span>  File The backup successful<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;RED_COLOR&#125;</span>node_exporter.service.bak<span class=\"variable\">$&#123;Time_date&#125;</span> File backup failed<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 22</span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">cat &gt;<span class=\"variable\">$&#123;Server_file&#125;</span>/node_exporter.service &lt;&lt;-EOF</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Prometheus node exporter</span><br><span class=\"line\">Documentation=https://prometheus.io/</span><br><span class=\"line\">After=local-fs.target network-online.target network.target</span><br><span class=\"line\">Wants=local-fs.target network-online.target network.target</span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=<span class=\"variable\">$&#123;node_user&#125;</span></span><br><span class=\"line\">Group=<span class=\"variable\">$&#123;node_group&#125;</span></span><br><span class=\"line\">Type=simple</span><br><span class=\"line\"><span class=\"comment\">#ExecStart=$&#123;Install_PATH&#125;/node_exporter --web.listen-address=:9100 --log.level=error</span></span><br><span class=\"line\"><span class=\"comment\">#ExecStart=$&#123;Install_PATH&#125;/node_exporter --web.listen-address=:$&#123;prot&#125; --log.level=error</span></span><br><span class=\"line\"></span><br><span class=\"line\">ExecStart=<span class=\"variable\">$&#123;Install_PATH&#125;</span>/node_exporter --web.listen-address=:<span class=\"variable\">$&#123;prot&#125;</span> --log.level=error \\\\</span><br><span class=\"line\">          --no-collector.softnet \\\\</span><br><span class=\"line\">          --no-collector.nfs \\\\</span><br><span class=\"line\">          --no-collector.hwmon \\\\</span><br><span class=\"line\">          --no-collector.mdadm</span><br><span class=\"line\"></span><br><span class=\"line\">ExecReload=/bin/<span class=\"built_in\">kill</span> -HUP <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\">TimeoutStopSec=20s</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\">EOF</span><br><span class=\"line\">    systemctl daemon-reload</span><br><span class=\"line\">    systemctl restart node_exporter</span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ $? == 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -e  <span class=\"string\">&quot;<span class=\"variable\">$&#123;GREEN_COLOR&#125;</span>node_exporte  Server start success!<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -e  <span class=\"string\">&quot;<span class=\"variable\">$&#123;RED_COLOR&#125;</span>node_exporte  Server start ERROR!<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 22</span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"comment\">#------------------</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;GREEN_COLOR&#125;</span>port:<span class=\"variable\">$&#123;prot&#125;</span> is busy,failed<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> node_exporter</span><br><span class=\"line\">systemctl status node_exporter</span><br><span class=\"line\"><span class=\"comment\">#验证</span></span><br><span class=\"line\">code=`curl -I -m 3 -o /dev/null -s -w %&#123;http_code&#125;  127.0.0.1:<span class=\"variable\">$&#123;prot&#125;</span>`</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$&#123;code&#125;</span> == 200 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e  <span class=\"string\">&quot;<span class=\"variable\">$&#123;GREEN_COLOR&#125;</span>register node in consul success<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;RED_COLOR&#125;</span>Registration failed or registered, please check! <span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 22</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"<p>摘要: 安装node_exporter脚本， 用于监控数据采集</p>","more":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#   rhel7.4 安装node_exporter 用于监控数据采集</span></span><br><span class=\"line\"><span class=\"comment\">#   Usage:</span></span><br><span class=\"line\"><span class=\"comment\">#         sh addNode.sh</span></span><br><span class=\"line\"><span class=\"comment\">#Logs: /var/log/messages</span></span><br><span class=\"line\"><span class=\"comment\">#History:  2019/8/2 v3</span></span><br><span class=\"line\"><span class=\"comment\">#Create_Time: 2019-08-02</span></span><br><span class=\"line\"><span class=\"comment\"># USE: small_wei</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#WEB_PATH=&#x27;http://12.0.94.46:8086&#x27;       #这里是我测试环境下的文件下载链接路径</span></span><br><span class=\"line\"><span class=\"comment\"># https://github.com/prometheus/node_exporter   官方下载地址</span></span><br><span class=\"line\">WEB_PATH=<span class=\"string\">&#x27;https://package-dev-qafc.ztocwst.com/res/node_exporter&#x27;</span></span><br><span class=\"line\">Install_PATH=/opt/node_exporter</span><br><span class=\"line\">Server_file=/usr/lib/systemd/system</span><br><span class=\"line\">prot=6301</span><br><span class=\"line\">RED_COLOR=<span class=\"string\">&#x27;\\E[1;31m&#x27;</span>  <span class=\"comment\">#红</span></span><br><span class=\"line\">GREEN_COLOR=<span class=\"string\">&#x27;\\E[1;32m&#x27;</span> <span class=\"comment\">#绿</span></span><br><span class=\"line\">RES=<span class=\"string\">&#x27;\\E[0m&#x27;</span></span><br><span class=\"line\">node_user=prometheus</span><br><span class=\"line\">node_group=prometheus</span><br><span class=\"line\">Time_date=$(date +<span class=\"string\">&quot;%Y%m%d%H%M%S&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ ! $(id -u) == 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;GREEN_COLOR&#125;</span>Please run with the root user!<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 22</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"comment\">#防止重复执行</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ $(ps -ef | grep <span class=\"variable\">$0</span> |grep -v grep | wc -l) -gt 2 ];<span class=\"keyword\">then</span>    <span class=\"comment\">#理论值为 1,但这里是 2 </span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;RED_COLOR&#125;</span> <span class=\"variable\">$0</span>  The script is executing, do not repeat!, Run id is $$<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 22</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"comment\">#create group if not exists</span></span><br><span class=\"line\">egrep <span class=\"string\">&quot;^<span class=\"variable\">$&#123;node_group&#125;</span>&quot;</span> /etc/group 2&gt;/dev/null</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ $? -ne 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    groupadd <span class=\"variable\">$&#123;node_group&#125;</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;node_group&#125;</span> group Creating a successful&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"comment\">#create user if not exists</span></span><br><span class=\"line\">egrep <span class=\"string\">&quot;^<span class=\"variable\">$&#123;node_user&#125;</span>&quot;</span> /etc/passwd 2&gt;/dev/null</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ $? -ne 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    useradd -g <span class=\"variable\">$&#123;node_group&#125;</span> <span class=\"variable\">$&#123;node_user&#125;</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;node_user&#125;</span> user Creating a successful&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\">port=`netstat -tunlp|grep <span class=\"variable\">$&#123;prot&#125;</span>`</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">test</span> -z <span class=\"string\">&quot;<span class=\"variable\">$&#123;port&#125;</span>&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">then</span></span><br><span class=\"line\">    [[ ! -d <span class=\"variable\">$&#123;Install_PATH&#125;</span> ]] &amp;&amp; mkdir -p <span class=\"variable\">$&#123;Install_PATH&#125;</span> || <span class=\"built_in\">echo</span> <span class=\"string\">&quot;存在&quot;</span></span><br><span class=\"line\">    chown -R <span class=\"variable\">$&#123;node_user&#125;</span>:<span class=\"variable\">$&#123;node_user&#125;</span> <span class=\"variable\">$&#123;Install_PATH&#125;</span></span><br><span class=\"line\">    <span class=\"built_in\">cd</span> <span class=\"variable\">$&#123;Install_PATH&#125;</span></span><br><span class=\"line\">    curl -u ztycroot:dwI6TNCe -O <span class=\"variable\">$WEB_PATH</span></span><br><span class=\"line\">    chmod +x  <span class=\"variable\">$&#123;Install_PATH&#125;</span>/node_exporter</span><br><span class=\"line\">    <span class=\"keyword\">if</span> [[ $? == 0 ]];<span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;GREEN_COLOR&#125;</span>Environment readiness complete<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"comment\">#-----------------</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [  -f <span class=\"string\">&quot;<span class=\"variable\">$&#123;Server_file&#125;</span>/node_exporter.service&quot;</span> ];<span class=\"keyword\">then</span></span><br><span class=\"line\">\t    [[ ! -d /ztocwst/back/ ]] &amp;&amp; mkdir -p /ztocwst/back/ || <span class=\"built_in\">echo</span> <span class=\"string\">&quot;已存在&quot;</span></span><br><span class=\"line\">        cp -f <span class=\"variable\">$&#123;Server_file&#125;</span>/node_exporter.service /ztocwst/back/node_exporter.service.bak<span class=\"variable\">$&#123;Time_date&#125;</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ $? == 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;GREEN_COLOR&#125;</span>node_exporter.service.bak<span class=\"variable\">$&#123;Time_date&#125;</span>  File The backup successful<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;RED_COLOR&#125;</span>node_exporter.service.bak<span class=\"variable\">$&#123;Time_date&#125;</span> File backup failed<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 22</span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\">cat &gt;<span class=\"variable\">$&#123;Server_file&#125;</span>/node_exporter.service &lt;&lt;-EOF</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Prometheus node exporter</span><br><span class=\"line\">Documentation=https://prometheus.io/</span><br><span class=\"line\">After=local-fs.target network-online.target network.target</span><br><span class=\"line\">Wants=local-fs.target network-online.target network.target</span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=<span class=\"variable\">$&#123;node_user&#125;</span></span><br><span class=\"line\">Group=<span class=\"variable\">$&#123;node_group&#125;</span></span><br><span class=\"line\">Type=simple</span><br><span class=\"line\"><span class=\"comment\">#ExecStart=$&#123;Install_PATH&#125;/node_exporter --web.listen-address=:9100 --log.level=error</span></span><br><span class=\"line\"><span class=\"comment\">#ExecStart=$&#123;Install_PATH&#125;/node_exporter --web.listen-address=:$&#123;prot&#125; --log.level=error</span></span><br><span class=\"line\"></span><br><span class=\"line\">ExecStart=<span class=\"variable\">$&#123;Install_PATH&#125;</span>/node_exporter --web.listen-address=:<span class=\"variable\">$&#123;prot&#125;</span> --log.level=error \\\\</span><br><span class=\"line\">          --no-collector.softnet \\\\</span><br><span class=\"line\">          --no-collector.nfs \\\\</span><br><span class=\"line\">          --no-collector.hwmon \\\\</span><br><span class=\"line\">          --no-collector.mdadm</span><br><span class=\"line\"></span><br><span class=\"line\">ExecReload=/bin/<span class=\"built_in\">kill</span> -HUP <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\">TimeoutStopSec=20s</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\">EOF</span><br><span class=\"line\">    systemctl daemon-reload</span><br><span class=\"line\">    systemctl restart node_exporter</span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ $? == 0 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -e  <span class=\"string\">&quot;<span class=\"variable\">$&#123;GREEN_COLOR&#125;</span>node_exporte  Server start success!<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        <span class=\"built_in\">echo</span> -e  <span class=\"string\">&quot;<span class=\"variable\">$&#123;RED_COLOR&#125;</span>node_exporte  Server start ERROR!<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">        <span class=\"built_in\">exit</span> 22</span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"comment\">#------------------</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;GREEN_COLOR&#125;</span>port:<span class=\"variable\">$&#123;prot&#125;</span> is busy,failed<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> node_exporter</span><br><span class=\"line\">systemctl status node_exporter</span><br><span class=\"line\"><span class=\"comment\">#验证</span></span><br><span class=\"line\">code=`curl -I -m 3 -o /dev/null -s -w %&#123;http_code&#125;  127.0.0.1:<span class=\"variable\">$&#123;prot&#125;</span>`</span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$&#123;code&#125;</span> == 200 ];<span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e  <span class=\"string\">&quot;<span class=\"variable\">$&#123;GREEN_COLOR&#125;</span>register node in consul success<span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;<span class=\"variable\">$&#123;RED_COLOR&#125;</span>Registration failed or registered, please check! <span class=\"variable\">$&#123;RES&#125;</span>&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 22</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>"},{"title":"mongodb 安装和用户管理","date":"2020-09-21T04:45:00.000Z","_content":"\n\n### 安装mongodb3.2\n\n下载mongodb\n\n```\nwget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel62-3.2.3.tgz\n```\n\n```\ntar xf mongodb-linux-x86_64-rhel62-3.2.3.tgz\nmv mongodb-linux-x86_64-rhel62-3.2.3 mongodb\ncd mongodb\nmkdir data logs conf\n```\n\n\n\n配置文件\n\n```\nvim conf/mongod.conf\n\nsystemLog:\n  destination: file\n  path: /opt/mongodb-27017/logs/mongod.log\n  logAppend: true\nprocessManagement:\n  fork: true\n  pidFilePath: \"/opt/mongodb-27017/data/mongod.pid\"\nnet:\n  port: 27017\n  http:\n    enabled: true\nstorage:\n  dbPath: \"/opt/mongodb-27017/data\"\n  engine: wiredTiger\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 1\n      directoryForIndexes: true\n    collectionConfig:\n      blockCompressor: zlib\n    indexConfig:\n      prefixCompression: true\n  journal:\n    enabled: true\n  directoryPerDB: true\nsecurity:\n  authorization: enabled      # 开启关闭验证\n```\n\n`mongo3.x以后的版本配置文件都是yaml格式的，官方关于mongo配置文件相关选项说明，https://docs.mongodb.org/manual/reference/configuration-options/#configuration-file`\n\n\n\n启动mongo\n\n```\n/opt/mongodb-27017/bin/mongod -f /opt/mongodb-27017/conf/mongod.conf\n```\n\n\n\n```\nps -ef | grep mongo\n\nroot      4801     1  1 15:25 ?        00:00:22 /opt/mongodb-27017/bin/mongod -f /opt/mongodb-27017/conf/mongod.conf\nroot      4849     1  1 15:29 ?        00:00:18 /opt/mongodb-27018/bin/mongod -f /opt/mongodb-27018/conf/mongod.conf\n```\n\n\n\n\n\n### monodb 用户管理\n\n\n\n角色\n\nRead：    允许用户读取指定数据库\n\nreadWrite：   允许用户读写指定数据库\n\ndbAdmin：    允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile\n\nuserAdmin：  允许用户向system.users集合写入，可以找指定数据库里创建、删除和管理用户\n\nclusterAdmin：  只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限。\n\nreadAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的读权限\n\nreadWriteAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的读写权限\n\nuserAdminAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的userAdmin权限\n\ndbAdminAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限。\n\nroot：   只在admin数据库中可用。超级账号，超级权限\n\n\n\n1. 数据库用户角色：   read、readWrite；\n2. 数据库管理角色：   dbAdmin、dbOwner、userAdmin;\n3. 集群管理角色：      clusterAdmin、clusterManager、4. clusterMonitor、hostManage；\n4. 备份恢复角色：     backup、restore；\n5. 所有数据库角色：     readAnyDatabase、readWriteAnyDatabase、userAdminAnyDatabase、dbAdminAnyDatabase\n6. 超级用户角色：    root\n7. 内部角色：   __system\n\n\n\n`注意： 用户在哪个库创建，就要在哪个库auth认证，并在mongo登录时也要先连接认证库`\n\n\n\n### 创建admin 超级管理员用户\n\n```\nuse admin\ndb.createUser(\n  { user: \"admin\",  \n    customData：{description:\"superuser\"},\n    pwd: \"admin\",  \n    roles: [ { role: \"userAdminAnyDatabase\", db: \"admin\" } ]  \n  }  \n) \n```\n\n超级用户的role有两种，userAdmin或者userAdminAnyDatabase(比前一种多加了对所有数据库的访问,仅仅是访问而已)。\n\n\n\n### 创建一个不受访问限制的超级用户\n\n```\nuse admin\ndb.createUser(\n    {\n        user:\"root\",\n        pwd:\"pwd\",\n        roles:[\"root\"]\n    }\n)\n```\n\n### 创建一个业务数据库管理员用户\n\n```\nuse admin\ndb.createUser({\n    user:\"user001\",\n    pwd:\"123456\",\n    customData:{\n        name:'jim',\n        email:'jim@qq.com',\n        age:18,\n    },\n    roles:[\n        {role:\"readWrite\",db:\"db001\"},\n        {role:\"readWrite\",db:\"db002\"},\n        'read'   // 对其他数据库有只读权限，对db001、db002是读写权限\n    ]\n})\n```\n\n### 查看创建的用户\n\n```\nshow users    或     db.system.users.find()     或    db.runCommand({usersInfo:\"userName\"})\n```\n\n### 修改密码\n\n```\nuse admin\ndb.changeUserPassword(\"username\", \"xxx\")\n```\n\n### 修改密码和用户信息\n\n```\ndb.runCommand(\n    {\n        updateUser:\"username\",\n        pwd:\"xxx\",\n        customData:{title:\"xxx\"}\n    }\n)\n```\n\n### 删除数据库用户\n\n```\nuse admin\ndb.dropUser('user001')\n```\n\n### 创建其他数据管理员\n\n```\n// 登录管理员用户\nuse admin\ndb.auth('admin','admin')\n// 切换至db001数据库\nuse db001\n// ... 増查改删该数据库专有用户\n```\n\n```\nuse admin\ndb.createUser({user:'superadmin',pwd:'123456', roles:[{role:'root', db:'admin'}]})     ---创建超级管理员用户\n \ndb.createUser({user:'useradmin',pwd:'123456', roles:[{role:'userAdminAnyDatabase', db:'admin'}]})     ---创建用户管理员账户（能查询其他库集合，但不能查询集合内容）\n \ndb.createUser({user:'admin',pwd:'123456', roles:[{role:'readWriteAnyDatabase', db:'admin'}]})     ---创建访问任意库读写的账户\n \ndb.createUser({user:'user1',pwd:'user1',roles:[{role:'readWrite',db:'test'}]})     ---创建只对test库有读写权限的用户\n \ndb.createUser({user:\"bkuser2\",pwd:\"Bkuser2\",roles:[{role:\"backup\",db:\"admin\"}]})     ---创建用于备份时的用户，如若是恢复权限，则将backup换为restore即可\n--- 注：新建backup账户时，roles里面的db必须是admin，要不然会报错\n```\n\n\n\n\n","source":"_posts/mongodb/安装monogdb3.2.md","raw":"---\ntitle: mongodb 安装和用户管理\ndate: 2020-09-21 12:45\ncategories:\n- mongodb\ntags:\n- mongodb\n- auth\n---\n\n\n### 安装mongodb3.2\n\n下载mongodb\n\n```\nwget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel62-3.2.3.tgz\n```\n\n```\ntar xf mongodb-linux-x86_64-rhel62-3.2.3.tgz\nmv mongodb-linux-x86_64-rhel62-3.2.3 mongodb\ncd mongodb\nmkdir data logs conf\n```\n\n\n\n配置文件\n\n```\nvim conf/mongod.conf\n\nsystemLog:\n  destination: file\n  path: /opt/mongodb-27017/logs/mongod.log\n  logAppend: true\nprocessManagement:\n  fork: true\n  pidFilePath: \"/opt/mongodb-27017/data/mongod.pid\"\nnet:\n  port: 27017\n  http:\n    enabled: true\nstorage:\n  dbPath: \"/opt/mongodb-27017/data\"\n  engine: wiredTiger\n  wiredTiger:\n    engineConfig:\n      cacheSizeGB: 1\n      directoryForIndexes: true\n    collectionConfig:\n      blockCompressor: zlib\n    indexConfig:\n      prefixCompression: true\n  journal:\n    enabled: true\n  directoryPerDB: true\nsecurity:\n  authorization: enabled      # 开启关闭验证\n```\n\n`mongo3.x以后的版本配置文件都是yaml格式的，官方关于mongo配置文件相关选项说明，https://docs.mongodb.org/manual/reference/configuration-options/#configuration-file`\n\n\n\n启动mongo\n\n```\n/opt/mongodb-27017/bin/mongod -f /opt/mongodb-27017/conf/mongod.conf\n```\n\n\n\n```\nps -ef | grep mongo\n\nroot      4801     1  1 15:25 ?        00:00:22 /opt/mongodb-27017/bin/mongod -f /opt/mongodb-27017/conf/mongod.conf\nroot      4849     1  1 15:29 ?        00:00:18 /opt/mongodb-27018/bin/mongod -f /opt/mongodb-27018/conf/mongod.conf\n```\n\n\n\n\n\n### monodb 用户管理\n\n\n\n角色\n\nRead：    允许用户读取指定数据库\n\nreadWrite：   允许用户读写指定数据库\n\ndbAdmin：    允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile\n\nuserAdmin：  允许用户向system.users集合写入，可以找指定数据库里创建、删除和管理用户\n\nclusterAdmin：  只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限。\n\nreadAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的读权限\n\nreadWriteAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的读写权限\n\nuserAdminAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的userAdmin权限\n\ndbAdminAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限。\n\nroot：   只在admin数据库中可用。超级账号，超级权限\n\n\n\n1. 数据库用户角色：   read、readWrite；\n2. 数据库管理角色：   dbAdmin、dbOwner、userAdmin;\n3. 集群管理角色：      clusterAdmin、clusterManager、4. clusterMonitor、hostManage；\n4. 备份恢复角色：     backup、restore；\n5. 所有数据库角色：     readAnyDatabase、readWriteAnyDatabase、userAdminAnyDatabase、dbAdminAnyDatabase\n6. 超级用户角色：    root\n7. 内部角色：   __system\n\n\n\n`注意： 用户在哪个库创建，就要在哪个库auth认证，并在mongo登录时也要先连接认证库`\n\n\n\n### 创建admin 超级管理员用户\n\n```\nuse admin\ndb.createUser(\n  { user: \"admin\",  \n    customData：{description:\"superuser\"},\n    pwd: \"admin\",  \n    roles: [ { role: \"userAdminAnyDatabase\", db: \"admin\" } ]  \n  }  \n) \n```\n\n超级用户的role有两种，userAdmin或者userAdminAnyDatabase(比前一种多加了对所有数据库的访问,仅仅是访问而已)。\n\n\n\n### 创建一个不受访问限制的超级用户\n\n```\nuse admin\ndb.createUser(\n    {\n        user:\"root\",\n        pwd:\"pwd\",\n        roles:[\"root\"]\n    }\n)\n```\n\n### 创建一个业务数据库管理员用户\n\n```\nuse admin\ndb.createUser({\n    user:\"user001\",\n    pwd:\"123456\",\n    customData:{\n        name:'jim',\n        email:'jim@qq.com',\n        age:18,\n    },\n    roles:[\n        {role:\"readWrite\",db:\"db001\"},\n        {role:\"readWrite\",db:\"db002\"},\n        'read'   // 对其他数据库有只读权限，对db001、db002是读写权限\n    ]\n})\n```\n\n### 查看创建的用户\n\n```\nshow users    或     db.system.users.find()     或    db.runCommand({usersInfo:\"userName\"})\n```\n\n### 修改密码\n\n```\nuse admin\ndb.changeUserPassword(\"username\", \"xxx\")\n```\n\n### 修改密码和用户信息\n\n```\ndb.runCommand(\n    {\n        updateUser:\"username\",\n        pwd:\"xxx\",\n        customData:{title:\"xxx\"}\n    }\n)\n```\n\n### 删除数据库用户\n\n```\nuse admin\ndb.dropUser('user001')\n```\n\n### 创建其他数据管理员\n\n```\n// 登录管理员用户\nuse admin\ndb.auth('admin','admin')\n// 切换至db001数据库\nuse db001\n// ... 増查改删该数据库专有用户\n```\n\n```\nuse admin\ndb.createUser({user:'superadmin',pwd:'123456', roles:[{role:'root', db:'admin'}]})     ---创建超级管理员用户\n \ndb.createUser({user:'useradmin',pwd:'123456', roles:[{role:'userAdminAnyDatabase', db:'admin'}]})     ---创建用户管理员账户（能查询其他库集合，但不能查询集合内容）\n \ndb.createUser({user:'admin',pwd:'123456', roles:[{role:'readWriteAnyDatabase', db:'admin'}]})     ---创建访问任意库读写的账户\n \ndb.createUser({user:'user1',pwd:'user1',roles:[{role:'readWrite',db:'test'}]})     ---创建只对test库有读写权限的用户\n \ndb.createUser({user:\"bkuser2\",pwd:\"Bkuser2\",roles:[{role:\"backup\",db:\"admin\"}]})     ---创建用于备份时的用户，如若是恢复权限，则将backup换为restore即可\n--- 注：新建backup账户时，roles里面的db必须是admin，要不然会报错\n```\n\n\n\n\n","slug":"mongodb/安装monogdb3.2","published":1,"updated":"2021-01-27T08:20:35.762Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2y002zq0us7oem03mx","content":"<h3 id=\"安装mongodb3-2\"><a href=\"#安装mongodb3-2\" class=\"headerlink\" title=\"安装mongodb3.2\"></a>安装mongodb3.2</h3><p>下载mongodb</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;fastdl.mongodb.org&#x2F;linux&#x2F;mongodb-linux-x86_64-rhel62-3.2.3.tgz</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xf mongodb-linux-x86_64-rhel62-3.2.3.tgz</span><br><span class=\"line\">mv mongodb-linux-x86_64-rhel62-3.2.3 mongodb</span><br><span class=\"line\">cd mongodb</span><br><span class=\"line\">mkdir data logs conf</span><br></pre></td></tr></table></figure>\n\n\n\n<p>配置文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim conf&#x2F;mongod.conf</span><br><span class=\"line\"></span><br><span class=\"line\">systemLog:</span><br><span class=\"line\">  destination: file</span><br><span class=\"line\">  path: &#x2F;opt&#x2F;mongodb-27017&#x2F;logs&#x2F;mongod.log</span><br><span class=\"line\">  logAppend: true</span><br><span class=\"line\">processManagement:</span><br><span class=\"line\">  fork: true</span><br><span class=\"line\">  pidFilePath: &quot;&#x2F;opt&#x2F;mongodb-27017&#x2F;data&#x2F;mongod.pid&quot;</span><br><span class=\"line\">net:</span><br><span class=\"line\">  port: 27017</span><br><span class=\"line\">  http:</span><br><span class=\"line\">    enabled: true</span><br><span class=\"line\">storage:</span><br><span class=\"line\">  dbPath: &quot;&#x2F;opt&#x2F;mongodb-27017&#x2F;data&quot;</span><br><span class=\"line\">  engine: wiredTiger</span><br><span class=\"line\">  wiredTiger:</span><br><span class=\"line\">    engineConfig:</span><br><span class=\"line\">      cacheSizeGB: 1</span><br><span class=\"line\">      directoryForIndexes: true</span><br><span class=\"line\">    collectionConfig:</span><br><span class=\"line\">      blockCompressor: zlib</span><br><span class=\"line\">    indexConfig:</span><br><span class=\"line\">      prefixCompression: true</span><br><span class=\"line\">  journal:</span><br><span class=\"line\">    enabled: true</span><br><span class=\"line\">  directoryPerDB: true</span><br><span class=\"line\">security:</span><br><span class=\"line\">  authorization: enabled      # 开启关闭验证</span><br></pre></td></tr></table></figure>\n\n<p><code>mongo3.x以后的版本配置文件都是yaml格式的，官方关于mongo配置文件相关选项说明，https://docs.mongodb.org/manual/reference/configuration-options/#configuration-file</code></p>\n<p>启动mongo</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;opt&#x2F;mongodb-27017&#x2F;bin&#x2F;mongod -f &#x2F;opt&#x2F;mongodb-27017&#x2F;conf&#x2F;mongod.conf</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -ef | grep mongo</span><br><span class=\"line\"></span><br><span class=\"line\">root      4801     1  1 15:25 ?        00:00:22 &#x2F;opt&#x2F;mongodb-27017&#x2F;bin&#x2F;mongod -f &#x2F;opt&#x2F;mongodb-27017&#x2F;conf&#x2F;mongod.conf</span><br><span class=\"line\">root      4849     1  1 15:29 ?        00:00:18 &#x2F;opt&#x2F;mongodb-27018&#x2F;bin&#x2F;mongod -f &#x2F;opt&#x2F;mongodb-27018&#x2F;conf&#x2F;mongod.conf</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"monodb-用户管理\"><a href=\"#monodb-用户管理\" class=\"headerlink\" title=\"monodb 用户管理\"></a>monodb 用户管理</h3><p>角色</p>\n<p>Read：    允许用户读取指定数据库</p>\n<p>readWrite：   允许用户读写指定数据库</p>\n<p>dbAdmin：    允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile</p>\n<p>userAdmin：  允许用户向system.users集合写入，可以找指定数据库里创建、删除和管理用户</p>\n<p>clusterAdmin：  只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限。</p>\n<p>readAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的读权限</p>\n<p>readWriteAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的读写权限</p>\n<p>userAdminAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的userAdmin权限</p>\n<p>dbAdminAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限。</p>\n<p>root：   只在admin数据库中可用。超级账号，超级权限</p>\n<ol>\n<li>数据库用户角色：   read、readWrite；</li>\n<li>数据库管理角色：   dbAdmin、dbOwner、userAdmin;</li>\n<li>集群管理角色：      clusterAdmin、clusterManager、4. clusterMonitor、hostManage；</li>\n<li>备份恢复角色：     backup、restore；</li>\n<li>所有数据库角色：     readAnyDatabase、readWriteAnyDatabase、userAdminAnyDatabase、dbAdminAnyDatabase</li>\n<li>超级用户角色：    root</li>\n<li>内部角色：   __system</li>\n</ol>\n<p><code>注意： 用户在哪个库创建，就要在哪个库auth认证，并在mongo登录时也要先连接认证库</code></p>\n<h3 id=\"创建admin-超级管理员用户\"><a href=\"#创建admin-超级管理员用户\" class=\"headerlink\" title=\"创建admin 超级管理员用户\"></a>创建admin 超级管理员用户</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.createUser(</span><br><span class=\"line\">  &#123; user: &quot;admin&quot;,  </span><br><span class=\"line\">    customData：&#123;description:&quot;superuser&quot;&#125;,</span><br><span class=\"line\">    pwd: &quot;admin&quot;,  </span><br><span class=\"line\">    roles: [ &#123; role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; &#125; ]  </span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\">) </span><br></pre></td></tr></table></figure>\n\n<p>超级用户的role有两种，userAdmin或者userAdminAnyDatabase(比前一种多加了对所有数据库的访问,仅仅是访问而已)。</p>\n<h3 id=\"创建一个不受访问限制的超级用户\"><a href=\"#创建一个不受访问限制的超级用户\" class=\"headerlink\" title=\"创建一个不受访问限制的超级用户\"></a>创建一个不受访问限制的超级用户</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.createUser(</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        user:&quot;root&quot;,</span><br><span class=\"line\">        pwd:&quot;pwd&quot;,</span><br><span class=\"line\">        roles:[&quot;root&quot;]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建一个业务数据库管理员用户\"><a href=\"#创建一个业务数据库管理员用户\" class=\"headerlink\" title=\"创建一个业务数据库管理员用户\"></a>创建一个业务数据库管理员用户</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.createUser(&#123;</span><br><span class=\"line\">    user:&quot;user001&quot;,</span><br><span class=\"line\">    pwd:&quot;123456&quot;,</span><br><span class=\"line\">    customData:&#123;</span><br><span class=\"line\">        name:&#39;jim&#39;,</span><br><span class=\"line\">        email:&#39;jim@qq.com&#39;,</span><br><span class=\"line\">        age:18,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    roles:[</span><br><span class=\"line\">        &#123;role:&quot;readWrite&quot;,db:&quot;db001&quot;&#125;,</span><br><span class=\"line\">        &#123;role:&quot;readWrite&quot;,db:&quot;db002&quot;&#125;,</span><br><span class=\"line\">        &#39;read&#39;   &#x2F;&#x2F; 对其他数据库有只读权限，对db001、db002是读写权限</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看创建的用户\"><a href=\"#查看创建的用户\" class=\"headerlink\" title=\"查看创建的用户\"></a>查看创建的用户</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show users    或     db.system.users.find()     或    db.runCommand(&#123;usersInfo:&quot;userName&quot;&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改密码\"><a href=\"#修改密码\" class=\"headerlink\" title=\"修改密码\"></a>修改密码</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.changeUserPassword(&quot;username&quot;, &quot;xxx&quot;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改密码和用户信息\"><a href=\"#修改密码和用户信息\" class=\"headerlink\" title=\"修改密码和用户信息\"></a>修改密码和用户信息</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.runCommand(</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        updateUser:&quot;username&quot;,</span><br><span class=\"line\">        pwd:&quot;xxx&quot;,</span><br><span class=\"line\">        customData:&#123;title:&quot;xxx&quot;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除数据库用户\"><a href=\"#删除数据库用户\" class=\"headerlink\" title=\"删除数据库用户\"></a>删除数据库用户</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.dropUser(&#39;user001&#39;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建其他数据管理员\"><a href=\"#创建其他数据管理员\" class=\"headerlink\" title=\"创建其他数据管理员\"></a>创建其他数据管理员</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; 登录管理员用户</span><br><span class=\"line\">use admin</span><br><span class=\"line\">db.auth(&#39;admin&#39;,&#39;admin&#39;)</span><br><span class=\"line\">&#x2F;&#x2F; 切换至db001数据库</span><br><span class=\"line\">use db001</span><br><span class=\"line\">&#x2F;&#x2F; ... 増查改删该数据库专有用户</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.createUser(&#123;user:&#39;superadmin&#39;,pwd:&#39;123456&#39;, roles:[&#123;role:&#39;root&#39;, db:&#39;admin&#39;&#125;]&#125;)     ---创建超级管理员用户</span><br><span class=\"line\"> </span><br><span class=\"line\">db.createUser(&#123;user:&#39;useradmin&#39;,pwd:&#39;123456&#39;, roles:[&#123;role:&#39;userAdminAnyDatabase&#39;, db:&#39;admin&#39;&#125;]&#125;)     ---创建用户管理员账户（能查询其他库集合，但不能查询集合内容）</span><br><span class=\"line\"> </span><br><span class=\"line\">db.createUser(&#123;user:&#39;admin&#39;,pwd:&#39;123456&#39;, roles:[&#123;role:&#39;readWriteAnyDatabase&#39;, db:&#39;admin&#39;&#125;]&#125;)     ---创建访问任意库读写的账户</span><br><span class=\"line\"> </span><br><span class=\"line\">db.createUser(&#123;user:&#39;user1&#39;,pwd:&#39;user1&#39;,roles:[&#123;role:&#39;readWrite&#39;,db:&#39;test&#39;&#125;]&#125;)     ---创建只对test库有读写权限的用户</span><br><span class=\"line\"> </span><br><span class=\"line\">db.createUser(&#123;user:&quot;bkuser2&quot;,pwd:&quot;Bkuser2&quot;,roles:[&#123;role:&quot;backup&quot;,db:&quot;admin&quot;&#125;]&#125;)     ---创建用于备份时的用户，如若是恢复权限，则将backup换为restore即可</span><br><span class=\"line\">--- 注：新建backup账户时，roles里面的db必须是admin，要不然会报错</span><br></pre></td></tr></table></figure>\n\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"安装mongodb3-2\"><a href=\"#安装mongodb3-2\" class=\"headerlink\" title=\"安装mongodb3.2\"></a>安装mongodb3.2</h3><p>下载mongodb</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https:&#x2F;&#x2F;fastdl.mongodb.org&#x2F;linux&#x2F;mongodb-linux-x86_64-rhel62-3.2.3.tgz</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xf mongodb-linux-x86_64-rhel62-3.2.3.tgz</span><br><span class=\"line\">mv mongodb-linux-x86_64-rhel62-3.2.3 mongodb</span><br><span class=\"line\">cd mongodb</span><br><span class=\"line\">mkdir data logs conf</span><br></pre></td></tr></table></figure>\n\n\n\n<p>配置文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim conf&#x2F;mongod.conf</span><br><span class=\"line\"></span><br><span class=\"line\">systemLog:</span><br><span class=\"line\">  destination: file</span><br><span class=\"line\">  path: &#x2F;opt&#x2F;mongodb-27017&#x2F;logs&#x2F;mongod.log</span><br><span class=\"line\">  logAppend: true</span><br><span class=\"line\">processManagement:</span><br><span class=\"line\">  fork: true</span><br><span class=\"line\">  pidFilePath: &quot;&#x2F;opt&#x2F;mongodb-27017&#x2F;data&#x2F;mongod.pid&quot;</span><br><span class=\"line\">net:</span><br><span class=\"line\">  port: 27017</span><br><span class=\"line\">  http:</span><br><span class=\"line\">    enabled: true</span><br><span class=\"line\">storage:</span><br><span class=\"line\">  dbPath: &quot;&#x2F;opt&#x2F;mongodb-27017&#x2F;data&quot;</span><br><span class=\"line\">  engine: wiredTiger</span><br><span class=\"line\">  wiredTiger:</span><br><span class=\"line\">    engineConfig:</span><br><span class=\"line\">      cacheSizeGB: 1</span><br><span class=\"line\">      directoryForIndexes: true</span><br><span class=\"line\">    collectionConfig:</span><br><span class=\"line\">      blockCompressor: zlib</span><br><span class=\"line\">    indexConfig:</span><br><span class=\"line\">      prefixCompression: true</span><br><span class=\"line\">  journal:</span><br><span class=\"line\">    enabled: true</span><br><span class=\"line\">  directoryPerDB: true</span><br><span class=\"line\">security:</span><br><span class=\"line\">  authorization: enabled      # 开启关闭验证</span><br></pre></td></tr></table></figure>\n\n<p><code>mongo3.x以后的版本配置文件都是yaml格式的，官方关于mongo配置文件相关选项说明，https://docs.mongodb.org/manual/reference/configuration-options/#configuration-file</code></p>\n<p>启动mongo</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;opt&#x2F;mongodb-27017&#x2F;bin&#x2F;mongod -f &#x2F;opt&#x2F;mongodb-27017&#x2F;conf&#x2F;mongod.conf</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -ef | grep mongo</span><br><span class=\"line\"></span><br><span class=\"line\">root      4801     1  1 15:25 ?        00:00:22 &#x2F;opt&#x2F;mongodb-27017&#x2F;bin&#x2F;mongod -f &#x2F;opt&#x2F;mongodb-27017&#x2F;conf&#x2F;mongod.conf</span><br><span class=\"line\">root      4849     1  1 15:29 ?        00:00:18 &#x2F;opt&#x2F;mongodb-27018&#x2F;bin&#x2F;mongod -f &#x2F;opt&#x2F;mongodb-27018&#x2F;conf&#x2F;mongod.conf</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"monodb-用户管理\"><a href=\"#monodb-用户管理\" class=\"headerlink\" title=\"monodb 用户管理\"></a>monodb 用户管理</h3><p>角色</p>\n<p>Read：    允许用户读取指定数据库</p>\n<p>readWrite：   允许用户读写指定数据库</p>\n<p>dbAdmin：    允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile</p>\n<p>userAdmin：  允许用户向system.users集合写入，可以找指定数据库里创建、删除和管理用户</p>\n<p>clusterAdmin：  只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限。</p>\n<p>readAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的读权限</p>\n<p>readWriteAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的读写权限</p>\n<p>userAdminAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的userAdmin权限</p>\n<p>dbAdminAnyDatabase：   只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限。</p>\n<p>root：   只在admin数据库中可用。超级账号，超级权限</p>\n<ol>\n<li>数据库用户角色：   read、readWrite；</li>\n<li>数据库管理角色：   dbAdmin、dbOwner、userAdmin;</li>\n<li>集群管理角色：      clusterAdmin、clusterManager、4. clusterMonitor、hostManage；</li>\n<li>备份恢复角色：     backup、restore；</li>\n<li>所有数据库角色：     readAnyDatabase、readWriteAnyDatabase、userAdminAnyDatabase、dbAdminAnyDatabase</li>\n<li>超级用户角色：    root</li>\n<li>内部角色：   __system</li>\n</ol>\n<p><code>注意： 用户在哪个库创建，就要在哪个库auth认证，并在mongo登录时也要先连接认证库</code></p>\n<h3 id=\"创建admin-超级管理员用户\"><a href=\"#创建admin-超级管理员用户\" class=\"headerlink\" title=\"创建admin 超级管理员用户\"></a>创建admin 超级管理员用户</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.createUser(</span><br><span class=\"line\">  &#123; user: &quot;admin&quot;,  </span><br><span class=\"line\">    customData：&#123;description:&quot;superuser&quot;&#125;,</span><br><span class=\"line\">    pwd: &quot;admin&quot;,  </span><br><span class=\"line\">    roles: [ &#123; role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; &#125; ]  </span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\">) </span><br></pre></td></tr></table></figure>\n\n<p>超级用户的role有两种，userAdmin或者userAdminAnyDatabase(比前一种多加了对所有数据库的访问,仅仅是访问而已)。</p>\n<h3 id=\"创建一个不受访问限制的超级用户\"><a href=\"#创建一个不受访问限制的超级用户\" class=\"headerlink\" title=\"创建一个不受访问限制的超级用户\"></a>创建一个不受访问限制的超级用户</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.createUser(</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        user:&quot;root&quot;,</span><br><span class=\"line\">        pwd:&quot;pwd&quot;,</span><br><span class=\"line\">        roles:[&quot;root&quot;]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建一个业务数据库管理员用户\"><a href=\"#创建一个业务数据库管理员用户\" class=\"headerlink\" title=\"创建一个业务数据库管理员用户\"></a>创建一个业务数据库管理员用户</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.createUser(&#123;</span><br><span class=\"line\">    user:&quot;user001&quot;,</span><br><span class=\"line\">    pwd:&quot;123456&quot;,</span><br><span class=\"line\">    customData:&#123;</span><br><span class=\"line\">        name:&#39;jim&#39;,</span><br><span class=\"line\">        email:&#39;jim@qq.com&#39;,</span><br><span class=\"line\">        age:18,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    roles:[</span><br><span class=\"line\">        &#123;role:&quot;readWrite&quot;,db:&quot;db001&quot;&#125;,</span><br><span class=\"line\">        &#123;role:&quot;readWrite&quot;,db:&quot;db002&quot;&#125;,</span><br><span class=\"line\">        &#39;read&#39;   &#x2F;&#x2F; 对其他数据库有只读权限，对db001、db002是读写权限</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看创建的用户\"><a href=\"#查看创建的用户\" class=\"headerlink\" title=\"查看创建的用户\"></a>查看创建的用户</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show users    或     db.system.users.find()     或    db.runCommand(&#123;usersInfo:&quot;userName&quot;&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改密码\"><a href=\"#修改密码\" class=\"headerlink\" title=\"修改密码\"></a>修改密码</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.changeUserPassword(&quot;username&quot;, &quot;xxx&quot;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"修改密码和用户信息\"><a href=\"#修改密码和用户信息\" class=\"headerlink\" title=\"修改密码和用户信息\"></a>修改密码和用户信息</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.runCommand(</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        updateUser:&quot;username&quot;,</span><br><span class=\"line\">        pwd:&quot;xxx&quot;,</span><br><span class=\"line\">        customData:&#123;title:&quot;xxx&quot;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"删除数据库用户\"><a href=\"#删除数据库用户\" class=\"headerlink\" title=\"删除数据库用户\"></a>删除数据库用户</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.dropUser(&#39;user001&#39;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"创建其他数据管理员\"><a href=\"#创建其他数据管理员\" class=\"headerlink\" title=\"创建其他数据管理员\"></a>创建其他数据管理员</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; 登录管理员用户</span><br><span class=\"line\">use admin</span><br><span class=\"line\">db.auth(&#39;admin&#39;,&#39;admin&#39;)</span><br><span class=\"line\">&#x2F;&#x2F; 切换至db001数据库</span><br><span class=\"line\">use db001</span><br><span class=\"line\">&#x2F;&#x2F; ... 増查改删该数据库专有用户</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use admin</span><br><span class=\"line\">db.createUser(&#123;user:&#39;superadmin&#39;,pwd:&#39;123456&#39;, roles:[&#123;role:&#39;root&#39;, db:&#39;admin&#39;&#125;]&#125;)     ---创建超级管理员用户</span><br><span class=\"line\"> </span><br><span class=\"line\">db.createUser(&#123;user:&#39;useradmin&#39;,pwd:&#39;123456&#39;, roles:[&#123;role:&#39;userAdminAnyDatabase&#39;, db:&#39;admin&#39;&#125;]&#125;)     ---创建用户管理员账户（能查询其他库集合，但不能查询集合内容）</span><br><span class=\"line\"> </span><br><span class=\"line\">db.createUser(&#123;user:&#39;admin&#39;,pwd:&#39;123456&#39;, roles:[&#123;role:&#39;readWriteAnyDatabase&#39;, db:&#39;admin&#39;&#125;]&#125;)     ---创建访问任意库读写的账户</span><br><span class=\"line\"> </span><br><span class=\"line\">db.createUser(&#123;user:&#39;user1&#39;,pwd:&#39;user1&#39;,roles:[&#123;role:&#39;readWrite&#39;,db:&#39;test&#39;&#125;]&#125;)     ---创建只对test库有读写权限的用户</span><br><span class=\"line\"> </span><br><span class=\"line\">db.createUser(&#123;user:&quot;bkuser2&quot;,pwd:&quot;Bkuser2&quot;,roles:[&#123;role:&quot;backup&quot;,db:&quot;admin&quot;&#125;]&#125;)     ---创建用于备份时的用户，如若是恢复权限，则将backup换为restore即可</span><br><span class=\"line\">--- 注：新建backup账户时，roles里面的db必须是admin，要不然会报错</span><br></pre></td></tr></table></figure>\n\n\n\n\n"},{"title":"node_exporter 配置","date":"2020-09-21T08:34:00.000Z","_content":"\n\nnode_exporter是prometheus官方提供的agent，项目被托管在prometheus的账号之下。我们也可以通过官方提供的链接下载最新的版本。在官方的github里面已经提供了非常详细使用说明，我们这里带大家梳理一下\n\n\n### node_exporte基本信息配置\n\n```\n-- web.listen-address=\":9100\"\n# 监听的端口，默认是9100，若需要修改则通过此参数\n\n--web.telemetry-path=\"/metrics\"  \n#获取metric信息的url，默认是/metrics，若需要修改则通过此参数\n\n--log.level=\"info\" \n#设置日志级别\n\n--log.format=\"logger:stderr\"  \n#设置打印日志的格式，若有自动化日志提取工具可以使用这个参数规范日志打印的格式\n```\n\n\n### 通过正则表达式来屏蔽或选择某些监控项\n```\n--collector.diskstats.ignored-devices=\"^(ram|loop|fd|(h|s|v|xv)d[a-z]|nvme\\\\d+n\\\\d+p)\\\\d+$\"\n#通过正则表达式忽略某些磁盘的信息收集\n\n--collector.filesystem.ignored-mount-points=\"^/(dev|proc|sys|var/lib/docker/.+)($|/)\"  \n#通过正则表达式忽略某些文件系统挂载点的信息收集\n\n--collector.filesystem.ignored-fs-types=\"^(autofs|binfmt_misc|bpf|cgroup2?|configfs|debugfs|devpts|devtmpfs|fusectl|hugetlbfs|mqueue|nsfs|overlay|proc|procfs|pstore|rpc_pipefs|securityfs|selinuxfs|squashfs|sysfs|tracefs)$\"  \n#通过正则表达式忽略某些文件系统类型的信息收集\n\n--collector.netclass.ignored-devices=\"^$\"  \n#通过正则表达式忽略某些网络类的信息收集\n\n--collector.netdev.ignored-devices=\"^$\"  \n#通过正则表达式忽略某些网络设备的信息收集\n\n  --collector.netstat.fields=\"^$\"\n #通过正则表达式配置需要获取的网络状态信息\n \n--collector.vmstat.fields=\"^(oom_kill|pgpg|pswp|pg.*fault).*\" \n#通过正则表达式配置vmstat返回信息中需要收集的选项\n```\n\n```\n\n````\n\n### 添加用户名和密码验证\n\n我们直接可以使用 htpasswd 来生成 密码(在httpd-tools当中)\n```\nyum install httpd-tools -y\n\nhtpasswd -nBC 12 '' | tr -d ':\\n'       \nNew password:\nRe-type new password:                                              \n$2y$12$WLw2sYa.NYZoBVoCOE84qe3xNm7kbSoKVIBXP.PvqNDna60vnZhEW\n#这个密码可以用作其他的服务器上，自己输入的密码要记住，\n#用户名可以任意给一个，配置文件格式是如下，注意username前面有两个空格\n\nbasic_auth_users:\n  # 当前设置的用户名为 prometheus ， 可以设置多个\n  prometheus: $2y$12$WLw2sYa.NYZoBVoCOE84qe3xNm7kbSoKVIBXP.PvqNDna60vnZhEW\n```\n\n\n\n### TLS的配置\n```bash\n# mkdir -p prometheus-tls\n# cd prometheus-tls\n# openssl req -new -newkey rsa:2048 -days 365 -nodes -x509 -keyout node_exporter.key -out node_exporter.crt -subj \"/C=CN/ST=Beijing/L=Beijing/O=Moelove.info/CN=localhost\"\n\n# ls\nnode_exporter.crt  node_exporter.key\n```\n\n\n我们默认暴露的都是http的请求的，也没有验证，也就是明文传输，很容易存在安全隐患，如果需要对数据加密，我们就要使用参数`./node_exporter --web.config=web-config.yml`，这个文件的内容如下\n```\ntls_server_config:\n  # Certificate and key files for server to use to authenticate to client.\n  cert_file: node_exporter.crt   # <filename>\n  key_file: node_exporter.key    #<filename>\n\n  # Server policy for client authentication. Maps to ClientAuth Policies.\n  # For more detail on clientAuth options: [ClientAuthType](https://golang.org/pkg/crypto/tls/#ClientAuthType)\n  [ client_auth_type: <string> | default = \"NoClientCert\" ]\n\n  # CA certificate for client certificate authentication to the server.\n  [ client_ca_file: <filename> ]\n\n  # Minimum TLS version that is acceptable.\n  [ min_version: <string> | default = \"TLS12\" ]\n\n  # Maximum TLS version that is acceptable.\n  [ max_version: <string> | default = \"TLS13\" ]\n\n  # List of supported cipher suites for TLS versions up to TLS 1.2. If empty,\n  # Go default cipher suites are used. Available cipher suites are documented\n  # in the go documentation:\n  # https://golang.org/pkg/crypto/tls/#pkg-constants\n  [ cipher_suites:\n    [ - <string> ] ]\n\n  # prefer_server_cipher_suites controls whether the server selects the\n  # client's most preferred ciphersuite, or the server's most preferred\n  # ciphersuite. If true then the server's preference, as expressed in\n  # the order of elements in cipher_suites, is used.\n  [ prefer_server_cipher_suites: <bool> | default = true ]\n\n  # Elliptic curves that will be used in an ECDHE handshake, in preference\n  # order. Available curves are documented in the go documentation:\n  # https://golang.org/pkg/crypto/tls/#CurveID\n  [ curve_preferences:\n    [ - <string> ] ]\n\nhttp_server_config:\n  # Enable HTTP/2 support. Note that HTTP/2 is only supported with TLS.\n  # This can not be changed on the fly.\n  [ http2: <bool> | default = true ]\n\n# Usernames and hashed passwords that have full access to the web\n# server via basic authentication. If empty, no basic authentication is\n# required. Passwords are hashed with bcrypt.\nbasic_auth_users:\n  [ <string>: <secret> ... ]\n```\n\n\n不能直接 curl 进行请求了，我们可以将证书传递给 curl ，用来验证刚才的配置是否正确\n```\ncurl -s  --cacert node_exporter.crt https://localhost:9100/metrics  |grep node_exporter_build_info\n```\n\n当然，除了通过 --cacert 参数将证书传递给 curl 外，也可以通过 -k 参数来忽略证书检查。\n```\ncurl -s -k https://localhost:9100/metrics  |grep node_exporter_build_info        \n```\n\n### 配置 Prometheus 使用 TLS\n要修改下配置文件，让 Prometheus 可以抓取 Node Exporter 暴露的 metrics 。\n\n```\nglobal:\n  scrape_interval:     15s \n  evaluation_interval: 15s \n\nscrape_configs:\n  - job_name: 'prometheus'\n    static_configs:\n    - targets: ['localhost:9090']\n\n  - job_name: 'node_exporter'\n    scheme: https\n    tls_config:\n      ca_file: node_exporter.crt\n    static_configs:\n    - targets: ['localhost:9100']\n```\n\n这里额外增加了 `scheme: https`  表示通过 HTTPS 建立连接，tls_config 中指定了所用的证书文件。完整的配置可以参考 官方文档中对 [tls_config](https://prometheus.io/docs/prometheus/latest/configuration/configuration/#tls_config) 的说明 。\n\n\n\n### 配置 Prometheus 使用 Basic Auth\n```\nglobal:\n  scrape_interval:     15s \n  evaluation_interval: 15s \n\nscrape_configs:\n  - job_name: 'prometheus'\n    static_configs:\n    - targets: ['localhost:9090']\n\n  - job_name: 'node_exporter'\n    scheme: https\n    tls_config:\n      ca_file: node_exporter.crt\n    basic_auth:\n      username: prometheus\n      password: moelove.info\n    static_configs:\n    - targets: ['localhost:9100']\n```\n\n在生产中使用时，建议更加规范化操作，比如 CA 的选择，密码的管理等，比如 Node Exporter 的 Basic Auth 其实支持配置多个用户名密码的。\n\n","source":"_posts/prometheus/node_exporter配置.md","raw":"---\ntitle: node_exporter 配置\ndate: 2020-09-21 16:34\ncategories:\n- prometheus\ntags:\n- prometheus\n- node_exporter\n---\n\n\nnode_exporter是prometheus官方提供的agent，项目被托管在prometheus的账号之下。我们也可以通过官方提供的链接下载最新的版本。在官方的github里面已经提供了非常详细使用说明，我们这里带大家梳理一下\n\n\n### node_exporte基本信息配置\n\n```\n-- web.listen-address=\":9100\"\n# 监听的端口，默认是9100，若需要修改则通过此参数\n\n--web.telemetry-path=\"/metrics\"  \n#获取metric信息的url，默认是/metrics，若需要修改则通过此参数\n\n--log.level=\"info\" \n#设置日志级别\n\n--log.format=\"logger:stderr\"  \n#设置打印日志的格式，若有自动化日志提取工具可以使用这个参数规范日志打印的格式\n```\n\n\n### 通过正则表达式来屏蔽或选择某些监控项\n```\n--collector.diskstats.ignored-devices=\"^(ram|loop|fd|(h|s|v|xv)d[a-z]|nvme\\\\d+n\\\\d+p)\\\\d+$\"\n#通过正则表达式忽略某些磁盘的信息收集\n\n--collector.filesystem.ignored-mount-points=\"^/(dev|proc|sys|var/lib/docker/.+)($|/)\"  \n#通过正则表达式忽略某些文件系统挂载点的信息收集\n\n--collector.filesystem.ignored-fs-types=\"^(autofs|binfmt_misc|bpf|cgroup2?|configfs|debugfs|devpts|devtmpfs|fusectl|hugetlbfs|mqueue|nsfs|overlay|proc|procfs|pstore|rpc_pipefs|securityfs|selinuxfs|squashfs|sysfs|tracefs)$\"  \n#通过正则表达式忽略某些文件系统类型的信息收集\n\n--collector.netclass.ignored-devices=\"^$\"  \n#通过正则表达式忽略某些网络类的信息收集\n\n--collector.netdev.ignored-devices=\"^$\"  \n#通过正则表达式忽略某些网络设备的信息收集\n\n  --collector.netstat.fields=\"^$\"\n #通过正则表达式配置需要获取的网络状态信息\n \n--collector.vmstat.fields=\"^(oom_kill|pgpg|pswp|pg.*fault).*\" \n#通过正则表达式配置vmstat返回信息中需要收集的选项\n```\n\n```\n\n````\n\n### 添加用户名和密码验证\n\n我们直接可以使用 htpasswd 来生成 密码(在httpd-tools当中)\n```\nyum install httpd-tools -y\n\nhtpasswd -nBC 12 '' | tr -d ':\\n'       \nNew password:\nRe-type new password:                                              \n$2y$12$WLw2sYa.NYZoBVoCOE84qe3xNm7kbSoKVIBXP.PvqNDna60vnZhEW\n#这个密码可以用作其他的服务器上，自己输入的密码要记住，\n#用户名可以任意给一个，配置文件格式是如下，注意username前面有两个空格\n\nbasic_auth_users:\n  # 当前设置的用户名为 prometheus ， 可以设置多个\n  prometheus: $2y$12$WLw2sYa.NYZoBVoCOE84qe3xNm7kbSoKVIBXP.PvqNDna60vnZhEW\n```\n\n\n\n### TLS的配置\n```bash\n# mkdir -p prometheus-tls\n# cd prometheus-tls\n# openssl req -new -newkey rsa:2048 -days 365 -nodes -x509 -keyout node_exporter.key -out node_exporter.crt -subj \"/C=CN/ST=Beijing/L=Beijing/O=Moelove.info/CN=localhost\"\n\n# ls\nnode_exporter.crt  node_exporter.key\n```\n\n\n我们默认暴露的都是http的请求的，也没有验证，也就是明文传输，很容易存在安全隐患，如果需要对数据加密，我们就要使用参数`./node_exporter --web.config=web-config.yml`，这个文件的内容如下\n```\ntls_server_config:\n  # Certificate and key files for server to use to authenticate to client.\n  cert_file: node_exporter.crt   # <filename>\n  key_file: node_exporter.key    #<filename>\n\n  # Server policy for client authentication. Maps to ClientAuth Policies.\n  # For more detail on clientAuth options: [ClientAuthType](https://golang.org/pkg/crypto/tls/#ClientAuthType)\n  [ client_auth_type: <string> | default = \"NoClientCert\" ]\n\n  # CA certificate for client certificate authentication to the server.\n  [ client_ca_file: <filename> ]\n\n  # Minimum TLS version that is acceptable.\n  [ min_version: <string> | default = \"TLS12\" ]\n\n  # Maximum TLS version that is acceptable.\n  [ max_version: <string> | default = \"TLS13\" ]\n\n  # List of supported cipher suites for TLS versions up to TLS 1.2. If empty,\n  # Go default cipher suites are used. Available cipher suites are documented\n  # in the go documentation:\n  # https://golang.org/pkg/crypto/tls/#pkg-constants\n  [ cipher_suites:\n    [ - <string> ] ]\n\n  # prefer_server_cipher_suites controls whether the server selects the\n  # client's most preferred ciphersuite, or the server's most preferred\n  # ciphersuite. If true then the server's preference, as expressed in\n  # the order of elements in cipher_suites, is used.\n  [ prefer_server_cipher_suites: <bool> | default = true ]\n\n  # Elliptic curves that will be used in an ECDHE handshake, in preference\n  # order. Available curves are documented in the go documentation:\n  # https://golang.org/pkg/crypto/tls/#CurveID\n  [ curve_preferences:\n    [ - <string> ] ]\n\nhttp_server_config:\n  # Enable HTTP/2 support. Note that HTTP/2 is only supported with TLS.\n  # This can not be changed on the fly.\n  [ http2: <bool> | default = true ]\n\n# Usernames and hashed passwords that have full access to the web\n# server via basic authentication. If empty, no basic authentication is\n# required. Passwords are hashed with bcrypt.\nbasic_auth_users:\n  [ <string>: <secret> ... ]\n```\n\n\n不能直接 curl 进行请求了，我们可以将证书传递给 curl ，用来验证刚才的配置是否正确\n```\ncurl -s  --cacert node_exporter.crt https://localhost:9100/metrics  |grep node_exporter_build_info\n```\n\n当然，除了通过 --cacert 参数将证书传递给 curl 外，也可以通过 -k 参数来忽略证书检查。\n```\ncurl -s -k https://localhost:9100/metrics  |grep node_exporter_build_info        \n```\n\n### 配置 Prometheus 使用 TLS\n要修改下配置文件，让 Prometheus 可以抓取 Node Exporter 暴露的 metrics 。\n\n```\nglobal:\n  scrape_interval:     15s \n  evaluation_interval: 15s \n\nscrape_configs:\n  - job_name: 'prometheus'\n    static_configs:\n    - targets: ['localhost:9090']\n\n  - job_name: 'node_exporter'\n    scheme: https\n    tls_config:\n      ca_file: node_exporter.crt\n    static_configs:\n    - targets: ['localhost:9100']\n```\n\n这里额外增加了 `scheme: https`  表示通过 HTTPS 建立连接，tls_config 中指定了所用的证书文件。完整的配置可以参考 官方文档中对 [tls_config](https://prometheus.io/docs/prometheus/latest/configuration/configuration/#tls_config) 的说明 。\n\n\n\n### 配置 Prometheus 使用 Basic Auth\n```\nglobal:\n  scrape_interval:     15s \n  evaluation_interval: 15s \n\nscrape_configs:\n  - job_name: 'prometheus'\n    static_configs:\n    - targets: ['localhost:9090']\n\n  - job_name: 'node_exporter'\n    scheme: https\n    tls_config:\n      ca_file: node_exporter.crt\n    basic_auth:\n      username: prometheus\n      password: moelove.info\n    static_configs:\n    - targets: ['localhost:9100']\n```\n\n在生产中使用时，建议更加规范化操作，比如 CA 的选择，密码的管理等，比如 Node Exporter 的 Basic Auth 其实支持配置多个用户名密码的。\n\n","slug":"prometheus/node_exporter配置","published":1,"updated":"2021-01-27T08:20:35.768Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h2z0032q0usa9jqd204","content":"<p>node_exporter是prometheus官方提供的agent，项目被托管在prometheus的账号之下。我们也可以通过官方提供的链接下载最新的版本。在官方的github里面已经提供了非常详细使用说明，我们这里带大家梳理一下</p>\n<h3 id=\"node-exporte基本信息配置\"><a href=\"#node-exporte基本信息配置\" class=\"headerlink\" title=\"node_exporte基本信息配置\"></a>node_exporte基本信息配置</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- web.listen-address&#x3D;&quot;:9100&quot;</span><br><span class=\"line\"># 监听的端口，默认是9100，若需要修改则通过此参数</span><br><span class=\"line\"></span><br><span class=\"line\">--web.telemetry-path&#x3D;&quot;&#x2F;metrics&quot;  </span><br><span class=\"line\">#获取metric信息的url，默认是&#x2F;metrics，若需要修改则通过此参数</span><br><span class=\"line\"></span><br><span class=\"line\">--log.level&#x3D;&quot;info&quot; </span><br><span class=\"line\">#设置日志级别</span><br><span class=\"line\"></span><br><span class=\"line\">--log.format&#x3D;&quot;logger:stderr&quot;  </span><br><span class=\"line\">#设置打印日志的格式，若有自动化日志提取工具可以使用这个参数规范日志打印的格式</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"通过正则表达式来屏蔽或选择某些监控项\"><a href=\"#通过正则表达式来屏蔽或选择某些监控项\" class=\"headerlink\" title=\"通过正则表达式来屏蔽或选择某些监控项\"></a>通过正则表达式来屏蔽或选择某些监控项</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--collector.diskstats.ignored-devices&#x3D;&quot;^(ram|loop|fd|(h|s|v|xv)d[a-z]|nvme\\\\d+n\\\\d+p)\\\\d+$&quot;</span><br><span class=\"line\">#通过正则表达式忽略某些磁盘的信息收集</span><br><span class=\"line\"></span><br><span class=\"line\">--collector.filesystem.ignored-mount-points&#x3D;&quot;^&#x2F;(dev|proc|sys|var&#x2F;lib&#x2F;docker&#x2F;.+)($|&#x2F;)&quot;  </span><br><span class=\"line\">#通过正则表达式忽略某些文件系统挂载点的信息收集</span><br><span class=\"line\"></span><br><span class=\"line\">--collector.filesystem.ignored-fs-types&#x3D;&quot;^(autofs|binfmt_misc|bpf|cgroup2?|configfs|debugfs|devpts|devtmpfs|fusectl|hugetlbfs|mqueue|nsfs|overlay|proc|procfs|pstore|rpc_pipefs|securityfs|selinuxfs|squashfs|sysfs|tracefs)$&quot;  </span><br><span class=\"line\">#通过正则表达式忽略某些文件系统类型的信息收集</span><br><span class=\"line\"></span><br><span class=\"line\">--collector.netclass.ignored-devices&#x3D;&quot;^$&quot;  </span><br><span class=\"line\">#通过正则表达式忽略某些网络类的信息收集</span><br><span class=\"line\"></span><br><span class=\"line\">--collector.netdev.ignored-devices&#x3D;&quot;^$&quot;  </span><br><span class=\"line\">#通过正则表达式忽略某些网络设备的信息收集</span><br><span class=\"line\"></span><br><span class=\"line\">  --collector.netstat.fields&#x3D;&quot;^$&quot;</span><br><span class=\"line\"> #通过正则表达式配置需要获取的网络状态信息</span><br><span class=\"line\"> </span><br><span class=\"line\">--collector.vmstat.fields&#x3D;&quot;^(oom_kill|pgpg|pswp|pg.*fault).*&quot; </span><br><span class=\"line\">#通过正则表达式配置vmstat返回信息中需要收集的选项</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;&#96;</span><br><span class=\"line\"></span><br><span class=\"line\">### 添加用户名和密码验证</span><br><span class=\"line\"></span><br><span class=\"line\">我们直接可以使用 htpasswd 来生成 密码(在httpd-tools当中)</span><br></pre></td></tr></table></figure>\n<p>yum install httpd-tools -y</p>\n<p>htpasswd -nBC 12 ‘’ | tr -d ‘:\\n’<br>New password:<br>Re-type new password:<br>$2y$12$WLw2sYa.NYZoBVoCOE84qe3xNm7kbSoKVIBXP.PvqNDna60vnZhEW<br>#这个密码可以用作其他的服务器上，自己输入的密码要记住，<br>#用户名可以任意给一个，配置文件格式是如下，注意username前面有两个空格</p>\n<p>basic_auth_users:</p>\n<h1 id=\"当前设置的用户名为-prometheus-，-可以设置多个\"><a href=\"#当前设置的用户名为-prometheus-，-可以设置多个\" class=\"headerlink\" title=\"当前设置的用户名为 prometheus ， 可以设置多个\"></a>当前设置的用户名为 prometheus ， 可以设置多个</h1><p>  prometheus: $2y$12$WLw2sYa.NYZoBVoCOE84qe3xNm7kbSoKVIBXP.PvqNDna60vnZhEW</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">### TLS的配置</span><br><span class=\"line\">&#96;&#96;&#96;bash</span><br><span class=\"line\"># mkdir -p prometheus-tls</span><br><span class=\"line\"># cd prometheus-tls</span><br><span class=\"line\"># openssl req -new -newkey rsa:2048 -days 365 -nodes -x509 -keyout node_exporter.key -out node_exporter.crt -subj &quot;&#x2F;C&#x3D;CN&#x2F;ST&#x3D;Beijing&#x2F;L&#x3D;Beijing&#x2F;O&#x3D;Moelove.info&#x2F;CN&#x3D;localhost&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"># ls</span><br><span class=\"line\">node_exporter.crt  node_exporter.key</span><br></pre></td></tr></table></figure>\n\n\n<p>我们默认暴露的都是http的请求的，也没有验证，也就是明文传输，很容易存在安全隐患，如果需要对数据加密，我们就要使用参数<code>./node_exporter --web.config=web-config.yml</code>，这个文件的内容如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tls_server_config:</span><br><span class=\"line\">  # Certificate and key files for server to use to authenticate to client.</span><br><span class=\"line\">  cert_file: node_exporter.crt   # &lt;filename&gt;</span><br><span class=\"line\">  key_file: node_exporter.key    #&lt;filename&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  # Server policy for client authentication. Maps to ClientAuth Policies.</span><br><span class=\"line\">  # For more detail on clientAuth options: [ClientAuthType](https:&#x2F;&#x2F;golang.org&#x2F;pkg&#x2F;crypto&#x2F;tls&#x2F;#ClientAuthType)</span><br><span class=\"line\">  [ client_auth_type: &lt;string&gt; | default &#x3D; &quot;NoClientCert&quot; ]</span><br><span class=\"line\"></span><br><span class=\"line\">  # CA certificate for client certificate authentication to the server.</span><br><span class=\"line\">  [ client_ca_file: &lt;filename&gt; ]</span><br><span class=\"line\"></span><br><span class=\"line\">  # Minimum TLS version that is acceptable.</span><br><span class=\"line\">  [ min_version: &lt;string&gt; | default &#x3D; &quot;TLS12&quot; ]</span><br><span class=\"line\"></span><br><span class=\"line\">  # Maximum TLS version that is acceptable.</span><br><span class=\"line\">  [ max_version: &lt;string&gt; | default &#x3D; &quot;TLS13&quot; ]</span><br><span class=\"line\"></span><br><span class=\"line\">  # List of supported cipher suites for TLS versions up to TLS 1.2. If empty,</span><br><span class=\"line\">  # Go default cipher suites are used. Available cipher suites are documented</span><br><span class=\"line\">  # in the go documentation:</span><br><span class=\"line\">  # https:&#x2F;&#x2F;golang.org&#x2F;pkg&#x2F;crypto&#x2F;tls&#x2F;#pkg-constants</span><br><span class=\"line\">  [ cipher_suites:</span><br><span class=\"line\">    [ - &lt;string&gt; ] ]</span><br><span class=\"line\"></span><br><span class=\"line\">  # prefer_server_cipher_suites controls whether the server selects the</span><br><span class=\"line\">  # client&#39;s most preferred ciphersuite, or the server&#39;s most preferred</span><br><span class=\"line\">  # ciphersuite. If true then the server&#39;s preference, as expressed in</span><br><span class=\"line\">  # the order of elements in cipher_suites, is used.</span><br><span class=\"line\">  [ prefer_server_cipher_suites: &lt;bool&gt; | default &#x3D; true ]</span><br><span class=\"line\"></span><br><span class=\"line\">  # Elliptic curves that will be used in an ECDHE handshake, in preference</span><br><span class=\"line\">  # order. Available curves are documented in the go documentation:</span><br><span class=\"line\">  # https:&#x2F;&#x2F;golang.org&#x2F;pkg&#x2F;crypto&#x2F;tls&#x2F;#CurveID</span><br><span class=\"line\">  [ curve_preferences:</span><br><span class=\"line\">    [ - &lt;string&gt; ] ]</span><br><span class=\"line\"></span><br><span class=\"line\">http_server_config:</span><br><span class=\"line\">  # Enable HTTP&#x2F;2 support. Note that HTTP&#x2F;2 is only supported with TLS.</span><br><span class=\"line\">  # This can not be changed on the fly.</span><br><span class=\"line\">  [ http2: &lt;bool&gt; | default &#x3D; true ]</span><br><span class=\"line\"></span><br><span class=\"line\"># Usernames and hashed passwords that have full access to the web</span><br><span class=\"line\"># server via basic authentication. If empty, no basic authentication is</span><br><span class=\"line\"># required. Passwords are hashed with bcrypt.</span><br><span class=\"line\">basic_auth_users:</span><br><span class=\"line\">  [ &lt;string&gt;: &lt;secret&gt; ... ]</span><br></pre></td></tr></table></figure>\n\n\n<p>不能直接 curl 进行请求了，我们可以将证书传递给 curl ，用来验证刚才的配置是否正确</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -s  --cacert node_exporter.crt https:&#x2F;&#x2F;localhost:9100&#x2F;metrics  |grep node_exporter_build_info</span><br></pre></td></tr></table></figure>\n\n<p>当然，除了通过 –cacert 参数将证书传递给 curl 外，也可以通过 -k 参数来忽略证书检查。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -s -k https:&#x2F;&#x2F;localhost:9100&#x2F;metrics  |grep node_exporter_build_info        </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"配置-Prometheus-使用-TLS\"><a href=\"#配置-Prometheus-使用-TLS\" class=\"headerlink\" title=\"配置 Prometheus 使用 TLS\"></a>配置 Prometheus 使用 TLS</h3><p>要修改下配置文件，让 Prometheus 可以抓取 Node Exporter 暴露的 metrics 。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">global:</span><br><span class=\"line\">  scrape_interval:     15s </span><br><span class=\"line\">  evaluation_interval: 15s </span><br><span class=\"line\"></span><br><span class=\"line\">scrape_configs:</span><br><span class=\"line\">  - job_name: &#39;prometheus&#39;</span><br><span class=\"line\">    static_configs:</span><br><span class=\"line\">    - targets: [&#39;localhost:9090&#39;]</span><br><span class=\"line\"></span><br><span class=\"line\">  - job_name: &#39;node_exporter&#39;</span><br><span class=\"line\">    scheme: https</span><br><span class=\"line\">    tls_config:</span><br><span class=\"line\">      ca_file: node_exporter.crt</span><br><span class=\"line\">    static_configs:</span><br><span class=\"line\">    - targets: [&#39;localhost:9100&#39;]</span><br></pre></td></tr></table></figure>\n\n<p>这里额外增加了 <code>scheme: https</code>  表示通过 HTTPS 建立连接，tls_config 中指定了所用的证书文件。完整的配置可以参考 官方文档中对 <a href=\"https://prometheus.io/docs/prometheus/latest/configuration/configuration/#tls_config\">tls_config</a> 的说明 。</p>\n<h3 id=\"配置-Prometheus-使用-Basic-Auth\"><a href=\"#配置-Prometheus-使用-Basic-Auth\" class=\"headerlink\" title=\"配置 Prometheus 使用 Basic Auth\"></a>配置 Prometheus 使用 Basic Auth</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">global:</span><br><span class=\"line\">  scrape_interval:     15s </span><br><span class=\"line\">  evaluation_interval: 15s </span><br><span class=\"line\"></span><br><span class=\"line\">scrape_configs:</span><br><span class=\"line\">  - job_name: &#39;prometheus&#39;</span><br><span class=\"line\">    static_configs:</span><br><span class=\"line\">    - targets: [&#39;localhost:9090&#39;]</span><br><span class=\"line\"></span><br><span class=\"line\">  - job_name: &#39;node_exporter&#39;</span><br><span class=\"line\">    scheme: https</span><br><span class=\"line\">    tls_config:</span><br><span class=\"line\">      ca_file: node_exporter.crt</span><br><span class=\"line\">    basic_auth:</span><br><span class=\"line\">      username: prometheus</span><br><span class=\"line\">      password: moelove.info</span><br><span class=\"line\">    static_configs:</span><br><span class=\"line\">    - targets: [&#39;localhost:9100&#39;]</span><br></pre></td></tr></table></figure>\n\n<p>在生产中使用时，建议更加规范化操作，比如 CA 的选择，密码的管理等，比如 Node Exporter 的 Basic Auth 其实支持配置多个用户名密码的。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>node_exporter是prometheus官方提供的agent，项目被托管在prometheus的账号之下。我们也可以通过官方提供的链接下载最新的版本。在官方的github里面已经提供了非常详细使用说明，我们这里带大家梳理一下</p>\n<h3 id=\"node-exporte基本信息配置\"><a href=\"#node-exporte基本信息配置\" class=\"headerlink\" title=\"node_exporte基本信息配置\"></a>node_exporte基本信息配置</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- web.listen-address&#x3D;&quot;:9100&quot;</span><br><span class=\"line\"># 监听的端口，默认是9100，若需要修改则通过此参数</span><br><span class=\"line\"></span><br><span class=\"line\">--web.telemetry-path&#x3D;&quot;&#x2F;metrics&quot;  </span><br><span class=\"line\">#获取metric信息的url，默认是&#x2F;metrics，若需要修改则通过此参数</span><br><span class=\"line\"></span><br><span class=\"line\">--log.level&#x3D;&quot;info&quot; </span><br><span class=\"line\">#设置日志级别</span><br><span class=\"line\"></span><br><span class=\"line\">--log.format&#x3D;&quot;logger:stderr&quot;  </span><br><span class=\"line\">#设置打印日志的格式，若有自动化日志提取工具可以使用这个参数规范日志打印的格式</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"通过正则表达式来屏蔽或选择某些监控项\"><a href=\"#通过正则表达式来屏蔽或选择某些监控项\" class=\"headerlink\" title=\"通过正则表达式来屏蔽或选择某些监控项\"></a>通过正则表达式来屏蔽或选择某些监控项</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--collector.diskstats.ignored-devices&#x3D;&quot;^(ram|loop|fd|(h|s|v|xv)d[a-z]|nvme\\\\d+n\\\\d+p)\\\\d+$&quot;</span><br><span class=\"line\">#通过正则表达式忽略某些磁盘的信息收集</span><br><span class=\"line\"></span><br><span class=\"line\">--collector.filesystem.ignored-mount-points&#x3D;&quot;^&#x2F;(dev|proc|sys|var&#x2F;lib&#x2F;docker&#x2F;.+)($|&#x2F;)&quot;  </span><br><span class=\"line\">#通过正则表达式忽略某些文件系统挂载点的信息收集</span><br><span class=\"line\"></span><br><span class=\"line\">--collector.filesystem.ignored-fs-types&#x3D;&quot;^(autofs|binfmt_misc|bpf|cgroup2?|configfs|debugfs|devpts|devtmpfs|fusectl|hugetlbfs|mqueue|nsfs|overlay|proc|procfs|pstore|rpc_pipefs|securityfs|selinuxfs|squashfs|sysfs|tracefs)$&quot;  </span><br><span class=\"line\">#通过正则表达式忽略某些文件系统类型的信息收集</span><br><span class=\"line\"></span><br><span class=\"line\">--collector.netclass.ignored-devices&#x3D;&quot;^$&quot;  </span><br><span class=\"line\">#通过正则表达式忽略某些网络类的信息收集</span><br><span class=\"line\"></span><br><span class=\"line\">--collector.netdev.ignored-devices&#x3D;&quot;^$&quot;  </span><br><span class=\"line\">#通过正则表达式忽略某些网络设备的信息收集</span><br><span class=\"line\"></span><br><span class=\"line\">  --collector.netstat.fields&#x3D;&quot;^$&quot;</span><br><span class=\"line\"> #通过正则表达式配置需要获取的网络状态信息</span><br><span class=\"line\"> </span><br><span class=\"line\">--collector.vmstat.fields&#x3D;&quot;^(oom_kill|pgpg|pswp|pg.*fault).*&quot; </span><br><span class=\"line\">#通过正则表达式配置vmstat返回信息中需要收集的选项</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;&#96;</span><br><span class=\"line\"></span><br><span class=\"line\">### 添加用户名和密码验证</span><br><span class=\"line\"></span><br><span class=\"line\">我们直接可以使用 htpasswd 来生成 密码(在httpd-tools当中)</span><br></pre></td></tr></table></figure>\n<p>yum install httpd-tools -y</p>\n<p>htpasswd -nBC 12 ‘’ | tr -d ‘:\\n’<br>New password:<br>Re-type new password:<br>$2y$12$WLw2sYa.NYZoBVoCOE84qe3xNm7kbSoKVIBXP.PvqNDna60vnZhEW<br>#这个密码可以用作其他的服务器上，自己输入的密码要记住，<br>#用户名可以任意给一个，配置文件格式是如下，注意username前面有两个空格</p>\n<p>basic_auth_users:</p>\n<h1 id=\"当前设置的用户名为-prometheus-，-可以设置多个\"><a href=\"#当前设置的用户名为-prometheus-，-可以设置多个\" class=\"headerlink\" title=\"当前设置的用户名为 prometheus ， 可以设置多个\"></a>当前设置的用户名为 prometheus ， 可以设置多个</h1><p>  prometheus: $2y$12$WLw2sYa.NYZoBVoCOE84qe3xNm7kbSoKVIBXP.PvqNDna60vnZhEW</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">### TLS的配置</span><br><span class=\"line\">&#96;&#96;&#96;bash</span><br><span class=\"line\"># mkdir -p prometheus-tls</span><br><span class=\"line\"># cd prometheus-tls</span><br><span class=\"line\"># openssl req -new -newkey rsa:2048 -days 365 -nodes -x509 -keyout node_exporter.key -out node_exporter.crt -subj &quot;&#x2F;C&#x3D;CN&#x2F;ST&#x3D;Beijing&#x2F;L&#x3D;Beijing&#x2F;O&#x3D;Moelove.info&#x2F;CN&#x3D;localhost&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"># ls</span><br><span class=\"line\">node_exporter.crt  node_exporter.key</span><br></pre></td></tr></table></figure>\n\n\n<p>我们默认暴露的都是http的请求的，也没有验证，也就是明文传输，很容易存在安全隐患，如果需要对数据加密，我们就要使用参数<code>./node_exporter --web.config=web-config.yml</code>，这个文件的内容如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tls_server_config:</span><br><span class=\"line\">  # Certificate and key files for server to use to authenticate to client.</span><br><span class=\"line\">  cert_file: node_exporter.crt   # &lt;filename&gt;</span><br><span class=\"line\">  key_file: node_exporter.key    #&lt;filename&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  # Server policy for client authentication. Maps to ClientAuth Policies.</span><br><span class=\"line\">  # For more detail on clientAuth options: [ClientAuthType](https:&#x2F;&#x2F;golang.org&#x2F;pkg&#x2F;crypto&#x2F;tls&#x2F;#ClientAuthType)</span><br><span class=\"line\">  [ client_auth_type: &lt;string&gt; | default &#x3D; &quot;NoClientCert&quot; ]</span><br><span class=\"line\"></span><br><span class=\"line\">  # CA certificate for client certificate authentication to the server.</span><br><span class=\"line\">  [ client_ca_file: &lt;filename&gt; ]</span><br><span class=\"line\"></span><br><span class=\"line\">  # Minimum TLS version that is acceptable.</span><br><span class=\"line\">  [ min_version: &lt;string&gt; | default &#x3D; &quot;TLS12&quot; ]</span><br><span class=\"line\"></span><br><span class=\"line\">  # Maximum TLS version that is acceptable.</span><br><span class=\"line\">  [ max_version: &lt;string&gt; | default &#x3D; &quot;TLS13&quot; ]</span><br><span class=\"line\"></span><br><span class=\"line\">  # List of supported cipher suites for TLS versions up to TLS 1.2. If empty,</span><br><span class=\"line\">  # Go default cipher suites are used. Available cipher suites are documented</span><br><span class=\"line\">  # in the go documentation:</span><br><span class=\"line\">  # https:&#x2F;&#x2F;golang.org&#x2F;pkg&#x2F;crypto&#x2F;tls&#x2F;#pkg-constants</span><br><span class=\"line\">  [ cipher_suites:</span><br><span class=\"line\">    [ - &lt;string&gt; ] ]</span><br><span class=\"line\"></span><br><span class=\"line\">  # prefer_server_cipher_suites controls whether the server selects the</span><br><span class=\"line\">  # client&#39;s most preferred ciphersuite, or the server&#39;s most preferred</span><br><span class=\"line\">  # ciphersuite. If true then the server&#39;s preference, as expressed in</span><br><span class=\"line\">  # the order of elements in cipher_suites, is used.</span><br><span class=\"line\">  [ prefer_server_cipher_suites: &lt;bool&gt; | default &#x3D; true ]</span><br><span class=\"line\"></span><br><span class=\"line\">  # Elliptic curves that will be used in an ECDHE handshake, in preference</span><br><span class=\"line\">  # order. Available curves are documented in the go documentation:</span><br><span class=\"line\">  # https:&#x2F;&#x2F;golang.org&#x2F;pkg&#x2F;crypto&#x2F;tls&#x2F;#CurveID</span><br><span class=\"line\">  [ curve_preferences:</span><br><span class=\"line\">    [ - &lt;string&gt; ] ]</span><br><span class=\"line\"></span><br><span class=\"line\">http_server_config:</span><br><span class=\"line\">  # Enable HTTP&#x2F;2 support. Note that HTTP&#x2F;2 is only supported with TLS.</span><br><span class=\"line\">  # This can not be changed on the fly.</span><br><span class=\"line\">  [ http2: &lt;bool&gt; | default &#x3D; true ]</span><br><span class=\"line\"></span><br><span class=\"line\"># Usernames and hashed passwords that have full access to the web</span><br><span class=\"line\"># server via basic authentication. If empty, no basic authentication is</span><br><span class=\"line\"># required. Passwords are hashed with bcrypt.</span><br><span class=\"line\">basic_auth_users:</span><br><span class=\"line\">  [ &lt;string&gt;: &lt;secret&gt; ... ]</span><br></pre></td></tr></table></figure>\n\n\n<p>不能直接 curl 进行请求了，我们可以将证书传递给 curl ，用来验证刚才的配置是否正确</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -s  --cacert node_exporter.crt https:&#x2F;&#x2F;localhost:9100&#x2F;metrics  |grep node_exporter_build_info</span><br></pre></td></tr></table></figure>\n\n<p>当然，除了通过 –cacert 参数将证书传递给 curl 外，也可以通过 -k 参数来忽略证书检查。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -s -k https:&#x2F;&#x2F;localhost:9100&#x2F;metrics  |grep node_exporter_build_info        </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"配置-Prometheus-使用-TLS\"><a href=\"#配置-Prometheus-使用-TLS\" class=\"headerlink\" title=\"配置 Prometheus 使用 TLS\"></a>配置 Prometheus 使用 TLS</h3><p>要修改下配置文件，让 Prometheus 可以抓取 Node Exporter 暴露的 metrics 。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">global:</span><br><span class=\"line\">  scrape_interval:     15s </span><br><span class=\"line\">  evaluation_interval: 15s </span><br><span class=\"line\"></span><br><span class=\"line\">scrape_configs:</span><br><span class=\"line\">  - job_name: &#39;prometheus&#39;</span><br><span class=\"line\">    static_configs:</span><br><span class=\"line\">    - targets: [&#39;localhost:9090&#39;]</span><br><span class=\"line\"></span><br><span class=\"line\">  - job_name: &#39;node_exporter&#39;</span><br><span class=\"line\">    scheme: https</span><br><span class=\"line\">    tls_config:</span><br><span class=\"line\">      ca_file: node_exporter.crt</span><br><span class=\"line\">    static_configs:</span><br><span class=\"line\">    - targets: [&#39;localhost:9100&#39;]</span><br></pre></td></tr></table></figure>\n\n<p>这里额外增加了 <code>scheme: https</code>  表示通过 HTTPS 建立连接，tls_config 中指定了所用的证书文件。完整的配置可以参考 官方文档中对 <a href=\"https://prometheus.io/docs/prometheus/latest/configuration/configuration/#tls_config\">tls_config</a> 的说明 。</p>\n<h3 id=\"配置-Prometheus-使用-Basic-Auth\"><a href=\"#配置-Prometheus-使用-Basic-Auth\" class=\"headerlink\" title=\"配置 Prometheus 使用 Basic Auth\"></a>配置 Prometheus 使用 Basic Auth</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">global:</span><br><span class=\"line\">  scrape_interval:     15s </span><br><span class=\"line\">  evaluation_interval: 15s </span><br><span class=\"line\"></span><br><span class=\"line\">scrape_configs:</span><br><span class=\"line\">  - job_name: &#39;prometheus&#39;</span><br><span class=\"line\">    static_configs:</span><br><span class=\"line\">    - targets: [&#39;localhost:9090&#39;]</span><br><span class=\"line\"></span><br><span class=\"line\">  - job_name: &#39;node_exporter&#39;</span><br><span class=\"line\">    scheme: https</span><br><span class=\"line\">    tls_config:</span><br><span class=\"line\">      ca_file: node_exporter.crt</span><br><span class=\"line\">    basic_auth:</span><br><span class=\"line\">      username: prometheus</span><br><span class=\"line\">      password: moelove.info</span><br><span class=\"line\">    static_configs:</span><br><span class=\"line\">    - targets: [&#39;localhost:9100&#39;]</span><br></pre></td></tr></table></figure>\n\n<p>在生产中使用时，建议更加规范化操作，比如 CA 的选择，密码的管理等，比如 Node Exporter 的 Basic Auth 其实支持配置多个用户名密码的。</p>\n"},{"title":"钉钉报警","date":"2020-09-28T02:46:00.000Z","_content":"  \n  \n摘要: prometheus 使用钉钉报警\n<!-- more -->\n\n\n### 方式一\n\nprometheus 使用 prometheus-webhook-dingtalk 完成钉钉报警\n\n`https://github.com/timonwong/prometheus-webhook-dingtalk`\n\n\n```\nvim /usr/lib/systemd/system/prometheus-webhook-dingtalk.service\n\n\n[Unit]\nDescription=prometheus-webhook-dingtalk\nAfter=network-online.target\n \n[Service]\nRestart=on-failure\nExecStart=/opt/alertmanager/prometheus-webhook-dingtalk/prometheus-webhook-dingtalk \\\n          --ding.profile=ops_dingding=https://oapi.dingtalk.com/robot/send?access_token=省略一串字符 \\\n          --ding.profile=info_dingding=https://oapi.dingtalk.com/robot/send?access_token=同样省略了一串字符\n \n[Install]\nWantedBy=multi-user.target\n```\n\n\n\n```\n配置开机启动\n\nsystemctl daemon-reload\nsystemctl enable prometheus-webhook-dingtalk\nsystemctl restart prometheus-webhook-dingtalk\nsystemctl status prometheus-webhook-dingtalk\n```\n\n###  方式二\n\n使用python脚本发送钉钉报警\n\n\n`app.py`\n```python\nimport os\nimport json\nimport logging\nimport requests\nimport time\nimport hmac\nimport hashlib\nimport base64\nimport urllib.parse\nfrom config import *\nfrom dateutil import parser\n\nfrom flask import Flask\nfrom flask import request\n\napp = Flask(__name__)\n\nlogging.basicConfig(\n    level=logging.DEBUG if os.getenv('LOG_LEVEL') == 'debug' else logging.INFO,\n    format='%(asctime)s %(levelname)s %(message)s')\n\n\n@app.route('/', methods=['POST', 'GET'])\ndef send():\n    try:\n        content = json.loads(request.get_data())\n        project = \"\"\n\n        for alert in content['alerts']:\n            if alert['status'] == \"resolved\":\n                status = \"恢复\"\n            elif alert['status'] == \"firing\":\n                status = \"故障\"\n            else:\n                status = \"\"\n\n            message = status + \" | \" + alert['labels']['alertname'] + \"\\n\\n\"\n\n            if 'hostname' in alert['labels']:\n                message += \"告警主机: \" + alert['labels']['hostname'] + \"\\n\\n\"\n\n            if 'name' in alert['labels']:\n                message += \"告警地址: \" + alert['labels']['instance'] + \"(\" + alert['labels']['name'] + \")\\n\\n\"\n            else:\n                message += \"告警地址: \" + alert['labels']['instance'] + \"\\n\\n\"\n\n            if 'project' in alert['labels']:\n                message += \"告警项目: \" + alert['labels']['project'] + \"\\n\\n\"\n                project = alert['labels']['project']\n\n            if 'env' in alert['labels']:\n                message += \"告警环境: \" + alert['labels']['env'] + \"\\n\\n\"\n\n            if 'info' in alert['annotations']:\n                message += \"Info: \" + alert['annotations']['info'] + \"\\n\\n\"\n            if 'summary' in alert['annotations']:\n                message += \"Summary: \" + alert['annotations']['summary'] + \"\\n\\n\"\n            if 'description' in alert['annotations']:\n                message += \"告警信息: \" + alert['annotations']['description'] + \"\\n\\n\"\n\n            if alert['status'] == \"resolved\":\n                correctDate = parser.parse(alert['endsAt']).strftime('%Y-%m-%d %H:%M:%S')\n                message += \"恢复时间: \" + correctDate\n            elif alert['status'] == \"firing\":\n                correctDate = parser.parse(alert['startsAt']).strftime('%Y-%m-%d %H:%M:%S')\n                message += \"告警时间: \" + correctDate\n            print(message)\n\n            send_alert_02(message, project)\n        return \"Alert OK\", 200\n    except Exception as error:\n        app.logger.info(\"\\t%s\", error)\n        return \"Alert fail\", 200\n\n\ndef make_sign(timestamp, secret):\n    \"\"\"\n    新版钉钉更新了安全策略，这里我们采用签名的方式进行安全认证\n    https://ding-doc.dingtalk.com/doc#/serverapi2/qf2nxq\n    \"\"\"\n    secret_enc = bytes(secret, 'utf-8')\n    string_to_sign = '{}\\n{}'.format(timestamp, secret)\n    string_to_sign_enc = bytes(string_to_sign, 'utf-8')\n    hmac_code = hmac.new(secret_enc, string_to_sign_enc, digestmod=hashlib.sha256).digest()\n    sign = urllib.parse.quote_plus(base64.b64encode(hmac_code))\n    return sign\n\n\ndef send_alert(data):\n    \"\"\"\n    签名的方式进行安全认证\n    :param data:\n    :return:\n    \"\"\"\n    if not token:\n        app.logger.error('you must set ROBOT_TOKEN env')\n        return\n    if not secret:\n        app.logger.error('you must set ROBOT_SECRET env')\n        return\n    timestamp = int(round(time.time() * 1000))\n    url = 'https://oapi.dingtalk.com/robot/send?access_token=%s&timestamp=%d&sign=%s' % (\n        token, timestamp, make_sign(timestamp, secret))\n    send_data = {\n        \"msgtype\": \"text\",\n        \"text\": {\n            \"content\": data\n        },\n        \"at\": {\n            \"atMobiles\": mobiles,\n            \"isAtAll\": 'false'\n        }\n    }\n    req = requests.post(url, json=send_data)\n    result = req.json()\n    if result['errcode'] != 0:\n        app.logger.error('notify dingtalk error: %s' % result['errcode'])\n\n\ndef send_alert_02(data, project):\n    \"\"\"\n    未签名认证方式\n    \"\"\"\n    accessToken = \"https://oapi.dingtalk.com/robot/send?access_token={}\".format(dingding_token[project])\n    HEADERS = {\n        \"Content-Type\": \"application/json ;charset=utf-8 \"\n    }\n    mobiles = []\n    lists = contacts[\"{}\".format(project)]\n    print(lists)\n    for j in lists:\n        mobiles.append(j[\"mobiles\"])\n    send_data = {\n        \"msgtype\": \"text\",\n        \"text\": {\n            \"content\": data\n        },\n        \"at\": {\n            \"atMobiles\": mobiles,\n            \"isAtAll\": 'false'\n        }\n    }\n    String_textMsg = json.dumps(send_data)\n    res = requests.post(accessToken, data=String_textMsg, headers=HEADERS)\n    print(res)\n\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000)\n```\n\n`config.py`\n```python\ndingding_token = {\n    \"wms\": \"8647622d3103fn656b6hvytg7j6h56j7h567nkjbuhvygyb6bv5c5xf56v4c0ed63a5\",\n    \"oms\": \"69c7359b21ed1b1d23cv36vb7b88lk6g5ffuhuioiiijyihytugrtyfef38e0f96399\"\n}\n\ntoken = 'cf31a0c0f2d9cc28d4234234234234234234234234234234234234b51276a6b01a6a'\nsecret = 'SEC1a4e9326a23423423423423423423423423423553454565756756756afe3f044337'\n\ncontacts = {\n    \"oms\": [\n        {\n            \"mobiles\": \"13554000007\",\n            \"name\": \"xxxx\"\n        },\n        {\n            \"mobiles\": \"1875000004\",\n            \"name\": \"xxxxx\"\n        },\n    ],\n    \"wms\": [\n        {\n            \"mobiles\": \"13554000007\",\n            \"name\": \"xxxx\"\n        },\n        {\n            \"mobiles\": \"1875000004\",\n            \"name\": \"xxxxx\"\n        },\n    ]\n}\n```\n\n\n\n### prometheus 报警规则\n\nrules/cpu.yml\n```yaml\ngroups:\n- name: CPU报警规则\n  rules:\n  - alert: CPU使用率告警\n    expr: 100 - (avg by (instance)(irate(node_cpu_seconds_total{mode=\"idle\"}[1m]) )) * 100 > 90\n    for: 2m\n    labels:\n      level: base\n      severity: warning\n    annotations:\n      description: \"CPU使用超过90%！(当前值: {{ $value }}%)\"\n```\nrules/disk.yml\n```yaml\ngroups:\n- name: 磁盘报警规则\n  rules:\n  - alert: 磁盘使用率告警\n    expr: ceil(((node_filesystem_size_bytes {device=~\"(/dev/.*|/)\",fstype=~\"(ext4|xfs)\"} - node_filesystem_free_bytes {device=~\"(/dev/.*|/)\",fstype=~\"(ext4|xfs)\"}) / node_filesystem_size_bytes {device=~\"(/dev/.*|/)\",fstype=~\"(ext4|xfs)\"} ) * 100  > 85 )\n    for: 2m\n    labels:\n      level: base\n      severity: warning\n    annotations:\n      description: \" {{ $labels.mountpoint }} 使用超过 85% (当前值: {{ $value }})\"\n\n```\nrules/mem.yml\n```yaml\ngroups:\n- name: 内存报警规则\n  rules:\n  - alert: 内存使用率告警\n    expr: ceil((node_memory_MemTotal_bytes - (node_memory_MemFree_bytes+node_memory_Buffers_bytes+node_memory_Cached_bytes )) / node_memory_MemTotal_bytes * 100 > 85)\n    for: 2m\n    labels:\n      level: base\n      severity: warning\n    annotations:\n      description: \"内存使用超过80%！(当前值: {{ $value }}%)\"\n```\nrules/node.yml\n```yaml\ngroups:\n- name: 实例存活告警规则\n  rules:\n  - alert: 主机状态\n    expr: up == 0\n    for: 2m\n    labels:\n      level: base\n      project: base\n      severity: warning\n    annotations:\n      description: \" 主机(或监控节点)发生宕机超过1分钟\"\n```\n\nrules/net.yml\n```yaml\ngroups:\n- name: 网络告警规则\n  rules:\n  - alert: 网络流入\n    expr: ((sum(rate (node_network_receive_bytes_total{device!~'tap.*|veth.*|br.*|docker.*|virbr*|lo*'}[5m])) by (instance)) / 100) > 102400\n    for: 1m\n    labels:\n      level: base\n      project: base\n      severity: warning\n    annotations:\n      summary: \"{{$labels.mountpoint}} 流入网络带宽过高！\"\n      description: \"{{$labels.mountpoint }}流入网络带宽持续2分钟高于100M. RX带宽使用率{{$value}}\"\n\n  - alert: 网络流出\n    expr: ((sum(rate (node_network_transmit_bytes_total{device!~'tap.*|veth.*|br.*|docker.*|virbr*|lo*'}[5m])) by (instance)) / 100) > 102400\n    for: 1m\n    labels:\n      level: base\n      project: base\n      severity: warning\n    annotations:\n      summary: \"{{$labels.mountpoint}} 流出网络带宽过高！\"\n      description: \"{{$labels.mountpoint }}流出网络带宽持续2分钟高于100M. RX带宽使用率{{$value}}\"\n\n  - alert: TCP会话\n    expr: node_netstat_Tcp_CurrEstab > 1000\n    for: 1m\n    labels:\n      level: base\n      project: base\n      severity: warning\n    annotations:\n      summary: \"{{$labels.mountpoint}} TCP_ESTABLISHED过高！\"\n      description: \"{{$labels.mountpoint }} TCP_ESTABLISHED大于1000%(目前使用:{{$value}}%)\"\n\n```\nrules/cpu.yml\nrules/cpu.yml\n","source":"_posts/prometheus/钉钉报警.md","raw":"---\ntitle: 钉钉报警\ndate: 2020-09-28 10:46\ncategories:\n- prometheus\ntags:\n- prometheus\n- dingding\n---\n  \n  \n摘要: prometheus 使用钉钉报警\n<!-- more -->\n\n\n### 方式一\n\nprometheus 使用 prometheus-webhook-dingtalk 完成钉钉报警\n\n`https://github.com/timonwong/prometheus-webhook-dingtalk`\n\n\n```\nvim /usr/lib/systemd/system/prometheus-webhook-dingtalk.service\n\n\n[Unit]\nDescription=prometheus-webhook-dingtalk\nAfter=network-online.target\n \n[Service]\nRestart=on-failure\nExecStart=/opt/alertmanager/prometheus-webhook-dingtalk/prometheus-webhook-dingtalk \\\n          --ding.profile=ops_dingding=https://oapi.dingtalk.com/robot/send?access_token=省略一串字符 \\\n          --ding.profile=info_dingding=https://oapi.dingtalk.com/robot/send?access_token=同样省略了一串字符\n \n[Install]\nWantedBy=multi-user.target\n```\n\n\n\n```\n配置开机启动\n\nsystemctl daemon-reload\nsystemctl enable prometheus-webhook-dingtalk\nsystemctl restart prometheus-webhook-dingtalk\nsystemctl status prometheus-webhook-dingtalk\n```\n\n###  方式二\n\n使用python脚本发送钉钉报警\n\n\n`app.py`\n```python\nimport os\nimport json\nimport logging\nimport requests\nimport time\nimport hmac\nimport hashlib\nimport base64\nimport urllib.parse\nfrom config import *\nfrom dateutil import parser\n\nfrom flask import Flask\nfrom flask import request\n\napp = Flask(__name__)\n\nlogging.basicConfig(\n    level=logging.DEBUG if os.getenv('LOG_LEVEL') == 'debug' else logging.INFO,\n    format='%(asctime)s %(levelname)s %(message)s')\n\n\n@app.route('/', methods=['POST', 'GET'])\ndef send():\n    try:\n        content = json.loads(request.get_data())\n        project = \"\"\n\n        for alert in content['alerts']:\n            if alert['status'] == \"resolved\":\n                status = \"恢复\"\n            elif alert['status'] == \"firing\":\n                status = \"故障\"\n            else:\n                status = \"\"\n\n            message = status + \" | \" + alert['labels']['alertname'] + \"\\n\\n\"\n\n            if 'hostname' in alert['labels']:\n                message += \"告警主机: \" + alert['labels']['hostname'] + \"\\n\\n\"\n\n            if 'name' in alert['labels']:\n                message += \"告警地址: \" + alert['labels']['instance'] + \"(\" + alert['labels']['name'] + \")\\n\\n\"\n            else:\n                message += \"告警地址: \" + alert['labels']['instance'] + \"\\n\\n\"\n\n            if 'project' in alert['labels']:\n                message += \"告警项目: \" + alert['labels']['project'] + \"\\n\\n\"\n                project = alert['labels']['project']\n\n            if 'env' in alert['labels']:\n                message += \"告警环境: \" + alert['labels']['env'] + \"\\n\\n\"\n\n            if 'info' in alert['annotations']:\n                message += \"Info: \" + alert['annotations']['info'] + \"\\n\\n\"\n            if 'summary' in alert['annotations']:\n                message += \"Summary: \" + alert['annotations']['summary'] + \"\\n\\n\"\n            if 'description' in alert['annotations']:\n                message += \"告警信息: \" + alert['annotations']['description'] + \"\\n\\n\"\n\n            if alert['status'] == \"resolved\":\n                correctDate = parser.parse(alert['endsAt']).strftime('%Y-%m-%d %H:%M:%S')\n                message += \"恢复时间: \" + correctDate\n            elif alert['status'] == \"firing\":\n                correctDate = parser.parse(alert['startsAt']).strftime('%Y-%m-%d %H:%M:%S')\n                message += \"告警时间: \" + correctDate\n            print(message)\n\n            send_alert_02(message, project)\n        return \"Alert OK\", 200\n    except Exception as error:\n        app.logger.info(\"\\t%s\", error)\n        return \"Alert fail\", 200\n\n\ndef make_sign(timestamp, secret):\n    \"\"\"\n    新版钉钉更新了安全策略，这里我们采用签名的方式进行安全认证\n    https://ding-doc.dingtalk.com/doc#/serverapi2/qf2nxq\n    \"\"\"\n    secret_enc = bytes(secret, 'utf-8')\n    string_to_sign = '{}\\n{}'.format(timestamp, secret)\n    string_to_sign_enc = bytes(string_to_sign, 'utf-8')\n    hmac_code = hmac.new(secret_enc, string_to_sign_enc, digestmod=hashlib.sha256).digest()\n    sign = urllib.parse.quote_plus(base64.b64encode(hmac_code))\n    return sign\n\n\ndef send_alert(data):\n    \"\"\"\n    签名的方式进行安全认证\n    :param data:\n    :return:\n    \"\"\"\n    if not token:\n        app.logger.error('you must set ROBOT_TOKEN env')\n        return\n    if not secret:\n        app.logger.error('you must set ROBOT_SECRET env')\n        return\n    timestamp = int(round(time.time() * 1000))\n    url = 'https://oapi.dingtalk.com/robot/send?access_token=%s&timestamp=%d&sign=%s' % (\n        token, timestamp, make_sign(timestamp, secret))\n    send_data = {\n        \"msgtype\": \"text\",\n        \"text\": {\n            \"content\": data\n        },\n        \"at\": {\n            \"atMobiles\": mobiles,\n            \"isAtAll\": 'false'\n        }\n    }\n    req = requests.post(url, json=send_data)\n    result = req.json()\n    if result['errcode'] != 0:\n        app.logger.error('notify dingtalk error: %s' % result['errcode'])\n\n\ndef send_alert_02(data, project):\n    \"\"\"\n    未签名认证方式\n    \"\"\"\n    accessToken = \"https://oapi.dingtalk.com/robot/send?access_token={}\".format(dingding_token[project])\n    HEADERS = {\n        \"Content-Type\": \"application/json ;charset=utf-8 \"\n    }\n    mobiles = []\n    lists = contacts[\"{}\".format(project)]\n    print(lists)\n    for j in lists:\n        mobiles.append(j[\"mobiles\"])\n    send_data = {\n        \"msgtype\": \"text\",\n        \"text\": {\n            \"content\": data\n        },\n        \"at\": {\n            \"atMobiles\": mobiles,\n            \"isAtAll\": 'false'\n        }\n    }\n    String_textMsg = json.dumps(send_data)\n    res = requests.post(accessToken, data=String_textMsg, headers=HEADERS)\n    print(res)\n\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000)\n```\n\n`config.py`\n```python\ndingding_token = {\n    \"wms\": \"8647622d3103fn656b6hvytg7j6h56j7h567nkjbuhvygyb6bv5c5xf56v4c0ed63a5\",\n    \"oms\": \"69c7359b21ed1b1d23cv36vb7b88lk6g5ffuhuioiiijyihytugrtyfef38e0f96399\"\n}\n\ntoken = 'cf31a0c0f2d9cc28d4234234234234234234234234234234234234b51276a6b01a6a'\nsecret = 'SEC1a4e9326a23423423423423423423423423423553454565756756756afe3f044337'\n\ncontacts = {\n    \"oms\": [\n        {\n            \"mobiles\": \"13554000007\",\n            \"name\": \"xxxx\"\n        },\n        {\n            \"mobiles\": \"1875000004\",\n            \"name\": \"xxxxx\"\n        },\n    ],\n    \"wms\": [\n        {\n            \"mobiles\": \"13554000007\",\n            \"name\": \"xxxx\"\n        },\n        {\n            \"mobiles\": \"1875000004\",\n            \"name\": \"xxxxx\"\n        },\n    ]\n}\n```\n\n\n\n### prometheus 报警规则\n\nrules/cpu.yml\n```yaml\ngroups:\n- name: CPU报警规则\n  rules:\n  - alert: CPU使用率告警\n    expr: 100 - (avg by (instance)(irate(node_cpu_seconds_total{mode=\"idle\"}[1m]) )) * 100 > 90\n    for: 2m\n    labels:\n      level: base\n      severity: warning\n    annotations:\n      description: \"CPU使用超过90%！(当前值: {{ $value }}%)\"\n```\nrules/disk.yml\n```yaml\ngroups:\n- name: 磁盘报警规则\n  rules:\n  - alert: 磁盘使用率告警\n    expr: ceil(((node_filesystem_size_bytes {device=~\"(/dev/.*|/)\",fstype=~\"(ext4|xfs)\"} - node_filesystem_free_bytes {device=~\"(/dev/.*|/)\",fstype=~\"(ext4|xfs)\"}) / node_filesystem_size_bytes {device=~\"(/dev/.*|/)\",fstype=~\"(ext4|xfs)\"} ) * 100  > 85 )\n    for: 2m\n    labels:\n      level: base\n      severity: warning\n    annotations:\n      description: \" {{ $labels.mountpoint }} 使用超过 85% (当前值: {{ $value }})\"\n\n```\nrules/mem.yml\n```yaml\ngroups:\n- name: 内存报警规则\n  rules:\n  - alert: 内存使用率告警\n    expr: ceil((node_memory_MemTotal_bytes - (node_memory_MemFree_bytes+node_memory_Buffers_bytes+node_memory_Cached_bytes )) / node_memory_MemTotal_bytes * 100 > 85)\n    for: 2m\n    labels:\n      level: base\n      severity: warning\n    annotations:\n      description: \"内存使用超过80%！(当前值: {{ $value }}%)\"\n```\nrules/node.yml\n```yaml\ngroups:\n- name: 实例存活告警规则\n  rules:\n  - alert: 主机状态\n    expr: up == 0\n    for: 2m\n    labels:\n      level: base\n      project: base\n      severity: warning\n    annotations:\n      description: \" 主机(或监控节点)发生宕机超过1分钟\"\n```\n\nrules/net.yml\n```yaml\ngroups:\n- name: 网络告警规则\n  rules:\n  - alert: 网络流入\n    expr: ((sum(rate (node_network_receive_bytes_total{device!~'tap.*|veth.*|br.*|docker.*|virbr*|lo*'}[5m])) by (instance)) / 100) > 102400\n    for: 1m\n    labels:\n      level: base\n      project: base\n      severity: warning\n    annotations:\n      summary: \"{{$labels.mountpoint}} 流入网络带宽过高！\"\n      description: \"{{$labels.mountpoint }}流入网络带宽持续2分钟高于100M. RX带宽使用率{{$value}}\"\n\n  - alert: 网络流出\n    expr: ((sum(rate (node_network_transmit_bytes_total{device!~'tap.*|veth.*|br.*|docker.*|virbr*|lo*'}[5m])) by (instance)) / 100) > 102400\n    for: 1m\n    labels:\n      level: base\n      project: base\n      severity: warning\n    annotations:\n      summary: \"{{$labels.mountpoint}} 流出网络带宽过高！\"\n      description: \"{{$labels.mountpoint }}流出网络带宽持续2分钟高于100M. RX带宽使用率{{$value}}\"\n\n  - alert: TCP会话\n    expr: node_netstat_Tcp_CurrEstab > 1000\n    for: 1m\n    labels:\n      level: base\n      project: base\n      severity: warning\n    annotations:\n      summary: \"{{$labels.mountpoint}} TCP_ESTABLISHED过高！\"\n      description: \"{{$labels.mountpoint }} TCP_ESTABLISHED大于1000%(目前使用:{{$value}}%)\"\n\n```\nrules/cpu.yml\nrules/cpu.yml\n","slug":"prometheus/钉钉报警","published":1,"updated":"2021-01-27T08:20:35.768Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h300036q0usbdz942po","content":"<p>摘要: prometheus 使用钉钉报警</p>\n<a id=\"more\"></a>\n\n\n<h3 id=\"方式一\"><a href=\"#方式一\" class=\"headerlink\" title=\"方式一\"></a>方式一</h3><p>prometheus 使用 prometheus-webhook-dingtalk 完成钉钉报警</p>\n<p><code>https://github.com/timonwong/prometheus-webhook-dingtalk</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;prometheus-webhook-dingtalk.service</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description&#x3D;prometheus-webhook-dingtalk</span><br><span class=\"line\">After&#x3D;network-online.target</span><br><span class=\"line\"> </span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Restart&#x3D;on-failure</span><br><span class=\"line\">ExecStart&#x3D;&#x2F;opt&#x2F;alertmanager&#x2F;prometheus-webhook-dingtalk&#x2F;prometheus-webhook-dingtalk \\</span><br><span class=\"line\">          --ding.profile&#x3D;ops_dingding&#x3D;https:&#x2F;&#x2F;oapi.dingtalk.com&#x2F;robot&#x2F;send?access_token&#x3D;省略一串字符 \\</span><br><span class=\"line\">          --ding.profile&#x3D;info_dingding&#x3D;https:&#x2F;&#x2F;oapi.dingtalk.com&#x2F;robot&#x2F;send?access_token&#x3D;同样省略了一串字符</span><br><span class=\"line\"> </span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy&#x3D;multi-user.target</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">配置开机启动</span><br><span class=\"line\"></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl enable prometheus-webhook-dingtalk</span><br><span class=\"line\">systemctl restart prometheus-webhook-dingtalk</span><br><span class=\"line\">systemctl status prometheus-webhook-dingtalk</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"方式二\"><a href=\"#方式二\" class=\"headerlink\" title=\"方式二\"></a>方式二</h3><p>使用python脚本发送钉钉报警</p>\n<p><code>app.py</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> hmac</span><br><span class=\"line\"><span class=\"keyword\">import</span> hashlib</span><br><span class=\"line\"><span class=\"keyword\">import</span> base64</span><br><span class=\"line\"><span class=\"keyword\">import</span> urllib.parse</span><br><span class=\"line\"><span class=\"keyword\">from</span> config <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> dateutil <span class=\"keyword\">import</span> parser</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</span><br><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> request</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\">logging.basicConfig(</span><br><span class=\"line\">    level=logging.DEBUG <span class=\"keyword\">if</span> os.getenv(<span class=\"string\">&#x27;LOG_LEVEL&#x27;</span>) == <span class=\"string\">&#x27;debug&#x27;</span> <span class=\"keyword\">else</span> logging.INFO,</span><br><span class=\"line\">    format=<span class=\"string\">&#x27;%(asctime)s %(levelname)s %(message)s&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(&#x27;/&#x27;, methods=[&#x27;POST&#x27;, &#x27;GET&#x27;])</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">send</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        content = json.loads(request.get_data())</span><br><span class=\"line\">        project = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> alert <span class=\"keyword\">in</span> content[<span class=\"string\">&#x27;alerts&#x27;</span>]:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> alert[<span class=\"string\">&#x27;status&#x27;</span>] == <span class=\"string\">&quot;resolved&quot;</span>:</span><br><span class=\"line\">                status = <span class=\"string\">&quot;恢复&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">elif</span> alert[<span class=\"string\">&#x27;status&#x27;</span>] == <span class=\"string\">&quot;firing&quot;</span>:</span><br><span class=\"line\">                status = <span class=\"string\">&quot;故障&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                status = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            message = status + <span class=\"string\">&quot; | &quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;alertname&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;hostname&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;labels&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警主机: &quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;hostname&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;name&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;labels&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警地址: &quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;instance&#x27;</span>] + <span class=\"string\">&quot;(&quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;name&#x27;</span>] + <span class=\"string\">&quot;)\\n\\n&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警地址: &quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;instance&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;project&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;labels&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警项目: &quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;project&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\">                project = alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;project&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;env&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;labels&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警环境: &quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;env&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;info&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;annotations&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;Info: &quot;</span> + alert[<span class=\"string\">&#x27;annotations&#x27;</span>][<span class=\"string\">&#x27;info&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;summary&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;annotations&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;Summary: &quot;</span> + alert[<span class=\"string\">&#x27;annotations&#x27;</span>][<span class=\"string\">&#x27;summary&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;description&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;annotations&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警信息: &quot;</span> + alert[<span class=\"string\">&#x27;annotations&#x27;</span>][<span class=\"string\">&#x27;description&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> alert[<span class=\"string\">&#x27;status&#x27;</span>] == <span class=\"string\">&quot;resolved&quot;</span>:</span><br><span class=\"line\">                correctDate = parser.parse(alert[<span class=\"string\">&#x27;endsAt&#x27;</span>]).strftime(<span class=\"string\">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class=\"line\">                message += <span class=\"string\">&quot;恢复时间: &quot;</span> + correctDate</span><br><span class=\"line\">            <span class=\"keyword\">elif</span> alert[<span class=\"string\">&#x27;status&#x27;</span>] == <span class=\"string\">&quot;firing&quot;</span>:</span><br><span class=\"line\">                correctDate = parser.parse(alert[<span class=\"string\">&#x27;startsAt&#x27;</span>]).strftime(<span class=\"string\">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警时间: &quot;</span> + correctDate</span><br><span class=\"line\">            print(message)</span><br><span class=\"line\"></span><br><span class=\"line\">            send_alert_02(message, project)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;Alert OK&quot;</span>, <span class=\"number\">200</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> error:</span><br><span class=\"line\">        app.logger.info(<span class=\"string\">&quot;\\t%s&quot;</span>, error)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;Alert fail&quot;</span>, <span class=\"number\">200</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make_sign</span>(<span class=\"params\">timestamp, secret</span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    新版钉钉更新了安全策略，这里我们采用签名的方式进行安全认证</span></span><br><span class=\"line\"><span class=\"string\">    https://ding-doc.dingtalk.com/doc#/serverapi2/qf2nxq</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    secret_enc = bytes(secret, <span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">    string_to_sign = <span class=\"string\">&#x27;&#123;&#125;\\n&#123;&#125;&#x27;</span>.format(timestamp, secret)</span><br><span class=\"line\">    string_to_sign_enc = bytes(string_to_sign, <span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">    hmac_code = hmac.new(secret_enc, string_to_sign_enc, digestmod=hashlib.sha256).digest()</span><br><span class=\"line\">    sign = urllib.parse.quote_plus(base64.b64encode(hmac_code))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sign</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">send_alert</span>(<span class=\"params\">data</span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    签名的方式进行安全认证</span></span><br><span class=\"line\"><span class=\"string\">    :param data:</span></span><br><span class=\"line\"><span class=\"string\">    :return:</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> token:</span><br><span class=\"line\">        app.logger.error(<span class=\"string\">&#x27;you must set ROBOT_TOKEN env&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> secret:</span><br><span class=\"line\">        app.logger.error(<span class=\"string\">&#x27;you must set ROBOT_SECRET env&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    timestamp = int(round(time.time() * <span class=\"number\">1000</span>))</span><br><span class=\"line\">    url = <span class=\"string\">&#x27;https://oapi.dingtalk.com/robot/send?access_token=%s&amp;timestamp=%d&amp;sign=%s&#x27;</span> % (</span><br><span class=\"line\">        token, timestamp, make_sign(timestamp, secret))</span><br><span class=\"line\">    send_data = &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;msgtype&quot;</span>: <span class=\"string\">&quot;text&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;text&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;content&quot;</span>: data</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">&quot;at&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;atMobiles&quot;</span>: mobiles,</span><br><span class=\"line\">            <span class=\"string\">&quot;isAtAll&quot;</span>: <span class=\"string\">&#x27;false&#x27;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    req = requests.post(url, json=send_data)</span><br><span class=\"line\">    result = req.json()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> result[<span class=\"string\">&#x27;errcode&#x27;</span>] != <span class=\"number\">0</span>:</span><br><span class=\"line\">        app.logger.error(<span class=\"string\">&#x27;notify dingtalk error: %s&#x27;</span> % result[<span class=\"string\">&#x27;errcode&#x27;</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">send_alert_02</span>(<span class=\"params\">data, project</span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    未签名认证方式</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    accessToken = <span class=\"string\">&quot;https://oapi.dingtalk.com/robot/send?access_token=&#123;&#125;&quot;</span>.format(dingding_token[project])</span><br><span class=\"line\">    HEADERS = &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json ;charset=utf-8 &quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    mobiles = []</span><br><span class=\"line\">    lists = contacts[<span class=\"string\">&quot;&#123;&#125;&quot;</span>.format(project)]</span><br><span class=\"line\">    print(lists)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> lists:</span><br><span class=\"line\">        mobiles.append(j[<span class=\"string\">&quot;mobiles&quot;</span>])</span><br><span class=\"line\">    send_data = &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;msgtype&quot;</span>: <span class=\"string\">&quot;text&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;text&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;content&quot;</span>: data</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">&quot;at&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;atMobiles&quot;</span>: mobiles,</span><br><span class=\"line\">            <span class=\"string\">&quot;isAtAll&quot;</span>: <span class=\"string\">&#x27;false&#x27;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    String_textMsg = json.dumps(send_data)</span><br><span class=\"line\">    res = requests.post(accessToken, data=String_textMsg, headers=HEADERS)</span><br><span class=\"line\">    print(res)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run(host=<span class=\"string\">&#x27;0.0.0.0&#x27;</span>, port=<span class=\"number\">5000</span>)</span><br></pre></td></tr></table></figure>\n\n<p><code>config.py</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dingding_token = &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;wms&quot;</span>: <span class=\"string\">&quot;8647622d3103fn656b6hvytg7j6h56j7h567nkjbuhvygyb6bv5c5xf56v4c0ed63a5&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;oms&quot;</span>: <span class=\"string\">&quot;69c7359b21ed1b1d23cv36vb7b88lk6g5ffuhuioiiijyihytugrtyfef38e0f96399&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">token = <span class=\"string\">&#x27;cf31a0c0f2d9cc28d4234234234234234234234234234234234234b51276a6b01a6a&#x27;</span></span><br><span class=\"line\">secret = <span class=\"string\">&#x27;SEC1a4e9326a23423423423423423423423423423553454565756756756afe3f044337&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">contacts = &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;oms&quot;</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;mobiles&quot;</span>: <span class=\"string\">&quot;13554000007&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;xxxx&quot;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;mobiles&quot;</span>: <span class=\"string\">&quot;1875000004&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;xxxxx&quot;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&quot;wms&quot;</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;mobiles&quot;</span>: <span class=\"string\">&quot;13554000007&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;xxxx&quot;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;mobiles&quot;</span>: <span class=\"string\">&quot;1875000004&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;xxxxx&quot;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"prometheus-报警规则\"><a href=\"#prometheus-报警规则\" class=\"headerlink\" title=\"prometheus 报警规则\"></a>prometheus 报警规则</h3><p>rules/cpu.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">groups:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">CPU报警规则</span></span><br><span class=\"line\">  <span class=\"attr\">rules:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">CPU使用率告警</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"number\">100</span> <span class=\"bullet\">-</span> <span class=\"string\">(avg</span> <span class=\"string\">by</span> <span class=\"string\">(instance)(irate(node_cpu_seconds_total&#123;mode=&quot;idle&quot;&#125;[1m])</span> <span class=\"string\">))</span> <span class=\"string\">*</span> <span class=\"number\">100</span> <span class=\"string\">&gt;</span> <span class=\"number\">90</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">2m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot;CPU使用超过90%！(当前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>%)&quot;</span></span><br></pre></td></tr></table></figure>\n<p>rules/disk.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">groups:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">磁盘报警规则</span></span><br><span class=\"line\">  <span class=\"attr\">rules:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">磁盘使用率告警</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"string\">ceil(((node_filesystem_size_bytes</span> &#123;<span class=\"string\">device=~&quot;(/dev/.*|/)&quot;</span>,<span class=\"string\">fstype=~&quot;(ext4|xfs)&quot;</span>&#125; <span class=\"bullet\">-</span> <span class=\"string\">node_filesystem_free_bytes</span> &#123;<span class=\"string\">device=~&quot;(/dev/.*|/)&quot;</span>,<span class=\"string\">fstype=~&quot;(ext4|xfs)&quot;</span>&#125;<span class=\"string\">)</span> <span class=\"string\">/</span> <span class=\"string\">node_filesystem_size_bytes</span> &#123;<span class=\"string\">device=~&quot;(/dev/.*|/)&quot;</span>,<span class=\"string\">fstype=~&quot;(ext4|xfs)&quot;</span>&#125; <span class=\"string\">)</span> <span class=\"string\">*</span> <span class=\"number\">100</span>  <span class=\"string\">&gt;</span> <span class=\"number\">85</span> <span class=\"string\">)</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">2m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot; <span class=\"template-variable\">&#123;&#123; $labels.mountpoint &#125;&#125;</span> 使用超过 85% (当前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>)&quot;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>rules/mem.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">groups:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">内存报警规则</span></span><br><span class=\"line\">  <span class=\"attr\">rules:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">内存使用率告警</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"string\">ceil((node_memory_MemTotal_bytes</span> <span class=\"bullet\">-</span> <span class=\"string\">(node_memory_MemFree_bytes+node_memory_Buffers_bytes+node_memory_Cached_bytes</span> <span class=\"string\">))</span> <span class=\"string\">/</span> <span class=\"string\">node_memory_MemTotal_bytes</span> <span class=\"string\">*</span> <span class=\"number\">100</span> <span class=\"string\">&gt;</span> <span class=\"number\">85</span><span class=\"string\">)</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">2m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot;内存使用超过80%！(当前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>%)&quot;</span></span><br></pre></td></tr></table></figure>\n<p>rules/node.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">groups:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">实例存活告警规则</span></span><br><span class=\"line\">  <span class=\"attr\">rules:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">主机状态</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"string\">up</span> <span class=\"string\">==</span> <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">2m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">project:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot; 主机(或监控节点)发生宕机超过1分钟&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>rules/net.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">groups:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">网络告警规则</span></span><br><span class=\"line\">  <span class=\"attr\">rules:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">网络流入</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"string\">((sum(rate</span> <span class=\"string\">(node_network_receive_bytes_total&#123;device!~&#x27;tap.*|veth.*|br.*|docker.*|virbr*|lo*&#x27;&#125;[5m]))</span> <span class=\"string\">by</span> <span class=\"string\">(instance))</span> <span class=\"string\">/</span> <span class=\"number\">100</span><span class=\"string\">)</span> <span class=\"string\">&gt;</span> <span class=\"number\">102400</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">1m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">project:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">summary:</span> <span class=\"string\">&quot;<span class=\"template-variable\">&#123;&#123;$labels.mountpoint&#125;&#125;</span> 流入网络带宽过高！&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot;<span class=\"template-variable\">&#123;&#123;$labels.mountpoint &#125;&#125;</span>流入网络带宽持续2分钟高于100M. RX带宽使用率<span class=\"template-variable\">&#123;&#123;$value&#125;&#125;</span>&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">网络流出</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"string\">((sum(rate</span> <span class=\"string\">(node_network_transmit_bytes_total&#123;device!~&#x27;tap.*|veth.*|br.*|docker.*|virbr*|lo*&#x27;&#125;[5m]))</span> <span class=\"string\">by</span> <span class=\"string\">(instance))</span> <span class=\"string\">/</span> <span class=\"number\">100</span><span class=\"string\">)</span> <span class=\"string\">&gt;</span> <span class=\"number\">102400</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">1m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">project:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">summary:</span> <span class=\"string\">&quot;<span class=\"template-variable\">&#123;&#123;$labels.mountpoint&#125;&#125;</span> 流出网络带宽过高！&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot;<span class=\"template-variable\">&#123;&#123;$labels.mountpoint &#125;&#125;</span>流出网络带宽持续2分钟高于100M. RX带宽使用率<span class=\"template-variable\">&#123;&#123;$value&#125;&#125;</span>&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">TCP会话</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"string\">node_netstat_Tcp_CurrEstab</span> <span class=\"string\">&gt;</span> <span class=\"number\">1000</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">1m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">project:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">summary:</span> <span class=\"string\">&quot;<span class=\"template-variable\">&#123;&#123;$labels.mountpoint&#125;&#125;</span> TCP_ESTABLISHED过高！&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot;<span class=\"template-variable\">&#123;&#123;$labels.mountpoint &#125;&#125;</span> TCP_ESTABLISHED大于1000%(目前使用:<span class=\"template-variable\">&#123;&#123;$value&#125;&#125;</span>%)&quot;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>rules/cpu.yml<br>rules/cpu.yml</p>\n","site":{"data":{}},"excerpt":"<p>摘要: prometheus 使用钉钉报警</p>","more":"<h3 id=\"方式一\"><a href=\"#方式一\" class=\"headerlink\" title=\"方式一\"></a>方式一</h3><p>prometheus 使用 prometheus-webhook-dingtalk 完成钉钉报警</p>\n<p><code>https://github.com/timonwong/prometheus-webhook-dingtalk</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;prometheus-webhook-dingtalk.service</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description&#x3D;prometheus-webhook-dingtalk</span><br><span class=\"line\">After&#x3D;network-online.target</span><br><span class=\"line\"> </span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Restart&#x3D;on-failure</span><br><span class=\"line\">ExecStart&#x3D;&#x2F;opt&#x2F;alertmanager&#x2F;prometheus-webhook-dingtalk&#x2F;prometheus-webhook-dingtalk \\</span><br><span class=\"line\">          --ding.profile&#x3D;ops_dingding&#x3D;https:&#x2F;&#x2F;oapi.dingtalk.com&#x2F;robot&#x2F;send?access_token&#x3D;省略一串字符 \\</span><br><span class=\"line\">          --ding.profile&#x3D;info_dingding&#x3D;https:&#x2F;&#x2F;oapi.dingtalk.com&#x2F;robot&#x2F;send?access_token&#x3D;同样省略了一串字符</span><br><span class=\"line\"> </span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy&#x3D;multi-user.target</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">配置开机启动</span><br><span class=\"line\"></span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl enable prometheus-webhook-dingtalk</span><br><span class=\"line\">systemctl restart prometheus-webhook-dingtalk</span><br><span class=\"line\">systemctl status prometheus-webhook-dingtalk</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"方式二\"><a href=\"#方式二\" class=\"headerlink\" title=\"方式二\"></a>方式二</h3><p>使用python脚本发送钉钉报警</p>\n<p><code>app.py</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> hmac</span><br><span class=\"line\"><span class=\"keyword\">import</span> hashlib</span><br><span class=\"line\"><span class=\"keyword\">import</span> base64</span><br><span class=\"line\"><span class=\"keyword\">import</span> urllib.parse</span><br><span class=\"line\"><span class=\"keyword\">from</span> config <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">from</span> dateutil <span class=\"keyword\">import</span> parser</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</span><br><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> request</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\">logging.basicConfig(</span><br><span class=\"line\">    level=logging.DEBUG <span class=\"keyword\">if</span> os.getenv(<span class=\"string\">&#x27;LOG_LEVEL&#x27;</span>) == <span class=\"string\">&#x27;debug&#x27;</span> <span class=\"keyword\">else</span> logging.INFO,</span><br><span class=\"line\">    format=<span class=\"string\">&#x27;%(asctime)s %(levelname)s %(message)s&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(&#x27;/&#x27;, methods=[&#x27;POST&#x27;, &#x27;GET&#x27;])</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">send</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        content = json.loads(request.get_data())</span><br><span class=\"line\">        project = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> alert <span class=\"keyword\">in</span> content[<span class=\"string\">&#x27;alerts&#x27;</span>]:</span><br><span class=\"line\">            <span class=\"keyword\">if</span> alert[<span class=\"string\">&#x27;status&#x27;</span>] == <span class=\"string\">&quot;resolved&quot;</span>:</span><br><span class=\"line\">                status = <span class=\"string\">&quot;恢复&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">elif</span> alert[<span class=\"string\">&#x27;status&#x27;</span>] == <span class=\"string\">&quot;firing&quot;</span>:</span><br><span class=\"line\">                status = <span class=\"string\">&quot;故障&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                status = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            message = status + <span class=\"string\">&quot; | &quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;alertname&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;hostname&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;labels&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警主机: &quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;hostname&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;name&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;labels&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警地址: &quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;instance&#x27;</span>] + <span class=\"string\">&quot;(&quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;name&#x27;</span>] + <span class=\"string\">&quot;)\\n\\n&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警地址: &quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;instance&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;project&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;labels&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警项目: &quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;project&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\">                project = alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;project&#x27;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;env&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;labels&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警环境: &quot;</span> + alert[<span class=\"string\">&#x27;labels&#x27;</span>][<span class=\"string\">&#x27;env&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;info&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;annotations&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;Info: &quot;</span> + alert[<span class=\"string\">&#x27;annotations&#x27;</span>][<span class=\"string\">&#x27;info&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;summary&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;annotations&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;Summary: &quot;</span> + alert[<span class=\"string\">&#x27;annotations&#x27;</span>][<span class=\"string\">&#x27;summary&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"string\">&#x27;description&#x27;</span> <span class=\"keyword\">in</span> alert[<span class=\"string\">&#x27;annotations&#x27;</span>]:</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警信息: &quot;</span> + alert[<span class=\"string\">&#x27;annotations&#x27;</span>][<span class=\"string\">&#x27;description&#x27;</span>] + <span class=\"string\">&quot;\\n\\n&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> alert[<span class=\"string\">&#x27;status&#x27;</span>] == <span class=\"string\">&quot;resolved&quot;</span>:</span><br><span class=\"line\">                correctDate = parser.parse(alert[<span class=\"string\">&#x27;endsAt&#x27;</span>]).strftime(<span class=\"string\">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class=\"line\">                message += <span class=\"string\">&quot;恢复时间: &quot;</span> + correctDate</span><br><span class=\"line\">            <span class=\"keyword\">elif</span> alert[<span class=\"string\">&#x27;status&#x27;</span>] == <span class=\"string\">&quot;firing&quot;</span>:</span><br><span class=\"line\">                correctDate = parser.parse(alert[<span class=\"string\">&#x27;startsAt&#x27;</span>]).strftime(<span class=\"string\">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class=\"line\">                message += <span class=\"string\">&quot;告警时间: &quot;</span> + correctDate</span><br><span class=\"line\">            print(message)</span><br><span class=\"line\"></span><br><span class=\"line\">            send_alert_02(message, project)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;Alert OK&quot;</span>, <span class=\"number\">200</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span> Exception <span class=\"keyword\">as</span> error:</span><br><span class=\"line\">        app.logger.info(<span class=\"string\">&quot;\\t%s&quot;</span>, error)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;Alert fail&quot;</span>, <span class=\"number\">200</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make_sign</span>(<span class=\"params\">timestamp, secret</span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    新版钉钉更新了安全策略，这里我们采用签名的方式进行安全认证</span></span><br><span class=\"line\"><span class=\"string\">    https://ding-doc.dingtalk.com/doc#/serverapi2/qf2nxq</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    secret_enc = bytes(secret, <span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">    string_to_sign = <span class=\"string\">&#x27;&#123;&#125;\\n&#123;&#125;&#x27;</span>.format(timestamp, secret)</span><br><span class=\"line\">    string_to_sign_enc = bytes(string_to_sign, <span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">    hmac_code = hmac.new(secret_enc, string_to_sign_enc, digestmod=hashlib.sha256).digest()</span><br><span class=\"line\">    sign = urllib.parse.quote_plus(base64.b64encode(hmac_code))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sign</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">send_alert</span>(<span class=\"params\">data</span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    签名的方式进行安全认证</span></span><br><span class=\"line\"><span class=\"string\">    :param data:</span></span><br><span class=\"line\"><span class=\"string\">    :return:</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> token:</span><br><span class=\"line\">        app.logger.error(<span class=\"string\">&#x27;you must set ROBOT_TOKEN env&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> secret:</span><br><span class=\"line\">        app.logger.error(<span class=\"string\">&#x27;you must set ROBOT_SECRET env&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    timestamp = int(round(time.time() * <span class=\"number\">1000</span>))</span><br><span class=\"line\">    url = <span class=\"string\">&#x27;https://oapi.dingtalk.com/robot/send?access_token=%s&amp;timestamp=%d&amp;sign=%s&#x27;</span> % (</span><br><span class=\"line\">        token, timestamp, make_sign(timestamp, secret))</span><br><span class=\"line\">    send_data = &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;msgtype&quot;</span>: <span class=\"string\">&quot;text&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;text&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;content&quot;</span>: data</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">&quot;at&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;atMobiles&quot;</span>: mobiles,</span><br><span class=\"line\">            <span class=\"string\">&quot;isAtAll&quot;</span>: <span class=\"string\">&#x27;false&#x27;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    req = requests.post(url, json=send_data)</span><br><span class=\"line\">    result = req.json()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> result[<span class=\"string\">&#x27;errcode&#x27;</span>] != <span class=\"number\">0</span>:</span><br><span class=\"line\">        app.logger.error(<span class=\"string\">&#x27;notify dingtalk error: %s&#x27;</span> % result[<span class=\"string\">&#x27;errcode&#x27;</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">send_alert_02</span>(<span class=\"params\">data, project</span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    未签名认证方式</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    accessToken = <span class=\"string\">&quot;https://oapi.dingtalk.com/robot/send?access_token=&#123;&#125;&quot;</span>.format(dingding_token[project])</span><br><span class=\"line\">    HEADERS = &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;Content-Type&quot;</span>: <span class=\"string\">&quot;application/json ;charset=utf-8 &quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    mobiles = []</span><br><span class=\"line\">    lists = contacts[<span class=\"string\">&quot;&#123;&#125;&quot;</span>.format(project)]</span><br><span class=\"line\">    print(lists)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> lists:</span><br><span class=\"line\">        mobiles.append(j[<span class=\"string\">&quot;mobiles&quot;</span>])</span><br><span class=\"line\">    send_data = &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;msgtype&quot;</span>: <span class=\"string\">&quot;text&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;text&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;content&quot;</span>: data</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">&quot;at&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;atMobiles&quot;</span>: mobiles,</span><br><span class=\"line\">            <span class=\"string\">&quot;isAtAll&quot;</span>: <span class=\"string\">&#x27;false&#x27;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    String_textMsg = json.dumps(send_data)</span><br><span class=\"line\">    res = requests.post(accessToken, data=String_textMsg, headers=HEADERS)</span><br><span class=\"line\">    print(res)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run(host=<span class=\"string\">&#x27;0.0.0.0&#x27;</span>, port=<span class=\"number\">5000</span>)</span><br></pre></td></tr></table></figure>\n\n<p><code>config.py</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dingding_token = &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;wms&quot;</span>: <span class=\"string\">&quot;8647622d3103fn656b6hvytg7j6h56j7h567nkjbuhvygyb6bv5c5xf56v4c0ed63a5&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;oms&quot;</span>: <span class=\"string\">&quot;69c7359b21ed1b1d23cv36vb7b88lk6g5ffuhuioiiijyihytugrtyfef38e0f96399&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">token = <span class=\"string\">&#x27;cf31a0c0f2d9cc28d4234234234234234234234234234234234234b51276a6b01a6a&#x27;</span></span><br><span class=\"line\">secret = <span class=\"string\">&#x27;SEC1a4e9326a23423423423423423423423423423553454565756756756afe3f044337&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">contacts = &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;oms&quot;</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;mobiles&quot;</span>: <span class=\"string\">&quot;13554000007&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;xxxx&quot;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;mobiles&quot;</span>: <span class=\"string\">&quot;1875000004&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;xxxxx&quot;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&quot;wms&quot;</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;mobiles&quot;</span>: <span class=\"string\">&quot;13554000007&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;xxxx&quot;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;mobiles&quot;</span>: <span class=\"string\">&quot;1875000004&quot;</span>,</span><br><span class=\"line\">            <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;xxxxx&quot;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"prometheus-报警规则\"><a href=\"#prometheus-报警规则\" class=\"headerlink\" title=\"prometheus 报警规则\"></a>prometheus 报警规则</h3><p>rules/cpu.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">groups:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">CPU报警规则</span></span><br><span class=\"line\">  <span class=\"attr\">rules:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">CPU使用率告警</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"number\">100</span> <span class=\"bullet\">-</span> <span class=\"string\">(avg</span> <span class=\"string\">by</span> <span class=\"string\">(instance)(irate(node_cpu_seconds_total&#123;mode=&quot;idle&quot;&#125;[1m])</span> <span class=\"string\">))</span> <span class=\"string\">*</span> <span class=\"number\">100</span> <span class=\"string\">&gt;</span> <span class=\"number\">90</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">2m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot;CPU使用超过90%！(当前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>%)&quot;</span></span><br></pre></td></tr></table></figure>\n<p>rules/disk.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">groups:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">磁盘报警规则</span></span><br><span class=\"line\">  <span class=\"attr\">rules:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">磁盘使用率告警</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"string\">ceil(((node_filesystem_size_bytes</span> &#123;<span class=\"string\">device=~&quot;(/dev/.*|/)&quot;</span>,<span class=\"string\">fstype=~&quot;(ext4|xfs)&quot;</span>&#125; <span class=\"bullet\">-</span> <span class=\"string\">node_filesystem_free_bytes</span> &#123;<span class=\"string\">device=~&quot;(/dev/.*|/)&quot;</span>,<span class=\"string\">fstype=~&quot;(ext4|xfs)&quot;</span>&#125;<span class=\"string\">)</span> <span class=\"string\">/</span> <span class=\"string\">node_filesystem_size_bytes</span> &#123;<span class=\"string\">device=~&quot;(/dev/.*|/)&quot;</span>,<span class=\"string\">fstype=~&quot;(ext4|xfs)&quot;</span>&#125; <span class=\"string\">)</span> <span class=\"string\">*</span> <span class=\"number\">100</span>  <span class=\"string\">&gt;</span> <span class=\"number\">85</span> <span class=\"string\">)</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">2m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot; <span class=\"template-variable\">&#123;&#123; $labels.mountpoint &#125;&#125;</span> 使用超过 85% (当前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>)&quot;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>rules/mem.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">groups:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">内存报警规则</span></span><br><span class=\"line\">  <span class=\"attr\">rules:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">内存使用率告警</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"string\">ceil((node_memory_MemTotal_bytes</span> <span class=\"bullet\">-</span> <span class=\"string\">(node_memory_MemFree_bytes+node_memory_Buffers_bytes+node_memory_Cached_bytes</span> <span class=\"string\">))</span> <span class=\"string\">/</span> <span class=\"string\">node_memory_MemTotal_bytes</span> <span class=\"string\">*</span> <span class=\"number\">100</span> <span class=\"string\">&gt;</span> <span class=\"number\">85</span><span class=\"string\">)</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">2m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot;内存使用超过80%！(当前值: <span class=\"template-variable\">&#123;&#123; $value &#125;&#125;</span>%)&quot;</span></span><br></pre></td></tr></table></figure>\n<p>rules/node.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">groups:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">实例存活告警规则</span></span><br><span class=\"line\">  <span class=\"attr\">rules:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">主机状态</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"string\">up</span> <span class=\"string\">==</span> <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">2m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">project:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot; 主机(或监控节点)发生宕机超过1分钟&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>rules/net.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">groups:</span></span><br><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">网络告警规则</span></span><br><span class=\"line\">  <span class=\"attr\">rules:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">网络流入</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"string\">((sum(rate</span> <span class=\"string\">(node_network_receive_bytes_total&#123;device!~&#x27;tap.*|veth.*|br.*|docker.*|virbr*|lo*&#x27;&#125;[5m]))</span> <span class=\"string\">by</span> <span class=\"string\">(instance))</span> <span class=\"string\">/</span> <span class=\"number\">100</span><span class=\"string\">)</span> <span class=\"string\">&gt;</span> <span class=\"number\">102400</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">1m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">project:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">summary:</span> <span class=\"string\">&quot;<span class=\"template-variable\">&#123;&#123;$labels.mountpoint&#125;&#125;</span> 流入网络带宽过高！&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot;<span class=\"template-variable\">&#123;&#123;$labels.mountpoint &#125;&#125;</span>流入网络带宽持续2分钟高于100M. RX带宽使用率<span class=\"template-variable\">&#123;&#123;$value&#125;&#125;</span>&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">网络流出</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"string\">((sum(rate</span> <span class=\"string\">(node_network_transmit_bytes_total&#123;device!~&#x27;tap.*|veth.*|br.*|docker.*|virbr*|lo*&#x27;&#125;[5m]))</span> <span class=\"string\">by</span> <span class=\"string\">(instance))</span> <span class=\"string\">/</span> <span class=\"number\">100</span><span class=\"string\">)</span> <span class=\"string\">&gt;</span> <span class=\"number\">102400</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">1m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">project:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">summary:</span> <span class=\"string\">&quot;<span class=\"template-variable\">&#123;&#123;$labels.mountpoint&#125;&#125;</span> 流出网络带宽过高！&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot;<span class=\"template-variable\">&#123;&#123;$labels.mountpoint &#125;&#125;</span>流出网络带宽持续2分钟高于100M. RX带宽使用率<span class=\"template-variable\">&#123;&#123;$value&#125;&#125;</span>&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">alert:</span> <span class=\"string\">TCP会话</span></span><br><span class=\"line\">    <span class=\"attr\">expr:</span> <span class=\"string\">node_netstat_Tcp_CurrEstab</span> <span class=\"string\">&gt;</span> <span class=\"number\">1000</span></span><br><span class=\"line\">    <span class=\"attr\">for:</span> <span class=\"string\">1m</span></span><br><span class=\"line\">    <span class=\"attr\">labels:</span></span><br><span class=\"line\">      <span class=\"attr\">level:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">project:</span> <span class=\"string\">base</span></span><br><span class=\"line\">      <span class=\"attr\">severity:</span> <span class=\"string\">warning</span></span><br><span class=\"line\">    <span class=\"attr\">annotations:</span></span><br><span class=\"line\">      <span class=\"attr\">summary:</span> <span class=\"string\">&quot;<span class=\"template-variable\">&#123;&#123;$labels.mountpoint&#125;&#125;</span> TCP_ESTABLISHED过高！&quot;</span></span><br><span class=\"line\">      <span class=\"attr\">description:</span> <span class=\"string\">&quot;<span class=\"template-variable\">&#123;&#123;$labels.mountpoint &#125;&#125;</span> TCP_ESTABLISHED大于1000%(目前使用:<span class=\"template-variable\">&#123;&#123;$value&#125;&#125;</span>%)&quot;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>rules/cpu.yml<br>rules/cpu.yml</p>"},{"title":"salt-minion 安装脚本","date":"2020-09-21T04:42:00.000Z","_content":"\n```bash\n#!/bash/sh\n#Function: install salt-master \necho -e \"\\033[1;32m ###########  close selinux ############# \\033[0m\"\nsed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config\nsetenforce 0\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\nsleep 5\necho -e \"\\033[1;32m ###########  install salt-minion  ############# \\033[0m\"\ncurl -L https://bootstrap.saltstack.com -o install_salt.sh\nsh install_salt.sh -P\n\ntdate=`date '+%m%d%H%M%S'`\ncp /etc/salt/master /etc/salt/master_bak-$tdate\n\n\nHostName=`hostname`\nmaster_ip=172.16.102.33\n\ncp /etc/salt/minion /etc/salt/minion_bak\nsed -i  \"17a master: $master_ip\" /etc/salt/minion\nsed -i '/^master/master: ${master_ip}' /etc/salt/minion\nsed -i  \"113a id: $HostName\" /etc/salt/minion\n```\n\n","source":"_posts/saltstack/salt-minion安装脚本.md","raw":"---\ntitle: salt-minion 安装脚本\ndate: 2020-09-21 12:42\ncategories:\n- salt\ntags:\n- salt\n---\n\n```bash\n#!/bash/sh\n#Function: install salt-master \necho -e \"\\033[1;32m ###########  close selinux ############# \\033[0m\"\nsed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config\nsetenforce 0\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\nsleep 5\necho -e \"\\033[1;32m ###########  install salt-minion  ############# \\033[0m\"\ncurl -L https://bootstrap.saltstack.com -o install_salt.sh\nsh install_salt.sh -P\n\ntdate=`date '+%m%d%H%M%S'`\ncp /etc/salt/master /etc/salt/master_bak-$tdate\n\n\nHostName=`hostname`\nmaster_ip=172.16.102.33\n\ncp /etc/salt/minion /etc/salt/minion_bak\nsed -i  \"17a master: $master_ip\" /etc/salt/minion\nsed -i '/^master/master: ${master_ip}' /etc/salt/minion\nsed -i  \"113a id: $HostName\" /etc/salt/minion\n```\n\n","slug":"saltstack/salt-minion安装脚本","published":1,"updated":"2021-01-27T08:20:35.773Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h310039q0usei1lakul","content":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bash/sh</span></span><br><span class=\"line\"><span class=\"comment\">#Function: install salt-master </span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  close selinux ############# \\033[0m&quot;</span></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/selinux/config</span><br><span class=\"line\">setenforce 0</span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld.service</span><br><span class=\"line\">sleep 5</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  install salt-minion  ############# \\033[0m&quot;</span></span><br><span class=\"line\">curl -L https://bootstrap.saltstack.com -o install_salt.sh</span><br><span class=\"line\">sh install_salt.sh -P</span><br><span class=\"line\"></span><br><span class=\"line\">tdate=`date <span class=\"string\">&#x27;+%m%d%H%M%S&#x27;</span>`</span><br><span class=\"line\">cp /etc/salt/master /etc/salt/master_bak-<span class=\"variable\">$tdate</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">HostName=`hostname`</span><br><span class=\"line\">master_ip=172.16.102.33</span><br><span class=\"line\"></span><br><span class=\"line\">cp /etc/salt/minion /etc/salt/minion_bak</span><br><span class=\"line\">sed -i  <span class=\"string\">&quot;17a master: <span class=\"variable\">$master_ip</span>&quot;</span> /etc/salt/minion</span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;/^master/master: $&#123;master_ip&#125;&#x27;</span> /etc/salt/minion</span><br><span class=\"line\">sed -i  <span class=\"string\">&quot;113a id: <span class=\"variable\">$HostName</span>&quot;</span> /etc/salt/minion</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bash/sh</span></span><br><span class=\"line\"><span class=\"comment\">#Function: install salt-master </span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  close selinux ############# \\033[0m&quot;</span></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/selinux/config</span><br><span class=\"line\">setenforce 0</span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld.service</span><br><span class=\"line\">sleep 5</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  install salt-minion  ############# \\033[0m&quot;</span></span><br><span class=\"line\">curl -L https://bootstrap.saltstack.com -o install_salt.sh</span><br><span class=\"line\">sh install_salt.sh -P</span><br><span class=\"line\"></span><br><span class=\"line\">tdate=`date <span class=\"string\">&#x27;+%m%d%H%M%S&#x27;</span>`</span><br><span class=\"line\">cp /etc/salt/master /etc/salt/master_bak-<span class=\"variable\">$tdate</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">HostName=`hostname`</span><br><span class=\"line\">master_ip=172.16.102.33</span><br><span class=\"line\"></span><br><span class=\"line\">cp /etc/salt/minion /etc/salt/minion_bak</span><br><span class=\"line\">sed -i  <span class=\"string\">&quot;17a master: <span class=\"variable\">$master_ip</span>&quot;</span> /etc/salt/minion</span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;/^master/master: $&#123;master_ip&#125;&#x27;</span> /etc/salt/minion</span><br><span class=\"line\">sed -i  <span class=\"string\">&quot;113a id: <span class=\"variable\">$HostName</span>&quot;</span> /etc/salt/minion</span><br></pre></td></tr></table></figure>\n\n"},{"title":"salt-master 安装脚本","date":"2020-09-21T04:42:00.000Z","_content":"\n```bash\n#!/bash/sh\n#Function: install salt-master \necho -e \"\\033[1;32m ###########  close selinux ############# \\033[0m\"\nsed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config\nsetenforce 0\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\nsleep 5\necho -e \"\\033[1;32m ###########  install salt-master ############# \\033[0m\"\ncurl -L https://bootstrap.saltstack.com -o install_salt.sh\nsh install_salt.sh -P -M\n\ntdate=`date '+%m%d%H%M%S'`\ncp /etc/salt/master /etc/salt/master_bak-$tdate\n\nsed -i '/^interface:/interface: 0.0.0.0' /etc/salt/master\nsed -i 's/#auto_accept: False/auto_accept: True/g' /etc/salt/master\n```\n\n","source":"_posts/saltstack/salt-master安装脚本.md","raw":"---\ntitle: salt-master 安装脚本\ndate: 2020-09-21 12:42\ncategories:\n- salt\ntags:\n- salt\n---\n\n```bash\n#!/bash/sh\n#Function: install salt-master \necho -e \"\\033[1;32m ###########  close selinux ############# \\033[0m\"\nsed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config\nsetenforce 0\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\nsleep 5\necho -e \"\\033[1;32m ###########  install salt-master ############# \\033[0m\"\ncurl -L https://bootstrap.saltstack.com -o install_salt.sh\nsh install_salt.sh -P -M\n\ntdate=`date '+%m%d%H%M%S'`\ncp /etc/salt/master /etc/salt/master_bak-$tdate\n\nsed -i '/^interface:/interface: 0.0.0.0' /etc/salt/master\nsed -i 's/#auto_accept: False/auto_accept: True/g' /etc/salt/master\n```\n\n","slug":"saltstack/salt-master安装脚本","published":1,"updated":"2021-01-27T08:20:35.772Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h32003cq0us41w053h2","content":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bash/sh</span></span><br><span class=\"line\"><span class=\"comment\">#Function: install salt-master </span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  close selinux ############# \\033[0m&quot;</span></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/selinux/config</span><br><span class=\"line\">setenforce 0</span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld.service</span><br><span class=\"line\">sleep 5</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  install salt-master ############# \\033[0m&quot;</span></span><br><span class=\"line\">curl -L https://bootstrap.saltstack.com -o install_salt.sh</span><br><span class=\"line\">sh install_salt.sh -P -M</span><br><span class=\"line\"></span><br><span class=\"line\">tdate=`date <span class=\"string\">&#x27;+%m%d%H%M%S&#x27;</span>`</span><br><span class=\"line\">cp /etc/salt/master /etc/salt/master_bak-<span class=\"variable\">$tdate</span></span><br><span class=\"line\"></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;/^interface:/interface: 0.0.0.0&#x27;</span> /etc/salt/master</span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;s/#auto_accept: False/auto_accept: True/g&#x27;</span> /etc/salt/master</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bash/sh</span></span><br><span class=\"line\"><span class=\"comment\">#Function: install salt-master </span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  close selinux ############# \\033[0m&quot;</span></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/selinux/config</span><br><span class=\"line\">setenforce 0</span><br><span class=\"line\">systemctl stop firewalld.service</span><br><span class=\"line\">systemctl <span class=\"built_in\">disable</span> firewalld.service</span><br><span class=\"line\">sleep 5</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[1;32m ###########  install salt-master ############# \\033[0m&quot;</span></span><br><span class=\"line\">curl -L https://bootstrap.saltstack.com -o install_salt.sh</span><br><span class=\"line\">sh install_salt.sh -P -M</span><br><span class=\"line\"></span><br><span class=\"line\">tdate=`date <span class=\"string\">&#x27;+%m%d%H%M%S&#x27;</span>`</span><br><span class=\"line\">cp /etc/salt/master /etc/salt/master_bak-<span class=\"variable\">$tdate</span></span><br><span class=\"line\"></span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;/^interface:/interface: 0.0.0.0&#x27;</span> /etc/salt/master</span><br><span class=\"line\">sed -i <span class=\"string\">&#x27;s/#auto_accept: False/auto_accept: True/g&#x27;</span> /etc/salt/master</span><br></pre></td></tr></table></figure>\n\n"},{"title":"vue3 教程一","date":"2020-09-29T07:05:00.000Z","_content":"  \n  \n摘要: vue3.0教程\n<!-- more -->\n\n### 安装 vue3\n\n\n\n### 安装 vite\n```\nnpm install -g create-vite-app\n```\n\n#### 创建项目\n```\ncreate-vite-app projectName\n```\n安装项目依赖\n```\ncd project\nnpm install \nnpm run dev\n```\n\n#### webpack 创建项目的方法\n```\ngit clone https://github.com/vuejs/vue-next-webpack-preview.git project Nameplates\ncd projectName\nnpm install\nnpm run dev\n```\n\n#### Vue-Cli  创建项目的方法\n```\nnpm install -g @vue/Cli\nvue create projectName\ncd projectName\nvue add vue-next\nnpm run serve\n```","source":"_posts/vue/vue教程一.md","raw":"---\ntitle: vue3 教程一\ndate: 2020-09-29 15:05\ncategories:\n- vue\ntags:\n- vue3\n---\n  \n  \n摘要: vue3.0教程\n<!-- more -->\n\n### 安装 vue3\n\n\n\n### 安装 vite\n```\nnpm install -g create-vite-app\n```\n\n#### 创建项目\n```\ncreate-vite-app projectName\n```\n安装项目依赖\n```\ncd project\nnpm install \nnpm run dev\n```\n\n#### webpack 创建项目的方法\n```\ngit clone https://github.com/vuejs/vue-next-webpack-preview.git project Nameplates\ncd projectName\nnpm install\nnpm run dev\n```\n\n#### Vue-Cli  创建项目的方法\n```\nnpm install -g @vue/Cli\nvue create projectName\ncd projectName\nvue add vue-next\nnpm run serve\n```","slug":"vue/vue教程一","published":1,"updated":"2021-01-27T08:20:35.775Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h33003eq0us8f3e64oa","content":"<p>摘要: vue3.0教程</p>\n<a id=\"more\"></a>\n\n<h3 id=\"安装-vue3\"><a href=\"#安装-vue3\" class=\"headerlink\" title=\"安装 vue3\"></a>安装 vue3</h3><h3 id=\"安装-vite\"><a href=\"#安装-vite\" class=\"headerlink\" title=\"安装 vite\"></a>安装 vite</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g create-vite-app</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"创建项目\"><a href=\"#创建项目\" class=\"headerlink\" title=\"创建项目\"></a>创建项目</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create-vite-app projectName</span><br></pre></td></tr></table></figure>\n<p>安装项目依赖</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd project</span><br><span class=\"line\">npm install </span><br><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"webpack-创建项目的方法\"><a href=\"#webpack-创建项目的方法\" class=\"headerlink\" title=\"webpack 创建项目的方法\"></a>webpack 创建项目的方法</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https:&#x2F;&#x2F;github.com&#x2F;vuejs&#x2F;vue-next-webpack-preview.git project Nameplates</span><br><span class=\"line\">cd projectName</span><br><span class=\"line\">npm install</span><br><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Vue-Cli-创建项目的方法\"><a href=\"#Vue-Cli-创建项目的方法\" class=\"headerlink\" title=\"Vue-Cli  创建项目的方法\"></a>Vue-Cli  创建项目的方法</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g @vue&#x2F;Cli</span><br><span class=\"line\">vue create projectName</span><br><span class=\"line\">cd projectName</span><br><span class=\"line\">vue add vue-next</span><br><span class=\"line\">npm run serve</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<p>摘要: vue3.0教程</p>","more":"<h3 id=\"安装-vue3\"><a href=\"#安装-vue3\" class=\"headerlink\" title=\"安装 vue3\"></a>安装 vue3</h3><h3 id=\"安装-vite\"><a href=\"#安装-vite\" class=\"headerlink\" title=\"安装 vite\"></a>安装 vite</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g create-vite-app</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"创建项目\"><a href=\"#创建项目\" class=\"headerlink\" title=\"创建项目\"></a>创建项目</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create-vite-app projectName</span><br></pre></td></tr></table></figure>\n<p>安装项目依赖</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd project</span><br><span class=\"line\">npm install </span><br><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"webpack-创建项目的方法\"><a href=\"#webpack-创建项目的方法\" class=\"headerlink\" title=\"webpack 创建项目的方法\"></a>webpack 创建项目的方法</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https:&#x2F;&#x2F;github.com&#x2F;vuejs&#x2F;vue-next-webpack-preview.git project Nameplates</span><br><span class=\"line\">cd projectName</span><br><span class=\"line\">npm install</span><br><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Vue-Cli-创建项目的方法\"><a href=\"#Vue-Cli-创建项目的方法\" class=\"headerlink\" title=\"Vue-Cli  创建项目的方法\"></a>Vue-Cli  创建项目的方法</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g @vue&#x2F;Cli</span><br><span class=\"line\">vue create projectName</span><br><span class=\"line\">cd projectName</span><br><span class=\"line\">vue add vue-next</span><br><span class=\"line\">npm run serve</span><br></pre></td></tr></table></figure>"},{"title":"Saltstack 简单使用","date":"2020-09-21T04:43:00.000Z","_content":"SaltStack 使用\n\n\n\n### SaltStack 介绍\n\n- SaltStack是一款Python开发的开源配置管理工具；\n- 可用来发现、监控、响应、协调、自动化管理本地、混合、云和IOT资产;\n- 其最主要的差异是主从模式，分为master和minions(slave)；\n- 经过配置之后master可以管理成千上万个minions；\n- master安装的是服务端组件salt-mater，minions安装的是salt-minion；\n- Salt使用基于ZeroMQ的强大异步网络拓扑，主要是为实现最快的通信；\n- Salt Master运行2个网络服务，ZeroMQ PUB系统，默认运行在4505端口；ZeroMQ REP系统，用于与Salt Minion进行双向通信，默认运行在4506端口；\n- Salt客户端(salt命令)发送的命令将通过ZeroMQ PUB/SUB广播给各个Salt Minion。前提是Salt Minion配置了Mater，并且Salt Master通过salt-key命令信任了对应的Salt Minion。建立连接之后，Salt Minion可以接收到广播命令，并且执行；\n- PUB/SUB是单向通信，因此一旦广播结束，Master服务器上的PUB接口就不会再与Minion进行任何通信。Minion在运行命令之后，通过REP端口(4506)将命令的返回数据发回Master。\n\n#### 命令发布过程\n\nSaltStack 的 Master 与 Minion 之间通过 ZeroMq 进行消息传递，使用 ZeroMq 的发布订阅模式，连接方式包括 TCP 和 IPC 。\n\nSalt 命令，将 cmd.run ls  命令从 salt.client.LocalClient.cmd_cli 发布到 Master，获取一个 JobID ,根据 jobID 获取命令执行结果。\n\nMaster 接收到命令后，将要执行的命令发送给客户端 minion\n\nMinion 从消息总线上接收到要处理的命令，交给 minion._handle_aes  处理。\n\nMinion  minion._handle_aes   发起一个本地线程调用 cmdmod 执行 ls 命令。线程执行完 ls 后，调用 Minion._return_pub 方法。将执行结果通过消息总线返回给master。 \n\nMaster接收到客户端返回的结果，调用 master.handle_ase 方法将结果写到文件中。\n\nSalt.client.LocalClient.cmd_cli 通过轮询获取Job 执行结果，将结果输出到终端。\n\n#### salt部署基本架构\n\n\n```mermaid\nstateDiagram\n    [*] --> Master\n    Master --> OS_Minion\n    Master --> Web01_Minion\n    Master --> Web02_Minion\n```\n\n\n\n####  salt端口\n\n安装好salt之后开始配置，salt-master默认监听两个端口：\n\n```javascript\n4505   publish_port   提供远程命令发送功能\n4506   ret_port       提供认证，文件服务，结果收集等功能\n确保客户端可以通信服务器的此2个端口，保证防火墙允许端口通过。因此在测试环境直接关闭防火墙。\n```\n\n#### 配置文件\n\n```javascript\nsalt-master的配置文件是/etc/salt/master\nsalt-minion的配置文件是/etc/salt/minion\n配置文件中包含了大量可调整的参数，这些参数控制master和minion各个方面\n```\n\n#### 配置 salt-master\n\n```javascript\n[root@master ~]# grep -v ^# /etc/salt/master|grep -v ^$\ninterface: 0.0.0.0  #绑定到本地的0.0.0.0地址\n\npublish_port: 4505　　#管理端口，命令发送\n\nuser: root　　　　　　#运行salt进程的用户\n\nworker_threads: 5　　#salt运行线程数，线程越多处理速度越快，不要超过cpu个数\n \nret_port: 4506　　#执行结果返回端口\n\npidfile: /var/run/salt-master.pid #pid文件位置\n\nlog_file: /var/log/salt/master　　#日志文件地址\n\n#自动接收minion的key\nauto_accept: False\n\n# minion的识别ID，可以是IP，域名，或是可以通过DNS解析的字符串\nid: slave   # 最好使用主机名\n\n# salt运行的用户权限\nuser: root\n\n# master的识别ID，可以是IP，域名，或是可以通过DNS解析的字符串\nmaster : master    #master 地址\n \n# master通信端口\nmaster_port: 4506\n \n# 备份模式，minion是本地备份，当进行文件管理时的文件备份模式\nbackup_mode: minion\n \n# 执行salt-call时候的输出方式\noutput: nested\n \n# minion等待master接受认证的时间\nacceptance_wait_time: 10\n \n# 失败重连次数，0表示无限次，非零会不断尝试到设置值后停止尝试\nacceptance_wait_time_max: 0\n \n# 重新认证延迟时间，可以避免因为master的key改变导致minion需要重新认证的syn风暴\nrandom_reauth_delay: 60\n\n# salt state执行时候的根目录\nfile_roots:\n  base:\n    - /srv/salt\n```\n\n####  配置satl-minion \n\n```javascript\n[root@slave ~]# grep -v ^# /etc/salt/minion|grep -v ^$\nmaster: master    #master 地址\nmaster_port: 4506\nuser: root\nid: slave   # 最好使用主机名\nacceptance_wait_time: 10\nlog_file: /var/log/salt/minion\n```\n\n\n\n#### 启动salt-master和salt-minion\n\n```javascript\nsystemctl start salt-minion\nsystemctl start salt-master\n\n#检查salt状态\nsystemctl status salt-minion\nsystemctl status salt-master\n```\n\n\n\n### SaltStack VS Ansible\n\n\n\n| SaltStack                                                    | Ansible                                       |\n| ------------------------------------------------------------ | --------------------------------------------- |\n| SaltStack 依靠ZeroMQ速度快                                   | Ansible SSH传输速度慢一些                     |\n| ZeroMQ本身不加密，AES加密，需注意MITM攻击                    | SSH安全性高                                   |\n| Master需要守护进程                                           | 无额外开支，SSH即可                           |\n| State语法需要学习                                            | playbook语法相对简单，容易学习                |\n| excution模块+state模块，state会调用excution模块              | Ansible模块+playbook                          |\n| 使用topfile [top.sls](https://docs.saltstack.com/en/latest/ref/states/top.html) 使用[YAML](http://yaml.org/) | playbook使用YAML                              |\n| 围绕Master输入命令，首次连接使用加密key，使用ZeroMQ库不会拥堵，持续连接速度更快 | 使用SSH通道，无固定Master，更安全，也有MQ版本 |\n| 未提及                                                       | 配置记录文件，原始vs生产                      |\n| 默认本地root，客户端root                                     | 支持多用户sudo操作                            |\n| 密码容易保管，命令容易审计                                   | SSH，公钥连接                                 |\n| 配置模块化，学习成本更高                                     | 克隆Ansible Git，语法简单                     |\n\n\n\n### 安装\n\n#### SALT MASTER\n\n```\ncurl -L https://bootstrap.saltstack.com -o install_salt.sh\nsudo sh install_salt.sh -P -M\n```\n\n#### SALT MINION\n\n```\ncurl -L https://bootstrap.saltstack.com -o install_salt.sh\nsudo sh install_salt.sh -P\n```\n\n配置脚本\n\n```\n#!/bin/bash\n\nHostName=`hostname`\ncp /etc/salt/minion /etc/salt/minion_bak\nsed -i  \"17a master: 172.16.102.33\" /etc/salt/minion\nsed -i  \"113a id: $HostName\" /etc/salt/minion\n\nsystemctl enable salt-minion\nsystemctl start salt-minion\n```\n\n\n\n\n\n### 在master上接收minion秘钥\n\n在minion启动后连接master会请求master为其签发证书，等待证书签发完成后，master可以信任minion，并且minion和master之间的通信是加密的。\n\n在salt-master执行\n\nsalt-key命令用于管理mionion秘钥\n\n```javascript\n[root@master ~]# salt-key -L\nAccepted Keys:\nDenied Keys:\nUnaccepted Keys:\nslave　　　　#此时已经出现slave\nRejected Keys:\n```\n此时slave已经出现在unaccepted keys中，说明minion已经和master联系，并且master已经获取了minion的公钥，等待下一步指令。\n\n### 检查master和minion的秘钥匹配\n\n在master上执行\n\n```javascript\n[root@master ~]# salt-key -f slave\nUnaccepted Keys:\nslave:  0a:b9:97:b5:9a:65:b8:49:a1:50:a5:6a:66:ce:33:ea\n```\n\n然后可以在minion上获取minion的秘钥\n\n```javascript\n[root@slave ~]# salt-call --local key.finger\nlocal:\n    0a:b9:97:b5:9a:65:b8:49:a1:50:a5:6a:66:ce:33:ea\n```\n\n因此可确认秘钥匹配，在master上接收秘钥\n\n```javascript\n[root@master ~]# salt-key -a slave\nThe following keys are going to be accepted:\nUnaccepted Keys:\nslave\nProceed? [n/Y] y\nKey for minion slave accepted.\n```\n\n确认接收秘钥后，检验minion秘钥是否被接收\n\n```javascript\n[root@master ~]# salt-key -L\nAccepted Keys:\nslave\nDenied Keys:\nUnaccepted Keys:\nRejected Keys:\n```\n\n秘钥接收完成后，就可以执行第一条salt啦\n\n\n\n### 认证命令介绍\n\n```\nsalt-key –L #查看所有minion-key\nsalt-key –a #接受某个minion-key\nsalt-key –A #接受所有minion-key\nsalt-key –d #删除某个minion-key\nsalt-key –D #删除所有minion-key\n```\n\n\n\n### SaltStack minion 匹配方式\n\n1、Glob（salt默认的target 类型，使用shell的通配符来指定一个或多个 minion ID）\n\n```\nsalt \\* test.ping  或者 salt '*' test.ping\n```\n\n2、 pcre 兼容正则表达式\n\n```\nsalt -E ‘^[m|M]in.[e|o|u]n$’ test.ping\n```\n\n3、 subnet (通过指定一个IPv4 地址或一个CIDR 的IPv4 子网)\n\n```\nsalt -S 192168.0.42 test.ping\n或者\nsalt -s 192.168.0.0/16 test.ping\n```\n\n4、Grains（salt 可以通过操作系统、CPU架构及自定义信息等机器特征进行 target Minion）\n\n```\nsalt -G 'os:Ubuntu' test.ping\nsalt -G 'os_family:Debian' test.ping\n```\n\n5、pillar (salt 支持通过 pillar 数据进行匹配)\n\n```\nsalt -l 'my_val:my_val' test.ping\n```\n\n6、混合（compound）\n\n```\nsalt -C 'web* or G@os:Arch' test.ping\n```\n\n### salt 常用模板\n\n\n\n```\nsalt '*' status.loadavg            #系统信息\nsalt '*' status.cpuinfo            #CPU 信息\nsalt \"*\" status.diskstats          #查看磁盘信息\nsalt \"*\" status.meminfo            #查看内存信息\nsalt \"*\" status.w                  #w命令返回信息\nsalt node01  sys.list_modules      #查看所有module 列表 \nsalt node01  sys.list_functions cmd    查看指定 module 的所有function 方法\nsalt node01 sys.doc cmd.run        查看指定 module 用法\n\n```\n\n\n\n### salt相关命令\n\n```\n\nsalt-run manage.up \t\t\t# 查看存活的minion\nsalt-run manage.down \t\t# 查看死掉的minion\nsalt-run manage.down removekeys=True \t\t# 查看down掉的minion，并将其删除\nsalt-run manage.status \t\t\t\t\t# 查看minion的相关状态\nsalt-run manage.versions \t\t\t\t# 查看salt的所有master和minion的版本信息\nsalt-run jobs.active \t\t\t\t\t# 查看哪些系统任务还在处理中\nsalt-run jobs.list_jobs \t\t\t\t# 显示所有的已完成或部分完成的任务信息\nsalt '*' saltutil.running \t\t\t\t# 查看运行的jobs ID\nsalt \\* saltutil.kill_job 20151209034239907625 # kill掉进程ID\nsalt -d \t\t\t\t\t# 查看帮助文档\nsalt -d|grep service \t\t\t\t# 查看service相关模块命令\nsalt '*' sys.doc \t\t\t\t# 查看帮助文档\nsalt-key -L \t\t\t\t# 查询所有接收到的证书\nsalt-key -a <证书名> \t\t\t\t# 接收单个证书\nsalt-key -A \t\t\t\t\t# 接受所有证书\nsalt-key -d <证书名> \t\t\t\t# 删除单个证书\nsalt-key -D \t\t\t\t\t\t# 删除所有证书\nsalt '*' service.get_all \t\t\t# 获取主机所有服务\nsalt '*' service.reload sshd \t\t# 重载sshd服务\nsalt '*' pkg.list_pkgs # 显示软件包版本列表\nsalt '*' pkg.version python # 显示软件包版本信息\nsalt '*' pkg.install httpd # 安装软件包\nsalt 'node1.com' service.status mysql # 查看mysql服务状态\nsalt 'node1.com' service.start mysql # 启动mysql服务\nsalt 'node1.com' cmd.run 'service mysql status' # 与上面一样查看服务\nsalt '*' sys.list_modules # 模块列表\nsalt-cp '*' /etc/hosts /etc/hosts # 把master上的hosts文件分发到所有主机\nsalt '*' cp.get_file salt://ceshi/b /tmp/test # 把salt-master端相应的文件，分发文件到minion端\nsalt '*' cp.get_dir salt://zabbix /tmp # 把salt-master端相应的目录，分发文件到minion端\nsalt '*' file.copy /tmp/zabbix.sls /tmp/sls # 把salt-master端对应文件拷贝到minion端相应目录下\nsalt '*' cmd.run 'uptime' # 远程命令执行测试\n\n\n\n```\n\n 远程执行脚本\n\n```\n'cmd.script:'\n salt '*' cmd.script salt://scripts/runme.sh\n salt '*' cmd.script salt://scripts/runme.sh 'arg1 arg2 \"arg 3\"'\n salt '*' cmd.script salt://scripts/windows_task.ps1 args=' -Input c:\\tmp\\infile.txt' shell='powershell'\n salt '*' cmd.script salt://scripts/runme.sh stdin='one\\ntwo\\nthree\\nfour\\nfive\\n'\n \n \n'cmd.shell:'\n\n This passes the cmd argument directly to the shell\n salt '*' cmd.shell \"ls -l | awk '/foo/{print \\$2}'\"\n salt '*' cmd.shell template=jinja \"ls -l /tmp/{{grains.id}} | awk '/foo/{print \\$2}'\"\n salt '*' cmd.shell \"Get-ChildItem C:\\ \" shell='powershell'\n salt '*' cmd.shell \"grep f\" stdin='one\\ntwo\\nthree\\nfour\\nfive\\n'\n salt '*' cmd.shell cmd='sed -e s/=/:/g'\n \n'cmd.shells:'\n salt '*' cmd.shells\n'cmd.tty:'\n salt '*' cmd.tty tty0 'This is a test'\n salt '*' cmd.tty pts3 'This is a test'\n \n'cmd.which:'\n salt '*' cmd.which cat\n \n**grains选项：**\nsalt '*' grains.ls # 查看grains分类\nsalt '*' grains.items # 查看grains所有信息\nsalt '*' grains.item osrelease # 查看grains某个信息\n```\n\n\n\n\n\n","source":"_posts/saltstack/saltstack.md","raw":"---\ntitle: Saltstack 简单使用\ndate: 2020-09-21 12:43\ncategories:\n- salt\ntags:\n- salt\n---\nSaltStack 使用\n\n\n\n### SaltStack 介绍\n\n- SaltStack是一款Python开发的开源配置管理工具；\n- 可用来发现、监控、响应、协调、自动化管理本地、混合、云和IOT资产;\n- 其最主要的差异是主从模式，分为master和minions(slave)；\n- 经过配置之后master可以管理成千上万个minions；\n- master安装的是服务端组件salt-mater，minions安装的是salt-minion；\n- Salt使用基于ZeroMQ的强大异步网络拓扑，主要是为实现最快的通信；\n- Salt Master运行2个网络服务，ZeroMQ PUB系统，默认运行在4505端口；ZeroMQ REP系统，用于与Salt Minion进行双向通信，默认运行在4506端口；\n- Salt客户端(salt命令)发送的命令将通过ZeroMQ PUB/SUB广播给各个Salt Minion。前提是Salt Minion配置了Mater，并且Salt Master通过salt-key命令信任了对应的Salt Minion。建立连接之后，Salt Minion可以接收到广播命令，并且执行；\n- PUB/SUB是单向通信，因此一旦广播结束，Master服务器上的PUB接口就不会再与Minion进行任何通信。Minion在运行命令之后，通过REP端口(4506)将命令的返回数据发回Master。\n\n#### 命令发布过程\n\nSaltStack 的 Master 与 Minion 之间通过 ZeroMq 进行消息传递，使用 ZeroMq 的发布订阅模式，连接方式包括 TCP 和 IPC 。\n\nSalt 命令，将 cmd.run ls  命令从 salt.client.LocalClient.cmd_cli 发布到 Master，获取一个 JobID ,根据 jobID 获取命令执行结果。\n\nMaster 接收到命令后，将要执行的命令发送给客户端 minion\n\nMinion 从消息总线上接收到要处理的命令，交给 minion._handle_aes  处理。\n\nMinion  minion._handle_aes   发起一个本地线程调用 cmdmod 执行 ls 命令。线程执行完 ls 后，调用 Minion._return_pub 方法。将执行结果通过消息总线返回给master。 \n\nMaster接收到客户端返回的结果，调用 master.handle_ase 方法将结果写到文件中。\n\nSalt.client.LocalClient.cmd_cli 通过轮询获取Job 执行结果，将结果输出到终端。\n\n#### salt部署基本架构\n\n\n```mermaid\nstateDiagram\n    [*] --> Master\n    Master --> OS_Minion\n    Master --> Web01_Minion\n    Master --> Web02_Minion\n```\n\n\n\n####  salt端口\n\n安装好salt之后开始配置，salt-master默认监听两个端口：\n\n```javascript\n4505   publish_port   提供远程命令发送功能\n4506   ret_port       提供认证，文件服务，结果收集等功能\n确保客户端可以通信服务器的此2个端口，保证防火墙允许端口通过。因此在测试环境直接关闭防火墙。\n```\n\n#### 配置文件\n\n```javascript\nsalt-master的配置文件是/etc/salt/master\nsalt-minion的配置文件是/etc/salt/minion\n配置文件中包含了大量可调整的参数，这些参数控制master和minion各个方面\n```\n\n#### 配置 salt-master\n\n```javascript\n[root@master ~]# grep -v ^# /etc/salt/master|grep -v ^$\ninterface: 0.0.0.0  #绑定到本地的0.0.0.0地址\n\npublish_port: 4505　　#管理端口，命令发送\n\nuser: root　　　　　　#运行salt进程的用户\n\nworker_threads: 5　　#salt运行线程数，线程越多处理速度越快，不要超过cpu个数\n \nret_port: 4506　　#执行结果返回端口\n\npidfile: /var/run/salt-master.pid #pid文件位置\n\nlog_file: /var/log/salt/master　　#日志文件地址\n\n#自动接收minion的key\nauto_accept: False\n\n# minion的识别ID，可以是IP，域名，或是可以通过DNS解析的字符串\nid: slave   # 最好使用主机名\n\n# salt运行的用户权限\nuser: root\n\n# master的识别ID，可以是IP，域名，或是可以通过DNS解析的字符串\nmaster : master    #master 地址\n \n# master通信端口\nmaster_port: 4506\n \n# 备份模式，minion是本地备份，当进行文件管理时的文件备份模式\nbackup_mode: minion\n \n# 执行salt-call时候的输出方式\noutput: nested\n \n# minion等待master接受认证的时间\nacceptance_wait_time: 10\n \n# 失败重连次数，0表示无限次，非零会不断尝试到设置值后停止尝试\nacceptance_wait_time_max: 0\n \n# 重新认证延迟时间，可以避免因为master的key改变导致minion需要重新认证的syn风暴\nrandom_reauth_delay: 60\n\n# salt state执行时候的根目录\nfile_roots:\n  base:\n    - /srv/salt\n```\n\n####  配置satl-minion \n\n```javascript\n[root@slave ~]# grep -v ^# /etc/salt/minion|grep -v ^$\nmaster: master    #master 地址\nmaster_port: 4506\nuser: root\nid: slave   # 最好使用主机名\nacceptance_wait_time: 10\nlog_file: /var/log/salt/minion\n```\n\n\n\n#### 启动salt-master和salt-minion\n\n```javascript\nsystemctl start salt-minion\nsystemctl start salt-master\n\n#检查salt状态\nsystemctl status salt-minion\nsystemctl status salt-master\n```\n\n\n\n### SaltStack VS Ansible\n\n\n\n| SaltStack                                                    | Ansible                                       |\n| ------------------------------------------------------------ | --------------------------------------------- |\n| SaltStack 依靠ZeroMQ速度快                                   | Ansible SSH传输速度慢一些                     |\n| ZeroMQ本身不加密，AES加密，需注意MITM攻击                    | SSH安全性高                                   |\n| Master需要守护进程                                           | 无额外开支，SSH即可                           |\n| State语法需要学习                                            | playbook语法相对简单，容易学习                |\n| excution模块+state模块，state会调用excution模块              | Ansible模块+playbook                          |\n| 使用topfile [top.sls](https://docs.saltstack.com/en/latest/ref/states/top.html) 使用[YAML](http://yaml.org/) | playbook使用YAML                              |\n| 围绕Master输入命令，首次连接使用加密key，使用ZeroMQ库不会拥堵，持续连接速度更快 | 使用SSH通道，无固定Master，更安全，也有MQ版本 |\n| 未提及                                                       | 配置记录文件，原始vs生产                      |\n| 默认本地root，客户端root                                     | 支持多用户sudo操作                            |\n| 密码容易保管，命令容易审计                                   | SSH，公钥连接                                 |\n| 配置模块化，学习成本更高                                     | 克隆Ansible Git，语法简单                     |\n\n\n\n### 安装\n\n#### SALT MASTER\n\n```\ncurl -L https://bootstrap.saltstack.com -o install_salt.sh\nsudo sh install_salt.sh -P -M\n```\n\n#### SALT MINION\n\n```\ncurl -L https://bootstrap.saltstack.com -o install_salt.sh\nsudo sh install_salt.sh -P\n```\n\n配置脚本\n\n```\n#!/bin/bash\n\nHostName=`hostname`\ncp /etc/salt/minion /etc/salt/minion_bak\nsed -i  \"17a master: 172.16.102.33\" /etc/salt/minion\nsed -i  \"113a id: $HostName\" /etc/salt/minion\n\nsystemctl enable salt-minion\nsystemctl start salt-minion\n```\n\n\n\n\n\n### 在master上接收minion秘钥\n\n在minion启动后连接master会请求master为其签发证书，等待证书签发完成后，master可以信任minion，并且minion和master之间的通信是加密的。\n\n在salt-master执行\n\nsalt-key命令用于管理mionion秘钥\n\n```javascript\n[root@master ~]# salt-key -L\nAccepted Keys:\nDenied Keys:\nUnaccepted Keys:\nslave　　　　#此时已经出现slave\nRejected Keys:\n```\n此时slave已经出现在unaccepted keys中，说明minion已经和master联系，并且master已经获取了minion的公钥，等待下一步指令。\n\n### 检查master和minion的秘钥匹配\n\n在master上执行\n\n```javascript\n[root@master ~]# salt-key -f slave\nUnaccepted Keys:\nslave:  0a:b9:97:b5:9a:65:b8:49:a1:50:a5:6a:66:ce:33:ea\n```\n\n然后可以在minion上获取minion的秘钥\n\n```javascript\n[root@slave ~]# salt-call --local key.finger\nlocal:\n    0a:b9:97:b5:9a:65:b8:49:a1:50:a5:6a:66:ce:33:ea\n```\n\n因此可确认秘钥匹配，在master上接收秘钥\n\n```javascript\n[root@master ~]# salt-key -a slave\nThe following keys are going to be accepted:\nUnaccepted Keys:\nslave\nProceed? [n/Y] y\nKey for minion slave accepted.\n```\n\n确认接收秘钥后，检验minion秘钥是否被接收\n\n```javascript\n[root@master ~]# salt-key -L\nAccepted Keys:\nslave\nDenied Keys:\nUnaccepted Keys:\nRejected Keys:\n```\n\n秘钥接收完成后，就可以执行第一条salt啦\n\n\n\n### 认证命令介绍\n\n```\nsalt-key –L #查看所有minion-key\nsalt-key –a #接受某个minion-key\nsalt-key –A #接受所有minion-key\nsalt-key –d #删除某个minion-key\nsalt-key –D #删除所有minion-key\n```\n\n\n\n### SaltStack minion 匹配方式\n\n1、Glob（salt默认的target 类型，使用shell的通配符来指定一个或多个 minion ID）\n\n```\nsalt \\* test.ping  或者 salt '*' test.ping\n```\n\n2、 pcre 兼容正则表达式\n\n```\nsalt -E ‘^[m|M]in.[e|o|u]n$’ test.ping\n```\n\n3、 subnet (通过指定一个IPv4 地址或一个CIDR 的IPv4 子网)\n\n```\nsalt -S 192168.0.42 test.ping\n或者\nsalt -s 192.168.0.0/16 test.ping\n```\n\n4、Grains（salt 可以通过操作系统、CPU架构及自定义信息等机器特征进行 target Minion）\n\n```\nsalt -G 'os:Ubuntu' test.ping\nsalt -G 'os_family:Debian' test.ping\n```\n\n5、pillar (salt 支持通过 pillar 数据进行匹配)\n\n```\nsalt -l 'my_val:my_val' test.ping\n```\n\n6、混合（compound）\n\n```\nsalt -C 'web* or G@os:Arch' test.ping\n```\n\n### salt 常用模板\n\n\n\n```\nsalt '*' status.loadavg            #系统信息\nsalt '*' status.cpuinfo            #CPU 信息\nsalt \"*\" status.diskstats          #查看磁盘信息\nsalt \"*\" status.meminfo            #查看内存信息\nsalt \"*\" status.w                  #w命令返回信息\nsalt node01  sys.list_modules      #查看所有module 列表 \nsalt node01  sys.list_functions cmd    查看指定 module 的所有function 方法\nsalt node01 sys.doc cmd.run        查看指定 module 用法\n\n```\n\n\n\n### salt相关命令\n\n```\n\nsalt-run manage.up \t\t\t# 查看存活的minion\nsalt-run manage.down \t\t# 查看死掉的minion\nsalt-run manage.down removekeys=True \t\t# 查看down掉的minion，并将其删除\nsalt-run manage.status \t\t\t\t\t# 查看minion的相关状态\nsalt-run manage.versions \t\t\t\t# 查看salt的所有master和minion的版本信息\nsalt-run jobs.active \t\t\t\t\t# 查看哪些系统任务还在处理中\nsalt-run jobs.list_jobs \t\t\t\t# 显示所有的已完成或部分完成的任务信息\nsalt '*' saltutil.running \t\t\t\t# 查看运行的jobs ID\nsalt \\* saltutil.kill_job 20151209034239907625 # kill掉进程ID\nsalt -d \t\t\t\t\t# 查看帮助文档\nsalt -d|grep service \t\t\t\t# 查看service相关模块命令\nsalt '*' sys.doc \t\t\t\t# 查看帮助文档\nsalt-key -L \t\t\t\t# 查询所有接收到的证书\nsalt-key -a <证书名> \t\t\t\t# 接收单个证书\nsalt-key -A \t\t\t\t\t# 接受所有证书\nsalt-key -d <证书名> \t\t\t\t# 删除单个证书\nsalt-key -D \t\t\t\t\t\t# 删除所有证书\nsalt '*' service.get_all \t\t\t# 获取主机所有服务\nsalt '*' service.reload sshd \t\t# 重载sshd服务\nsalt '*' pkg.list_pkgs # 显示软件包版本列表\nsalt '*' pkg.version python # 显示软件包版本信息\nsalt '*' pkg.install httpd # 安装软件包\nsalt 'node1.com' service.status mysql # 查看mysql服务状态\nsalt 'node1.com' service.start mysql # 启动mysql服务\nsalt 'node1.com' cmd.run 'service mysql status' # 与上面一样查看服务\nsalt '*' sys.list_modules # 模块列表\nsalt-cp '*' /etc/hosts /etc/hosts # 把master上的hosts文件分发到所有主机\nsalt '*' cp.get_file salt://ceshi/b /tmp/test # 把salt-master端相应的文件，分发文件到minion端\nsalt '*' cp.get_dir salt://zabbix /tmp # 把salt-master端相应的目录，分发文件到minion端\nsalt '*' file.copy /tmp/zabbix.sls /tmp/sls # 把salt-master端对应文件拷贝到minion端相应目录下\nsalt '*' cmd.run 'uptime' # 远程命令执行测试\n\n\n\n```\n\n 远程执行脚本\n\n```\n'cmd.script:'\n salt '*' cmd.script salt://scripts/runme.sh\n salt '*' cmd.script salt://scripts/runme.sh 'arg1 arg2 \"arg 3\"'\n salt '*' cmd.script salt://scripts/windows_task.ps1 args=' -Input c:\\tmp\\infile.txt' shell='powershell'\n salt '*' cmd.script salt://scripts/runme.sh stdin='one\\ntwo\\nthree\\nfour\\nfive\\n'\n \n \n'cmd.shell:'\n\n This passes the cmd argument directly to the shell\n salt '*' cmd.shell \"ls -l | awk '/foo/{print \\$2}'\"\n salt '*' cmd.shell template=jinja \"ls -l /tmp/{{grains.id}} | awk '/foo/{print \\$2}'\"\n salt '*' cmd.shell \"Get-ChildItem C:\\ \" shell='powershell'\n salt '*' cmd.shell \"grep f\" stdin='one\\ntwo\\nthree\\nfour\\nfive\\n'\n salt '*' cmd.shell cmd='sed -e s/=/:/g'\n \n'cmd.shells:'\n salt '*' cmd.shells\n'cmd.tty:'\n salt '*' cmd.tty tty0 'This is a test'\n salt '*' cmd.tty pts3 'This is a test'\n \n'cmd.which:'\n salt '*' cmd.which cat\n \n**grains选项：**\nsalt '*' grains.ls # 查看grains分类\nsalt '*' grains.items # 查看grains所有信息\nsalt '*' grains.item osrelease # 查看grains某个信息\n```\n\n\n\n\n\n","slug":"saltstack/saltstack","published":1,"updated":"2021-01-27T08:20:35.773Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h3x0067q0ushcyh5fg9","content":"<p>SaltStack 使用</p>\n<h3 id=\"SaltStack-介绍\"><a href=\"#SaltStack-介绍\" class=\"headerlink\" title=\"SaltStack 介绍\"></a>SaltStack 介绍</h3><ul>\n<li>SaltStack是一款Python开发的开源配置管理工具；</li>\n<li>可用来发现、监控、响应、协调、自动化管理本地、混合、云和IOT资产;</li>\n<li>其最主要的差异是主从模式，分为master和minions(slave)；</li>\n<li>经过配置之后master可以管理成千上万个minions；</li>\n<li>master安装的是服务端组件salt-mater，minions安装的是salt-minion；</li>\n<li>Salt使用基于ZeroMQ的强大异步网络拓扑，主要是为实现最快的通信；</li>\n<li>Salt Master运行2个网络服务，ZeroMQ PUB系统，默认运行在4505端口；ZeroMQ REP系统，用于与Salt Minion进行双向通信，默认运行在4506端口；</li>\n<li>Salt客户端(salt命令)发送的命令将通过ZeroMQ PUB/SUB广播给各个Salt Minion。前提是Salt Minion配置了Mater，并且Salt Master通过salt-key命令信任了对应的Salt Minion。建立连接之后，Salt Minion可以接收到广播命令，并且执行；</li>\n<li>PUB/SUB是单向通信，因此一旦广播结束，Master服务器上的PUB接口就不会再与Minion进行任何通信。Minion在运行命令之后，通过REP端口(4506)将命令的返回数据发回Master。</li>\n</ul>\n<h4 id=\"命令发布过程\"><a href=\"#命令发布过程\" class=\"headerlink\" title=\"命令发布过程\"></a>命令发布过程</h4><p>SaltStack 的 Master 与 Minion 之间通过 ZeroMq 进行消息传递，使用 ZeroMq 的发布订阅模式，连接方式包括 TCP 和 IPC 。</p>\n<p>Salt 命令，将 cmd.run ls  命令从 salt.client.LocalClient.cmd_cli 发布到 Master，获取一个 JobID ,根据 jobID 获取命令执行结果。</p>\n<p>Master 接收到命令后，将要执行的命令发送给客户端 minion</p>\n<p>Minion 从消息总线上接收到要处理的命令，交给 minion._handle_aes  处理。</p>\n<p>Minion  minion._handle_aes   发起一个本地线程调用 cmdmod 执行 ls 命令。线程执行完 ls 后，调用 Minion._return_pub 方法。将执行结果通过消息总线返回给master。 </p>\n<p>Master接收到客户端返回的结果，调用 master.handle_ase 方法将结果写到文件中。</p>\n<p>Salt.client.LocalClient.cmd_cli 通过轮询获取Job 执行结果，将结果输出到终端。</p>\n<h4 id=\"salt部署基本架构\"><a href=\"#salt部署基本架构\" class=\"headerlink\" title=\"salt部署基本架构\"></a>salt部署基本架构</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">stateDiagram</span><br><span class=\"line\">    [*] --&gt; Master</span><br><span class=\"line\">    Master --&gt; OS_Minion</span><br><span class=\"line\">    Master --&gt; Web01_Minion</span><br><span class=\"line\">    Master --&gt; Web02_Minion</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"salt端口\"><a href=\"#salt端口\" class=\"headerlink\" title=\"salt端口\"></a>salt端口</h4><p>安装好salt之后开始配置，salt-master默认监听两个端口：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">4505</span>   publish_port   提供远程命令发送功能</span><br><span class=\"line\"><span class=\"number\">4506</span>   ret_port       提供认证，文件服务，结果收集等功能</span><br><span class=\"line\">确保客户端可以通信服务器的此<span class=\"number\">2</span>个端口，保证防火墙允许端口通过。因此在测试环境直接关闭防火墙。</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt-master的配置文件是/etc/salt/master</span><br><span class=\"line\">salt-minion的配置文件是/etc/salt/minion</span><br><span class=\"line\">配置文件中包含了大量可调整的参数，这些参数控制master和minion各个方面</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"配置-salt-master\"><a href=\"#配置-salt-master\" class=\"headerlink\" title=\"配置 salt-master\"></a>配置 salt-master</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]# grep -v ^# /etc/salt/master|grep -v ^$</span><br><span class=\"line\">interface: 0.0.0.0  #绑定到本地的0.0.0.0地址</span><br><span class=\"line\"></span><br><span class=\"line\">publish_port: 4505　　#管理端口，命令发送</span><br><span class=\"line\"></span><br><span class=\"line\">user: root　　　　　　#运行salt进程的用户</span><br><span class=\"line\"></span><br><span class=\"line\">worker_threads: 5　　#salt运行线程数，线程越多处理速度越快，不要超过cpu个数</span><br><span class=\"line\"> </span><br><span class=\"line\">ret_port: 4506　　#执行结果返回端口</span><br><span class=\"line\"></span><br><span class=\"line\">pidfile: /var/run/salt-master.pid #pid文件位置</span><br><span class=\"line\"></span><br><span class=\"line\">log_file: /var/log/salt/master　　#日志文件地址</span><br><span class=\"line\"></span><br><span class=\"line\">#自动接收minion的key</span><br><span class=\"line\">auto_accept: False</span><br><span class=\"line\"></span><br><span class=\"line\"># minion的识别ID，可以是IP，域名，或是可以通过DNS解析的字符串</span><br><span class=\"line\">id: slave   # 最好使用主机名</span><br><span class=\"line\"></span><br><span class=\"line\"># salt运行的用户权限</span><br><span class=\"line\">user: root</span><br><span class=\"line\"></span><br><span class=\"line\"># master的识别ID，可以是IP，域名，或是可以通过DNS解析的字符串</span><br><span class=\"line\">master : master    #master 地址</span><br><span class=\"line\"> </span><br><span class=\"line\"># master通信端口</span><br><span class=\"line\">master_port: <span class=\"number\">4506</span></span><br><span class=\"line\"> </span><br><span class=\"line\"># 备份模式，minion是本地备份，当进行文件管理时的文件备份模式</span><br><span class=\"line\">backup_mode: minion</span><br><span class=\"line\"> </span><br><span class=\"line\"># 执行salt-call时候的输出方式</span><br><span class=\"line\">output: nested</span><br><span class=\"line\"> </span><br><span class=\"line\"># minion等待master接受认证的时间</span><br><span class=\"line\">acceptance_wait_time: <span class=\"number\">10</span></span><br><span class=\"line\"> </span><br><span class=\"line\"># 失败重连次数，0表示无限次，非零会不断尝试到设置值后停止尝试</span><br><span class=\"line\">acceptance_wait_time_max: <span class=\"number\">0</span></span><br><span class=\"line\"> </span><br><span class=\"line\"># 重新认证延迟时间，可以避免因为master的key改变导致minion需要重新认证的syn风暴</span><br><span class=\"line\">random_reauth_delay: <span class=\"number\">60</span></span><br><span class=\"line\"></span><br><span class=\"line\"># salt state执行时候的根目录</span><br><span class=\"line\">file_roots:</span><br><span class=\"line\">  base:</span><br><span class=\"line\">    - <span class=\"regexp\">/srv/</span>salt</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"配置satl-minion\"><a href=\"#配置satl-minion\" class=\"headerlink\" title=\"配置satl-minion\"></a>配置satl-minion</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@slave ~]# grep -v ^# /etc/salt/minion|grep -v ^$</span><br><span class=\"line\">master: master    #master 地址</span><br><span class=\"line\">master_port: <span class=\"number\">4506</span></span><br><span class=\"line\">user: root</span><br><span class=\"line\">id: slave   # 最好使用主机名</span><br><span class=\"line\">acceptance_wait_time: <span class=\"number\">10</span></span><br><span class=\"line\">log_file: <span class=\"regexp\">/var/</span>log/salt/minion</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"启动salt-master和salt-minion\"><a href=\"#启动salt-master和salt-minion\" class=\"headerlink\" title=\"启动salt-master和salt-minion\"></a>启动salt-master和salt-minion</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start salt-minion</span><br><span class=\"line\">systemctl start salt-master</span><br><span class=\"line\"></span><br><span class=\"line\">#检查salt状态</span><br><span class=\"line\">systemctl status salt-minion</span><br><span class=\"line\">systemctl status salt-master</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"SaltStack-VS-Ansible\"><a href=\"#SaltStack-VS-Ansible\" class=\"headerlink\" title=\"SaltStack VS Ansible\"></a>SaltStack VS Ansible</h3><table>\n<thead>\n<tr>\n<th>SaltStack</th>\n<th>Ansible</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>SaltStack 依靠ZeroMQ速度快</td>\n<td>Ansible SSH传输速度慢一些</td>\n</tr>\n<tr>\n<td>ZeroMQ本身不加密，AES加密，需注意MITM攻击</td>\n<td>SSH安全性高</td>\n</tr>\n<tr>\n<td>Master需要守护进程</td>\n<td>无额外开支，SSH即可</td>\n</tr>\n<tr>\n<td>State语法需要学习</td>\n<td>playbook语法相对简单，容易学习</td>\n</tr>\n<tr>\n<td>excution模块+state模块，state会调用excution模块</td>\n<td>Ansible模块+playbook</td>\n</tr>\n<tr>\n<td>使用topfile <a href=\"https://docs.saltstack.com/en/latest/ref/states/top.html\">top.sls</a> 使用<a href=\"http://yaml.org/\">YAML</a></td>\n<td>playbook使用YAML</td>\n</tr>\n<tr>\n<td>围绕Master输入命令，首次连接使用加密key，使用ZeroMQ库不会拥堵，持续连接速度更快</td>\n<td>使用SSH通道，无固定Master，更安全，也有MQ版本</td>\n</tr>\n<tr>\n<td>未提及</td>\n<td>配置记录文件，原始vs生产</td>\n</tr>\n<tr>\n<td>默认本地root，客户端root</td>\n<td>支持多用户sudo操作</td>\n</tr>\n<tr>\n<td>密码容易保管，命令容易审计</td>\n<td>SSH，公钥连接</td>\n</tr>\n<tr>\n<td>配置模块化，学习成本更高</td>\n<td>克隆Ansible Git，语法简单</td>\n</tr>\n</tbody></table>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><h4 id=\"SALT-MASTER\"><a href=\"#SALT-MASTER\" class=\"headerlink\" title=\"SALT MASTER\"></a>SALT MASTER</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -L https:&#x2F;&#x2F;bootstrap.saltstack.com -o install_salt.sh</span><br><span class=\"line\">sudo sh install_salt.sh -P -M</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"SALT-MINION\"><a href=\"#SALT-MINION\" class=\"headerlink\" title=\"SALT MINION\"></a>SALT MINION</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -L https:&#x2F;&#x2F;bootstrap.saltstack.com -o install_salt.sh</span><br><span class=\"line\">sudo sh install_salt.sh -P</span><br></pre></td></tr></table></figure>\n\n<p>配置脚本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!&#x2F;bin&#x2F;bash</span><br><span class=\"line\"></span><br><span class=\"line\">HostName&#x3D;&#96;hostname&#96;</span><br><span class=\"line\">cp &#x2F;etc&#x2F;salt&#x2F;minion &#x2F;etc&#x2F;salt&#x2F;minion_bak</span><br><span class=\"line\">sed -i  &quot;17a master: 172.16.102.33&quot; &#x2F;etc&#x2F;salt&#x2F;minion</span><br><span class=\"line\">sed -i  &quot;113a id: $HostName&quot; &#x2F;etc&#x2F;salt&#x2F;minion</span><br><span class=\"line\"></span><br><span class=\"line\">systemctl enable salt-minion</span><br><span class=\"line\">systemctl start salt-minion</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"在master上接收minion秘钥\"><a href=\"#在master上接收minion秘钥\" class=\"headerlink\" title=\"在master上接收minion秘钥\"></a>在master上接收minion秘钥</h3><p>在minion启动后连接master会请求master为其签发证书，等待证书签发完成后，master可以信任minion，并且minion和master之间的通信是加密的。</p>\n<p>在salt-master执行</p>\n<p>salt-key命令用于管理mionion秘钥</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]# salt-key -L</span><br><span class=\"line\">Accepted Keys:</span><br><span class=\"line\">Denied Keys:</span><br><span class=\"line\">Unaccepted Keys:</span><br><span class=\"line\">slave　　　　#此时已经出现slave</span><br><span class=\"line\">Rejected Keys:</span><br></pre></td></tr></table></figure>\n<p>此时slave已经出现在unaccepted keys中，说明minion已经和master联系，并且master已经获取了minion的公钥，等待下一步指令。</p>\n<h3 id=\"检查master和minion的秘钥匹配\"><a href=\"#检查master和minion的秘钥匹配\" class=\"headerlink\" title=\"检查master和minion的秘钥匹配\"></a>检查master和minion的秘钥匹配</h3><p>在master上执行</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]# salt-key -f slave</span><br><span class=\"line\">Unaccepted Keys:</span><br><span class=\"line\">slave:  <span class=\"number\">0</span>a:b9:<span class=\"number\">97</span>:b5:<span class=\"number\">9</span>a:<span class=\"number\">65</span>:b8:<span class=\"number\">49</span>:a1:<span class=\"number\">50</span>:a5:<span class=\"number\">6</span>a:<span class=\"number\">66</span>:ce:<span class=\"number\">33</span>:ea</span><br></pre></td></tr></table></figure>\n\n<p>然后可以在minion上获取minion的秘钥</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@slave ~]# salt-call --local key.finger</span><br><span class=\"line\">local:</span><br><span class=\"line\">    <span class=\"number\">0</span>a:b9:<span class=\"number\">97</span>:b5:<span class=\"number\">9</span>a:<span class=\"number\">65</span>:b8:<span class=\"number\">49</span>:a1:<span class=\"number\">50</span>:a5:<span class=\"number\">6</span>a:<span class=\"number\">66</span>:ce:<span class=\"number\">33</span>:ea</span><br></pre></td></tr></table></figure>\n\n<p>因此可确认秘钥匹配，在master上接收秘钥</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]# salt-key -a slave</span><br><span class=\"line\">The following keys are going to be accepted:</span><br><span class=\"line\">Unaccepted Keys:</span><br><span class=\"line\">slave</span><br><span class=\"line\">Proceed? [n/Y] y</span><br><span class=\"line\">Key <span class=\"keyword\">for</span> minion slave accepted.</span><br></pre></td></tr></table></figure>\n\n<p>确认接收秘钥后，检验minion秘钥是否被接收</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]# salt-key -L</span><br><span class=\"line\">Accepted Keys:</span><br><span class=\"line\">slave</span><br><span class=\"line\">Denied Keys:</span><br><span class=\"line\">Unaccepted Keys:</span><br><span class=\"line\">Rejected Keys:</span><br></pre></td></tr></table></figure>\n\n<p>秘钥接收完成后，就可以执行第一条salt啦</p>\n<h3 id=\"认证命令介绍\"><a href=\"#认证命令介绍\" class=\"headerlink\" title=\"认证命令介绍\"></a>认证命令介绍</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt-key –L #查看所有minion-key</span><br><span class=\"line\">salt-key –a #接受某个minion-key</span><br><span class=\"line\">salt-key –A #接受所有minion-key</span><br><span class=\"line\">salt-key –d #删除某个minion-key</span><br><span class=\"line\">salt-key –D #删除所有minion-key</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"SaltStack-minion-匹配方式\"><a href=\"#SaltStack-minion-匹配方式\" class=\"headerlink\" title=\"SaltStack minion 匹配方式\"></a>SaltStack minion 匹配方式</h3><p>1、Glob（salt默认的target 类型，使用shell的通配符来指定一个或多个 minion ID）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt \\* test.ping  或者 salt &#39;*&#39; test.ping</span><br></pre></td></tr></table></figure>\n\n<p>2、 pcre 兼容正则表达式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt -E ‘^[m|M]in.[e|o|u]n$’ test.ping</span><br></pre></td></tr></table></figure>\n\n<p>3、 subnet (通过指定一个IPv4 地址或一个CIDR 的IPv4 子网)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt -S 192168.0.42 test.ping</span><br><span class=\"line\">或者</span><br><span class=\"line\">salt -s 192.168.0.0&#x2F;16 test.ping</span><br></pre></td></tr></table></figure>\n\n<p>4、Grains（salt 可以通过操作系统、CPU架构及自定义信息等机器特征进行 target Minion）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt -G &#39;os:Ubuntu&#39; test.ping</span><br><span class=\"line\">salt -G &#39;os_family:Debian&#39; test.ping</span><br></pre></td></tr></table></figure>\n\n<p>5、pillar (salt 支持通过 pillar 数据进行匹配)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt -l &#39;my_val:my_val&#39; test.ping</span><br></pre></td></tr></table></figure>\n\n<p>6、混合（compound）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt -C &#39;web* or G@os:Arch&#39; test.ping</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"salt-常用模板\"><a href=\"#salt-常用模板\" class=\"headerlink\" title=\"salt 常用模板\"></a>salt 常用模板</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt &#39;*&#39; status.loadavg            #系统信息</span><br><span class=\"line\">salt &#39;*&#39; status.cpuinfo            #CPU 信息</span><br><span class=\"line\">salt &quot;*&quot; status.diskstats          #查看磁盘信息</span><br><span class=\"line\">salt &quot;*&quot; status.meminfo            #查看内存信息</span><br><span class=\"line\">salt &quot;*&quot; status.w                  #w命令返回信息</span><br><span class=\"line\">salt node01  sys.list_modules      #查看所有module 列表 </span><br><span class=\"line\">salt node01  sys.list_functions cmd    查看指定 module 的所有function 方法</span><br><span class=\"line\">salt node01 sys.doc cmd.run        查看指定 module 用法</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"salt相关命令\"><a href=\"#salt相关命令\" class=\"headerlink\" title=\"salt相关命令\"></a>salt相关命令</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">salt-run manage.up \t\t\t# 查看存活的minion</span><br><span class=\"line\">salt-run manage.down \t\t# 查看死掉的minion</span><br><span class=\"line\">salt-run manage.down removekeys&#x3D;True \t\t# 查看down掉的minion，并将其删除</span><br><span class=\"line\">salt-run manage.status \t\t\t\t\t# 查看minion的相关状态</span><br><span class=\"line\">salt-run manage.versions \t\t\t\t# 查看salt的所有master和minion的版本信息</span><br><span class=\"line\">salt-run jobs.active \t\t\t\t\t# 查看哪些系统任务还在处理中</span><br><span class=\"line\">salt-run jobs.list_jobs \t\t\t\t# 显示所有的已完成或部分完成的任务信息</span><br><span class=\"line\">salt &#39;*&#39; saltutil.running \t\t\t\t# 查看运行的jobs ID</span><br><span class=\"line\">salt \\* saltutil.kill_job 20151209034239907625 # kill掉进程ID</span><br><span class=\"line\">salt -d \t\t\t\t\t# 查看帮助文档</span><br><span class=\"line\">salt -d|grep service \t\t\t\t# 查看service相关模块命令</span><br><span class=\"line\">salt &#39;*&#39; sys.doc \t\t\t\t# 查看帮助文档</span><br><span class=\"line\">salt-key -L \t\t\t\t# 查询所有接收到的证书</span><br><span class=\"line\">salt-key -a &lt;证书名&gt; \t\t\t\t# 接收单个证书</span><br><span class=\"line\">salt-key -A \t\t\t\t\t# 接受所有证书</span><br><span class=\"line\">salt-key -d &lt;证书名&gt; \t\t\t\t# 删除单个证书</span><br><span class=\"line\">salt-key -D \t\t\t\t\t\t# 删除所有证书</span><br><span class=\"line\">salt &#39;*&#39; service.get_all \t\t\t# 获取主机所有服务</span><br><span class=\"line\">salt &#39;*&#39; service.reload sshd \t\t# 重载sshd服务</span><br><span class=\"line\">salt &#39;*&#39; pkg.list_pkgs # 显示软件包版本列表</span><br><span class=\"line\">salt &#39;*&#39; pkg.version python # 显示软件包版本信息</span><br><span class=\"line\">salt &#39;*&#39; pkg.install httpd # 安装软件包</span><br><span class=\"line\">salt &#39;node1.com&#39; service.status mysql # 查看mysql服务状态</span><br><span class=\"line\">salt &#39;node1.com&#39; service.start mysql # 启动mysql服务</span><br><span class=\"line\">salt &#39;node1.com&#39; cmd.run &#39;service mysql status&#39; # 与上面一样查看服务</span><br><span class=\"line\">salt &#39;*&#39; sys.list_modules # 模块列表</span><br><span class=\"line\">salt-cp &#39;*&#39; &#x2F;etc&#x2F;hosts &#x2F;etc&#x2F;hosts # 把master上的hosts文件分发到所有主机</span><br><span class=\"line\">salt &#39;*&#39; cp.get_file salt:&#x2F;&#x2F;ceshi&#x2F;b &#x2F;tmp&#x2F;test # 把salt-master端相应的文件，分发文件到minion端</span><br><span class=\"line\">salt &#39;*&#39; cp.get_dir salt:&#x2F;&#x2F;zabbix &#x2F;tmp # 把salt-master端相应的目录，分发文件到minion端</span><br><span class=\"line\">salt &#39;*&#39; file.copy &#x2F;tmp&#x2F;zabbix.sls &#x2F;tmp&#x2F;sls # 把salt-master端对应文件拷贝到minion端相应目录下</span><br><span class=\"line\">salt &#39;*&#39; cmd.run &#39;uptime&#39; # 远程命令执行测试</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> 远程执行脚本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#39;cmd.script:&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.script salt:&#x2F;&#x2F;scripts&#x2F;runme.sh</span><br><span class=\"line\"> salt &#39;*&#39; cmd.script salt:&#x2F;&#x2F;scripts&#x2F;runme.sh &#39;arg1 arg2 &quot;arg 3&quot;&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.script salt:&#x2F;&#x2F;scripts&#x2F;windows_task.ps1 args&#x3D;&#39; -Input c:\\tmp\\infile.txt&#39; shell&#x3D;&#39;powershell&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.script salt:&#x2F;&#x2F;scripts&#x2F;runme.sh stdin&#x3D;&#39;one\\ntwo\\nthree\\nfour\\nfive\\n&#39;</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">&#39;cmd.shell:&#39;</span><br><span class=\"line\"></span><br><span class=\"line\"> This passes the cmd argument directly to the shell</span><br><span class=\"line\"> salt &#39;*&#39; cmd.shell &quot;ls -l | awk &#39;&#x2F;foo&#x2F;&#123;print \\$2&#125;&#39;&quot;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.shell template&#x3D;jinja &quot;ls -l &#x2F;tmp&#x2F;&#123;&#123;grains.id&#125;&#125; | awk &#39;&#x2F;foo&#x2F;&#123;print \\$2&#125;&#39;&quot;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.shell &quot;Get-ChildItem C:\\ &quot; shell&#x3D;&#39;powershell&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.shell &quot;grep f&quot; stdin&#x3D;&#39;one\\ntwo\\nthree\\nfour\\nfive\\n&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.shell cmd&#x3D;&#39;sed -e s&#x2F;&#x3D;&#x2F;:&#x2F;g&#39;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#39;cmd.shells:&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.shells</span><br><span class=\"line\">&#39;cmd.tty:&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.tty tty0 &#39;This is a test&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.tty pts3 &#39;This is a test&#39;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#39;cmd.which:&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.which cat</span><br><span class=\"line\"> </span><br><span class=\"line\">**grains选项：**</span><br><span class=\"line\">salt &#39;*&#39; grains.ls # 查看grains分类</span><br><span class=\"line\">salt &#39;*&#39; grains.items # 查看grains所有信息</span><br><span class=\"line\">salt &#39;*&#39; grains.item osrelease # 查看grains某个信息</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<p>SaltStack 使用</p>\n<h3 id=\"SaltStack-介绍\"><a href=\"#SaltStack-介绍\" class=\"headerlink\" title=\"SaltStack 介绍\"></a>SaltStack 介绍</h3><ul>\n<li>SaltStack是一款Python开发的开源配置管理工具；</li>\n<li>可用来发现、监控、响应、协调、自动化管理本地、混合、云和IOT资产;</li>\n<li>其最主要的差异是主从模式，分为master和minions(slave)；</li>\n<li>经过配置之后master可以管理成千上万个minions；</li>\n<li>master安装的是服务端组件salt-mater，minions安装的是salt-minion；</li>\n<li>Salt使用基于ZeroMQ的强大异步网络拓扑，主要是为实现最快的通信；</li>\n<li>Salt Master运行2个网络服务，ZeroMQ PUB系统，默认运行在4505端口；ZeroMQ REP系统，用于与Salt Minion进行双向通信，默认运行在4506端口；</li>\n<li>Salt客户端(salt命令)发送的命令将通过ZeroMQ PUB/SUB广播给各个Salt Minion。前提是Salt Minion配置了Mater，并且Salt Master通过salt-key命令信任了对应的Salt Minion。建立连接之后，Salt Minion可以接收到广播命令，并且执行；</li>\n<li>PUB/SUB是单向通信，因此一旦广播结束，Master服务器上的PUB接口就不会再与Minion进行任何通信。Minion在运行命令之后，通过REP端口(4506)将命令的返回数据发回Master。</li>\n</ul>\n<h4 id=\"命令发布过程\"><a href=\"#命令发布过程\" class=\"headerlink\" title=\"命令发布过程\"></a>命令发布过程</h4><p>SaltStack 的 Master 与 Minion 之间通过 ZeroMq 进行消息传递，使用 ZeroMq 的发布订阅模式，连接方式包括 TCP 和 IPC 。</p>\n<p>Salt 命令，将 cmd.run ls  命令从 salt.client.LocalClient.cmd_cli 发布到 Master，获取一个 JobID ,根据 jobID 获取命令执行结果。</p>\n<p>Master 接收到命令后，将要执行的命令发送给客户端 minion</p>\n<p>Minion 从消息总线上接收到要处理的命令，交给 minion._handle_aes  处理。</p>\n<p>Minion  minion._handle_aes   发起一个本地线程调用 cmdmod 执行 ls 命令。线程执行完 ls 后，调用 Minion._return_pub 方法。将执行结果通过消息总线返回给master。 </p>\n<p>Master接收到客户端返回的结果，调用 master.handle_ase 方法将结果写到文件中。</p>\n<p>Salt.client.LocalClient.cmd_cli 通过轮询获取Job 执行结果，将结果输出到终端。</p>\n<h4 id=\"salt部署基本架构\"><a href=\"#salt部署基本架构\" class=\"headerlink\" title=\"salt部署基本架构\"></a>salt部署基本架构</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">stateDiagram</span><br><span class=\"line\">    [*] --&gt; Master</span><br><span class=\"line\">    Master --&gt; OS_Minion</span><br><span class=\"line\">    Master --&gt; Web01_Minion</span><br><span class=\"line\">    Master --&gt; Web02_Minion</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"salt端口\"><a href=\"#salt端口\" class=\"headerlink\" title=\"salt端口\"></a>salt端口</h4><p>安装好salt之后开始配置，salt-master默认监听两个端口：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">4505</span>   publish_port   提供远程命令发送功能</span><br><span class=\"line\"><span class=\"number\">4506</span>   ret_port       提供认证，文件服务，结果收集等功能</span><br><span class=\"line\">确保客户端可以通信服务器的此<span class=\"number\">2</span>个端口，保证防火墙允许端口通过。因此在测试环境直接关闭防火墙。</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt-master的配置文件是/etc/salt/master</span><br><span class=\"line\">salt-minion的配置文件是/etc/salt/minion</span><br><span class=\"line\">配置文件中包含了大量可调整的参数，这些参数控制master和minion各个方面</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"配置-salt-master\"><a href=\"#配置-salt-master\" class=\"headerlink\" title=\"配置 salt-master\"></a>配置 salt-master</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]# grep -v ^# /etc/salt/master|grep -v ^$</span><br><span class=\"line\">interface: 0.0.0.0  #绑定到本地的0.0.0.0地址</span><br><span class=\"line\"></span><br><span class=\"line\">publish_port: 4505　　#管理端口，命令发送</span><br><span class=\"line\"></span><br><span class=\"line\">user: root　　　　　　#运行salt进程的用户</span><br><span class=\"line\"></span><br><span class=\"line\">worker_threads: 5　　#salt运行线程数，线程越多处理速度越快，不要超过cpu个数</span><br><span class=\"line\"> </span><br><span class=\"line\">ret_port: 4506　　#执行结果返回端口</span><br><span class=\"line\"></span><br><span class=\"line\">pidfile: /var/run/salt-master.pid #pid文件位置</span><br><span class=\"line\"></span><br><span class=\"line\">log_file: /var/log/salt/master　　#日志文件地址</span><br><span class=\"line\"></span><br><span class=\"line\">#自动接收minion的key</span><br><span class=\"line\">auto_accept: False</span><br><span class=\"line\"></span><br><span class=\"line\"># minion的识别ID，可以是IP，域名，或是可以通过DNS解析的字符串</span><br><span class=\"line\">id: slave   # 最好使用主机名</span><br><span class=\"line\"></span><br><span class=\"line\"># salt运行的用户权限</span><br><span class=\"line\">user: root</span><br><span class=\"line\"></span><br><span class=\"line\"># master的识别ID，可以是IP，域名，或是可以通过DNS解析的字符串</span><br><span class=\"line\">master : master    #master 地址</span><br><span class=\"line\"> </span><br><span class=\"line\"># master通信端口</span><br><span class=\"line\">master_port: <span class=\"number\">4506</span></span><br><span class=\"line\"> </span><br><span class=\"line\"># 备份模式，minion是本地备份，当进行文件管理时的文件备份模式</span><br><span class=\"line\">backup_mode: minion</span><br><span class=\"line\"> </span><br><span class=\"line\"># 执行salt-call时候的输出方式</span><br><span class=\"line\">output: nested</span><br><span class=\"line\"> </span><br><span class=\"line\"># minion等待master接受认证的时间</span><br><span class=\"line\">acceptance_wait_time: <span class=\"number\">10</span></span><br><span class=\"line\"> </span><br><span class=\"line\"># 失败重连次数，0表示无限次，非零会不断尝试到设置值后停止尝试</span><br><span class=\"line\">acceptance_wait_time_max: <span class=\"number\">0</span></span><br><span class=\"line\"> </span><br><span class=\"line\"># 重新认证延迟时间，可以避免因为master的key改变导致minion需要重新认证的syn风暴</span><br><span class=\"line\">random_reauth_delay: <span class=\"number\">60</span></span><br><span class=\"line\"></span><br><span class=\"line\"># salt state执行时候的根目录</span><br><span class=\"line\">file_roots:</span><br><span class=\"line\">  base:</span><br><span class=\"line\">    - <span class=\"regexp\">/srv/</span>salt</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"配置satl-minion\"><a href=\"#配置satl-minion\" class=\"headerlink\" title=\"配置satl-minion\"></a>配置satl-minion</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@slave ~]# grep -v ^# /etc/salt/minion|grep -v ^$</span><br><span class=\"line\">master: master    #master 地址</span><br><span class=\"line\">master_port: <span class=\"number\">4506</span></span><br><span class=\"line\">user: root</span><br><span class=\"line\">id: slave   # 最好使用主机名</span><br><span class=\"line\">acceptance_wait_time: <span class=\"number\">10</span></span><br><span class=\"line\">log_file: <span class=\"regexp\">/var/</span>log/salt/minion</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"启动salt-master和salt-minion\"><a href=\"#启动salt-master和salt-minion\" class=\"headerlink\" title=\"启动salt-master和salt-minion\"></a>启动salt-master和salt-minion</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start salt-minion</span><br><span class=\"line\">systemctl start salt-master</span><br><span class=\"line\"></span><br><span class=\"line\">#检查salt状态</span><br><span class=\"line\">systemctl status salt-minion</span><br><span class=\"line\">systemctl status salt-master</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"SaltStack-VS-Ansible\"><a href=\"#SaltStack-VS-Ansible\" class=\"headerlink\" title=\"SaltStack VS Ansible\"></a>SaltStack VS Ansible</h3><table>\n<thead>\n<tr>\n<th>SaltStack</th>\n<th>Ansible</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>SaltStack 依靠ZeroMQ速度快</td>\n<td>Ansible SSH传输速度慢一些</td>\n</tr>\n<tr>\n<td>ZeroMQ本身不加密，AES加密，需注意MITM攻击</td>\n<td>SSH安全性高</td>\n</tr>\n<tr>\n<td>Master需要守护进程</td>\n<td>无额外开支，SSH即可</td>\n</tr>\n<tr>\n<td>State语法需要学习</td>\n<td>playbook语法相对简单，容易学习</td>\n</tr>\n<tr>\n<td>excution模块+state模块，state会调用excution模块</td>\n<td>Ansible模块+playbook</td>\n</tr>\n<tr>\n<td>使用topfile <a href=\"https://docs.saltstack.com/en/latest/ref/states/top.html\">top.sls</a> 使用<a href=\"http://yaml.org/\">YAML</a></td>\n<td>playbook使用YAML</td>\n</tr>\n<tr>\n<td>围绕Master输入命令，首次连接使用加密key，使用ZeroMQ库不会拥堵，持续连接速度更快</td>\n<td>使用SSH通道，无固定Master，更安全，也有MQ版本</td>\n</tr>\n<tr>\n<td>未提及</td>\n<td>配置记录文件，原始vs生产</td>\n</tr>\n<tr>\n<td>默认本地root，客户端root</td>\n<td>支持多用户sudo操作</td>\n</tr>\n<tr>\n<td>密码容易保管，命令容易审计</td>\n<td>SSH，公钥连接</td>\n</tr>\n<tr>\n<td>配置模块化，学习成本更高</td>\n<td>克隆Ansible Git，语法简单</td>\n</tr>\n</tbody></table>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><h4 id=\"SALT-MASTER\"><a href=\"#SALT-MASTER\" class=\"headerlink\" title=\"SALT MASTER\"></a>SALT MASTER</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -L https:&#x2F;&#x2F;bootstrap.saltstack.com -o install_salt.sh</span><br><span class=\"line\">sudo sh install_salt.sh -P -M</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"SALT-MINION\"><a href=\"#SALT-MINION\" class=\"headerlink\" title=\"SALT MINION\"></a>SALT MINION</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -L https:&#x2F;&#x2F;bootstrap.saltstack.com -o install_salt.sh</span><br><span class=\"line\">sudo sh install_salt.sh -P</span><br></pre></td></tr></table></figure>\n\n<p>配置脚本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!&#x2F;bin&#x2F;bash</span><br><span class=\"line\"></span><br><span class=\"line\">HostName&#x3D;&#96;hostname&#96;</span><br><span class=\"line\">cp &#x2F;etc&#x2F;salt&#x2F;minion &#x2F;etc&#x2F;salt&#x2F;minion_bak</span><br><span class=\"line\">sed -i  &quot;17a master: 172.16.102.33&quot; &#x2F;etc&#x2F;salt&#x2F;minion</span><br><span class=\"line\">sed -i  &quot;113a id: $HostName&quot; &#x2F;etc&#x2F;salt&#x2F;minion</span><br><span class=\"line\"></span><br><span class=\"line\">systemctl enable salt-minion</span><br><span class=\"line\">systemctl start salt-minion</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"在master上接收minion秘钥\"><a href=\"#在master上接收minion秘钥\" class=\"headerlink\" title=\"在master上接收minion秘钥\"></a>在master上接收minion秘钥</h3><p>在minion启动后连接master会请求master为其签发证书，等待证书签发完成后，master可以信任minion，并且minion和master之间的通信是加密的。</p>\n<p>在salt-master执行</p>\n<p>salt-key命令用于管理mionion秘钥</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]# salt-key -L</span><br><span class=\"line\">Accepted Keys:</span><br><span class=\"line\">Denied Keys:</span><br><span class=\"line\">Unaccepted Keys:</span><br><span class=\"line\">slave　　　　#此时已经出现slave</span><br><span class=\"line\">Rejected Keys:</span><br></pre></td></tr></table></figure>\n<p>此时slave已经出现在unaccepted keys中，说明minion已经和master联系，并且master已经获取了minion的公钥，等待下一步指令。</p>\n<h3 id=\"检查master和minion的秘钥匹配\"><a href=\"#检查master和minion的秘钥匹配\" class=\"headerlink\" title=\"检查master和minion的秘钥匹配\"></a>检查master和minion的秘钥匹配</h3><p>在master上执行</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]# salt-key -f slave</span><br><span class=\"line\">Unaccepted Keys:</span><br><span class=\"line\">slave:  <span class=\"number\">0</span>a:b9:<span class=\"number\">97</span>:b5:<span class=\"number\">9</span>a:<span class=\"number\">65</span>:b8:<span class=\"number\">49</span>:a1:<span class=\"number\">50</span>:a5:<span class=\"number\">6</span>a:<span class=\"number\">66</span>:ce:<span class=\"number\">33</span>:ea</span><br></pre></td></tr></table></figure>\n\n<p>然后可以在minion上获取minion的秘钥</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@slave ~]# salt-call --local key.finger</span><br><span class=\"line\">local:</span><br><span class=\"line\">    <span class=\"number\">0</span>a:b9:<span class=\"number\">97</span>:b5:<span class=\"number\">9</span>a:<span class=\"number\">65</span>:b8:<span class=\"number\">49</span>:a1:<span class=\"number\">50</span>:a5:<span class=\"number\">6</span>a:<span class=\"number\">66</span>:ce:<span class=\"number\">33</span>:ea</span><br></pre></td></tr></table></figure>\n\n<p>因此可确认秘钥匹配，在master上接收秘钥</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]# salt-key -a slave</span><br><span class=\"line\">The following keys are going to be accepted:</span><br><span class=\"line\">Unaccepted Keys:</span><br><span class=\"line\">slave</span><br><span class=\"line\">Proceed? [n/Y] y</span><br><span class=\"line\">Key <span class=\"keyword\">for</span> minion slave accepted.</span><br></pre></td></tr></table></figure>\n\n<p>确认接收秘钥后，检验minion秘钥是否被接收</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]# salt-key -L</span><br><span class=\"line\">Accepted Keys:</span><br><span class=\"line\">slave</span><br><span class=\"line\">Denied Keys:</span><br><span class=\"line\">Unaccepted Keys:</span><br><span class=\"line\">Rejected Keys:</span><br></pre></td></tr></table></figure>\n\n<p>秘钥接收完成后，就可以执行第一条salt啦</p>\n<h3 id=\"认证命令介绍\"><a href=\"#认证命令介绍\" class=\"headerlink\" title=\"认证命令介绍\"></a>认证命令介绍</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt-key –L #查看所有minion-key</span><br><span class=\"line\">salt-key –a #接受某个minion-key</span><br><span class=\"line\">salt-key –A #接受所有minion-key</span><br><span class=\"line\">salt-key –d #删除某个minion-key</span><br><span class=\"line\">salt-key –D #删除所有minion-key</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"SaltStack-minion-匹配方式\"><a href=\"#SaltStack-minion-匹配方式\" class=\"headerlink\" title=\"SaltStack minion 匹配方式\"></a>SaltStack minion 匹配方式</h3><p>1、Glob（salt默认的target 类型，使用shell的通配符来指定一个或多个 minion ID）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt \\* test.ping  或者 salt &#39;*&#39; test.ping</span><br></pre></td></tr></table></figure>\n\n<p>2、 pcre 兼容正则表达式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt -E ‘^[m|M]in.[e|o|u]n$’ test.ping</span><br></pre></td></tr></table></figure>\n\n<p>3、 subnet (通过指定一个IPv4 地址或一个CIDR 的IPv4 子网)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt -S 192168.0.42 test.ping</span><br><span class=\"line\">或者</span><br><span class=\"line\">salt -s 192.168.0.0&#x2F;16 test.ping</span><br></pre></td></tr></table></figure>\n\n<p>4、Grains（salt 可以通过操作系统、CPU架构及自定义信息等机器特征进行 target Minion）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt -G &#39;os:Ubuntu&#39; test.ping</span><br><span class=\"line\">salt -G &#39;os_family:Debian&#39; test.ping</span><br></pre></td></tr></table></figure>\n\n<p>5、pillar (salt 支持通过 pillar 数据进行匹配)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt -l &#39;my_val:my_val&#39; test.ping</span><br></pre></td></tr></table></figure>\n\n<p>6、混合（compound）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt -C &#39;web* or G@os:Arch&#39; test.ping</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"salt-常用模板\"><a href=\"#salt-常用模板\" class=\"headerlink\" title=\"salt 常用模板\"></a>salt 常用模板</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">salt &#39;*&#39; status.loadavg            #系统信息</span><br><span class=\"line\">salt &#39;*&#39; status.cpuinfo            #CPU 信息</span><br><span class=\"line\">salt &quot;*&quot; status.diskstats          #查看磁盘信息</span><br><span class=\"line\">salt &quot;*&quot; status.meminfo            #查看内存信息</span><br><span class=\"line\">salt &quot;*&quot; status.w                  #w命令返回信息</span><br><span class=\"line\">salt node01  sys.list_modules      #查看所有module 列表 </span><br><span class=\"line\">salt node01  sys.list_functions cmd    查看指定 module 的所有function 方法</span><br><span class=\"line\">salt node01 sys.doc cmd.run        查看指定 module 用法</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"salt相关命令\"><a href=\"#salt相关命令\" class=\"headerlink\" title=\"salt相关命令\"></a>salt相关命令</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">salt-run manage.up \t\t\t# 查看存活的minion</span><br><span class=\"line\">salt-run manage.down \t\t# 查看死掉的minion</span><br><span class=\"line\">salt-run manage.down removekeys&#x3D;True \t\t# 查看down掉的minion，并将其删除</span><br><span class=\"line\">salt-run manage.status \t\t\t\t\t# 查看minion的相关状态</span><br><span class=\"line\">salt-run manage.versions \t\t\t\t# 查看salt的所有master和minion的版本信息</span><br><span class=\"line\">salt-run jobs.active \t\t\t\t\t# 查看哪些系统任务还在处理中</span><br><span class=\"line\">salt-run jobs.list_jobs \t\t\t\t# 显示所有的已完成或部分完成的任务信息</span><br><span class=\"line\">salt &#39;*&#39; saltutil.running \t\t\t\t# 查看运行的jobs ID</span><br><span class=\"line\">salt \\* saltutil.kill_job 20151209034239907625 # kill掉进程ID</span><br><span class=\"line\">salt -d \t\t\t\t\t# 查看帮助文档</span><br><span class=\"line\">salt -d|grep service \t\t\t\t# 查看service相关模块命令</span><br><span class=\"line\">salt &#39;*&#39; sys.doc \t\t\t\t# 查看帮助文档</span><br><span class=\"line\">salt-key -L \t\t\t\t# 查询所有接收到的证书</span><br><span class=\"line\">salt-key -a &lt;证书名&gt; \t\t\t\t# 接收单个证书</span><br><span class=\"line\">salt-key -A \t\t\t\t\t# 接受所有证书</span><br><span class=\"line\">salt-key -d &lt;证书名&gt; \t\t\t\t# 删除单个证书</span><br><span class=\"line\">salt-key -D \t\t\t\t\t\t# 删除所有证书</span><br><span class=\"line\">salt &#39;*&#39; service.get_all \t\t\t# 获取主机所有服务</span><br><span class=\"line\">salt &#39;*&#39; service.reload sshd \t\t# 重载sshd服务</span><br><span class=\"line\">salt &#39;*&#39; pkg.list_pkgs # 显示软件包版本列表</span><br><span class=\"line\">salt &#39;*&#39; pkg.version python # 显示软件包版本信息</span><br><span class=\"line\">salt &#39;*&#39; pkg.install httpd # 安装软件包</span><br><span class=\"line\">salt &#39;node1.com&#39; service.status mysql # 查看mysql服务状态</span><br><span class=\"line\">salt &#39;node1.com&#39; service.start mysql # 启动mysql服务</span><br><span class=\"line\">salt &#39;node1.com&#39; cmd.run &#39;service mysql status&#39; # 与上面一样查看服务</span><br><span class=\"line\">salt &#39;*&#39; sys.list_modules # 模块列表</span><br><span class=\"line\">salt-cp &#39;*&#39; &#x2F;etc&#x2F;hosts &#x2F;etc&#x2F;hosts # 把master上的hosts文件分发到所有主机</span><br><span class=\"line\">salt &#39;*&#39; cp.get_file salt:&#x2F;&#x2F;ceshi&#x2F;b &#x2F;tmp&#x2F;test # 把salt-master端相应的文件，分发文件到minion端</span><br><span class=\"line\">salt &#39;*&#39; cp.get_dir salt:&#x2F;&#x2F;zabbix &#x2F;tmp # 把salt-master端相应的目录，分发文件到minion端</span><br><span class=\"line\">salt &#39;*&#39; file.copy &#x2F;tmp&#x2F;zabbix.sls &#x2F;tmp&#x2F;sls # 把salt-master端对应文件拷贝到minion端相应目录下</span><br><span class=\"line\">salt &#39;*&#39; cmd.run &#39;uptime&#39; # 远程命令执行测试</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p> 远程执行脚本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#39;cmd.script:&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.script salt:&#x2F;&#x2F;scripts&#x2F;runme.sh</span><br><span class=\"line\"> salt &#39;*&#39; cmd.script salt:&#x2F;&#x2F;scripts&#x2F;runme.sh &#39;arg1 arg2 &quot;arg 3&quot;&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.script salt:&#x2F;&#x2F;scripts&#x2F;windows_task.ps1 args&#x3D;&#39; -Input c:\\tmp\\infile.txt&#39; shell&#x3D;&#39;powershell&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.script salt:&#x2F;&#x2F;scripts&#x2F;runme.sh stdin&#x3D;&#39;one\\ntwo\\nthree\\nfour\\nfive\\n&#39;</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">&#39;cmd.shell:&#39;</span><br><span class=\"line\"></span><br><span class=\"line\"> This passes the cmd argument directly to the shell</span><br><span class=\"line\"> salt &#39;*&#39; cmd.shell &quot;ls -l | awk &#39;&#x2F;foo&#x2F;&#123;print \\$2&#125;&#39;&quot;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.shell template&#x3D;jinja &quot;ls -l &#x2F;tmp&#x2F;&#123;&#123;grains.id&#125;&#125; | awk &#39;&#x2F;foo&#x2F;&#123;print \\$2&#125;&#39;&quot;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.shell &quot;Get-ChildItem C:\\ &quot; shell&#x3D;&#39;powershell&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.shell &quot;grep f&quot; stdin&#x3D;&#39;one\\ntwo\\nthree\\nfour\\nfive\\n&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.shell cmd&#x3D;&#39;sed -e s&#x2F;&#x3D;&#x2F;:&#x2F;g&#39;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#39;cmd.shells:&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.shells</span><br><span class=\"line\">&#39;cmd.tty:&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.tty tty0 &#39;This is a test&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.tty pts3 &#39;This is a test&#39;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#39;cmd.which:&#39;</span><br><span class=\"line\"> salt &#39;*&#39; cmd.which cat</span><br><span class=\"line\"> </span><br><span class=\"line\">**grains选项：**</span><br><span class=\"line\">salt &#39;*&#39; grains.ls # 查看grains分类</span><br><span class=\"line\">salt &#39;*&#39; grains.items # 查看grains所有信息</span><br><span class=\"line\">salt &#39;*&#39; grains.item osrelease # 查看grains某个信息</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n"},{"title":"本地搭建CA 证书服务","date":"2019-12-18T02:00:00.000Z","_content":"\n[TOC]\n\n## 一、搭建CA服务\n\nopenssl 默认配置文件: ` /etc/pki/tls/openssl.cnf`\n\n### 1、初始化目录\n\n```shell\n# cd /etc/pki/CA\n# mkdir certs crl newcerts private\n# tree\n.\n|-- certs\n|-- crl\n|-- newcerts\n`-- private\n\n4 directories, 0 files\n```\n\n### 2、创建CA需要的文件\n\n```bash\n# touch index.txt\n# echo 01 > serial\n# ll\ntotal 20\ndrwx--x--x 2 root root 4096 Dec 18 02:59 certs\ndrwx--x--x 2 root root 4096 Dec 18 02:59 crl\n-rw------- 1 root root    0 Dec 18 02:59 index.txt\ndrwx--x--x 2 root root 4096 Dec 18 02:59 newcerts\ndrwx--x--x 2 root root 4096 Dec 18 02:59 private\n-rw------- 1 root root    3 Dec 18 03:00 serial\n```\n\n\n\n### 3、给CA创建私钥\n\n```bash\n# pwd\n/etc/pki/CA\n\n# (umask 066;openssl genrsa -out private/cakey.pem 2048)\nGenerating RSA private key, 2048 bit long modulus\n........+++\n.................+++\ne is 65537 (0x10001)\n\n\n# tree\n.\n|-- certs\n|-- crl\n|-- index.txt\n|-- newcerts\n|-- private\n|   `-- cakey.pem\n`-- serial\n\n4 directories, 3 files\n```\n\n\n\n### 4、给CA生成自签名证书\n\n```\n# openssl req -new -x509 -key private/cakey.pem -days 7300 -out cacert.pem\n\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) [CN]:\nState or Province Name (full name) [ZheJiang]:\nLocality Name (eg, city) [HangZhou]:\nOrganization Name (eg, company) [ZTYC]:\nOrganizational Unit Name (eg, section) [ztyc]:\nCommon Name (eg, your name or your server's hostname) []:\nEmail Address []:\n\n# ls\ncacert.pem  certs  crl  index.txt  newcerts  private  serial\n\n```\n\n\n\n## 二、使用CA给客户颁发证书\n\n\n\n### 1、客户机生成私钥\n\n```bash\nclient opt]# (umask 066;openssl genrsa -out wms.qa.ops.com.key 2048)\n\nGenerating RSA private key, 2048 bit long modulus\n..............+++\n.........................................................................+++\ne is 65537 (0x10001)\n\nclient opt]# ls\nwms.qa.ops.com.key\n```\n\n\n\n### 2、生成证书申请文件\n\n```bash\nclient opt]# openssl req -new -key wms.qa.ops.com.key -days 365 -out wms.qa.ops.com.csr\n\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) [CN]:\nState or Province Name (full name) [ZheJiang]:\nLocality Name (eg, city) [HangZhou]:\nOrganization Name (eg, company) [ZTYC]:\nOrganizational Unit Name (eg, section) [ztyc]:\nCommon Name (eg, your name or your server's hostname) []:wms.qa.ops.com\nEmail Address []:\n\nPlease enter the following 'extra' attributes\nto be sent with your certificate request\nA challenge password []:\nAn optional company name []:\n\nclient opt]#ls\nwms.qa.ops.com.csr  wms.qa.ops.com.key\n\n```\n\n### 3、将证书申请文件传输到CA服务器上\n\n```bash\n# pwd\n/etc/pki/CA\n\n# ls crl/\nwms.qa.ops.com.csr\n```\n\n\n\n### 4、在CA上给申请签证的客户签署证书\n\n```\n# pwd\n/etc/pki/CA\n\n# openssl ca -in crl/wms.qa.ops.com.csr -out certs/wms.qa.ops.com.crt -days 365\n\nUsing configuration from /etc/pki/tls/openssl.cnf\nCheck that the request matches the signature\nSignature ok\nCertificate Details:\n        Serial Number: 1 (0x1)\n        Validity\n            Not Before: Dec 18 03:33:30 2019 GMT\n            Not After : Dec 17 03:33:30 2020 GMT\n        Subject:\n            countryName               = CN\n            stateOrProvinceName       = ZheJiang\n            organizationName          = ZTYC\n            organizationalUnitName    = ztyc\n            commonName                = wms.qa.ops.com\n        X509v3 extensions:\n            X509v3 Basic Constraints: \n                CA:FALSE\n            Netscape Comment: \n                OpenSSL Generated Certificate\n            X509v3 Subject Key Identifier: \n                B2:35:6B:B9:16:86:4C:76:99:C8:27:64:7A:60:FC:B0:82:59:64:8A\n            X509v3 Authority Key Identifier: \n                keyid:70:EB:D1:7E:7A:D0:29:AE:65:10:73:D3:16:7D:6C:CD:12:C8:F1:FB\n\nCertificate is to be certified until Dec 17 03:33:30 2020 GMT (365 days)\nSign the certificate? [y/n]:y\n\n\n1 out of 1 certificate requests certified, commit? [y/n]y\nWrite out database with 1 new entries\nData Base Updated\n\n\n```\n\n\n\n### 5、将CA上将签署好的证书传输给申请的客户\n\n```bash\nclient opt]# ls \nwms.qa.ops.com.crt  wms.qa.ops.com.csr  wms.qa.ops.com.key\n\n```\n\n### 6、查看颁发的证书\n\n```bash\nclient opt]# openssl x509 -in wms.qa.ops.com.crt -noout -text\n\nCertificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number: 1 (0x1)\n    Signature Algorithm: sha256WithRSAEncryption\n        Issuer: C=CN, ST=ZheJiang, L=HangZhou, O=ZTYC, OU=ztyc\n        Validity\n            Not Before: Dec 18 03:33:30 2019 GMT\n            Not After : Dec 17 03:33:30 2020 GMT\n        Subject: C=CN, ST=ZheJiang, O=ZTYC, OU=ztyc, CN=wms.qa.ops.com\n        Subject Public Key Info:\n            Public Key Algorithm: rsaEncryption\n                Public-Key: (2048 bit)\n                Modulus:\n                    00:b9:20:cf:dc:bc:d4:06:b6:a0:15:1a:22:52:21:\n                    1f:64:c1:81:90:47:83:70:21:00:0a:ba:2a:ac:00:\n                    22:3d:3d:c3:d7:4a:2c:51:11:5e:df:e8:6c:41:2e:\n.....\n.....\n\n```\n\n### 7、crt转pem格式\n\n```bash\nclient opt]# openssl x509 -in wms.qa.ops.com.crt -inform DER -outform PEM -out wms.qa.ops.com.pem\nclient opt]# ls\nwms.qa.ops.com.crt  wms.qa.ops.com.csr  wms.qa.ops.com.key  wms.qa.ops.com.pem\n```\n\n### 8、证书转换为PKCS12文件\n\n```shell\nclient opt]# openssl pkcs12 -export -clcerts -in wms.qa.ops.com.crt \\\n-inkey wms.qa.ops.com.key -out wms.qa.ops.com.key.p12\nclient opt]# ls\nwms.qa.ops.com.crt  wms.qa.ops.com.csr  wms.qa.ops.com.key  wms.qa.ops.com.pem   wms.qa.ops.com.key.p12\n```\n\n\n\n## 三、CA上吊销证书\n\n### 查看证书的serial以及subject信息\n\n1、在申请吊销证书的客户机上查看需要吊销的证书的serial以及subject信息，并提交给CA\n\n```bash\nclient opt]# openssl x509 -in qa.ops.com.crt -noout -serial -subject\nserial=03\nsubject= /C=CN/ST=ZheJiang/O=ZTYC/OU=ops/CN=qa.ops.com/emailAddress=ops@ztyc.com\n```\n\n2、在CA上根据客户提交的serial以及subject信息，比对服务器上index.txt文件中的信息一致后，执行吊销证书操作\n\n```bash\n# pwd\n/etc/pki/CA\n\n# openssl x509 -in certs/qa.ops.com.crt -noout -serial -subject\nserial=03\nsubject= /C=CN/ST=ZheJiang/O=ZTYC/OU=ops/CN=qa.ops.com/emailAddress=ops@ztyc.com\n\n# cat index.txt\n\nV\t291215081847Z\t\t03\tunknown\t/C=CN/ST=ZheJiang/O=ZTYC/OU=ops/CN=qa.ops.com/emailAddress=ops@ztyc.com\n```\n\n3、信息确认一致，正式执行吊销操作\n\n```bash\n# openssl ca -revoke newcerts/03.pem \nUsing configuration from /etc/pki/tls/openssl.cnf\nRevoking Certificate 03.\nData Base Updated\n\n```\n\n4、生成吊销证书的编号（第一次吊销证书时才需要执行本操作)\n\n```bash\n# pwd\n/etc/pki/CA\n\n# echo 01 > crlnumber\n\n# openssl ca -gencrl -out crl/qa.ops.com.csr \nUsing configuration from /etc/pki/tls/openssl.cnf\n\n# openssl crl -in crl/qa.ops.com.csr -noout -text\nCertificate Revocation List (CRL):\n        Version 2 (0x1)\n    Signature Algorithm: sha256WithRSAEncryption\n        Issuer: /C=CN/ST=ZheJiang/L=HangZhou/O=ZTYC/OU=ztyc\n        Last Update: Dec 18 08:32:01 2019 GMT\n        Next Update: Jan 17 08:32:01 2020 GMT\n        CRL extensions:\n            X509v3 CRL Number: \n                1\nRevoked Certificates:\n    Serial Number: 01\n        Revocation Date: Dec 18 08:29:24 2019 GMT\n    Serial Number: 03\n        Revocation Date: Dec 18 08:29:31 2019 GMT\n    Signature Algorithm: sha256WithRSAEncryption\n         5e:68:d9:a1:ef:1d:7f:83:23:a4:57:95:19:1b:7a:36:82:cc:\n         3a:2a:73:d8:1d:77:03:1a:e5:fd:5d:40:a8:e2:0a:af:34:d7:\n         04:e5:7e:a8:c6:58:36:34:33:d7:79:bf:e0:07:29:f3:72:5b:\n         e8:5d:f4:06:ba:e3:1f:00:2e:f5:4b:47:18:7c:e1:0d:00:3e:\n         2e:13:eb:57:06:be:7f:48:5a:13:ef:62:cc:1e:92:76:22:f3:\n         c2:6b:d0:12:e0:26:4c:33:be:fe:fd:14:de:77:da:6a:20:ce:\n         f5:41:6e:e7:f1:e0:5d:d1:4f:91:e3:97:49:0d:a4:c9:0d:c4:\n         cd:3a:51:5f:31:5b:ed:fc:55:9f:6b:9c:72:c9:7d:92:25:7b:\n         e8:ec:e0:96:b6:98:96:ac:b7:63:40:d5:ec:b7:09:74:e9:c0:\n         96:b6:2c:55:4b:de:fa:fa:2c:74:2e:f8:96:2e:4f:bc:5f:d2:\n         0b:15:1a:6d:1f:e7:1e:8b:d3:af:51:d6:ca:2d:90:9f:9f:03:\n         c2:da:03:f7:0f:a5:6a:e4:f7:3d:25:a1:06:05:c4:de:5e:62:\n         5e:a5:7d:25:7e:9c:16:82:7f:21:28:d0:a3:d6:5c:e7:26:48:\n         03:e0:93:84:fb:f3:b3:0a:d9:e6:35:3e:ae:d7:9f:65:b5:b6:\n         fa:6a:69:67\n\n```\n\n## 四、在浏览器中访问\n\n在浏览器中打开https://<domain_name>来访问。\n\n在Firefox浏览器中可以添加 Security Exception 来忽略HTTPS错误警告。\n\nChrome浏览器可以尝试通过导入CA证书的方式来忽略HTTPS错误警告。\n\n>注意：Chrome 浏览器可能有导入CA证书后仍然无法访问的问题；不同浏览器对自签名SSL证书的检查和限制也有所区别。\n\n\n\n## 五、脚本\n\n### 一、结合上面文档使用\n\n```shell\n#!/bin/bash -e\n\nSSL_IP=''\nSSL_DNS='wms.qa.ztocwst.com'\nCN=${SSL_DNS}\nSSL_SIZE=2048\n\nDATE=${DATE:-3650}\n\nSSL_CONFIG='openssl.cnf'\nSSL_SUBJECT=\"/C=CN/ST=ZheJiang/L=HangZhou/O=ZTYC/OU=ops/CN=${CN}/emailAddress=ops@ztyc.com\"\nCA_DIR='/etc/pki/CA'\n\nif [[ -z $SILENT ]]; then\necho \"----------------------------\"\necho \"| SSL Cert Generator |\"\necho \"----------------------------\"\necho\nfi\n\nexport SSL_DNS=${SSL_DNS}\nexport SSL_IP=${SSL_IP}\nexport SSL_KEY=$CN.key\nexport SSL_CSR=$CN.csr\nexport SSL_SUBJECT=${SSL_SUBJECT}\nexport CA_DIR=${CA_DIR}\nexport SSL_CERT=$CN.crt\nexport SSL_PEM=$CN.pem\n\ndir=$(pwd)\necho -e \"The current working directory is \\033[36m ${dir} \\033[0m\"\n\necho \"====> Generating new config file ${SSL_CONFIG}\"\ncat > ${SSL_CONFIG} <<EOM\n[req]\nreq_extensions = v3_req\ndistinguished_name = req_distinguished_name\n[req_distinguished_name]\n[ v3_req ]\nbasicConstraints = CA:FALSE\nkeyUsage = nonRepudiation, digitalSignature, keyEncipherment\nextendedKeyUsage = clientAuth, serverAuth\nEOM\n\nif [[ -n ${SSL_DNS} || -n ${SSL_IP} ]]; then\ncat >> ${SSL_CONFIG} <<EOM\nsubjectAltName = @alt_names\n[alt_names]\nEOM\n    IFS=\",\"\n    dns=(${SSL_DNS})\n    for i in \"${!dns[@]}\"; do\n      echo DNS.$((i+1)) = ${dns[$i]} >> ${SSL_CONFIG}\n    done\n\n    if [[ -n ${SSL_IP} ]]; then\n        ip=(${SSL_IP})\n        for i in \"${!ip[@]}\"; do\n          echo IP.$((i+1)) = ${ip[$i]} >> ${SSL_CONFIG}\n        done\n    fi\nfi\n\n[[ -z $SILENT ]] && echo \"====> Generating new SSL KEY ${SSL_KEY}\"\necho -e \"\\033[36m openssl genrsa -out ${SSL_KEY} ${SSL_SIZE} \\033[0m\"\nopenssl genrsa -out ${SSL_KEY} ${SSL_SIZE} > /dev/null || exit 1\n\n[[ -z $SILENT ]] && echo \"====> Generating new SSL CSR ${SSL_CSR}\"\necho -e \"\\033[36m openssl req -sha256 -new -key ${SSL_KEY} -out ${SSL_CSR} -subj \\\"${SSL_SUBJECT}\\\" -config ${SSL_CONFIG} \\033[0m\"\nopenssl req -sha256 -new -key ${SSL_KEY} -out ${SSL_CSR} \\\n-subj \"${SSL_SUBJECT}\" -config ${SSL_CONFIG} > /dev/null || exit 1\n\n[[ -z $SILENT ]] && echo \"====> Generating new SSL CERT ${SSL_CERT}\"\n\\cp ${SSL_CSR} ${CA_DIR}/crl\ncd ${CA_DIR}\necho -e \"The current working directory is \\033[36m $(pwd)\\033[0m\"\necho -e \"\\033[36m openssl ca -in crl/${SSL_CSR} -out certs/${SSL_CERT}  -days ${DATE} \\033[0m\"\n#openssl ca -in crl/${SSL_CSR} -out certs/${SSL_CERT}  -days ${DATE}  || exit 1\n/usr/bin/expect <<END\n  spawn openssl ca -in crl/${SSL_CSR} -out certs/${SSL_CERT}  -days ${DATE}\n  expect {\n    \"*y/n]:\" {send \"y\\r\";exp_continue}\n    \"*y/n]\" {send \"y\\r\";exp_continue}\n  }\nEND\n\\cp certs/${SSL_CERT} ${dir}\ncd ${dir}\n\necho -e \"The current working directory is \\033[36m $(pwd)\\033[0m\"\necho -e \"\\033[36m openssl x509 -in ${SSL_CERT} -out ${SSL_PEM} -outform PEM \\033[0m\"\nopenssl x509 -in ${SSL_CERT}  -out ${SSL_PEM} -outform PEM\nls\n\n\nif [[ -z $SILENT ]]; then\necho \"====> Complete\"\necho -e \"keys can be found in volume mapped to \\033[36m $(pwd)\\033[0m\"\necho\necho \"====> Output results as YAML\"\nopenssl x509 -in ${SSL_CERT} -noout -text\nfi\n\n```\n\n### 二、独立使用\n\n```shell\n#!/bin/bash -e\n\n# * 为必改项\n# * 更换为你自己的域名\nCN='' # 例如: demo.rancher.com\n\n# 扩展信任IP或域名\n## 一般ssl证书只信任域名的访问请求，有时候需要使用ip去访问server，那么需要给ssl证书添加扩展IP，\n## 多个IP用逗号隔开。如果想多个域名访问，则添加扩展域名（SSL_DNS）,多个SSL_DNS用逗号隔开\nSSL_IP='' # 例如: 1.2.3.4\nSSL_DNS='' # 例如: demo.rancher.com\n\n# 国家名(2个字母的代号)\nC=CN\n\n# 证书加密位数\nSSL_SIZE=2048\n\n# 证书有效期\nDATE=${DATE:-3650}\n\n# 配置文件\nSSL_CONFIG='openssl.cnf'\n\nif [[ -z $SILENT ]]; then\necho \"----------------------------\"\necho \"| SSL Cert Generator |\"\necho \"----------------------------\"\necho\nfi\n\nexport CA_KEY=${CA_KEY-\"cakey.pem\"}\nexport CA_CERT=${CA_CERT-\"cacerts.pem\"}\nexport CA_SUBJECT=ca-$CN\nexport CA_EXPIRE=${DATE}\n\nexport SSL_CONFIG=${SSL_CONFIG}\nexport SSL_KEY=$CN.key\nexport SSL_CSR=$CN.csr\nexport SSL_CERT=$CN.crt\nexport SSL_EXPIRE=${DATE}\n\nexport SSL_SUBJECT=${CN}\nexport SSL_DNS=${SSL_DNS}\nexport SSL_IP=${SSL_IP}\n\nexport K8S_SECRET_COMBINE_CA=${K8S_SECRET_COMBINE_CA:-'true'}\n\n[[ -z $SILENT ]] && echo \"--> Certificate Authority\"\n\nif [[ -e ./${CA_KEY} ]]; then\n    [[ -z $SILENT ]] && echo \"====> Using existing CA Key ${CA_KEY}\"\nelse\n    [[ -z $SILENT ]] && echo \"====> Generating new CA key ${CA_KEY}\"\n    openssl genrsa -out ${CA_KEY} ${SSL_SIZE} > /dev/null\nfi\n\nif [[ -e ./${CA_CERT} ]]; then\n    [[ -z $SILENT ]] && echo \"====> Using existing CA Certificate ${CA_CERT}\"\nelse\n    [[ -z $SILENT ]] && echo \"====> Generating new CA Certificate ${CA_CERT}\"\n    openssl req -x509 -sha256 -new -nodes -key ${CA_KEY} \\\n    -days ${CA_EXPIRE} -out ${CA_CERT} -subj \"/CN=${CA_SUBJECT}\" > /dev/null || exit 1\nfi\n\necho \"====> Generating new config file ${SSL_CONFIG}\"\ncat > ${SSL_CONFIG} <<EOM\n[req]\nreq_extensions = v3_req\ndistinguished_name = req_distinguished_name\n[req_distinguished_name]\n[ v3_req ]\nbasicConstraints = CA:FALSE\nkeyUsage = nonRepudiation, digitalSignature, keyEncipherment\nextendedKeyUsage = clientAuth, serverAuth\nEOM\n\nif [[ -n ${SSL_DNS} || -n ${SSL_IP} ]]; then\n    cat >> ${SSL_CONFIG} <<EOM\nsubjectAltName = @alt_names\n[alt_names]\nEOM\n    IFS=\",\"\n    dns=(${SSL_DNS})\n    dns+=(${SSL_SUBJECT})\n    for i in \"${!dns[@]}\"; do\n      echo DNS.$((i+1)) = ${dns[$i]} >> ${SSL_CONFIG}\n    done\n\n    if [[ -n ${SSL_IP} ]]; then\n        ip=(${SSL_IP})\n        for i in \"${!ip[@]}\"; do\n          echo IP.$((i+1)) = ${ip[$i]} >> ${SSL_CONFIG}\n        done\n    fi\nfi\n\n[[ -z $SILENT ]] && echo \"====> Generating new SSL KEY ${SSL_KEY}\"\nopenssl genrsa -out ${SSL_KEY} ${SSL_SIZE} > /dev/null || exit 1\n\n[[ -z $SILENT ]] && echo \"====> Generating new SSL CSR ${SSL_CSR}\"\nopenssl req -sha256 -new -key ${SSL_KEY} -out ${SSL_CSR} \\\n-subj \"/CN=${SSL_SUBJECT}\" -config ${SSL_CONFIG} > /dev/null || exit 1\n\n[[ -z $SILENT ]] && echo \"====> Generating new SSL CERT ${SSL_CERT}\"\nopenssl x509 -sha256 -req -in ${SSL_CSR} -CA ${CA_CERT} \\\n    -CAkey ${CA_KEY} -CAcreateserial -out ${SSL_CERT} \\\n    -days ${SSL_EXPIRE} -extensions v3_req \\\n    -extfile ${SSL_CONFIG} > /dev/null || exit 1\n\nif [[ -z $SILENT ]]; then\necho \"====> Complete\"\necho \"keys can be found in volume mapped to $(pwd)\"\necho\necho \"====> Output results as YAML\"\necho \"---\"\necho \"ca_key: |\"\ncat $CA_KEY | sed 's/^/  /'\necho\necho \"ca_cert: |\"\ncat $CA_CERT | sed 's/^/  /'\necho\necho \"ssl_key: |\"\ncat $SSL_KEY | sed 's/^/  /'\necho\necho \"ssl_csr: |\"\ncat $SSL_CSR | sed 's/^/  /'\necho\necho \"ssl_cert: |\"\ncat $SSL_CERT | sed 's/^/  /'\necho\nfi\n\nif [[ -n $K8S_SECRET_NAME ]]; then\n\n  if [[ -n $K8S_SECRET_COMBINE_CA ]]; then\n    [[ -z $SILENT ]] && echo \"====> Adding CA to Cert file\"\n    cat ${CA_CERT} >> ${SSL_CERT}\n  fi\n\n  [[ -z $SILENT ]] && echo \"====> Creating Kubernetes secret: $K8S_SECRET_NAME\"\n  kubectl delete secret $K8S_SECRET_NAME --ignore-not-found\n\n  if [[ -n $K8S_SECRET_SEPARATE_CA ]]; then\n    kubectl create secret generic \\\n    $K8S_SECRET_NAME \\\n    --from-file=\"tls.crt=${SSL_CERT}\" \\\n    --from-file=\"tls.key=${SSL_KEY}\" \\\n    --from-file=\"ca.crt=${CA_CERT}\"\n  else\n    kubectl create secret tls \\\n    $K8S_SECRET_NAME \\\n    --cert=${SSL_CERT} \\\n    --key=${SSL_KEY}\n  fi\n\n  if [[ -n $K8S_SECRET_LABELS ]]; then\n    [[ -z $SILENT ]] && echo \"====> Labeling Kubernetes secret\"\n    IFS=$' \\n\\t' # We have to reset IFS or label secret will misbehave on some systems\n    kubectl label secret \\\n      $K8S_SECRET_NAME \\\n      $K8S_SECRET_LABELS\n  fi\nfi\n\necho \"4. 重命名服务证书\"\nmv ${CN}.key tls.key\nmv ${CN}.crt tls.crt\n```\n\n","source":"_posts/CA证书服务.md","raw":"---\ntitle: 本地搭建CA 证书服务\ndate: 2019-12-18 10:00:00\ncategories: \n- Linux\ntags:\n- ca\n- ssl\n---\n\n[TOC]\n\n## 一、搭建CA服务\n\nopenssl 默认配置文件: ` /etc/pki/tls/openssl.cnf`\n\n### 1、初始化目录\n\n```shell\n# cd /etc/pki/CA\n# mkdir certs crl newcerts private\n# tree\n.\n|-- certs\n|-- crl\n|-- newcerts\n`-- private\n\n4 directories, 0 files\n```\n\n### 2、创建CA需要的文件\n\n```bash\n# touch index.txt\n# echo 01 > serial\n# ll\ntotal 20\ndrwx--x--x 2 root root 4096 Dec 18 02:59 certs\ndrwx--x--x 2 root root 4096 Dec 18 02:59 crl\n-rw------- 1 root root    0 Dec 18 02:59 index.txt\ndrwx--x--x 2 root root 4096 Dec 18 02:59 newcerts\ndrwx--x--x 2 root root 4096 Dec 18 02:59 private\n-rw------- 1 root root    3 Dec 18 03:00 serial\n```\n\n\n\n### 3、给CA创建私钥\n\n```bash\n# pwd\n/etc/pki/CA\n\n# (umask 066;openssl genrsa -out private/cakey.pem 2048)\nGenerating RSA private key, 2048 bit long modulus\n........+++\n.................+++\ne is 65537 (0x10001)\n\n\n# tree\n.\n|-- certs\n|-- crl\n|-- index.txt\n|-- newcerts\n|-- private\n|   `-- cakey.pem\n`-- serial\n\n4 directories, 3 files\n```\n\n\n\n### 4、给CA生成自签名证书\n\n```\n# openssl req -new -x509 -key private/cakey.pem -days 7300 -out cacert.pem\n\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) [CN]:\nState or Province Name (full name) [ZheJiang]:\nLocality Name (eg, city) [HangZhou]:\nOrganization Name (eg, company) [ZTYC]:\nOrganizational Unit Name (eg, section) [ztyc]:\nCommon Name (eg, your name or your server's hostname) []:\nEmail Address []:\n\n# ls\ncacert.pem  certs  crl  index.txt  newcerts  private  serial\n\n```\n\n\n\n## 二、使用CA给客户颁发证书\n\n\n\n### 1、客户机生成私钥\n\n```bash\nclient opt]# (umask 066;openssl genrsa -out wms.qa.ops.com.key 2048)\n\nGenerating RSA private key, 2048 bit long modulus\n..............+++\n.........................................................................+++\ne is 65537 (0x10001)\n\nclient opt]# ls\nwms.qa.ops.com.key\n```\n\n\n\n### 2、生成证书申请文件\n\n```bash\nclient opt]# openssl req -new -key wms.qa.ops.com.key -days 365 -out wms.qa.ops.com.csr\n\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) [CN]:\nState or Province Name (full name) [ZheJiang]:\nLocality Name (eg, city) [HangZhou]:\nOrganization Name (eg, company) [ZTYC]:\nOrganizational Unit Name (eg, section) [ztyc]:\nCommon Name (eg, your name or your server's hostname) []:wms.qa.ops.com\nEmail Address []:\n\nPlease enter the following 'extra' attributes\nto be sent with your certificate request\nA challenge password []:\nAn optional company name []:\n\nclient opt]#ls\nwms.qa.ops.com.csr  wms.qa.ops.com.key\n\n```\n\n### 3、将证书申请文件传输到CA服务器上\n\n```bash\n# pwd\n/etc/pki/CA\n\n# ls crl/\nwms.qa.ops.com.csr\n```\n\n\n\n### 4、在CA上给申请签证的客户签署证书\n\n```\n# pwd\n/etc/pki/CA\n\n# openssl ca -in crl/wms.qa.ops.com.csr -out certs/wms.qa.ops.com.crt -days 365\n\nUsing configuration from /etc/pki/tls/openssl.cnf\nCheck that the request matches the signature\nSignature ok\nCertificate Details:\n        Serial Number: 1 (0x1)\n        Validity\n            Not Before: Dec 18 03:33:30 2019 GMT\n            Not After : Dec 17 03:33:30 2020 GMT\n        Subject:\n            countryName               = CN\n            stateOrProvinceName       = ZheJiang\n            organizationName          = ZTYC\n            organizationalUnitName    = ztyc\n            commonName                = wms.qa.ops.com\n        X509v3 extensions:\n            X509v3 Basic Constraints: \n                CA:FALSE\n            Netscape Comment: \n                OpenSSL Generated Certificate\n            X509v3 Subject Key Identifier: \n                B2:35:6B:B9:16:86:4C:76:99:C8:27:64:7A:60:FC:B0:82:59:64:8A\n            X509v3 Authority Key Identifier: \n                keyid:70:EB:D1:7E:7A:D0:29:AE:65:10:73:D3:16:7D:6C:CD:12:C8:F1:FB\n\nCertificate is to be certified until Dec 17 03:33:30 2020 GMT (365 days)\nSign the certificate? [y/n]:y\n\n\n1 out of 1 certificate requests certified, commit? [y/n]y\nWrite out database with 1 new entries\nData Base Updated\n\n\n```\n\n\n\n### 5、将CA上将签署好的证书传输给申请的客户\n\n```bash\nclient opt]# ls \nwms.qa.ops.com.crt  wms.qa.ops.com.csr  wms.qa.ops.com.key\n\n```\n\n### 6、查看颁发的证书\n\n```bash\nclient opt]# openssl x509 -in wms.qa.ops.com.crt -noout -text\n\nCertificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number: 1 (0x1)\n    Signature Algorithm: sha256WithRSAEncryption\n        Issuer: C=CN, ST=ZheJiang, L=HangZhou, O=ZTYC, OU=ztyc\n        Validity\n            Not Before: Dec 18 03:33:30 2019 GMT\n            Not After : Dec 17 03:33:30 2020 GMT\n        Subject: C=CN, ST=ZheJiang, O=ZTYC, OU=ztyc, CN=wms.qa.ops.com\n        Subject Public Key Info:\n            Public Key Algorithm: rsaEncryption\n                Public-Key: (2048 bit)\n                Modulus:\n                    00:b9:20:cf:dc:bc:d4:06:b6:a0:15:1a:22:52:21:\n                    1f:64:c1:81:90:47:83:70:21:00:0a:ba:2a:ac:00:\n                    22:3d:3d:c3:d7:4a:2c:51:11:5e:df:e8:6c:41:2e:\n.....\n.....\n\n```\n\n### 7、crt转pem格式\n\n```bash\nclient opt]# openssl x509 -in wms.qa.ops.com.crt -inform DER -outform PEM -out wms.qa.ops.com.pem\nclient opt]# ls\nwms.qa.ops.com.crt  wms.qa.ops.com.csr  wms.qa.ops.com.key  wms.qa.ops.com.pem\n```\n\n### 8、证书转换为PKCS12文件\n\n```shell\nclient opt]# openssl pkcs12 -export -clcerts -in wms.qa.ops.com.crt \\\n-inkey wms.qa.ops.com.key -out wms.qa.ops.com.key.p12\nclient opt]# ls\nwms.qa.ops.com.crt  wms.qa.ops.com.csr  wms.qa.ops.com.key  wms.qa.ops.com.pem   wms.qa.ops.com.key.p12\n```\n\n\n\n## 三、CA上吊销证书\n\n### 查看证书的serial以及subject信息\n\n1、在申请吊销证书的客户机上查看需要吊销的证书的serial以及subject信息，并提交给CA\n\n```bash\nclient opt]# openssl x509 -in qa.ops.com.crt -noout -serial -subject\nserial=03\nsubject= /C=CN/ST=ZheJiang/O=ZTYC/OU=ops/CN=qa.ops.com/emailAddress=ops@ztyc.com\n```\n\n2、在CA上根据客户提交的serial以及subject信息，比对服务器上index.txt文件中的信息一致后，执行吊销证书操作\n\n```bash\n# pwd\n/etc/pki/CA\n\n# openssl x509 -in certs/qa.ops.com.crt -noout -serial -subject\nserial=03\nsubject= /C=CN/ST=ZheJiang/O=ZTYC/OU=ops/CN=qa.ops.com/emailAddress=ops@ztyc.com\n\n# cat index.txt\n\nV\t291215081847Z\t\t03\tunknown\t/C=CN/ST=ZheJiang/O=ZTYC/OU=ops/CN=qa.ops.com/emailAddress=ops@ztyc.com\n```\n\n3、信息确认一致，正式执行吊销操作\n\n```bash\n# openssl ca -revoke newcerts/03.pem \nUsing configuration from /etc/pki/tls/openssl.cnf\nRevoking Certificate 03.\nData Base Updated\n\n```\n\n4、生成吊销证书的编号（第一次吊销证书时才需要执行本操作)\n\n```bash\n# pwd\n/etc/pki/CA\n\n# echo 01 > crlnumber\n\n# openssl ca -gencrl -out crl/qa.ops.com.csr \nUsing configuration from /etc/pki/tls/openssl.cnf\n\n# openssl crl -in crl/qa.ops.com.csr -noout -text\nCertificate Revocation List (CRL):\n        Version 2 (0x1)\n    Signature Algorithm: sha256WithRSAEncryption\n        Issuer: /C=CN/ST=ZheJiang/L=HangZhou/O=ZTYC/OU=ztyc\n        Last Update: Dec 18 08:32:01 2019 GMT\n        Next Update: Jan 17 08:32:01 2020 GMT\n        CRL extensions:\n            X509v3 CRL Number: \n                1\nRevoked Certificates:\n    Serial Number: 01\n        Revocation Date: Dec 18 08:29:24 2019 GMT\n    Serial Number: 03\n        Revocation Date: Dec 18 08:29:31 2019 GMT\n    Signature Algorithm: sha256WithRSAEncryption\n         5e:68:d9:a1:ef:1d:7f:83:23:a4:57:95:19:1b:7a:36:82:cc:\n         3a:2a:73:d8:1d:77:03:1a:e5:fd:5d:40:a8:e2:0a:af:34:d7:\n         04:e5:7e:a8:c6:58:36:34:33:d7:79:bf:e0:07:29:f3:72:5b:\n         e8:5d:f4:06:ba:e3:1f:00:2e:f5:4b:47:18:7c:e1:0d:00:3e:\n         2e:13:eb:57:06:be:7f:48:5a:13:ef:62:cc:1e:92:76:22:f3:\n         c2:6b:d0:12:e0:26:4c:33:be:fe:fd:14:de:77:da:6a:20:ce:\n         f5:41:6e:e7:f1:e0:5d:d1:4f:91:e3:97:49:0d:a4:c9:0d:c4:\n         cd:3a:51:5f:31:5b:ed:fc:55:9f:6b:9c:72:c9:7d:92:25:7b:\n         e8:ec:e0:96:b6:98:96:ac:b7:63:40:d5:ec:b7:09:74:e9:c0:\n         96:b6:2c:55:4b:de:fa:fa:2c:74:2e:f8:96:2e:4f:bc:5f:d2:\n         0b:15:1a:6d:1f:e7:1e:8b:d3:af:51:d6:ca:2d:90:9f:9f:03:\n         c2:da:03:f7:0f:a5:6a:e4:f7:3d:25:a1:06:05:c4:de:5e:62:\n         5e:a5:7d:25:7e:9c:16:82:7f:21:28:d0:a3:d6:5c:e7:26:48:\n         03:e0:93:84:fb:f3:b3:0a:d9:e6:35:3e:ae:d7:9f:65:b5:b6:\n         fa:6a:69:67\n\n```\n\n## 四、在浏览器中访问\n\n在浏览器中打开https://<domain_name>来访问。\n\n在Firefox浏览器中可以添加 Security Exception 来忽略HTTPS错误警告。\n\nChrome浏览器可以尝试通过导入CA证书的方式来忽略HTTPS错误警告。\n\n>注意：Chrome 浏览器可能有导入CA证书后仍然无法访问的问题；不同浏览器对自签名SSL证书的检查和限制也有所区别。\n\n\n\n## 五、脚本\n\n### 一、结合上面文档使用\n\n```shell\n#!/bin/bash -e\n\nSSL_IP=''\nSSL_DNS='wms.qa.ztocwst.com'\nCN=${SSL_DNS}\nSSL_SIZE=2048\n\nDATE=${DATE:-3650}\n\nSSL_CONFIG='openssl.cnf'\nSSL_SUBJECT=\"/C=CN/ST=ZheJiang/L=HangZhou/O=ZTYC/OU=ops/CN=${CN}/emailAddress=ops@ztyc.com\"\nCA_DIR='/etc/pki/CA'\n\nif [[ -z $SILENT ]]; then\necho \"----------------------------\"\necho \"| SSL Cert Generator |\"\necho \"----------------------------\"\necho\nfi\n\nexport SSL_DNS=${SSL_DNS}\nexport SSL_IP=${SSL_IP}\nexport SSL_KEY=$CN.key\nexport SSL_CSR=$CN.csr\nexport SSL_SUBJECT=${SSL_SUBJECT}\nexport CA_DIR=${CA_DIR}\nexport SSL_CERT=$CN.crt\nexport SSL_PEM=$CN.pem\n\ndir=$(pwd)\necho -e \"The current working directory is \\033[36m ${dir} \\033[0m\"\n\necho \"====> Generating new config file ${SSL_CONFIG}\"\ncat > ${SSL_CONFIG} <<EOM\n[req]\nreq_extensions = v3_req\ndistinguished_name = req_distinguished_name\n[req_distinguished_name]\n[ v3_req ]\nbasicConstraints = CA:FALSE\nkeyUsage = nonRepudiation, digitalSignature, keyEncipherment\nextendedKeyUsage = clientAuth, serverAuth\nEOM\n\nif [[ -n ${SSL_DNS} || -n ${SSL_IP} ]]; then\ncat >> ${SSL_CONFIG} <<EOM\nsubjectAltName = @alt_names\n[alt_names]\nEOM\n    IFS=\",\"\n    dns=(${SSL_DNS})\n    for i in \"${!dns[@]}\"; do\n      echo DNS.$((i+1)) = ${dns[$i]} >> ${SSL_CONFIG}\n    done\n\n    if [[ -n ${SSL_IP} ]]; then\n        ip=(${SSL_IP})\n        for i in \"${!ip[@]}\"; do\n          echo IP.$((i+1)) = ${ip[$i]} >> ${SSL_CONFIG}\n        done\n    fi\nfi\n\n[[ -z $SILENT ]] && echo \"====> Generating new SSL KEY ${SSL_KEY}\"\necho -e \"\\033[36m openssl genrsa -out ${SSL_KEY} ${SSL_SIZE} \\033[0m\"\nopenssl genrsa -out ${SSL_KEY} ${SSL_SIZE} > /dev/null || exit 1\n\n[[ -z $SILENT ]] && echo \"====> Generating new SSL CSR ${SSL_CSR}\"\necho -e \"\\033[36m openssl req -sha256 -new -key ${SSL_KEY} -out ${SSL_CSR} -subj \\\"${SSL_SUBJECT}\\\" -config ${SSL_CONFIG} \\033[0m\"\nopenssl req -sha256 -new -key ${SSL_KEY} -out ${SSL_CSR} \\\n-subj \"${SSL_SUBJECT}\" -config ${SSL_CONFIG} > /dev/null || exit 1\n\n[[ -z $SILENT ]] && echo \"====> Generating new SSL CERT ${SSL_CERT}\"\n\\cp ${SSL_CSR} ${CA_DIR}/crl\ncd ${CA_DIR}\necho -e \"The current working directory is \\033[36m $(pwd)\\033[0m\"\necho -e \"\\033[36m openssl ca -in crl/${SSL_CSR} -out certs/${SSL_CERT}  -days ${DATE} \\033[0m\"\n#openssl ca -in crl/${SSL_CSR} -out certs/${SSL_CERT}  -days ${DATE}  || exit 1\n/usr/bin/expect <<END\n  spawn openssl ca -in crl/${SSL_CSR} -out certs/${SSL_CERT}  -days ${DATE}\n  expect {\n    \"*y/n]:\" {send \"y\\r\";exp_continue}\n    \"*y/n]\" {send \"y\\r\";exp_continue}\n  }\nEND\n\\cp certs/${SSL_CERT} ${dir}\ncd ${dir}\n\necho -e \"The current working directory is \\033[36m $(pwd)\\033[0m\"\necho -e \"\\033[36m openssl x509 -in ${SSL_CERT} -out ${SSL_PEM} -outform PEM \\033[0m\"\nopenssl x509 -in ${SSL_CERT}  -out ${SSL_PEM} -outform PEM\nls\n\n\nif [[ -z $SILENT ]]; then\necho \"====> Complete\"\necho -e \"keys can be found in volume mapped to \\033[36m $(pwd)\\033[0m\"\necho\necho \"====> Output results as YAML\"\nopenssl x509 -in ${SSL_CERT} -noout -text\nfi\n\n```\n\n### 二、独立使用\n\n```shell\n#!/bin/bash -e\n\n# * 为必改项\n# * 更换为你自己的域名\nCN='' # 例如: demo.rancher.com\n\n# 扩展信任IP或域名\n## 一般ssl证书只信任域名的访问请求，有时候需要使用ip去访问server，那么需要给ssl证书添加扩展IP，\n## 多个IP用逗号隔开。如果想多个域名访问，则添加扩展域名（SSL_DNS）,多个SSL_DNS用逗号隔开\nSSL_IP='' # 例如: 1.2.3.4\nSSL_DNS='' # 例如: demo.rancher.com\n\n# 国家名(2个字母的代号)\nC=CN\n\n# 证书加密位数\nSSL_SIZE=2048\n\n# 证书有效期\nDATE=${DATE:-3650}\n\n# 配置文件\nSSL_CONFIG='openssl.cnf'\n\nif [[ -z $SILENT ]]; then\necho \"----------------------------\"\necho \"| SSL Cert Generator |\"\necho \"----------------------------\"\necho\nfi\n\nexport CA_KEY=${CA_KEY-\"cakey.pem\"}\nexport CA_CERT=${CA_CERT-\"cacerts.pem\"}\nexport CA_SUBJECT=ca-$CN\nexport CA_EXPIRE=${DATE}\n\nexport SSL_CONFIG=${SSL_CONFIG}\nexport SSL_KEY=$CN.key\nexport SSL_CSR=$CN.csr\nexport SSL_CERT=$CN.crt\nexport SSL_EXPIRE=${DATE}\n\nexport SSL_SUBJECT=${CN}\nexport SSL_DNS=${SSL_DNS}\nexport SSL_IP=${SSL_IP}\n\nexport K8S_SECRET_COMBINE_CA=${K8S_SECRET_COMBINE_CA:-'true'}\n\n[[ -z $SILENT ]] && echo \"--> Certificate Authority\"\n\nif [[ -e ./${CA_KEY} ]]; then\n    [[ -z $SILENT ]] && echo \"====> Using existing CA Key ${CA_KEY}\"\nelse\n    [[ -z $SILENT ]] && echo \"====> Generating new CA key ${CA_KEY}\"\n    openssl genrsa -out ${CA_KEY} ${SSL_SIZE} > /dev/null\nfi\n\nif [[ -e ./${CA_CERT} ]]; then\n    [[ -z $SILENT ]] && echo \"====> Using existing CA Certificate ${CA_CERT}\"\nelse\n    [[ -z $SILENT ]] && echo \"====> Generating new CA Certificate ${CA_CERT}\"\n    openssl req -x509 -sha256 -new -nodes -key ${CA_KEY} \\\n    -days ${CA_EXPIRE} -out ${CA_CERT} -subj \"/CN=${CA_SUBJECT}\" > /dev/null || exit 1\nfi\n\necho \"====> Generating new config file ${SSL_CONFIG}\"\ncat > ${SSL_CONFIG} <<EOM\n[req]\nreq_extensions = v3_req\ndistinguished_name = req_distinguished_name\n[req_distinguished_name]\n[ v3_req ]\nbasicConstraints = CA:FALSE\nkeyUsage = nonRepudiation, digitalSignature, keyEncipherment\nextendedKeyUsage = clientAuth, serverAuth\nEOM\n\nif [[ -n ${SSL_DNS} || -n ${SSL_IP} ]]; then\n    cat >> ${SSL_CONFIG} <<EOM\nsubjectAltName = @alt_names\n[alt_names]\nEOM\n    IFS=\",\"\n    dns=(${SSL_DNS})\n    dns+=(${SSL_SUBJECT})\n    for i in \"${!dns[@]}\"; do\n      echo DNS.$((i+1)) = ${dns[$i]} >> ${SSL_CONFIG}\n    done\n\n    if [[ -n ${SSL_IP} ]]; then\n        ip=(${SSL_IP})\n        for i in \"${!ip[@]}\"; do\n          echo IP.$((i+1)) = ${ip[$i]} >> ${SSL_CONFIG}\n        done\n    fi\nfi\n\n[[ -z $SILENT ]] && echo \"====> Generating new SSL KEY ${SSL_KEY}\"\nopenssl genrsa -out ${SSL_KEY} ${SSL_SIZE} > /dev/null || exit 1\n\n[[ -z $SILENT ]] && echo \"====> Generating new SSL CSR ${SSL_CSR}\"\nopenssl req -sha256 -new -key ${SSL_KEY} -out ${SSL_CSR} \\\n-subj \"/CN=${SSL_SUBJECT}\" -config ${SSL_CONFIG} > /dev/null || exit 1\n\n[[ -z $SILENT ]] && echo \"====> Generating new SSL CERT ${SSL_CERT}\"\nopenssl x509 -sha256 -req -in ${SSL_CSR} -CA ${CA_CERT} \\\n    -CAkey ${CA_KEY} -CAcreateserial -out ${SSL_CERT} \\\n    -days ${SSL_EXPIRE} -extensions v3_req \\\n    -extfile ${SSL_CONFIG} > /dev/null || exit 1\n\nif [[ -z $SILENT ]]; then\necho \"====> Complete\"\necho \"keys can be found in volume mapped to $(pwd)\"\necho\necho \"====> Output results as YAML\"\necho \"---\"\necho \"ca_key: |\"\ncat $CA_KEY | sed 's/^/  /'\necho\necho \"ca_cert: |\"\ncat $CA_CERT | sed 's/^/  /'\necho\necho \"ssl_key: |\"\ncat $SSL_KEY | sed 's/^/  /'\necho\necho \"ssl_csr: |\"\ncat $SSL_CSR | sed 's/^/  /'\necho\necho \"ssl_cert: |\"\ncat $SSL_CERT | sed 's/^/  /'\necho\nfi\n\nif [[ -n $K8S_SECRET_NAME ]]; then\n\n  if [[ -n $K8S_SECRET_COMBINE_CA ]]; then\n    [[ -z $SILENT ]] && echo \"====> Adding CA to Cert file\"\n    cat ${CA_CERT} >> ${SSL_CERT}\n  fi\n\n  [[ -z $SILENT ]] && echo \"====> Creating Kubernetes secret: $K8S_SECRET_NAME\"\n  kubectl delete secret $K8S_SECRET_NAME --ignore-not-found\n\n  if [[ -n $K8S_SECRET_SEPARATE_CA ]]; then\n    kubectl create secret generic \\\n    $K8S_SECRET_NAME \\\n    --from-file=\"tls.crt=${SSL_CERT}\" \\\n    --from-file=\"tls.key=${SSL_KEY}\" \\\n    --from-file=\"ca.crt=${CA_CERT}\"\n  else\n    kubectl create secret tls \\\n    $K8S_SECRET_NAME \\\n    --cert=${SSL_CERT} \\\n    --key=${SSL_KEY}\n  fi\n\n  if [[ -n $K8S_SECRET_LABELS ]]; then\n    [[ -z $SILENT ]] && echo \"====> Labeling Kubernetes secret\"\n    IFS=$' \\n\\t' # We have to reset IFS or label secret will misbehave on some systems\n    kubectl label secret \\\n      $K8S_SECRET_NAME \\\n      $K8S_SECRET_LABELS\n  fi\nfi\n\necho \"4. 重命名服务证书\"\nmv ${CN}.key tls.key\nmv ${CN}.crt tls.crt\n```\n\n","slug":"CA证书服务","published":1,"updated":"2021-01-27T08:20:35.737Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h3y0068q0usgc6watjd","content":"<p>[TOC]</p>\n<h2 id=\"一、搭建CA服务\"><a href=\"#一、搭建CA服务\" class=\"headerlink\" title=\"一、搭建CA服务\"></a>一、搭建CA服务</h2><p>openssl 默认配置文件: <code> /etc/pki/tls/openssl.cnf</code></p>\n<h3 id=\"1、初始化目录\"><a href=\"#1、初始化目录\" class=\"headerlink\" title=\"1、初始化目录\"></a>1、初始化目录</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> <span class=\"built_in\">cd</span> /etc/pki/CA</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> mkdir certs crl newcerts private</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> tree</span></span><br><span class=\"line\">.</span><br><span class=\"line\">|-- certs</span><br><span class=\"line\">|-- crl</span><br><span class=\"line\">|-- newcerts</span><br><span class=\"line\">`-- private</span><br><span class=\"line\"></span><br><span class=\"line\">4 directories, 0 files</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、创建CA需要的文件\"><a href=\"#2、创建CA需要的文件\" class=\"headerlink\" title=\"2、创建CA需要的文件\"></a>2、创建CA需要的文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># touch index.txt</span></span><br><span class=\"line\"><span class=\"comment\"># echo 01 &gt; serial</span></span><br><span class=\"line\"><span class=\"comment\"># ll</span></span><br><span class=\"line\">total 20</span><br><span class=\"line\">drwx--x--x 2 root root 4096 Dec 18 02:59 certs</span><br><span class=\"line\">drwx--x--x 2 root root 4096 Dec 18 02:59 crl</span><br><span class=\"line\">-rw------- 1 root root    0 Dec 18 02:59 index.txt</span><br><span class=\"line\">drwx--x--x 2 root root 4096 Dec 18 02:59 newcerts</span><br><span class=\"line\">drwx--x--x 2 root root 4096 Dec 18 02:59 private</span><br><span class=\"line\">-rw------- 1 root root    3 Dec 18 03:00 serial</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"3、给CA创建私钥\"><a href=\"#3、给CA创建私钥\" class=\"headerlink\" title=\"3、给CA创建私钥\"></a>3、给CA创建私钥</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># pwd</span></span><br><span class=\"line\">/etc/pki/CA</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (umask 066;openssl genrsa -out private/cakey.pem 2048)</span></span><br><span class=\"line\">Generating RSA private key, 2048 bit long modulus</span><br><span class=\"line\">........+++</span><br><span class=\"line\">.................+++</span><br><span class=\"line\">e is 65537 (0x10001)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># tree</span></span><br><span class=\"line\">.</span><br><span class=\"line\">|-- certs</span><br><span class=\"line\">|-- crl</span><br><span class=\"line\">|-- index.txt</span><br><span class=\"line\">|-- newcerts</span><br><span class=\"line\">|-- private</span><br><span class=\"line\">|   `-- cakey.pem</span><br><span class=\"line\">`-- serial</span><br><span class=\"line\"></span><br><span class=\"line\">4 directories, 3 files</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"4、给CA生成自签名证书\"><a href=\"#4、给CA生成自签名证书\" class=\"headerlink\" title=\"4、给CA生成自签名证书\"></a>4、给CA生成自签名证书</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># openssl req -new -x509 -key private&#x2F;cakey.pem -days 7300 -out cacert.pem</span><br><span class=\"line\"></span><br><span class=\"line\">You are about to be asked to enter information that will be incorporated</span><br><span class=\"line\">into your certificate request.</span><br><span class=\"line\">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class=\"line\">There are quite a few fields but you can leave some blank</span><br><span class=\"line\">For some fields there will be a default value,</span><br><span class=\"line\">If you enter &#39;.&#39;, the field will be left blank.</span><br><span class=\"line\">-----</span><br><span class=\"line\">Country Name (2 letter code) [CN]:</span><br><span class=\"line\">State or Province Name (full name) [ZheJiang]:</span><br><span class=\"line\">Locality Name (eg, city) [HangZhou]:</span><br><span class=\"line\">Organization Name (eg, company) [ZTYC]:</span><br><span class=\"line\">Organizational Unit Name (eg, section) [ztyc]:</span><br><span class=\"line\">Common Name (eg, your name or your server&#39;s hostname) []:</span><br><span class=\"line\">Email Address []:</span><br><span class=\"line\"></span><br><span class=\"line\"># ls</span><br><span class=\"line\">cacert.pem  certs  crl  index.txt  newcerts  private  serial</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"二、使用CA给客户颁发证书\"><a href=\"#二、使用CA给客户颁发证书\" class=\"headerlink\" title=\"二、使用CA给客户颁发证书\"></a>二、使用CA给客户颁发证书</h2><h3 id=\"1、客户机生成私钥\"><a href=\"#1、客户机生成私钥\" class=\"headerlink\" title=\"1、客户机生成私钥\"></a>1、客户机生成私钥</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]<span class=\"comment\"># (umask 066;openssl genrsa -out wms.qa.ops.com.key 2048)</span></span><br><span class=\"line\"></span><br><span class=\"line\">Generating RSA private key, 2048 bit long modulus</span><br><span class=\"line\">..............+++</span><br><span class=\"line\">.........................................................................+++</span><br><span class=\"line\">e is 65537 (0x10001)</span><br><span class=\"line\"></span><br><span class=\"line\">client opt]<span class=\"comment\"># ls</span></span><br><span class=\"line\">wms.qa.ops.com.key</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2、生成证书申请文件\"><a href=\"#2、生成证书申请文件\" class=\"headerlink\" title=\"2、生成证书申请文件\"></a>2、生成证书申请文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]<span class=\"comment\"># openssl req -new -key wms.qa.ops.com.key -days 365 -out wms.qa.ops.com.csr</span></span><br><span class=\"line\"></span><br><span class=\"line\">You are about to be asked to enter information that will be incorporated</span><br><span class=\"line\">into your certificate request.</span><br><span class=\"line\">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class=\"line\">There are quite a few fields but you can leave some blank</span><br><span class=\"line\">For some fields there will be a default value,</span><br><span class=\"line\">If you enter <span class=\"string\">&#x27;.&#x27;</span>, the field will be left blank.</span><br><span class=\"line\">-----</span><br><span class=\"line\">Country Name (2 letter code) [CN]:</span><br><span class=\"line\">State or Province Name (full name) [ZheJiang]:</span><br><span class=\"line\">Locality Name (eg, city) [HangZhou]:</span><br><span class=\"line\">Organization Name (eg, company) [ZTYC]:</span><br><span class=\"line\">Organizational Unit Name (eg, section) [ztyc]:</span><br><span class=\"line\">Common Name (eg, your name or your server<span class=\"string\">&#x27;s hostname) []:wms.qa.ops.com</span></span><br><span class=\"line\"><span class=\"string\">Email Address []:</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Please enter the following &#x27;</span>extra<span class=\"string\">&#x27; attributes</span></span><br><span class=\"line\"><span class=\"string\">to be sent with your certificate request</span></span><br><span class=\"line\"><span class=\"string\">A challenge password []:</span></span><br><span class=\"line\"><span class=\"string\">An optional company name []:</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">client opt]#ls</span></span><br><span class=\"line\"><span class=\"string\">wms.qa.ops.com.csr  wms.qa.ops.com.key</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、将证书申请文件传输到CA服务器上\"><a href=\"#3、将证书申请文件传输到CA服务器上\" class=\"headerlink\" title=\"3、将证书申请文件传输到CA服务器上\"></a>3、将证书申请文件传输到CA服务器上</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># pwd</span></span><br><span class=\"line\">/etc/pki/CA</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ls crl/</span></span><br><span class=\"line\">wms.qa.ops.com.csr</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"4、在CA上给申请签证的客户签署证书\"><a href=\"#4、在CA上给申请签证的客户签署证书\" class=\"headerlink\" title=\"4、在CA上给申请签证的客户签署证书\"></a>4、在CA上给申请签证的客户签署证书</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># pwd</span><br><span class=\"line\">&#x2F;etc&#x2F;pki&#x2F;CA</span><br><span class=\"line\"></span><br><span class=\"line\"># openssl ca -in crl&#x2F;wms.qa.ops.com.csr -out certs&#x2F;wms.qa.ops.com.crt -days 365</span><br><span class=\"line\"></span><br><span class=\"line\">Using configuration from &#x2F;etc&#x2F;pki&#x2F;tls&#x2F;openssl.cnf</span><br><span class=\"line\">Check that the request matches the signature</span><br><span class=\"line\">Signature ok</span><br><span class=\"line\">Certificate Details:</span><br><span class=\"line\">        Serial Number: 1 (0x1)</span><br><span class=\"line\">        Validity</span><br><span class=\"line\">            Not Before: Dec 18 03:33:30 2019 GMT</span><br><span class=\"line\">            Not After : Dec 17 03:33:30 2020 GMT</span><br><span class=\"line\">        Subject:</span><br><span class=\"line\">            countryName               &#x3D; CN</span><br><span class=\"line\">            stateOrProvinceName       &#x3D; ZheJiang</span><br><span class=\"line\">            organizationName          &#x3D; ZTYC</span><br><span class=\"line\">            organizationalUnitName    &#x3D; ztyc</span><br><span class=\"line\">            commonName                &#x3D; wms.qa.ops.com</span><br><span class=\"line\">        X509v3 extensions:</span><br><span class=\"line\">            X509v3 Basic Constraints: </span><br><span class=\"line\">                CA:FALSE</span><br><span class=\"line\">            Netscape Comment: </span><br><span class=\"line\">                OpenSSL Generated Certificate</span><br><span class=\"line\">            X509v3 Subject Key Identifier: </span><br><span class=\"line\">                B2:35:6B:B9:16:86:4C:76:99:C8:27:64:7A:60:FC:B0:82:59:64:8A</span><br><span class=\"line\">            X509v3 Authority Key Identifier: </span><br><span class=\"line\">                keyid:70:EB:D1:7E:7A:D0:29:AE:65:10:73:D3:16:7D:6C:CD:12:C8:F1:FB</span><br><span class=\"line\"></span><br><span class=\"line\">Certificate is to be certified until Dec 17 03:33:30 2020 GMT (365 days)</span><br><span class=\"line\">Sign the certificate? [y&#x2F;n]:y</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">1 out of 1 certificate requests certified, commit? [y&#x2F;n]y</span><br><span class=\"line\">Write out database with 1 new entries</span><br><span class=\"line\">Data Base Updated</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"5、将CA上将签署好的证书传输给申请的客户\"><a href=\"#5、将CA上将签署好的证书传输给申请的客户\" class=\"headerlink\" title=\"5、将CA上将签署好的证书传输给申请的客户\"></a>5、将CA上将签署好的证书传输给申请的客户</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]<span class=\"comment\"># ls </span></span><br><span class=\"line\">wms.qa.ops.com.crt  wms.qa.ops.com.csr  wms.qa.ops.com.key</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6、查看颁发的证书\"><a href=\"#6、查看颁发的证书\" class=\"headerlink\" title=\"6、查看颁发的证书\"></a>6、查看颁发的证书</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]<span class=\"comment\"># openssl x509 -in wms.qa.ops.com.crt -noout -text</span></span><br><span class=\"line\"></span><br><span class=\"line\">Certificate:</span><br><span class=\"line\">    Data:</span><br><span class=\"line\">        Version: 3 (0x2)</span><br><span class=\"line\">        Serial Number: 1 (0x1)</span><br><span class=\"line\">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class=\"line\">        Issuer: C=CN, ST=ZheJiang, L=HangZhou, O=ZTYC, OU=ztyc</span><br><span class=\"line\">        Validity</span><br><span class=\"line\">            Not Before: Dec 18 03:33:30 2019 GMT</span><br><span class=\"line\">            Not After : Dec 17 03:33:30 2020 GMT</span><br><span class=\"line\">        Subject: C=CN, ST=ZheJiang, O=ZTYC, OU=ztyc, CN=wms.qa.ops.com</span><br><span class=\"line\">        Subject Public Key Info:</span><br><span class=\"line\">            Public Key Algorithm: rsaEncryption</span><br><span class=\"line\">                Public-Key: (2048 bit)</span><br><span class=\"line\">                Modulus:</span><br><span class=\"line\">                    00:b9:20:cf:dc:bc:d4:06:b6:a0:15:1a:22:52:21:</span><br><span class=\"line\">                    1f:64:c1:81:90:47:83:70:21:00:0a:ba:2a:ac:00:</span><br><span class=\"line\">                    22:3d:3d:c3:d7:4a:2c:51:11:5e:df:e8:6c:41:2e:</span><br><span class=\"line\">.....</span><br><span class=\"line\">.....</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7、crt转pem格式\"><a href=\"#7、crt转pem格式\" class=\"headerlink\" title=\"7、crt转pem格式\"></a>7、crt转pem格式</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]<span class=\"comment\"># openssl x509 -in wms.qa.ops.com.crt -inform DER -outform PEM -out wms.qa.ops.com.pem</span></span><br><span class=\"line\">client opt]<span class=\"comment\"># ls</span></span><br><span class=\"line\">wms.qa.ops.com.crt  wms.qa.ops.com.csr  wms.qa.ops.com.key  wms.qa.ops.com.pem</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8、证书转换为PKCS12文件\"><a href=\"#8、证书转换为PKCS12文件\" class=\"headerlink\" title=\"8、证书转换为PKCS12文件\"></a>8、证书转换为PKCS12文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]# openssl pkcs12 -export -clcerts -in wms.qa.ops.com.crt \\</span><br><span class=\"line\">-inkey wms.qa.ops.com.key -out wms.qa.ops.com.key.p12</span><br><span class=\"line\">client opt]# ls</span><br><span class=\"line\">wms.qa.ops.com.crt  wms.qa.ops.com.csr  wms.qa.ops.com.key  wms.qa.ops.com.pem   wms.qa.ops.com.key.p12</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"三、CA上吊销证书\"><a href=\"#三、CA上吊销证书\" class=\"headerlink\" title=\"三、CA上吊销证书\"></a>三、CA上吊销证书</h2><h3 id=\"查看证书的serial以及subject信息\"><a href=\"#查看证书的serial以及subject信息\" class=\"headerlink\" title=\"查看证书的serial以及subject信息\"></a>查看证书的serial以及subject信息</h3><p>1、在申请吊销证书的客户机上查看需要吊销的证书的serial以及subject信息，并提交给CA</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]<span class=\"comment\"># openssl x509 -in qa.ops.com.crt -noout -serial -subject</span></span><br><span class=\"line\">serial=03</span><br><span class=\"line\">subject= /C=CN/ST=ZheJiang/O=ZTYC/OU=ops/CN=qa.ops.com/emailAddress=ops@ztyc.com</span><br></pre></td></tr></table></figure>\n\n<p>2、在CA上根据客户提交的serial以及subject信息，比对服务器上index.txt文件中的信息一致后，执行吊销证书操作</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># pwd</span></span><br><span class=\"line\">/etc/pki/CA</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># openssl x509 -in certs/qa.ops.com.crt -noout -serial -subject</span></span><br><span class=\"line\">serial=03</span><br><span class=\"line\">subject= /C=CN/ST=ZheJiang/O=ZTYC/OU=ops/CN=qa.ops.com/emailAddress=ops@ztyc.com</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># cat index.txt</span></span><br><span class=\"line\"></span><br><span class=\"line\">V\t291215081847Z\t\t03\tunknown\t/C=CN/ST=ZheJiang/O=ZTYC/OU=ops/CN=qa.ops.com/emailAddress=ops@ztyc.com</span><br></pre></td></tr></table></figure>\n\n<p>3、信息确认一致，正式执行吊销操作</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># openssl ca -revoke newcerts/03.pem </span></span><br><span class=\"line\">Using configuration from /etc/pki/tls/openssl.cnf</span><br><span class=\"line\">Revoking Certificate 03.</span><br><span class=\"line\">Data Base Updated</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>4、生成吊销证书的编号（第一次吊销证书时才需要执行本操作)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># pwd</span></span><br><span class=\"line\">/etc/pki/CA</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># echo 01 &gt; crlnumber</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># openssl ca -gencrl -out crl/qa.ops.com.csr </span></span><br><span class=\"line\">Using configuration from /etc/pki/tls/openssl.cnf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># openssl crl -in crl/qa.ops.com.csr -noout -text</span></span><br><span class=\"line\">Certificate Revocation List (CRL):</span><br><span class=\"line\">        Version 2 (0x1)</span><br><span class=\"line\">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class=\"line\">        Issuer: /C=CN/ST=ZheJiang/L=HangZhou/O=ZTYC/OU=ztyc</span><br><span class=\"line\">        Last Update: Dec 18 08:32:01 2019 GMT</span><br><span class=\"line\">        Next Update: Jan 17 08:32:01 2020 GMT</span><br><span class=\"line\">        CRL extensions:</span><br><span class=\"line\">            X509v3 CRL Number: </span><br><span class=\"line\">                1</span><br><span class=\"line\">Revoked Certificates:</span><br><span class=\"line\">    Serial Number: 01</span><br><span class=\"line\">        Revocation Date: Dec 18 08:29:24 2019 GMT</span><br><span class=\"line\">    Serial Number: 03</span><br><span class=\"line\">        Revocation Date: Dec 18 08:29:31 2019 GMT</span><br><span class=\"line\">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class=\"line\">         5e:68:d9:a1:ef:1d:7f:83:23:a4:57:95:19:1b:7a:36:82:cc:</span><br><span class=\"line\">         3a:2a:73:d8:1d:77:03:1a:e5:fd:5d:40:a8:e2:0a:af:34:d7:</span><br><span class=\"line\">         04:e5:7e:a8:c6:58:36:34:33:d7:79:bf:e0:07:29:f3:72:5b:</span><br><span class=\"line\">         e8:5d:f4:06:ba:e3:1f:00:2e:f5:4b:47:18:7c:e1:0d:00:3e:</span><br><span class=\"line\">         2e:13:eb:57:06:be:7f:48:5a:13:ef:62:cc:1e:92:76:22:f3:</span><br><span class=\"line\">         c2:6b:d0:12:e0:26:4c:33:be:fe:fd:14:de:77:da:6a:20:ce:</span><br><span class=\"line\">         f5:41:6e:e7:f1:e0:5d:d1:4f:91:e3:97:49:0d:a4:c9:0d:c4:</span><br><span class=\"line\">         <span class=\"built_in\">cd</span>:3a:51:5f:31:5b:ed:<span class=\"built_in\">fc</span>:55:9f:6b:9c:72:c9:7d:92:25:7b:</span><br><span class=\"line\">         e8:ec:e0:96:b6:98:96:ac:b7:63:40:d5:ec:b7:09:74:e9:c0:</span><br><span class=\"line\">         96:b6:2c:55:4b:de:fa:fa:2c:74:2e:f8:96:2e:4f:bc:5f:d2:</span><br><span class=\"line\">         0b:15:1a:6d:1f:e7:1e:8b:d3:af:51:d6:ca:2d:90:9f:9f:03:</span><br><span class=\"line\">         c2:da:03:f7:0f:a5:6a:e4:f7:3d:25:a1:06:05:c4:de:5e:62:</span><br><span class=\"line\">         5e:a5:7d:25:7e:9c:16:82:7f:21:28:d0:a3:d6:5c:e7:26:48:</span><br><span class=\"line\">         03:e0:93:84:fb:f3:b3:0a:d9:e6:35:3e:ae:d7:9f:65:b5:b6:</span><br><span class=\"line\">         fa:6a:69:67</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"四、在浏览器中访问\"><a href=\"#四、在浏览器中访问\" class=\"headerlink\" title=\"四、在浏览器中访问\"></a>四、在浏览器中访问</h2><p>在浏览器中打开https://<domain_name>来访问。</p>\n<p>在Firefox浏览器中可以添加 Security Exception 来忽略HTTPS错误警告。</p>\n<p>Chrome浏览器可以尝试通过导入CA证书的方式来忽略HTTPS错误警告。</p>\n<blockquote>\n<p>注意：Chrome 浏览器可能有导入CA证书后仍然无法访问的问题；不同浏览器对自签名SSL证书的检查和限制也有所区别。</p>\n</blockquote>\n<h2 id=\"五、脚本\"><a href=\"#五、脚本\" class=\"headerlink\" title=\"五、脚本\"></a>五、脚本</h2><h3 id=\"一、结合上面文档使用\"><a href=\"#一、结合上面文档使用\" class=\"headerlink\" title=\"一、结合上面文档使用\"></a>一、结合上面文档使用</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash -e</span></span><br><span class=\"line\"></span><br><span class=\"line\">SSL_IP=&#x27;&#x27;</span><br><span class=\"line\">SSL_DNS=&#x27;wms.qa.ztocwst.com&#x27;</span><br><span class=\"line\">CN=$&#123;SSL_DNS&#125;</span><br><span class=\"line\">SSL_SIZE=2048</span><br><span class=\"line\"></span><br><span class=\"line\">DATE=$&#123;DATE:-3650&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">SSL_CONFIG=&#x27;openssl.cnf&#x27;</span><br><span class=\"line\">SSL_SUBJECT=&quot;/C=CN/ST=ZheJiang/L=HangZhou/O=ZTYC/OU=ops/CN=$&#123;CN&#125;/emailAddress=ops@ztyc.com&quot;</span><br><span class=\"line\">CA_DIR=&#x27;/etc/pki/CA&#x27;</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -z $SILENT ]]; then</span><br><span class=\"line\">echo &quot;----------------------------&quot;</span><br><span class=\"line\">echo &quot;| SSL Cert Generator |&quot;</span><br><span class=\"line\">echo &quot;----------------------------&quot;</span><br><span class=\"line\">echo</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">export SSL_DNS=$&#123;SSL_DNS&#125;</span><br><span class=\"line\">export SSL_IP=$&#123;SSL_IP&#125;</span><br><span class=\"line\">export SSL_KEY=$CN.key</span><br><span class=\"line\">export SSL_CSR=$CN.csr</span><br><span class=\"line\">export SSL_SUBJECT=$&#123;SSL_SUBJECT&#125;</span><br><span class=\"line\">export CA_DIR=$&#123;CA_DIR&#125;</span><br><span class=\"line\">export SSL_CERT=$CN.crt</span><br><span class=\"line\">export SSL_PEM=$CN.pem</span><br><span class=\"line\"></span><br><span class=\"line\">dir=$(pwd)</span><br><span class=\"line\">echo -e &quot;The current working directory is \\033[36m $&#123;dir&#125; \\033[0m&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;====&gt; Generating new config file $&#123;SSL_CONFIG&#125;&quot;</span><br><span class=\"line\">cat &gt; $&#123;SSL_CONFIG&#125; &lt;&lt;EOM</span><br><span class=\"line\">[req]</span><br><span class=\"line\">req_extensions = v3_req</span><br><span class=\"line\">distinguished_name = req_distinguished_name</span><br><span class=\"line\">[req_distinguished_name]</span><br><span class=\"line\">[ v3_req ]</span><br><span class=\"line\">basicConstraints = CA:FALSE</span><br><span class=\"line\">keyUsage = nonRepudiation, digitalSignature, keyEncipherment</span><br><span class=\"line\">extendedKeyUsage = clientAuth, serverAuth</span><br><span class=\"line\">EOM</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -n $&#123;SSL_DNS&#125; || -n $&#123;SSL_IP&#125; ]]; then</span><br><span class=\"line\">cat &gt;&gt; $&#123;SSL_CONFIG&#125; &lt;&lt;EOM</span><br><span class=\"line\">subjectAltName = @alt_names</span><br><span class=\"line\">[alt_names]</span><br><span class=\"line\">EOM</span><br><span class=\"line\">    IFS=&quot;,&quot;</span><br><span class=\"line\">    dns=($&#123;SSL_DNS&#125;)</span><br><span class=\"line\">    for i in &quot;$&#123;!dns[@]&#125;&quot;; do</span><br><span class=\"line\">      echo DNS.$((i+1)) = $&#123;dns[$i]&#125; &gt;&gt; $&#123;SSL_CONFIG&#125;</span><br><span class=\"line\">    done</span><br><span class=\"line\"></span><br><span class=\"line\">    if [[ -n $&#123;SSL_IP&#125; ]]; then</span><br><span class=\"line\">        ip=($&#123;SSL_IP&#125;)</span><br><span class=\"line\">        for i in &quot;$&#123;!ip[@]&#125;&quot;; do</span><br><span class=\"line\">          echo IP.$((i+1)) = $&#123;ip[$i]&#125; &gt;&gt; $&#123;SSL_CONFIG&#125;</span><br><span class=\"line\">        done</span><br><span class=\"line\">    fi</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new SSL KEY $&#123;SSL_KEY&#125;&quot;</span><br><span class=\"line\">echo -e &quot;\\033[36m openssl genrsa -out $&#123;SSL_KEY&#125; $&#123;SSL_SIZE&#125; \\033[0m&quot;</span><br><span class=\"line\">openssl genrsa -out $&#123;SSL_KEY&#125; $&#123;SSL_SIZE&#125; &gt; /dev/null || exit 1</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new SSL CSR $&#123;SSL_CSR&#125;&quot;</span><br><span class=\"line\">echo -e &quot;\\033[36m openssl req -sha256 -new -key $&#123;SSL_KEY&#125; -out $&#123;SSL_CSR&#125; -subj \\&quot;$&#123;SSL_SUBJECT&#125;\\&quot; -config $&#123;SSL_CONFIG&#125; \\033[0m&quot;</span><br><span class=\"line\">openssl req -sha256 -new -key $&#123;SSL_KEY&#125; -out $&#123;SSL_CSR&#125; \\</span><br><span class=\"line\">-subj &quot;$&#123;SSL_SUBJECT&#125;&quot; -config $&#123;SSL_CONFIG&#125; &gt; /dev/null || exit 1</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new SSL CERT $&#123;SSL_CERT&#125;&quot;</span><br><span class=\"line\">\\cp $&#123;SSL_CSR&#125; $&#123;CA_DIR&#125;/crl</span><br><span class=\"line\">cd $&#123;CA_DIR&#125;</span><br><span class=\"line\">echo -e &quot;The current working directory is \\033[36m $(pwd)\\033[0m&quot;</span><br><span class=\"line\">echo -e &quot;\\033[36m openssl ca -in crl/$&#123;SSL_CSR&#125; -out certs/$&#123;SSL_CERT&#125;  -days $&#123;DATE&#125; \\033[0m&quot;</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">openssl ca -<span class=\"keyword\">in</span> crl/<span class=\"variable\">$&#123;SSL_CSR&#125;</span> -out certs/<span class=\"variable\">$&#123;SSL_CERT&#125;</span>  -days <span class=\"variable\">$&#123;DATE&#125;</span>  || <span class=\"built_in\">exit</span> 1</span></span><br><span class=\"line\">/usr/bin/expect &lt;&lt;END</span><br><span class=\"line\">  spawn openssl ca -in crl/$&#123;SSL_CSR&#125; -out certs/$&#123;SSL_CERT&#125;  -days $&#123;DATE&#125;</span><br><span class=\"line\">  expect &#123;</span><br><span class=\"line\">    &quot;*y/n]:&quot; &#123;send &quot;y\\r&quot;;exp_continue&#125;</span><br><span class=\"line\">    &quot;*y/n]&quot; &#123;send &quot;y\\r&quot;;exp_continue&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">END</span><br><span class=\"line\">\\cp certs/$&#123;SSL_CERT&#125; $&#123;dir&#125;</span><br><span class=\"line\">cd $&#123;dir&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">echo -e &quot;The current working directory is \\033[36m $(pwd)\\033[0m&quot;</span><br><span class=\"line\">echo -e &quot;\\033[36m openssl x509 -in $&#123;SSL_CERT&#125; -out $&#123;SSL_PEM&#125; -outform PEM \\033[0m&quot;</span><br><span class=\"line\">openssl x509 -in $&#123;SSL_CERT&#125;  -out $&#123;SSL_PEM&#125; -outform PEM</span><br><span class=\"line\">ls</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -z $SILENT ]]; then</span><br><span class=\"line\">echo &quot;====&gt; Complete&quot;</span><br><span class=\"line\">echo -e &quot;keys can be found in volume mapped to \\033[36m $(pwd)\\033[0m&quot;</span><br><span class=\"line\">echo</span><br><span class=\"line\">echo &quot;====&gt; Output results as YAML&quot;</span><br><span class=\"line\">openssl x509 -in $&#123;SSL_CERT&#125; -noout -text</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"二、独立使用\"><a href=\"#二、独立使用\" class=\"headerlink\" title=\"二、独立使用\"></a>二、独立使用</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash -e</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> * 为必改项</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> * 更换为你自己的域名</span></span><br><span class=\"line\">CN=&#x27;&#x27; # 例如: demo.rancher.com</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 扩展信任IP或域名</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># 一般ssl证书只信任域名的访问请求，有时候需要使用ip去访问server，那么需要给ssl证书添加扩展IP，</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># 多个IP用逗号隔开。如果想多个域名访问，则添加扩展域名（SSL_DNS）,多个SSL_DNS用逗号隔开</span></span></span><br><span class=\"line\">SSL_IP=&#x27;&#x27; # 例如: 1.2.3.4</span><br><span class=\"line\">SSL_DNS=&#x27;&#x27; # 例如: demo.rancher.com</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 国家名(2个字母的代号)</span></span><br><span class=\"line\">C=CN</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 证书加密位数</span></span><br><span class=\"line\">SSL_SIZE=2048</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 证书有效期</span></span><br><span class=\"line\">DATE=$&#123;DATE:-3650&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 配置文件</span></span><br><span class=\"line\">SSL_CONFIG=&#x27;openssl.cnf&#x27;</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -z $SILENT ]]; then</span><br><span class=\"line\">echo &quot;----------------------------&quot;</span><br><span class=\"line\">echo &quot;| SSL Cert Generator |&quot;</span><br><span class=\"line\">echo &quot;----------------------------&quot;</span><br><span class=\"line\">echo</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">export CA_KEY=$&#123;CA_KEY-&quot;cakey.pem&quot;&#125;</span><br><span class=\"line\">export CA_CERT=$&#123;CA_CERT-&quot;cacerts.pem&quot;&#125;</span><br><span class=\"line\">export CA_SUBJECT=ca-$CN</span><br><span class=\"line\">export CA_EXPIRE=$&#123;DATE&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">export SSL_CONFIG=$&#123;SSL_CONFIG&#125;</span><br><span class=\"line\">export SSL_KEY=$CN.key</span><br><span class=\"line\">export SSL_CSR=$CN.csr</span><br><span class=\"line\">export SSL_CERT=$CN.crt</span><br><span class=\"line\">export SSL_EXPIRE=$&#123;DATE&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">export SSL_SUBJECT=$&#123;CN&#125;</span><br><span class=\"line\">export SSL_DNS=$&#123;SSL_DNS&#125;</span><br><span class=\"line\">export SSL_IP=$&#123;SSL_IP&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">export K8S_SECRET_COMBINE_CA=$&#123;K8S_SECRET_COMBINE_CA:-&#x27;true&#x27;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;--&gt; Certificate Authority&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -e ./$&#123;CA_KEY&#125; ]]; then</span><br><span class=\"line\">    [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Using existing CA Key $&#123;CA_KEY&#125;&quot;</span><br><span class=\"line\">else</span><br><span class=\"line\">    [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new CA key $&#123;CA_KEY&#125;&quot;</span><br><span class=\"line\">    openssl genrsa -out $&#123;CA_KEY&#125; $&#123;SSL_SIZE&#125; &gt; /dev/null</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -e ./$&#123;CA_CERT&#125; ]]; then</span><br><span class=\"line\">    [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Using existing CA Certificate $&#123;CA_CERT&#125;&quot;</span><br><span class=\"line\">else</span><br><span class=\"line\">    [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new CA Certificate $&#123;CA_CERT&#125;&quot;</span><br><span class=\"line\">    openssl req -x509 -sha256 -new -nodes -key $&#123;CA_KEY&#125; \\</span><br><span class=\"line\">    -days $&#123;CA_EXPIRE&#125; -out $&#123;CA_CERT&#125; -subj &quot;/CN=$&#123;CA_SUBJECT&#125;&quot; &gt; /dev/null || exit 1</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;====&gt; Generating new config file $&#123;SSL_CONFIG&#125;&quot;</span><br><span class=\"line\">cat &gt; $&#123;SSL_CONFIG&#125; &lt;&lt;EOM</span><br><span class=\"line\">[req]</span><br><span class=\"line\">req_extensions = v3_req</span><br><span class=\"line\">distinguished_name = req_distinguished_name</span><br><span class=\"line\">[req_distinguished_name]</span><br><span class=\"line\">[ v3_req ]</span><br><span class=\"line\">basicConstraints = CA:FALSE</span><br><span class=\"line\">keyUsage = nonRepudiation, digitalSignature, keyEncipherment</span><br><span class=\"line\">extendedKeyUsage = clientAuth, serverAuth</span><br><span class=\"line\">EOM</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -n $&#123;SSL_DNS&#125; || -n $&#123;SSL_IP&#125; ]]; then</span><br><span class=\"line\">    cat &gt;&gt; $&#123;SSL_CONFIG&#125; &lt;&lt;EOM</span><br><span class=\"line\">subjectAltName = @alt_names</span><br><span class=\"line\">[alt_names]</span><br><span class=\"line\">EOM</span><br><span class=\"line\">    IFS=&quot;,&quot;</span><br><span class=\"line\">    dns=($&#123;SSL_DNS&#125;)</span><br><span class=\"line\">    dns+=($&#123;SSL_SUBJECT&#125;)</span><br><span class=\"line\">    for i in &quot;$&#123;!dns[@]&#125;&quot;; do</span><br><span class=\"line\">      echo DNS.$((i+1)) = $&#123;dns[$i]&#125; &gt;&gt; $&#123;SSL_CONFIG&#125;</span><br><span class=\"line\">    done</span><br><span class=\"line\"></span><br><span class=\"line\">    if [[ -n $&#123;SSL_IP&#125; ]]; then</span><br><span class=\"line\">        ip=($&#123;SSL_IP&#125;)</span><br><span class=\"line\">        for i in &quot;$&#123;!ip[@]&#125;&quot;; do</span><br><span class=\"line\">          echo IP.$((i+1)) = $&#123;ip[$i]&#125; &gt;&gt; $&#123;SSL_CONFIG&#125;</span><br><span class=\"line\">        done</span><br><span class=\"line\">    fi</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new SSL KEY $&#123;SSL_KEY&#125;&quot;</span><br><span class=\"line\">openssl genrsa -out $&#123;SSL_KEY&#125; $&#123;SSL_SIZE&#125; &gt; /dev/null || exit 1</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new SSL CSR $&#123;SSL_CSR&#125;&quot;</span><br><span class=\"line\">openssl req -sha256 -new -key $&#123;SSL_KEY&#125; -out $&#123;SSL_CSR&#125; \\</span><br><span class=\"line\">-subj &quot;/CN=$&#123;SSL_SUBJECT&#125;&quot; -config $&#123;SSL_CONFIG&#125; &gt; /dev/null || exit 1</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new SSL CERT $&#123;SSL_CERT&#125;&quot;</span><br><span class=\"line\">openssl x509 -sha256 -req -in $&#123;SSL_CSR&#125; -CA $&#123;CA_CERT&#125; \\</span><br><span class=\"line\">    -CAkey $&#123;CA_KEY&#125; -CAcreateserial -out $&#123;SSL_CERT&#125; \\</span><br><span class=\"line\">    -days $&#123;SSL_EXPIRE&#125; -extensions v3_req \\</span><br><span class=\"line\">    -extfile $&#123;SSL_CONFIG&#125; &gt; /dev/null || exit 1</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -z $SILENT ]]; then</span><br><span class=\"line\">echo &quot;====&gt; Complete&quot;</span><br><span class=\"line\">echo &quot;keys can be found in volume mapped to $(pwd)&quot;</span><br><span class=\"line\">echo</span><br><span class=\"line\">echo &quot;====&gt; Output results as YAML&quot;</span><br><span class=\"line\">echo &quot;---&quot;</span><br><span class=\"line\">echo &quot;ca_key: |&quot;</span><br><span class=\"line\">cat $CA_KEY | sed &#x27;s/^/  /&#x27;</span><br><span class=\"line\">echo</span><br><span class=\"line\">echo &quot;ca_cert: |&quot;</span><br><span class=\"line\">cat $CA_CERT | sed &#x27;s/^/  /&#x27;</span><br><span class=\"line\">echo</span><br><span class=\"line\">echo &quot;ssl_key: |&quot;</span><br><span class=\"line\">cat $SSL_KEY | sed &#x27;s/^/  /&#x27;</span><br><span class=\"line\">echo</span><br><span class=\"line\">echo &quot;ssl_csr: |&quot;</span><br><span class=\"line\">cat $SSL_CSR | sed &#x27;s/^/  /&#x27;</span><br><span class=\"line\">echo</span><br><span class=\"line\">echo &quot;ssl_cert: |&quot;</span><br><span class=\"line\">cat $SSL_CERT | sed &#x27;s/^/  /&#x27;</span><br><span class=\"line\">echo</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -n $K8S_SECRET_NAME ]]; then</span><br><span class=\"line\"></span><br><span class=\"line\">  if [[ -n $K8S_SECRET_COMBINE_CA ]]; then</span><br><span class=\"line\">    [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Adding CA to Cert file&quot;</span><br><span class=\"line\">    cat $&#123;CA_CERT&#125; &gt;&gt; $&#123;SSL_CERT&#125;</span><br><span class=\"line\">  fi</span><br><span class=\"line\"></span><br><span class=\"line\">  [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Creating Kubernetes secret: $K8S_SECRET_NAME&quot;</span><br><span class=\"line\">  kubectl delete secret $K8S_SECRET_NAME --ignore-not-found</span><br><span class=\"line\"></span><br><span class=\"line\">  if [[ -n $K8S_SECRET_SEPARATE_CA ]]; then</span><br><span class=\"line\">    kubectl create secret generic \\</span><br><span class=\"line\">    $K8S_SECRET_NAME \\</span><br><span class=\"line\">    --from-file=&quot;tls.crt=$&#123;SSL_CERT&#125;&quot; \\</span><br><span class=\"line\">    --from-file=&quot;tls.key=$&#123;SSL_KEY&#125;&quot; \\</span><br><span class=\"line\">    --from-file=&quot;ca.crt=$&#123;CA_CERT&#125;&quot;</span><br><span class=\"line\">  else</span><br><span class=\"line\">    kubectl create secret tls \\</span><br><span class=\"line\">    $K8S_SECRET_NAME \\</span><br><span class=\"line\">    --cert=$&#123;SSL_CERT&#125; \\</span><br><span class=\"line\">    --key=$&#123;SSL_KEY&#125;</span><br><span class=\"line\">  fi</span><br><span class=\"line\"></span><br><span class=\"line\">  if [[ -n $K8S_SECRET_LABELS ]]; then</span><br><span class=\"line\">    [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Labeling Kubernetes secret&quot;</span><br><span class=\"line\">    IFS=$&#x27; \\n\\t&#x27; # We have to reset IFS or label secret will misbehave on some systems</span><br><span class=\"line\">    kubectl label secret \\</span><br><span class=\"line\">      $K8S_SECRET_NAME \\</span><br><span class=\"line\">      $K8S_SECRET_LABELS</span><br><span class=\"line\">  fi</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;4. 重命名服务证书&quot;</span><br><span class=\"line\">mv $&#123;CN&#125;.key tls.key</span><br><span class=\"line\">mv $&#123;CN&#125;.crt tls.crt</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>[TOC]</p>\n<h2 id=\"一、搭建CA服务\"><a href=\"#一、搭建CA服务\" class=\"headerlink\" title=\"一、搭建CA服务\"></a>一、搭建CA服务</h2><p>openssl 默认配置文件: <code> /etc/pki/tls/openssl.cnf</code></p>\n<h3 id=\"1、初始化目录\"><a href=\"#1、初始化目录\" class=\"headerlink\" title=\"1、初始化目录\"></a>1、初始化目录</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> <span class=\"built_in\">cd</span> /etc/pki/CA</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> mkdir certs crl newcerts private</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> tree</span></span><br><span class=\"line\">.</span><br><span class=\"line\">|-- certs</span><br><span class=\"line\">|-- crl</span><br><span class=\"line\">|-- newcerts</span><br><span class=\"line\">`-- private</span><br><span class=\"line\"></span><br><span class=\"line\">4 directories, 0 files</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、创建CA需要的文件\"><a href=\"#2、创建CA需要的文件\" class=\"headerlink\" title=\"2、创建CA需要的文件\"></a>2、创建CA需要的文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># touch index.txt</span></span><br><span class=\"line\"><span class=\"comment\"># echo 01 &gt; serial</span></span><br><span class=\"line\"><span class=\"comment\"># ll</span></span><br><span class=\"line\">total 20</span><br><span class=\"line\">drwx--x--x 2 root root 4096 Dec 18 02:59 certs</span><br><span class=\"line\">drwx--x--x 2 root root 4096 Dec 18 02:59 crl</span><br><span class=\"line\">-rw------- 1 root root    0 Dec 18 02:59 index.txt</span><br><span class=\"line\">drwx--x--x 2 root root 4096 Dec 18 02:59 newcerts</span><br><span class=\"line\">drwx--x--x 2 root root 4096 Dec 18 02:59 private</span><br><span class=\"line\">-rw------- 1 root root    3 Dec 18 03:00 serial</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"3、给CA创建私钥\"><a href=\"#3、给CA创建私钥\" class=\"headerlink\" title=\"3、给CA创建私钥\"></a>3、给CA创建私钥</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># pwd</span></span><br><span class=\"line\">/etc/pki/CA</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (umask 066;openssl genrsa -out private/cakey.pem 2048)</span></span><br><span class=\"line\">Generating RSA private key, 2048 bit long modulus</span><br><span class=\"line\">........+++</span><br><span class=\"line\">.................+++</span><br><span class=\"line\">e is 65537 (0x10001)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># tree</span></span><br><span class=\"line\">.</span><br><span class=\"line\">|-- certs</span><br><span class=\"line\">|-- crl</span><br><span class=\"line\">|-- index.txt</span><br><span class=\"line\">|-- newcerts</span><br><span class=\"line\">|-- private</span><br><span class=\"line\">|   `-- cakey.pem</span><br><span class=\"line\">`-- serial</span><br><span class=\"line\"></span><br><span class=\"line\">4 directories, 3 files</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"4、给CA生成自签名证书\"><a href=\"#4、给CA生成自签名证书\" class=\"headerlink\" title=\"4、给CA生成自签名证书\"></a>4、给CA生成自签名证书</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># openssl req -new -x509 -key private&#x2F;cakey.pem -days 7300 -out cacert.pem</span><br><span class=\"line\"></span><br><span class=\"line\">You are about to be asked to enter information that will be incorporated</span><br><span class=\"line\">into your certificate request.</span><br><span class=\"line\">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class=\"line\">There are quite a few fields but you can leave some blank</span><br><span class=\"line\">For some fields there will be a default value,</span><br><span class=\"line\">If you enter &#39;.&#39;, the field will be left blank.</span><br><span class=\"line\">-----</span><br><span class=\"line\">Country Name (2 letter code) [CN]:</span><br><span class=\"line\">State or Province Name (full name) [ZheJiang]:</span><br><span class=\"line\">Locality Name (eg, city) [HangZhou]:</span><br><span class=\"line\">Organization Name (eg, company) [ZTYC]:</span><br><span class=\"line\">Organizational Unit Name (eg, section) [ztyc]:</span><br><span class=\"line\">Common Name (eg, your name or your server&#39;s hostname) []:</span><br><span class=\"line\">Email Address []:</span><br><span class=\"line\"></span><br><span class=\"line\"># ls</span><br><span class=\"line\">cacert.pem  certs  crl  index.txt  newcerts  private  serial</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"二、使用CA给客户颁发证书\"><a href=\"#二、使用CA给客户颁发证书\" class=\"headerlink\" title=\"二、使用CA给客户颁发证书\"></a>二、使用CA给客户颁发证书</h2><h3 id=\"1、客户机生成私钥\"><a href=\"#1、客户机生成私钥\" class=\"headerlink\" title=\"1、客户机生成私钥\"></a>1、客户机生成私钥</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]<span class=\"comment\"># (umask 066;openssl genrsa -out wms.qa.ops.com.key 2048)</span></span><br><span class=\"line\"></span><br><span class=\"line\">Generating RSA private key, 2048 bit long modulus</span><br><span class=\"line\">..............+++</span><br><span class=\"line\">.........................................................................+++</span><br><span class=\"line\">e is 65537 (0x10001)</span><br><span class=\"line\"></span><br><span class=\"line\">client opt]<span class=\"comment\"># ls</span></span><br><span class=\"line\">wms.qa.ops.com.key</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"2、生成证书申请文件\"><a href=\"#2、生成证书申请文件\" class=\"headerlink\" title=\"2、生成证书申请文件\"></a>2、生成证书申请文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]<span class=\"comment\"># openssl req -new -key wms.qa.ops.com.key -days 365 -out wms.qa.ops.com.csr</span></span><br><span class=\"line\"></span><br><span class=\"line\">You are about to be asked to enter information that will be incorporated</span><br><span class=\"line\">into your certificate request.</span><br><span class=\"line\">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class=\"line\">There are quite a few fields but you can leave some blank</span><br><span class=\"line\">For some fields there will be a default value,</span><br><span class=\"line\">If you enter <span class=\"string\">&#x27;.&#x27;</span>, the field will be left blank.</span><br><span class=\"line\">-----</span><br><span class=\"line\">Country Name (2 letter code) [CN]:</span><br><span class=\"line\">State or Province Name (full name) [ZheJiang]:</span><br><span class=\"line\">Locality Name (eg, city) [HangZhou]:</span><br><span class=\"line\">Organization Name (eg, company) [ZTYC]:</span><br><span class=\"line\">Organizational Unit Name (eg, section) [ztyc]:</span><br><span class=\"line\">Common Name (eg, your name or your server<span class=\"string\">&#x27;s hostname) []:wms.qa.ops.com</span></span><br><span class=\"line\"><span class=\"string\">Email Address []:</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Please enter the following &#x27;</span>extra<span class=\"string\">&#x27; attributes</span></span><br><span class=\"line\"><span class=\"string\">to be sent with your certificate request</span></span><br><span class=\"line\"><span class=\"string\">A challenge password []:</span></span><br><span class=\"line\"><span class=\"string\">An optional company name []:</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">client opt]#ls</span></span><br><span class=\"line\"><span class=\"string\">wms.qa.ops.com.csr  wms.qa.ops.com.key</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3、将证书申请文件传输到CA服务器上\"><a href=\"#3、将证书申请文件传输到CA服务器上\" class=\"headerlink\" title=\"3、将证书申请文件传输到CA服务器上\"></a>3、将证书申请文件传输到CA服务器上</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># pwd</span></span><br><span class=\"line\">/etc/pki/CA</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ls crl/</span></span><br><span class=\"line\">wms.qa.ops.com.csr</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"4、在CA上给申请签证的客户签署证书\"><a href=\"#4、在CA上给申请签证的客户签署证书\" class=\"headerlink\" title=\"4、在CA上给申请签证的客户签署证书\"></a>4、在CA上给申请签证的客户签署证书</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># pwd</span><br><span class=\"line\">&#x2F;etc&#x2F;pki&#x2F;CA</span><br><span class=\"line\"></span><br><span class=\"line\"># openssl ca -in crl&#x2F;wms.qa.ops.com.csr -out certs&#x2F;wms.qa.ops.com.crt -days 365</span><br><span class=\"line\"></span><br><span class=\"line\">Using configuration from &#x2F;etc&#x2F;pki&#x2F;tls&#x2F;openssl.cnf</span><br><span class=\"line\">Check that the request matches the signature</span><br><span class=\"line\">Signature ok</span><br><span class=\"line\">Certificate Details:</span><br><span class=\"line\">        Serial Number: 1 (0x1)</span><br><span class=\"line\">        Validity</span><br><span class=\"line\">            Not Before: Dec 18 03:33:30 2019 GMT</span><br><span class=\"line\">            Not After : Dec 17 03:33:30 2020 GMT</span><br><span class=\"line\">        Subject:</span><br><span class=\"line\">            countryName               &#x3D; CN</span><br><span class=\"line\">            stateOrProvinceName       &#x3D; ZheJiang</span><br><span class=\"line\">            organizationName          &#x3D; ZTYC</span><br><span class=\"line\">            organizationalUnitName    &#x3D; ztyc</span><br><span class=\"line\">            commonName                &#x3D; wms.qa.ops.com</span><br><span class=\"line\">        X509v3 extensions:</span><br><span class=\"line\">            X509v3 Basic Constraints: </span><br><span class=\"line\">                CA:FALSE</span><br><span class=\"line\">            Netscape Comment: </span><br><span class=\"line\">                OpenSSL Generated Certificate</span><br><span class=\"line\">            X509v3 Subject Key Identifier: </span><br><span class=\"line\">                B2:35:6B:B9:16:86:4C:76:99:C8:27:64:7A:60:FC:B0:82:59:64:8A</span><br><span class=\"line\">            X509v3 Authority Key Identifier: </span><br><span class=\"line\">                keyid:70:EB:D1:7E:7A:D0:29:AE:65:10:73:D3:16:7D:6C:CD:12:C8:F1:FB</span><br><span class=\"line\"></span><br><span class=\"line\">Certificate is to be certified until Dec 17 03:33:30 2020 GMT (365 days)</span><br><span class=\"line\">Sign the certificate? [y&#x2F;n]:y</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">1 out of 1 certificate requests certified, commit? [y&#x2F;n]y</span><br><span class=\"line\">Write out database with 1 new entries</span><br><span class=\"line\">Data Base Updated</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"5、将CA上将签署好的证书传输给申请的客户\"><a href=\"#5、将CA上将签署好的证书传输给申请的客户\" class=\"headerlink\" title=\"5、将CA上将签署好的证书传输给申请的客户\"></a>5、将CA上将签署好的证书传输给申请的客户</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]<span class=\"comment\"># ls </span></span><br><span class=\"line\">wms.qa.ops.com.crt  wms.qa.ops.com.csr  wms.qa.ops.com.key</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6、查看颁发的证书\"><a href=\"#6、查看颁发的证书\" class=\"headerlink\" title=\"6、查看颁发的证书\"></a>6、查看颁发的证书</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]<span class=\"comment\"># openssl x509 -in wms.qa.ops.com.crt -noout -text</span></span><br><span class=\"line\"></span><br><span class=\"line\">Certificate:</span><br><span class=\"line\">    Data:</span><br><span class=\"line\">        Version: 3 (0x2)</span><br><span class=\"line\">        Serial Number: 1 (0x1)</span><br><span class=\"line\">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class=\"line\">        Issuer: C=CN, ST=ZheJiang, L=HangZhou, O=ZTYC, OU=ztyc</span><br><span class=\"line\">        Validity</span><br><span class=\"line\">            Not Before: Dec 18 03:33:30 2019 GMT</span><br><span class=\"line\">            Not After : Dec 17 03:33:30 2020 GMT</span><br><span class=\"line\">        Subject: C=CN, ST=ZheJiang, O=ZTYC, OU=ztyc, CN=wms.qa.ops.com</span><br><span class=\"line\">        Subject Public Key Info:</span><br><span class=\"line\">            Public Key Algorithm: rsaEncryption</span><br><span class=\"line\">                Public-Key: (2048 bit)</span><br><span class=\"line\">                Modulus:</span><br><span class=\"line\">                    00:b9:20:cf:dc:bc:d4:06:b6:a0:15:1a:22:52:21:</span><br><span class=\"line\">                    1f:64:c1:81:90:47:83:70:21:00:0a:ba:2a:ac:00:</span><br><span class=\"line\">                    22:3d:3d:c3:d7:4a:2c:51:11:5e:df:e8:6c:41:2e:</span><br><span class=\"line\">.....</span><br><span class=\"line\">.....</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7、crt转pem格式\"><a href=\"#7、crt转pem格式\" class=\"headerlink\" title=\"7、crt转pem格式\"></a>7、crt转pem格式</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]<span class=\"comment\"># openssl x509 -in wms.qa.ops.com.crt -inform DER -outform PEM -out wms.qa.ops.com.pem</span></span><br><span class=\"line\">client opt]<span class=\"comment\"># ls</span></span><br><span class=\"line\">wms.qa.ops.com.crt  wms.qa.ops.com.csr  wms.qa.ops.com.key  wms.qa.ops.com.pem</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8、证书转换为PKCS12文件\"><a href=\"#8、证书转换为PKCS12文件\" class=\"headerlink\" title=\"8、证书转换为PKCS12文件\"></a>8、证书转换为PKCS12文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]# openssl pkcs12 -export -clcerts -in wms.qa.ops.com.crt \\</span><br><span class=\"line\">-inkey wms.qa.ops.com.key -out wms.qa.ops.com.key.p12</span><br><span class=\"line\">client opt]# ls</span><br><span class=\"line\">wms.qa.ops.com.crt  wms.qa.ops.com.csr  wms.qa.ops.com.key  wms.qa.ops.com.pem   wms.qa.ops.com.key.p12</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"三、CA上吊销证书\"><a href=\"#三、CA上吊销证书\" class=\"headerlink\" title=\"三、CA上吊销证书\"></a>三、CA上吊销证书</h2><h3 id=\"查看证书的serial以及subject信息\"><a href=\"#查看证书的serial以及subject信息\" class=\"headerlink\" title=\"查看证书的serial以及subject信息\"></a>查看证书的serial以及subject信息</h3><p>1、在申请吊销证书的客户机上查看需要吊销的证书的serial以及subject信息，并提交给CA</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">client opt]<span class=\"comment\"># openssl x509 -in qa.ops.com.crt -noout -serial -subject</span></span><br><span class=\"line\">serial=03</span><br><span class=\"line\">subject= /C=CN/ST=ZheJiang/O=ZTYC/OU=ops/CN=qa.ops.com/emailAddress=ops@ztyc.com</span><br></pre></td></tr></table></figure>\n\n<p>2、在CA上根据客户提交的serial以及subject信息，比对服务器上index.txt文件中的信息一致后，执行吊销证书操作</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># pwd</span></span><br><span class=\"line\">/etc/pki/CA</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># openssl x509 -in certs/qa.ops.com.crt -noout -serial -subject</span></span><br><span class=\"line\">serial=03</span><br><span class=\"line\">subject= /C=CN/ST=ZheJiang/O=ZTYC/OU=ops/CN=qa.ops.com/emailAddress=ops@ztyc.com</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># cat index.txt</span></span><br><span class=\"line\"></span><br><span class=\"line\">V\t291215081847Z\t\t03\tunknown\t/C=CN/ST=ZheJiang/O=ZTYC/OU=ops/CN=qa.ops.com/emailAddress=ops@ztyc.com</span><br></pre></td></tr></table></figure>\n\n<p>3、信息确认一致，正式执行吊销操作</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># openssl ca -revoke newcerts/03.pem </span></span><br><span class=\"line\">Using configuration from /etc/pki/tls/openssl.cnf</span><br><span class=\"line\">Revoking Certificate 03.</span><br><span class=\"line\">Data Base Updated</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>4、生成吊销证书的编号（第一次吊销证书时才需要执行本操作)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># pwd</span></span><br><span class=\"line\">/etc/pki/CA</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># echo 01 &gt; crlnumber</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># openssl ca -gencrl -out crl/qa.ops.com.csr </span></span><br><span class=\"line\">Using configuration from /etc/pki/tls/openssl.cnf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># openssl crl -in crl/qa.ops.com.csr -noout -text</span></span><br><span class=\"line\">Certificate Revocation List (CRL):</span><br><span class=\"line\">        Version 2 (0x1)</span><br><span class=\"line\">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class=\"line\">        Issuer: /C=CN/ST=ZheJiang/L=HangZhou/O=ZTYC/OU=ztyc</span><br><span class=\"line\">        Last Update: Dec 18 08:32:01 2019 GMT</span><br><span class=\"line\">        Next Update: Jan 17 08:32:01 2020 GMT</span><br><span class=\"line\">        CRL extensions:</span><br><span class=\"line\">            X509v3 CRL Number: </span><br><span class=\"line\">                1</span><br><span class=\"line\">Revoked Certificates:</span><br><span class=\"line\">    Serial Number: 01</span><br><span class=\"line\">        Revocation Date: Dec 18 08:29:24 2019 GMT</span><br><span class=\"line\">    Serial Number: 03</span><br><span class=\"line\">        Revocation Date: Dec 18 08:29:31 2019 GMT</span><br><span class=\"line\">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class=\"line\">         5e:68:d9:a1:ef:1d:7f:83:23:a4:57:95:19:1b:7a:36:82:cc:</span><br><span class=\"line\">         3a:2a:73:d8:1d:77:03:1a:e5:fd:5d:40:a8:e2:0a:af:34:d7:</span><br><span class=\"line\">         04:e5:7e:a8:c6:58:36:34:33:d7:79:bf:e0:07:29:f3:72:5b:</span><br><span class=\"line\">         e8:5d:f4:06:ba:e3:1f:00:2e:f5:4b:47:18:7c:e1:0d:00:3e:</span><br><span class=\"line\">         2e:13:eb:57:06:be:7f:48:5a:13:ef:62:cc:1e:92:76:22:f3:</span><br><span class=\"line\">         c2:6b:d0:12:e0:26:4c:33:be:fe:fd:14:de:77:da:6a:20:ce:</span><br><span class=\"line\">         f5:41:6e:e7:f1:e0:5d:d1:4f:91:e3:97:49:0d:a4:c9:0d:c4:</span><br><span class=\"line\">         <span class=\"built_in\">cd</span>:3a:51:5f:31:5b:ed:<span class=\"built_in\">fc</span>:55:9f:6b:9c:72:c9:7d:92:25:7b:</span><br><span class=\"line\">         e8:ec:e0:96:b6:98:96:ac:b7:63:40:d5:ec:b7:09:74:e9:c0:</span><br><span class=\"line\">         96:b6:2c:55:4b:de:fa:fa:2c:74:2e:f8:96:2e:4f:bc:5f:d2:</span><br><span class=\"line\">         0b:15:1a:6d:1f:e7:1e:8b:d3:af:51:d6:ca:2d:90:9f:9f:03:</span><br><span class=\"line\">         c2:da:03:f7:0f:a5:6a:e4:f7:3d:25:a1:06:05:c4:de:5e:62:</span><br><span class=\"line\">         5e:a5:7d:25:7e:9c:16:82:7f:21:28:d0:a3:d6:5c:e7:26:48:</span><br><span class=\"line\">         03:e0:93:84:fb:f3:b3:0a:d9:e6:35:3e:ae:d7:9f:65:b5:b6:</span><br><span class=\"line\">         fa:6a:69:67</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"四、在浏览器中访问\"><a href=\"#四、在浏览器中访问\" class=\"headerlink\" title=\"四、在浏览器中访问\"></a>四、在浏览器中访问</h2><p>在浏览器中打开https://<domain_name>来访问。</p>\n<p>在Firefox浏览器中可以添加 Security Exception 来忽略HTTPS错误警告。</p>\n<p>Chrome浏览器可以尝试通过导入CA证书的方式来忽略HTTPS错误警告。</p>\n<blockquote>\n<p>注意：Chrome 浏览器可能有导入CA证书后仍然无法访问的问题；不同浏览器对自签名SSL证书的检查和限制也有所区别。</p>\n</blockquote>\n<h2 id=\"五、脚本\"><a href=\"#五、脚本\" class=\"headerlink\" title=\"五、脚本\"></a>五、脚本</h2><h3 id=\"一、结合上面文档使用\"><a href=\"#一、结合上面文档使用\" class=\"headerlink\" title=\"一、结合上面文档使用\"></a>一、结合上面文档使用</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash -e</span></span><br><span class=\"line\"></span><br><span class=\"line\">SSL_IP=&#x27;&#x27;</span><br><span class=\"line\">SSL_DNS=&#x27;wms.qa.ztocwst.com&#x27;</span><br><span class=\"line\">CN=$&#123;SSL_DNS&#125;</span><br><span class=\"line\">SSL_SIZE=2048</span><br><span class=\"line\"></span><br><span class=\"line\">DATE=$&#123;DATE:-3650&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">SSL_CONFIG=&#x27;openssl.cnf&#x27;</span><br><span class=\"line\">SSL_SUBJECT=&quot;/C=CN/ST=ZheJiang/L=HangZhou/O=ZTYC/OU=ops/CN=$&#123;CN&#125;/emailAddress=ops@ztyc.com&quot;</span><br><span class=\"line\">CA_DIR=&#x27;/etc/pki/CA&#x27;</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -z $SILENT ]]; then</span><br><span class=\"line\">echo &quot;----------------------------&quot;</span><br><span class=\"line\">echo &quot;| SSL Cert Generator |&quot;</span><br><span class=\"line\">echo &quot;----------------------------&quot;</span><br><span class=\"line\">echo</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">export SSL_DNS=$&#123;SSL_DNS&#125;</span><br><span class=\"line\">export SSL_IP=$&#123;SSL_IP&#125;</span><br><span class=\"line\">export SSL_KEY=$CN.key</span><br><span class=\"line\">export SSL_CSR=$CN.csr</span><br><span class=\"line\">export SSL_SUBJECT=$&#123;SSL_SUBJECT&#125;</span><br><span class=\"line\">export CA_DIR=$&#123;CA_DIR&#125;</span><br><span class=\"line\">export SSL_CERT=$CN.crt</span><br><span class=\"line\">export SSL_PEM=$CN.pem</span><br><span class=\"line\"></span><br><span class=\"line\">dir=$(pwd)</span><br><span class=\"line\">echo -e &quot;The current working directory is \\033[36m $&#123;dir&#125; \\033[0m&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;====&gt; Generating new config file $&#123;SSL_CONFIG&#125;&quot;</span><br><span class=\"line\">cat &gt; $&#123;SSL_CONFIG&#125; &lt;&lt;EOM</span><br><span class=\"line\">[req]</span><br><span class=\"line\">req_extensions = v3_req</span><br><span class=\"line\">distinguished_name = req_distinguished_name</span><br><span class=\"line\">[req_distinguished_name]</span><br><span class=\"line\">[ v3_req ]</span><br><span class=\"line\">basicConstraints = CA:FALSE</span><br><span class=\"line\">keyUsage = nonRepudiation, digitalSignature, keyEncipherment</span><br><span class=\"line\">extendedKeyUsage = clientAuth, serverAuth</span><br><span class=\"line\">EOM</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -n $&#123;SSL_DNS&#125; || -n $&#123;SSL_IP&#125; ]]; then</span><br><span class=\"line\">cat &gt;&gt; $&#123;SSL_CONFIG&#125; &lt;&lt;EOM</span><br><span class=\"line\">subjectAltName = @alt_names</span><br><span class=\"line\">[alt_names]</span><br><span class=\"line\">EOM</span><br><span class=\"line\">    IFS=&quot;,&quot;</span><br><span class=\"line\">    dns=($&#123;SSL_DNS&#125;)</span><br><span class=\"line\">    for i in &quot;$&#123;!dns[@]&#125;&quot;; do</span><br><span class=\"line\">      echo DNS.$((i+1)) = $&#123;dns[$i]&#125; &gt;&gt; $&#123;SSL_CONFIG&#125;</span><br><span class=\"line\">    done</span><br><span class=\"line\"></span><br><span class=\"line\">    if [[ -n $&#123;SSL_IP&#125; ]]; then</span><br><span class=\"line\">        ip=($&#123;SSL_IP&#125;)</span><br><span class=\"line\">        for i in &quot;$&#123;!ip[@]&#125;&quot;; do</span><br><span class=\"line\">          echo IP.$((i+1)) = $&#123;ip[$i]&#125; &gt;&gt; $&#123;SSL_CONFIG&#125;</span><br><span class=\"line\">        done</span><br><span class=\"line\">    fi</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new SSL KEY $&#123;SSL_KEY&#125;&quot;</span><br><span class=\"line\">echo -e &quot;\\033[36m openssl genrsa -out $&#123;SSL_KEY&#125; $&#123;SSL_SIZE&#125; \\033[0m&quot;</span><br><span class=\"line\">openssl genrsa -out $&#123;SSL_KEY&#125; $&#123;SSL_SIZE&#125; &gt; /dev/null || exit 1</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new SSL CSR $&#123;SSL_CSR&#125;&quot;</span><br><span class=\"line\">echo -e &quot;\\033[36m openssl req -sha256 -new -key $&#123;SSL_KEY&#125; -out $&#123;SSL_CSR&#125; -subj \\&quot;$&#123;SSL_SUBJECT&#125;\\&quot; -config $&#123;SSL_CONFIG&#125; \\033[0m&quot;</span><br><span class=\"line\">openssl req -sha256 -new -key $&#123;SSL_KEY&#125; -out $&#123;SSL_CSR&#125; \\</span><br><span class=\"line\">-subj &quot;$&#123;SSL_SUBJECT&#125;&quot; -config $&#123;SSL_CONFIG&#125; &gt; /dev/null || exit 1</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new SSL CERT $&#123;SSL_CERT&#125;&quot;</span><br><span class=\"line\">\\cp $&#123;SSL_CSR&#125; $&#123;CA_DIR&#125;/crl</span><br><span class=\"line\">cd $&#123;CA_DIR&#125;</span><br><span class=\"line\">echo -e &quot;The current working directory is \\033[36m $(pwd)\\033[0m&quot;</span><br><span class=\"line\">echo -e &quot;\\033[36m openssl ca -in crl/$&#123;SSL_CSR&#125; -out certs/$&#123;SSL_CERT&#125;  -days $&#123;DATE&#125; \\033[0m&quot;</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">openssl ca -<span class=\"keyword\">in</span> crl/<span class=\"variable\">$&#123;SSL_CSR&#125;</span> -out certs/<span class=\"variable\">$&#123;SSL_CERT&#125;</span>  -days <span class=\"variable\">$&#123;DATE&#125;</span>  || <span class=\"built_in\">exit</span> 1</span></span><br><span class=\"line\">/usr/bin/expect &lt;&lt;END</span><br><span class=\"line\">  spawn openssl ca -in crl/$&#123;SSL_CSR&#125; -out certs/$&#123;SSL_CERT&#125;  -days $&#123;DATE&#125;</span><br><span class=\"line\">  expect &#123;</span><br><span class=\"line\">    &quot;*y/n]:&quot; &#123;send &quot;y\\r&quot;;exp_continue&#125;</span><br><span class=\"line\">    &quot;*y/n]&quot; &#123;send &quot;y\\r&quot;;exp_continue&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">END</span><br><span class=\"line\">\\cp certs/$&#123;SSL_CERT&#125; $&#123;dir&#125;</span><br><span class=\"line\">cd $&#123;dir&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">echo -e &quot;The current working directory is \\033[36m $(pwd)\\033[0m&quot;</span><br><span class=\"line\">echo -e &quot;\\033[36m openssl x509 -in $&#123;SSL_CERT&#125; -out $&#123;SSL_PEM&#125; -outform PEM \\033[0m&quot;</span><br><span class=\"line\">openssl x509 -in $&#123;SSL_CERT&#125;  -out $&#123;SSL_PEM&#125; -outform PEM</span><br><span class=\"line\">ls</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -z $SILENT ]]; then</span><br><span class=\"line\">echo &quot;====&gt; Complete&quot;</span><br><span class=\"line\">echo -e &quot;keys can be found in volume mapped to \\033[36m $(pwd)\\033[0m&quot;</span><br><span class=\"line\">echo</span><br><span class=\"line\">echo &quot;====&gt; Output results as YAML&quot;</span><br><span class=\"line\">openssl x509 -in $&#123;SSL_CERT&#125; -noout -text</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"二、独立使用\"><a href=\"#二、独立使用\" class=\"headerlink\" title=\"二、独立使用\"></a>二、独立使用</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash -e</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> * 为必改项</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> * 更换为你自己的域名</span></span><br><span class=\"line\">CN=&#x27;&#x27; # 例如: demo.rancher.com</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 扩展信任IP或域名</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># 一般ssl证书只信任域名的访问请求，有时候需要使用ip去访问server，那么需要给ssl证书添加扩展IP，</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># 多个IP用逗号隔开。如果想多个域名访问，则添加扩展域名（SSL_DNS）,多个SSL_DNS用逗号隔开</span></span></span><br><span class=\"line\">SSL_IP=&#x27;&#x27; # 例如: 1.2.3.4</span><br><span class=\"line\">SSL_DNS=&#x27;&#x27; # 例如: demo.rancher.com</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 国家名(2个字母的代号)</span></span><br><span class=\"line\">C=CN</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 证书加密位数</span></span><br><span class=\"line\">SSL_SIZE=2048</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 证书有效期</span></span><br><span class=\"line\">DATE=$&#123;DATE:-3650&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 配置文件</span></span><br><span class=\"line\">SSL_CONFIG=&#x27;openssl.cnf&#x27;</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -z $SILENT ]]; then</span><br><span class=\"line\">echo &quot;----------------------------&quot;</span><br><span class=\"line\">echo &quot;| SSL Cert Generator |&quot;</span><br><span class=\"line\">echo &quot;----------------------------&quot;</span><br><span class=\"line\">echo</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">export CA_KEY=$&#123;CA_KEY-&quot;cakey.pem&quot;&#125;</span><br><span class=\"line\">export CA_CERT=$&#123;CA_CERT-&quot;cacerts.pem&quot;&#125;</span><br><span class=\"line\">export CA_SUBJECT=ca-$CN</span><br><span class=\"line\">export CA_EXPIRE=$&#123;DATE&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">export SSL_CONFIG=$&#123;SSL_CONFIG&#125;</span><br><span class=\"line\">export SSL_KEY=$CN.key</span><br><span class=\"line\">export SSL_CSR=$CN.csr</span><br><span class=\"line\">export SSL_CERT=$CN.crt</span><br><span class=\"line\">export SSL_EXPIRE=$&#123;DATE&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">export SSL_SUBJECT=$&#123;CN&#125;</span><br><span class=\"line\">export SSL_DNS=$&#123;SSL_DNS&#125;</span><br><span class=\"line\">export SSL_IP=$&#123;SSL_IP&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">export K8S_SECRET_COMBINE_CA=$&#123;K8S_SECRET_COMBINE_CA:-&#x27;true&#x27;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;--&gt; Certificate Authority&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -e ./$&#123;CA_KEY&#125; ]]; then</span><br><span class=\"line\">    [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Using existing CA Key $&#123;CA_KEY&#125;&quot;</span><br><span class=\"line\">else</span><br><span class=\"line\">    [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new CA key $&#123;CA_KEY&#125;&quot;</span><br><span class=\"line\">    openssl genrsa -out $&#123;CA_KEY&#125; $&#123;SSL_SIZE&#125; &gt; /dev/null</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -e ./$&#123;CA_CERT&#125; ]]; then</span><br><span class=\"line\">    [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Using existing CA Certificate $&#123;CA_CERT&#125;&quot;</span><br><span class=\"line\">else</span><br><span class=\"line\">    [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new CA Certificate $&#123;CA_CERT&#125;&quot;</span><br><span class=\"line\">    openssl req -x509 -sha256 -new -nodes -key $&#123;CA_KEY&#125; \\</span><br><span class=\"line\">    -days $&#123;CA_EXPIRE&#125; -out $&#123;CA_CERT&#125; -subj &quot;/CN=$&#123;CA_SUBJECT&#125;&quot; &gt; /dev/null || exit 1</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;====&gt; Generating new config file $&#123;SSL_CONFIG&#125;&quot;</span><br><span class=\"line\">cat &gt; $&#123;SSL_CONFIG&#125; &lt;&lt;EOM</span><br><span class=\"line\">[req]</span><br><span class=\"line\">req_extensions = v3_req</span><br><span class=\"line\">distinguished_name = req_distinguished_name</span><br><span class=\"line\">[req_distinguished_name]</span><br><span class=\"line\">[ v3_req ]</span><br><span class=\"line\">basicConstraints = CA:FALSE</span><br><span class=\"line\">keyUsage = nonRepudiation, digitalSignature, keyEncipherment</span><br><span class=\"line\">extendedKeyUsage = clientAuth, serverAuth</span><br><span class=\"line\">EOM</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -n $&#123;SSL_DNS&#125; || -n $&#123;SSL_IP&#125; ]]; then</span><br><span class=\"line\">    cat &gt;&gt; $&#123;SSL_CONFIG&#125; &lt;&lt;EOM</span><br><span class=\"line\">subjectAltName = @alt_names</span><br><span class=\"line\">[alt_names]</span><br><span class=\"line\">EOM</span><br><span class=\"line\">    IFS=&quot;,&quot;</span><br><span class=\"line\">    dns=($&#123;SSL_DNS&#125;)</span><br><span class=\"line\">    dns+=($&#123;SSL_SUBJECT&#125;)</span><br><span class=\"line\">    for i in &quot;$&#123;!dns[@]&#125;&quot;; do</span><br><span class=\"line\">      echo DNS.$((i+1)) = $&#123;dns[$i]&#125; &gt;&gt; $&#123;SSL_CONFIG&#125;</span><br><span class=\"line\">    done</span><br><span class=\"line\"></span><br><span class=\"line\">    if [[ -n $&#123;SSL_IP&#125; ]]; then</span><br><span class=\"line\">        ip=($&#123;SSL_IP&#125;)</span><br><span class=\"line\">        for i in &quot;$&#123;!ip[@]&#125;&quot;; do</span><br><span class=\"line\">          echo IP.$((i+1)) = $&#123;ip[$i]&#125; &gt;&gt; $&#123;SSL_CONFIG&#125;</span><br><span class=\"line\">        done</span><br><span class=\"line\">    fi</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new SSL KEY $&#123;SSL_KEY&#125;&quot;</span><br><span class=\"line\">openssl genrsa -out $&#123;SSL_KEY&#125; $&#123;SSL_SIZE&#125; &gt; /dev/null || exit 1</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new SSL CSR $&#123;SSL_CSR&#125;&quot;</span><br><span class=\"line\">openssl req -sha256 -new -key $&#123;SSL_KEY&#125; -out $&#123;SSL_CSR&#125; \\</span><br><span class=\"line\">-subj &quot;/CN=$&#123;SSL_SUBJECT&#125;&quot; -config $&#123;SSL_CONFIG&#125; &gt; /dev/null || exit 1</span><br><span class=\"line\"></span><br><span class=\"line\">[[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Generating new SSL CERT $&#123;SSL_CERT&#125;&quot;</span><br><span class=\"line\">openssl x509 -sha256 -req -in $&#123;SSL_CSR&#125; -CA $&#123;CA_CERT&#125; \\</span><br><span class=\"line\">    -CAkey $&#123;CA_KEY&#125; -CAcreateserial -out $&#123;SSL_CERT&#125; \\</span><br><span class=\"line\">    -days $&#123;SSL_EXPIRE&#125; -extensions v3_req \\</span><br><span class=\"line\">    -extfile $&#123;SSL_CONFIG&#125; &gt; /dev/null || exit 1</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -z $SILENT ]]; then</span><br><span class=\"line\">echo &quot;====&gt; Complete&quot;</span><br><span class=\"line\">echo &quot;keys can be found in volume mapped to $(pwd)&quot;</span><br><span class=\"line\">echo</span><br><span class=\"line\">echo &quot;====&gt; Output results as YAML&quot;</span><br><span class=\"line\">echo &quot;---&quot;</span><br><span class=\"line\">echo &quot;ca_key: |&quot;</span><br><span class=\"line\">cat $CA_KEY | sed &#x27;s/^/  /&#x27;</span><br><span class=\"line\">echo</span><br><span class=\"line\">echo &quot;ca_cert: |&quot;</span><br><span class=\"line\">cat $CA_CERT | sed &#x27;s/^/  /&#x27;</span><br><span class=\"line\">echo</span><br><span class=\"line\">echo &quot;ssl_key: |&quot;</span><br><span class=\"line\">cat $SSL_KEY | sed &#x27;s/^/  /&#x27;</span><br><span class=\"line\">echo</span><br><span class=\"line\">echo &quot;ssl_csr: |&quot;</span><br><span class=\"line\">cat $SSL_CSR | sed &#x27;s/^/  /&#x27;</span><br><span class=\"line\">echo</span><br><span class=\"line\">echo &quot;ssl_cert: |&quot;</span><br><span class=\"line\">cat $SSL_CERT | sed &#x27;s/^/  /&#x27;</span><br><span class=\"line\">echo</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">if [[ -n $K8S_SECRET_NAME ]]; then</span><br><span class=\"line\"></span><br><span class=\"line\">  if [[ -n $K8S_SECRET_COMBINE_CA ]]; then</span><br><span class=\"line\">    [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Adding CA to Cert file&quot;</span><br><span class=\"line\">    cat $&#123;CA_CERT&#125; &gt;&gt; $&#123;SSL_CERT&#125;</span><br><span class=\"line\">  fi</span><br><span class=\"line\"></span><br><span class=\"line\">  [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Creating Kubernetes secret: $K8S_SECRET_NAME&quot;</span><br><span class=\"line\">  kubectl delete secret $K8S_SECRET_NAME --ignore-not-found</span><br><span class=\"line\"></span><br><span class=\"line\">  if [[ -n $K8S_SECRET_SEPARATE_CA ]]; then</span><br><span class=\"line\">    kubectl create secret generic \\</span><br><span class=\"line\">    $K8S_SECRET_NAME \\</span><br><span class=\"line\">    --from-file=&quot;tls.crt=$&#123;SSL_CERT&#125;&quot; \\</span><br><span class=\"line\">    --from-file=&quot;tls.key=$&#123;SSL_KEY&#125;&quot; \\</span><br><span class=\"line\">    --from-file=&quot;ca.crt=$&#123;CA_CERT&#125;&quot;</span><br><span class=\"line\">  else</span><br><span class=\"line\">    kubectl create secret tls \\</span><br><span class=\"line\">    $K8S_SECRET_NAME \\</span><br><span class=\"line\">    --cert=$&#123;SSL_CERT&#125; \\</span><br><span class=\"line\">    --key=$&#123;SSL_KEY&#125;</span><br><span class=\"line\">  fi</span><br><span class=\"line\"></span><br><span class=\"line\">  if [[ -n $K8S_SECRET_LABELS ]]; then</span><br><span class=\"line\">    [[ -z $SILENT ]] &amp;&amp; echo &quot;====&gt; Labeling Kubernetes secret&quot;</span><br><span class=\"line\">    IFS=$&#x27; \\n\\t&#x27; # We have to reset IFS or label secret will misbehave on some systems</span><br><span class=\"line\">    kubectl label secret \\</span><br><span class=\"line\">      $K8S_SECRET_NAME \\</span><br><span class=\"line\">      $K8S_SECRET_LABELS</span><br><span class=\"line\">  fi</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">echo &quot;4. 重命名服务证书&quot;</span><br><span class=\"line\">mv $&#123;CN&#125;.key tls.key</span><br><span class=\"line\">mv $&#123;CN&#125;.crt tls.crt</span><br></pre></td></tr></table></figure>\n\n"},{"title":"pipenv使用","date":"2019-12-13T06:00:00.000Z","_content":"\n## github\n\n```\nhttps://github.com/yahoo/kafka-manager/releases\n```\n\n## 简介\n\nkafka-manager是最受欢迎的kafka集群管理工具，有如下功能：\n\n- 管理多个集群\n- 轻松检查群集状态（主题，消费者，偏移，代理，副本分发，分区分发）\n- 运行首选副本选举\n- 使用选项生成分区分配以选择要使用的代理\n- 运行分区重新分配（基于生成的分配）\n- 使用可选主题配置创建主题（0.8.1.1具有与0.8.2+不同的配置）\n- 删除主题（仅支持0.8.2+并记住在代理配置中设置delete.topic.enable = true）\n- 主题列表现在指示标记为删除的主题（仅支持0.8.2+）\n- 批量生成多个主题的分区分配，并可选择要使用的代理\n- 批量运行重新分配多个主题的分区\n- 将分区添加到现有主题\n- 更新现有主题的配置\n- 可随意开启对broker级别或者对topic级别的JMX轮询\n- 可方便的过滤出没有id 、所有者、延迟或目录等的消费者\n\n## 安装和配置\n\n```\ncurl https://github.com/yahoo/kafka-manager/archive/2.0.0.2.tar.gz\ncurl https://bintray.com/sbt/rpm/rpm > bintray-sbt-rpm.repo\nmv bintray-sbt-rpm.repo /etc/yum.repos.d/\nyum install sbt\nsbt -version\ntar xf 2.0.0.2.tar.gz\ncd kafka-manager-2.0.0.2/\n./sbt clean dist     # 会编译很久\ncd /usr/local/kafka-manager/target/universal/\ncp kafka-manager-2.0.0.2.zip /usr/local/\nunzip kafka-manager-2.0.0.2.zip \ncd kafka-manager-2.0.0.2\n########修改kafka-manager.zkhosts\nconf/application.conf \n---------\nkafka-manager.zkhosts=\"172.19.168.92:2181,172.19.152.247:2181,172.19.152.245:2181\"\n---------\n```\n\n## 启动\n\n```\nnohub /usr/local/kafka-manager2/bin/kafka-manager &\n```\n\n\n## kafka-manager 添加集群\n\n![image][kafka-maager01]\n\n\n\n\n## 图片\n\n[kafka-maager01]:data:image/jpg;base64,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kfBiiIhmFkpO9dgQhFoQaMbNS1fs2+2f/wB865clXB2VqbXsKOQsa0JUDPUrDpmeBBH3yIPcAsywrs1+qeVCsRv5yxdeFfHAjFS/vD/ZXf7B/wCmrP8A4m/ovCLzaT/1Jf3h89S//wASayJtWRxcFbyeVPgMl3gYzAg1j+nd/sH/AKaNB5w4bSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRTFNux3+LtQN6pOtZBiKYexCwlAVY4EAUQAgKH9O3F5amjpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJP8AcG9G/wBkT3F/01ObQbl9zrc63Otzrc63Otzrc63Otzrc63Otzrc63Otzrc63Otzrc63OpT7mdn7pLumu6a7prumu6a7prumu6a7prumu6a7prumu6a7prumou7OzvudbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udMVnfh/ph/7i+6y/wCPpp/7i/oW79KlMcLnxi8vRywzTx8pNGDyfE5WlmKLXMareWxlIrCuZDN43G1A2rn2SX/H00/9xf6Hdos7vF2kzO3x1XTL1bn81o6TyzZjpalfcPWp7xzTxP8ADC0FsHmbbi61PeAa3V/hP/6OJfxCzVjDdOc0cT0BhK1JmyPX+Nq4jpTE0aN3P+J1djsGspn/AAOpcViVf6qO2ZPi8H11lss3QzlD05mjg6Ta3m362tAAO/ez/WAMJlqNUvT2Ts5bGvat/XJf8fTT/wBxf6OsqWTu4zjHdL08rUCX8qs1kYYnC275ej8B1M+Ea/T6RDbxdrqLpE3QXUmIxvSUKN/pMJ7/AEB1QKt0z1Vhg9D1gP8Awn/9HEv4kYezlenGnQxX8QcBboQJb6/yVXL9KYm9R6tOLF/xHwGSu5bLU8p/E7p3wOpAYWGUu5TG5S/ezX8Gj3buaMLOfwo0YkNXpfJYOD3MxTCD+InSVT69L/j6af8AuL/Xaq17gJAtiHAQojE9Go95rrvjaD3vNerTq02m1OOMx8LcrcKlStSBopKxh8VaPvs2KNO0GArNqpWuAcNyOMoQmCcD4fF2LPkWHhGUHhKnQpUGm1FsNimteUxKdUtsVov12X/H00/9xfdZf8fTT/3F91l/x9NsPw4l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9k8mfhvps/cf3Uvo302fuP7qX0b6bP3H8nymPq24VbIyQI82H/oFZrmgSYRzgQcSD+1F9G+mz9x/PTnjPhiuWraLXyvZAl3I2w22o1O+z1FQuBwl/M29Ns3Tz2i4SrZuAf8AF463kVbvWgYCm1C/fyc4X7NYt3I418n34E2VnZfzPs5fRvps/cfyfFY6xchcOehTsAKCwXEYw1bxjTp1ZlASYsVjg3CWwiHAQojF4wNEwI+JxtpwvZepWeBIvqGxdrUsXj6E5yofZy+jfTZ+4/h3Zmd32yf+2ya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TW2a2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWyagTv5b4L6N9Nn7j+LH7Yv8AgjWgAKEZg2QHIUYvhjDcutq1kFobkrznEQ5TnWsCtAgeuj2A1h99h7ldrzU/osf3JPgvo302fuP4sfti/wCBnJoweT2HNLqkZblCxB8nlXnhmi+LiUVpx/lbg3/nSweOuTwnbDcAPUZCWaRBRyVoLABUxFGp4WNFVVlgP1PBlGGi4XJnoBuwtWi2vocf3JPgvo302fuP4sfti/4F+eHdsn/+ax+Tu4cjzPbmagMtPdGdQtt8tmiTvmtG6UGSdedvdPfm8hcFQnKhjcUWhCc2wl81zGlsWSY2Z84YxzjMRmvHxdsr3bePsfQ4/uSfBfRvps/cfwaPeGcG3N/zvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8VvipGbtdojrV2s+QWFGrqtCPjaUMe5OwuPrFu2rEzUwkxEKEWNBZMA8hQlWfRX4WLrBx1RwCmAU8k1uVym1u7XK7FHzyt8Fvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8Vvit8UP+ZZz+C+jfTZ+4/upfRvps/cf3Uvo302fuP5Hkr1ubkoVMiM5jjmfIUqwCGsRzuMllAUICyNE9o1YNW5VuNOVSeRywslWqk/JUPP8AAT5Kg19qLgyYZktRO2QpPfeiw79It0lMQMnQs2dFcd+kW6SmKpeqXO/xBZLZQu2VPL0a9KvYv2chRqTDC2DO4w9u9XhUt1roGPT+vF9G+mz9x/NB7+MFHHuWjeBZ8yD07zgMYgQZGGSoHs4TE3gOAFvB1p0sBRrExZ8g18x7sKN3Q+Md6N3QXGIONvVeo7ORehibocmwrOGxN2tcqiudNgOfEYEUMNibta5UDc6dqTo9O0apn6apnpZKdyALlC5Cy347IUhURU7NM+/MwnhWu+E/n/Xi+jfTZ+4/64hDAKIg/ZS+jfTZ+4/gkuwU5rXP/nXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNa5rXNDeTElCSL6N9Nn7j+LH7YvzGcHJIbSnGMotI5w1huSxAo5iYsC2q4AMY20Wjd8TJAbN3nsgrD2WYThODThXt1rfd4sZxd5s1e3WtNJ60Zxm8mihkgQbThWt1rXc9WVutCzGvOU4xlFpPbrNZas7zi02g5CjF/Mu8WqJVIsIEgOW0e7Sto2MwnBfp2SuKuG9TMxHDWuVbfd4oiDKzyFC7UJZevAF+nYK4q/+7acHnKDEshCYQiKFoE7Ra0D2g1nHv8A8dH9yT4L6N9Nn7j+LH7YvxlnN/8AUOoYxg52ddroBxzWOOpHYPc8zY9o4E4rUmlP8RAJwBL0lYaZijgCUZ2pWx4wdkwLfFIBZVw+CAAj1Rys3XuuMYKlDOQakKQ8iwz4iIKfnwaG8uXlpwFiRa0RmfvFkrETWm853pgvAG2axx0VuZ2TscA4dR1DNf8A/wBDZEqNzRrVqj5Ehz3TnBdmz5eGRBTffnwXligFNgGFasFLCpcpWpvaDVa+RnPTq3qoqrVGqgat061lsYByf1G6hw0nZmsWA1guaxWsgtAY1b8hSa41RWpHh1FRaNXIUrhSCqvfpNc8RznDWBIx4Xqk6b2oRyuPkUQ4nOGsCRTwvVJ03tQbL416flqMmkzPF3Zmd3rXgQ6hvyenemeeGdsNePepmMepZNDqjLzhcyIboqFhqt+pbMYVZn/xsf3JPgvo302fuP4sfti/FmjTtSaVrxKzicb6hu8OTUahoPEwatcAHCEtWucDBNpFo0ItSuZ5OYNCkBnYBMdRKz7YUqkBsOFfH0qxNlaEIRebxr1K1Xu8WdcM2lF2x1GJ97eJWfs5FRqBDMQSYygUjkK44SlCUnqVpWWsu44POM3DVGGs4FMIpxjGYxwEzsMdcA/5DYImeDtDG0BvJxhpVACmMEhDk0GeQ4SnGchUagjyOIFClXLtB/Tl/OLoQq1s8BQOzG6vqQMbaDP5JqGim3QCtzvTsYZ4Yaxsw5mhUBkbvRsAwycrv5/FQbF1rcMzesHxoarfwy5mcl+eUwsXxNe5DNXbJ8XRBaPlms1girVxgAhGqv1HkRloQM4MVMGAjOrTMG3jbcC9T5UtbH/zoUUzN/jo/uSfBfRvps/cfxKLShKLtEzfybgy4MuDLgy4MuDLgy4MuDLgy4MuDLtMuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDKcCyi7O3S1Bq2hrePhdhGFinQjShKNdsHV3bEbFjPfDcKDFCBkTXhtha+9zNdoNeG0LAqZKVUkaWD6b0YwAMhcoNdHGFgONgGsQI6WDBRO563BkQRCjlCdKgOhWYFOGBsiZ4VqOGnVuGtFapMVeAKwsA4hCHCrTsgOYk+0y4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDIcHZ3lJF9G+mz9x/dS+jfTZ+4/upfRvps/cfzgey3fepf8AzVr8+KnAJnxNKhk7uTv36VEDO3Gf6Vg7vl52QAuGbP5GFG+Wd+9lKRa7HNkTCvXgVD5TJ1GNWLirVwh7tW/9nL6N9Nn7j+ZYmjIEAuLBUA3IWoRxtOMAQb8BjdQBtVrBp1A1a4MZSA9xxCwlEVU9ZXMVUunYlk2KpHjYYosRREDUw64hnMeH2cvo302fuP5c4W/k+8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8KjKM25ii+jfTZ+4/ix/KsV2Zmi3Df5cpYBFIhRWhlsGFC9lKND92EkDCiSFk8KtUpyVbELdUVgX+Sj/ACskZkX0b6bP3H8WP2xfgknjCTxp3TkuEqXL16zTnse/bnW0wBj7b2xT7/8AF0iDo38zMkMpUlj/ADnqZSpbPpFmsqJ8jWovdqOLAEIz5KtC/Ci58vSrnmGfUphH6OvmBkYXR18kRwXfAwZTsBznoDkTq056eGIIOC2mxYgKoGVerAM/8hi+p62SzJsYKP7knwX0b6bP3H8WP2xfi3I0KZp1qT2gisma09suTfybsbk7IrMMWAooHKf/ABdwN0+Ry708rlwEwdQ9aXIOpqHk33j+osWupndsCbtoFNSzRal+sed61lJiH2G6AYCz9ULX5iBmTwhl/GRTjEHve+A71b9640Mi9HF2cZjrJrVOBbH+QBQrV71m4KP7knwX0b6bP3H8WG5rFZmdpNy3+QDjaIDFKEOMoAqzrBhiseMQxwPhMXaPI1ixjqVoEAWS4yiWYZFJjqRbcbRI4+rDhhHqCPOE5wqAjWeu1CjXx9WNepdB5VI9d6YGq0wgb/JR/nZI7Ivo302fuP5cAX/m+gK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgK0BWgKjGMG4ii+jfTZ+4/upfRvps/cfxYJprFKvLsKuTdWEVWctIWSlSB8VLcLU7ER1bY7JbUIK7m61IF8xcnmKmNws8oaWVrjtTCcd6M8V58sdmGungIts8KlM1kg8lApihD8W7AqdUtk88w7TYYUGyIxjiGe4MNwFaWMzFTJYeGSDTz1W3To2oUro7u9w38s9S61URc2Hit4b5oMcbZtvDNTnuE2Hyb5Wm1qP+ks3gKc4xd3izuC3A9qyCA7gyXz1GVS2O1OxEaDfifInqC+bFkVZoOZWrAaladix3y3vD5a2N8jKn8WcyEFg4/wDXetwo0i2is7O3Lf5Mvo302fuP4sic1Uwm8W6qw9NYQlfgAfVhj3cniGP+obb5gRj9RwKGzTE58oz5WpceF126aBoxLsjjNcoZO0K/jbr0sjQWaoWMvMFUJizvdOlKz4e1DAbGapWcN98HaqWXa7xcxDFbL3H6lEDRn3v9RfywM5vnCNCyQtDKUrJs+d7OHo1qnUmYmx+61nxasbjbw6GNpN4pz4CGJWA2ixzUj3aFm11I0xMOGCyW2N4Fi/Ry1sWNAenmLQrfTQiB6ZxwjPRsv1I87L4hmhO81OkZss1KecjYAcN6j1NQcdXwqlnGsUufszz4TGeDQylWs+Ty73MnUyLwyWvpWtoFacVmmNz5Nnv0bJOpDuc2IgJs4UBqQ54zMNiM/i2HdCNigf8ASj17D0AGwEN2VEQ2fEQFvCBPgc1MuUqbq2QahkMXOka+2Hw8KLdUt+Lz9W0TOOZZ+D2r8Hq28R2fny05w14Q9Y/SASgxBBkFUP4uVHiwY7nE34Vb+NeqfxMbk6Bnz52JCpXrTz+QuYkRQYimE/8Aky+jfTZ+4/8AZ2cRTtW953ZnbhwiGAMBB/03sbQyPY1+tWBUBEFX/cGFEwJinQxlWg5Jg/omEI0Ow3+UL6N9Nn7j+6l9G+mz9x/dS+jfTZ+4/nOAayLMgfP3C5Pp0tIvUpHoX2JSHGtj8e0R9PX2/MwdxZawSniSqE8lPBCezibVspbta/jf5NmlWv3KWLwsG/P3J5V4BfL5Vsdbus2SvV/yILoM9fLSNw+UzINsz28/bhljiB9iL6N9Nn7j+HblnZQxNKFRqzExlIjXGnGjWiayVPjqr4v8c9isGxq3CwWOFchZhDE0od/Aq4hHMWFrCULdmZzWsTTtniY74qp573I/jab1pV1axdO25nODDUAQlGBKFUsCwmXE0y3vM+xl9G+mz9x/LnC38n3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hW8K3hUZRm3MUX0b6bP3H8WP5ViuzM0W4b7fH+VkjMi+jfTZ+4/ix+2L9xj+5J8F9G+mz9x/Fj9sX7jH9yT4L6N9Nn7j+LDc1iszO0m5b7fH+dkjsi+jfTZ+4/lwBf+b6ArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaAqMYwbiKL6N9Nn7j+6l9G+mz9x/N/O1MeC6Y+Xy1XE4x71kuVqgsWRWaxnPWGV6WTr3blqsFTylZgQNBTzsIWzjf/VUtwtbtf2Ivo302fuP4d+Gd0cJboLdkd3HXp0L9N87Ts5W/DQa9P8ACTvApY3K4q7jTHq7X/DUXrYkA8U9IOEpQoXMmCvVxM7OSyc7TBMTq6raHVqhankRMIVoGNqWaAcXdDWu0alGrU3znhGxtapjMO1npYGijaZvsRfRvps/cf3Uvo302fuP4nJoDlN2Y7suDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4Mhyl3ShNF9G+mz9x/Fj9sX7jH9yT4L6N9Nn7j+LH7Yv3GP7knwX0b6bP3H8WP2xfuMf3JPgvo302fuP4JHvFOC2T/52TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2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Xujodjvwe7O4+gtxbcaKKKKKKKKKKKKKKKKSNtvpW/BYMcN19Ofoz8RMXxPRRRRRRRRRRRRRRRRRRRX+Vooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooor+5Xqdfj3YSsvh0svF/G6afBbj3SIf8AKXmjebF7sEb5mWlFyI28smktOTHhJjwkx4waeVk0+x0HsmXmvi3ZHi4ak4f8M8LDUj73wirYnbchfonnqJU3ZHOo2aeGK+ZlJxcSNrDJtPTkiWYInmCGubfc0ncqZp+2iJJVpoXf4+WBf7Hp/Wn8d9T7pHWSJbxQtyDtD9xpr9BB2LoX8eriv7nYwlJNpbDhJJNrhk5HVkoShhiTk6RKDg6lwjBy2RyS5easfG6IUvDtR75NSD8qH+vQ1cTpmnfJF09yFamrKCWH/wDRru3bVM8MlCXNeehpRbk9TV2W5OfPJyI35HupWN80Vprpk1JQcEorPV/Gyo0f1Ly4mulFRUZWkuxN87u8mooeXppfk0IxXiaT7klHozwulCeolNmtrLVdVjsa+moTUYi8Qo6KglaT/wC5GSX6EtkzVguVTXX42/6j1XVLCHrStNdDV1nqdMi12oxj2IazjqeYdTR1XpTU10Od3Zq6z1Z2xalR5SGsoxarLLdZ/Yb61wb24vjeWuL4/dQneT8lC+L2VlsW7KymdSCwMYxrLY+DHw+4isI+39j1fR149f4PS/o6m/8AQKdChJptLbg9OSiptYZGLldL4F6i3Ii7Edh+1i2ELIt2dj7uPVcX1Op1NojXQbwjqIjuRERF/F9Pq1dMUHJ0iUHF00eXOro01GWjNtZVD05Qy0eXKrSIxbdJHlzTprJ5U0raFGUnSPLknT3PJ1L5ayVTpiyyenLyIf6k9JQWotlg1dNQlSZqQi/D6a5u5DSlByj+CWnOCTl1+BV/EX8Rf5BDcoRv75f+CNrQbXfInelHn7nPP1JpKChq3tg1YVqq/a//AIJyhp+Iu3j8GlyeVN3WTUnHkjHejXlP1glBaeo06yasovTjFO6NbUlGMa7DlzO3wnGS0NNr8mtKKlqJvejxFSkuV2tjVhWhpp43NbE5f+34uR6vW5ue8/8ARENScNmS1Jz9zPUavcjrTjFwTwyWvqSgoN4Q9ebw2Q1JQzE5+eS5jxPjJTnzQZDUlDMR6k20T15zilLgm07RPUnOVyY/ExeZRtmpr80UoqqFO3csj8Sm7aJzjJYVGb/YDn76Hg3FkixL7S6dDeLKxY3SfxzvY8qhYNhYNnZVjzwrD/uzUXJ0h6bik+5p6M5+1DTi6Ix5nSJR5Hyv4GXDbh1r+mTi56emlu7PJnz8lZJaU4q2aGi3pynjFdjRmp6yVHlS5eesEdCckmeGg1rqLIOD5VexPTU9WubclUZtLKPAQhPVUprCPFci1HJLDJO3aXwKuD4db/pkHCOlp8/W89jS0H5rjLoJqWhPljWxpX5Gp/oeC/nqzUjHU01KHTccVCMcXZOo+Mvp/wDhoSbhnZM0Fenz/dmhRbdGnKPNGEXiy9JTnGbwzUhGMqi7Xxoh6k3hserqN815PN1H1I62pFUmR1Jxdpi1JpNJi1Zpct4PMkRnKOBzfNzXk1NSeq7k8kJckkycuaTfxzXwl0/onT4f6vikRFkjkTIoT+i+KR1oTtXwYhfxetfDkvah7D2ofuYt2JZE8kXUhLFEdyGwtyCoayxbkNuEtuCwPIsGxLKTR0Qt+L3fYfuYzoLbJBvqfYIghbj97H/4H+Nx7KhkR7NHSiWWx9DqiW6oeyPtO3DqzqjZ4OloYveyCwdPhXp9aVf5rr+wmh4VGwh9zo2T2kIj72yPssZ91C3G8N8HjHxn1N+Cxw3HnjWB5R+TYa6cH/uAavBfXi+DxfB/W/jND4RHtZtFk8pi3PvY+p9wnlm1ULMskMIXuf8AuxVufcLJ1HsdUREdckbbyRfxy88etiVNPsIQiLEv7fOnyH1fF8Vwvb43l7UPYe1D9zFuxLI/eK8WLZ2RVl/qQ7cUP2fH27/Y+eEhIjln54XmuFYX5FlJ9zql3I5ZF2P9LKwX1Lxa4r3tDxwQjqxF8L4dLLEuEXzEc5Ie2xZNLKyLuLY6M60RdoW7XYWXQ9zpYhbX9Hb8j3SFk3eBO1ZfCyWIpkVmi8Xx6EdzTyIbwuF4b4p4Hhj6Ii7tl9+Hf8cXvQsuhDwQQtuEsUxIWaI9uL4drIiyXv8A+nW7pcEqZ+DqVmy+osJCxRWULDEqH+pl4PwVijZ3w/I88FgR1YiuFHWzdUUJ8EqF+lCwq4RXKJYoWx0ovNiVIW7ffg8uz8cOlfR2H0/AsGzEqVFcdyOCsVw6lUqE6I/pfCrS4Vhrith5Z2YlSrgkd/zx62LDsQ8l0dOD6G1CxQuL4dhYFgrf++FqkmPZjw64LhQsnS+PXl+rp8Yy2SO482dGhLhdURwiOFFEFSzw+6+LzQnVGmnHcWxqZuiWbOrOj/bzn7UPbhnnZ9zFvQz8E8JvhZJ1RLBtSE8M6MW7HhHWi8WPg1UmyHsQuDxg/BeLE7Vm1oaokNiHg7knUWV9puh9BbsXCOcG+RizxumkdLFmTReWLqN7sew9/hF/wa4vhebEqVfUsDyPI+DGMfBcFwSF9VZH+wkiLtHV8Oq4vqjrQtyOVwXF4obGMvJ1FlieBnThf0WN0rKzXGWL/HDY2HwbxY9uDNTUWnGzzUjnoT5jzI3R5kboWrFqyWpFNMTv4NRFUdWPoVsdhFZPusXQiNbiFhseUh9OL3Z3/Ihb2JYQ97OjHufdfBDzZsVsXwkSzY0fc2PYupsWCKN4sr9NDwqNSPNChQ3HD9LIKokU3GmRhJytnK0im6ZFVFfG3T9iHfH0X9KVs6/QrLX0vp8U7t2P3Oh9DudGbZK2R+BlcqoREQs8pH3EM8H0FQrIpWK+Y6MjuzuPoJ/t4dUL9wH/2Q==","source":"_posts/kafka-manager部署.md","raw":"---\ntitle: pipenv使用\ndate: 2019-12-13 14:00:00\ncategories: \n- python\ntags:\n- pipenv\n- python\n---\n\n## github\n\n```\nhttps://github.com/yahoo/kafka-manager/releases\n```\n\n## 简介\n\nkafka-manager是最受欢迎的kafka集群管理工具，有如下功能：\n\n- 管理多个集群\n- 轻松检查群集状态（主题，消费者，偏移，代理，副本分发，分区分发）\n- 运行首选副本选举\n- 使用选项生成分区分配以选择要使用的代理\n- 运行分区重新分配（基于生成的分配）\n- 使用可选主题配置创建主题（0.8.1.1具有与0.8.2+不同的配置）\n- 删除主题（仅支持0.8.2+并记住在代理配置中设置delete.topic.enable = true）\n- 主题列表现在指示标记为删除的主题（仅支持0.8.2+）\n- 批量生成多个主题的分区分配，并可选择要使用的代理\n- 批量运行重新分配多个主题的分区\n- 将分区添加到现有主题\n- 更新现有主题的配置\n- 可随意开启对broker级别或者对topic级别的JMX轮询\n- 可方便的过滤出没有id 、所有者、延迟或目录等的消费者\n\n## 安装和配置\n\n```\ncurl https://github.com/yahoo/kafka-manager/archive/2.0.0.2.tar.gz\ncurl https://bintray.com/sbt/rpm/rpm > bintray-sbt-rpm.repo\nmv bintray-sbt-rpm.repo /etc/yum.repos.d/\nyum install sbt\nsbt -version\ntar xf 2.0.0.2.tar.gz\ncd kafka-manager-2.0.0.2/\n./sbt clean dist     # 会编译很久\ncd /usr/local/kafka-manager/target/universal/\ncp kafka-manager-2.0.0.2.zip /usr/local/\nunzip kafka-manager-2.0.0.2.zip \ncd kafka-manager-2.0.0.2\n########修改kafka-manager.zkhosts\nconf/application.conf \n---------\nkafka-manager.zkhosts=\"172.19.168.92:2181,172.19.152.247:2181,172.19.152.245:2181\"\n---------\n```\n\n## 启动\n\n```\nnohub /usr/local/kafka-manager2/bin/kafka-manager &\n```\n\n\n## kafka-manager 添加集群\n\n![image][kafka-maager01]\n\n\n\n\n## 图片\n\n[kafka-maager01]:data:image/jpg;base64,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kfBiiIhmFkpO9dgQhFoQaMbNS1fs2+2f/wB865clXB2VqbXsKOQsa0JUDPUrDpmeBBH3yIPcAsywrs1+qeVCsRv5yxdeFfHAjFS/vD/ZXf7B/wCmrP8A4m/ovCLzaT/1Jf3h89S//wASayJtWRxcFbyeVPgMl3gYzAg1j+nd/sH/AKaNB5w4bSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRTFNux3+LtQN6pOtZBiKYexCwlAVY4EAUQAgKH9O3F5amjpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJP8AcG9G/wBkT3F/01ObQbl9zrc63Otzrc63Otzrc63Otzrc63Otzrc63Otzrc63Otzrc63OpT7mdn7pLumu6a7prumu6a7prumu6a7prumu6a7prumu6a7prumou7OzvudbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udMVnfh/ph/7i+6y/wCPpp/7i/oW79KlMcLnxi8vRywzTx8pNGDyfE5WlmKLXMareWxlIrCuZDN43G1A2rn2SX/H00/9xf6Hdos7vF2kzO3x1XTL1bn81o6TyzZjpalfcPWp7xzTxP8ADC0FsHmbbi61PeAa3V/hP/6OJfxCzVjDdOc0cT0BhK1JmyPX+Nq4jpTE0aN3P+J1djsGspn/AAOpcViVf6qO2ZPi8H11lss3QzlD05mjg6Ta3m362tAAO/ez/WAMJlqNUvT2Ts5bGvat/XJf8fTT/wBxf6OsqWTu4zjHdL08rUCX8qs1kYYnC275ej8B1M+Ea/T6RDbxdrqLpE3QXUmIxvSUKN/pMJ7/AEB1QKt0z1Vhg9D1gP8Awn/9HEv4kYezlenGnQxX8QcBboQJb6/yVXL9KYm9R6tOLF/xHwGSu5bLU8p/E7p3wOpAYWGUu5TG5S/ezX8Gj3buaMLOfwo0YkNXpfJYOD3MxTCD+InSVT69L/j6af8AuL/Xaq17gJAtiHAQojE9Go95rrvjaD3vNerTq02m1OOMx8LcrcKlStSBopKxh8VaPvs2KNO0GArNqpWuAcNyOMoQmCcD4fF2LPkWHhGUHhKnQpUGm1FsNimteUxKdUtsVov12X/H00/9xfdZf8fTT/3F91l/x9NsPw4l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9k8mfhvps/cf3Uvo302fuP7qX0b6bP3H8nymPq24VbIyQI82H/oFZrmgSYRzgQcSD+1F9G+mz9x/PTnjPhiuWraLXyvZAl3I2w22o1O+z1FQuBwl/M29Ns3Tz2i4SrZuAf8AF463kVbvWgYCm1C/fyc4X7NYt3I418n34E2VnZfzPs5fRvps/cfyfFY6xchcOehTsAKCwXEYw1bxjTp1ZlASYsVjg3CWwiHAQojF4wNEwI+JxtpwvZepWeBIvqGxdrUsXj6E5yofZy+jfTZ+4/h3Zmd32yf+2ya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TW2a2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya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sX7jH9yT4L6N9Nn7j+LDc1iszO0m5b7fH+dkjsi+jfTZ+4/lwBf+b6ArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaAqMYwbiKL6N9Nn7j+6l9G+mz9x/N/O1MeC6Y+Xy1XE4x71kuVqgsWRWaxnPWGV6WTr3blqsFTylZgQNBTzsIWzjf/VUtwtbtf2Ivo302fuP4d+Gd0cJboLdkd3HXp0L9N87Ts5W/DQa9P8ACTvApY3K4q7jTHq7X/DUXrYkA8U9IOEpQoXMmCvVxM7OSyc7TBMTq6raHVqhankRMIVoGNqWaAcXdDWu0alGrU3znhGxtapjMO1npYGijaZvsRfRvps/cf3Uvo302fuP4nJoDlN2Y7suDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4Mhyl3ShNF9G+mz9x/Fj9sX7jH9yT4L6N9Nn7j+LH7Yv3GP7knwX0b6bP3H8WP2xfuMf3JPgvo302fuP4JHvFOC2T/52TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2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Xujodjvwe7O4+gtxbcaKKKKKKKKKKKKKKKKSNtvpW/BYMcN19Ofoz8RMXxPRRRRRRRRRRRRRRRRRRRX+Vooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooor+5Xqdfj3YSsvh0svF/G6afBbj3SIf8AKXmjebF7sEb5mWlFyI28smktOTHhJjwkx4waeVk0+x0HsmXmvi3ZHi4ak4f8M8LDUj73wirYnbchfonnqJU3ZHOo2aeGK+ZlJxcSNrDJtPTkiWYInmCGubfc0ncqZp+2iJJVpoXf4+WBf7Hp/Wn8d9T7pHWSJbxQtyDtD9xpr9BB2LoX8eriv7nYwlJNpbDhJJNrhk5HVkoShhiTk6RKDg6lwjBy2RyS5easfG6IUvDtR75NSD8qH+vQ1cTpmnfJF09yFamrKCWH/wDRru3bVM8MlCXNeehpRbk9TV2W5OfPJyI35HupWN80Vprpk1JQcEorPV/Gyo0f1Ly4mulFRUZWkuxN87u8mooeXppfk0IxXiaT7klHozwulCeolNmtrLVdVjsa+moTUYi8Qo6KglaT/wC5GSX6EtkzVguVTXX42/6j1XVLCHrStNdDV1nqdMi12oxj2IazjqeYdTR1XpTU10Od3Zq6z1Z2xalR5SGsoxarLLdZ/Yb61wb24vjeWuL4/dQneT8lC+L2VlsW7KymdSCwMYxrLY+DHw+4isI+39j1fR149f4PS/o6m/8AQKdChJptLbg9OSiptYZGLldL4F6i3Ii7Edh+1i2ELIt2dj7uPVcX1Op1NojXQbwjqIjuRERF/F9Pq1dMUHJ0iUHF00eXOro01GWjNtZVD05Qy0eXKrSIxbdJHlzTprJ5U0raFGUnSPLknT3PJ1L5ayVTpiyyenLyIf6k9JQWotlg1dNQlSZqQi/D6a5u5DSlByj+CWnOCTl1+BV/EX8Rf5BDcoRv75f+CNrQbXfInelHn7nPP1JpKChq3tg1YVqq/a//AIJyhp+Iu3j8GlyeVN3WTUnHkjHejXlP1glBaeo06yasovTjFO6NbUlGMa7DlzO3wnGS0NNr8mtKKlqJvejxFSkuV2tjVhWhpp43NbE5f+34uR6vW5ue8/8ARENScNmS1Jz9zPUavcjrTjFwTwyWvqSgoN4Q9ebw2Q1JQzE5+eS5jxPjJTnzQZDUlDMR6k20T15zilLgm07RPUnOVyY/ExeZRtmpr80UoqqFO3csj8Sm7aJzjJYVGb/YDn76Hg3FkixL7S6dDeLKxY3SfxzvY8qhYNhYNnZVjzwrD/uzUXJ0h6bik+5p6M5+1DTi6Ix5nSJR5Hyv4GXDbh1r+mTi56emlu7PJnz8lZJaU4q2aGi3pynjFdjRmp6yVHlS5eesEdCckmeGg1rqLIOD5VexPTU9WubclUZtLKPAQhPVUprCPFci1HJLDJO3aXwKuD4db/pkHCOlp8/W89jS0H5rjLoJqWhPljWxpX5Gp/oeC/nqzUjHU01KHTccVCMcXZOo+Mvp/wDhoSbhnZM0Fenz/dmhRbdGnKPNGEXiy9JTnGbwzUhGMqi7Xxoh6k3hserqN815PN1H1I62pFUmR1Jxdpi1JpNJi1Zpct4PMkRnKOBzfNzXk1NSeq7k8kJckkycuaTfxzXwl0/onT4f6vikRFkjkTIoT+i+KR1oTtXwYhfxetfDkvah7D2ofuYt2JZE8kXUhLFEdyGwtyCoayxbkNuEtuCwPIsGxLKTR0Qt+L3fYfuYzoLbJBvqfYIghbj97H/4H+Nx7KhkR7NHSiWWx9DqiW6oeyPtO3DqzqjZ4OloYveyCwdPhXp9aVf5rr+wmh4VGwh9zo2T2kIj72yPssZ91C3G8N8HjHxn1N+Cxw3HnjWB5R+TYa6cH/uAavBfXi+DxfB/W/jND4RHtZtFk8pi3PvY+p9wnlm1ULMskMIXuf8AuxVufcLJ1HsdUREdckbbyRfxy88etiVNPsIQiLEv7fOnyH1fF8Vwvb43l7UPYe1D9zFuxLI/eK8WLZ2RVl/qQ7cUP2fH27/Y+eEhIjln54XmuFYX5FlJ9zql3I5ZF2P9LKwX1Lxa4r3tDxwQjqxF8L4dLLEuEXzEc5Ie2xZNLKyLuLY6M60RdoW7XYWXQ9zpYhbX9Hb8j3SFk3eBO1ZfCyWIpkVmi8Xx6EdzTyIbwuF4b4p4Hhj6Ii7tl9+Hf8cXvQsuhDwQQtuEsUxIWaI9uL4drIiyXv8A+nW7pcEqZ+DqVmy+osJCxRWULDEqH+pl4PwVijZ3w/I88FgR1YiuFHWzdUUJ8EqF+lCwq4RXKJYoWx0ovNiVIW7ffg8uz8cOlfR2H0/AsGzEqVFcdyOCsVw6lUqE6I/pfCrS4Vhrith5Z2YlSrgkd/zx62LDsQ8l0dOD6G1CxQuL4dhYFgrf++FqkmPZjw64LhQsnS+PXl+rp8Yy2SO482dGhLhdURwiOFFEFSzw+6+LzQnVGmnHcWxqZuiWbOrOj/bzn7UPbhnnZ9zFvQz8E8JvhZJ1RLBtSE8M6MW7HhHWi8WPg1UmyHsQuDxg/BeLE7Vm1oaokNiHg7knUWV9puh9BbsXCOcG+RizxumkdLFmTReWLqN7sew9/hF/wa4vhebEqVfUsDyPI+DGMfBcFwSF9VZH+wkiLtHV8Oq4vqjrQtyOVwXF4obGMvJ1FlieBnThf0WN0rKzXGWL/HDY2HwbxY9uDNTUWnGzzUjnoT5jzI3R5kboWrFqyWpFNMTv4NRFUdWPoVsdhFZPusXQiNbiFhseUh9OL3Z3/Ihb2JYQ97OjHufdfBDzZsVsXwkSzY0fc2PYupsWCKN4sr9NDwqNSPNChQ3HD9LIKokU3GmRhJytnK0im6ZFVFfG3T9iHfH0X9KVs6/QrLX0vp8U7t2P3Oh9DudGbZK2R+BlcqoREQs8pH3EM8H0FQrIpWK+Y6MjuzuPoJ/t4dUL9wH/2Q==","slug":"kafka-manager部署","published":1,"updated":"2021-01-27T08:20:35.758Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkgl4h5j006hq0us9qfl3ldo","content":"<h2 id=\"github\"><a href=\"#github\" class=\"headerlink\" title=\"github\"></a>github</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;yahoo&#x2F;kafka-manager&#x2F;releases</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>kafka-manager是最受欢迎的kafka集群管理工具，有如下功能：</p>\n<ul>\n<li>管理多个集群</li>\n<li>轻松检查群集状态（主题，消费者，偏移，代理，副本分发，分区分发）</li>\n<li>运行首选副本选举</li>\n<li>使用选项生成分区分配以选择要使用的代理</li>\n<li>运行分区重新分配（基于生成的分配）</li>\n<li>使用可选主题配置创建主题（0.8.1.1具有与0.8.2+不同的配置）</li>\n<li>删除主题（仅支持0.8.2+并记住在代理配置中设置delete.topic.enable = true）</li>\n<li>主题列表现在指示标记为删除的主题（仅支持0.8.2+）</li>\n<li>批量生成多个主题的分区分配，并可选择要使用的代理</li>\n<li>批量运行重新分配多个主题的分区</li>\n<li>将分区添加到现有主题</li>\n<li>更新现有主题的配置</li>\n<li>可随意开启对broker级别或者对topic级别的JMX轮询</li>\n<li>可方便的过滤出没有id 、所有者、延迟或目录等的消费者</li>\n</ul>\n<h2 id=\"安装和配置\"><a href=\"#安装和配置\" class=\"headerlink\" title=\"安装和配置\"></a>安装和配置</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl https:&#x2F;&#x2F;github.com&#x2F;yahoo&#x2F;kafka-manager&#x2F;archive&#x2F;2.0.0.2.tar.gz</span><br><span class=\"line\">curl https:&#x2F;&#x2F;bintray.com&#x2F;sbt&#x2F;rpm&#x2F;rpm &gt; bintray-sbt-rpm.repo</span><br><span class=\"line\">mv bintray-sbt-rpm.repo &#x2F;etc&#x2F;yum.repos.d&#x2F;</span><br><span class=\"line\">yum install sbt</span><br><span class=\"line\">sbt -version</span><br><span class=\"line\">tar xf 2.0.0.2.tar.gz</span><br><span class=\"line\">cd kafka-manager-2.0.0.2&#x2F;</span><br><span class=\"line\">.&#x2F;sbt clean dist     # 会编译很久</span><br><span class=\"line\">cd &#x2F;usr&#x2F;local&#x2F;kafka-manager&#x2F;target&#x2F;universal&#x2F;</span><br><span class=\"line\">cp kafka-manager-2.0.0.2.zip &#x2F;usr&#x2F;local&#x2F;</span><br><span class=\"line\">unzip kafka-manager-2.0.0.2.zip </span><br><span class=\"line\">cd kafka-manager-2.0.0.2</span><br><span class=\"line\">########修改kafka-manager.zkhosts</span><br><span class=\"line\">conf&#x2F;application.conf </span><br><span class=\"line\">---------</span><br><span class=\"line\">kafka-manager.zkhosts&#x3D;&quot;172.19.168.92:2181,172.19.152.247:2181,172.19.152.245:2181&quot;</span><br><span class=\"line\">---------</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohub &#x2F;usr&#x2F;local&#x2F;kafka-manager2&#x2F;bin&#x2F;kafka-manager &amp;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"kafka-manager-添加集群\"><a href=\"#kafka-manager-添加集群\" class=\"headerlink\" title=\"kafka-manager 添加集群\"></a>kafka-manager 添加集群</h2><p><img src=\"data:image/jpg;base64,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kfBiiIhmFkpO9dgQhFoQaMbNS1fs2+2f/wB865clXB2VqbXsKOQsa0JUDPUrDpmeBBH3yIPcAsywrs1+qeVCsRv5yxdeFfHAjFS/vD/ZXf7B/wCmrP8A4m/ovCLzaT/1Jf3h89S//wASayJtWRxcFbyeVPgMl3gYzAg1j+nd/sH/AKaNB5w4bSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRTFNux3+LtQN6pOtZBiKYexCwlAVY4EAUQAgKH9O3F5amjpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJP8AcG9G/wBkT3F/01ObQbl9zrc63Otzrc63Otzrc63Otzrc63Otzrc63Otzrc63Otzrc63OpT7mdn7pLumu6a7prumu6a7prumu6a7prumu6a7prumu6a7prumou7OzvudbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udMVnfh/ph/7i+6y/wCPpp/7i/oW79KlMcLnxi8vRywzTx8pNGDyfE5WlmKLXMareWxlIrCuZDN43G1A2rn2SX/H00/9xf6Hdos7vF2kzO3x1XTL1bn81o6TyzZjpalfcPWp7xzTxP8ADC0FsHmbbi61PeAa3V/hP/6OJfxCzVjDdOc0cT0BhK1JmyPX+Nq4jpTE0aN3P+J1djsGspn/AAOpcViVf6qO2ZPi8H11lss3QzlD05mjg6Ta3m362tAAO/ez/WAMJlqNUvT2Ts5bGvat/XJf8fTT/wBxf6OsqWTu4zjHdL08rUCX8qs1kYYnC275ej8B1M+Ea/T6RDbxdrqLpE3QXUmIxvSUKN/pMJ7/AEB1QKt0z1Vhg9D1gP8Awn/9HEv4kYezlenGnQxX8QcBboQJb6/yVXL9KYm9R6tOLF/xHwGSu5bLU8p/E7p3wOpAYWGUu5TG5S/ezX8Gj3buaMLOfwo0YkNXpfJYOD3MxTCD+InSVT69L/j6af8AuL/Xaq17gJAtiHAQojE9Go95rrvjaD3vNerTq02m1OOMx8LcrcKlStSBopKxh8VaPvs2KNO0GArNqpWuAcNyOMoQmCcD4fF2LPkWHhGUHhKnQpUGm1FsNimteUxKdUtsVov12X/H00/9xfdZf8fTT/3F91l/x9NsPw4l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9k8mfhvps/cf3Uvo302fuP7qX0b6bP3H8nymPq24VbIyQI82H/oFZrmgSYRzgQcSD+1F9G+mz9x/PTnjPhiuWraLXyvZAl3I2w22o1O+z1FQuBwl/M29Ns3Tz2i4SrZuAf8AF463kVbvWgYCm1C/fyc4X7NYt3I418n34E2VnZfzPs5fRvps/cfyfFY6xchcOehTsAKCwXEYw1bxjTp1ZlASYsVjg3CWwiHAQojF4wNEwI+JxtpwvZepWeBIvqGxdrUsXj6E5yofZy+jfTZ+4/h3Zmd32yf+2ya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TW2a2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya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sX7jH9yT4L6N9Nn7j+LDc1iszO0m5b7fH+dkjsi+jfTZ+4/lwBf+b6ArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaAqMYwbiKL6N9Nn7j+6l9G+mz9x/N/O1MeC6Y+Xy1XE4x71kuVqgsWRWaxnPWGV6WTr3blqsFTylZgQNBTzsIWzjf/VUtwtbtf2Ivo302fuP4d+Gd0cJboLdkd3HXp0L9N87Ts5W/DQa9P8ACTvApY3K4q7jTHq7X/DUXrYkA8U9IOEpQoXMmCvVxM7OSyc7TBMTq6raHVqhankRMIVoGNqWaAcXdDWu0alGrU3znhGxtapjMO1npYGijaZvsRfRvps/cf3Uvo302fuP4nJoDlN2Y7suDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4Mhyl3ShNF9G+mz9x/Fj9sX7jH9yT4L6N9Nn7j+LH7Yv3GP7knwX0b6bP3H8WP2xfuMf3JPgvo302fuP4JHvFOC2T/52TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2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Xujodjvwe7O4+gtxbcaKKKKKKKKKKKKKKKKSNtvpW/BYMcN19Ofoz8RMXxPRRRRRRRRRRRRRRRRRRRX+Vooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooor+5Xqdfj3YSsvh0svF/G6afBbj3SIf8AKXmjebF7sEb5mWlFyI28smktOTHhJjwkx4waeVk0+x0HsmXmvi3ZHi4ak4f8M8LDUj73wirYnbchfonnqJU3ZHOo2aeGK+ZlJxcSNrDJtPTkiWYInmCGubfc0ncqZp+2iJJVpoXf4+WBf7Hp/Wn8d9T7pHWSJbxQtyDtD9xpr9BB2LoX8eriv7nYwlJNpbDhJJNrhk5HVkoShhiTk6RKDg6lwjBy2RyS5easfG6IUvDtR75NSD8qH+vQ1cTpmnfJF09yFamrKCWH/wDRru3bVM8MlCXNeehpRbk9TV2W5OfPJyI35HupWN80Vprpk1JQcEorPV/Gyo0f1Ly4mulFRUZWkuxN87u8mooeXppfk0IxXiaT7klHozwulCeolNmtrLVdVjsa+moTUYi8Qo6KglaT/wC5GSX6EtkzVguVTXX42/6j1XVLCHrStNdDV1nqdMi12oxj2IazjqeYdTR1XpTU10Od3Zq6z1Z2xalR5SGsoxarLLdZ/Yb61wb24vjeWuL4/dQneT8lC+L2VlsW7KymdSCwMYxrLY+DHw+4isI+39j1fR149f4PS/o6m/8AQKdChJptLbg9OSiptYZGLldL4F6i3Ii7Edh+1i2ELIt2dj7uPVcX1Op1NojXQbwjqIjuRERF/F9Pq1dMUHJ0iUHF00eXOro01GWjNtZVD05Qy0eXKrSIxbdJHlzTprJ5U0raFGUnSPLknT3PJ1L5ayVTpiyyenLyIf6k9JQWotlg1dNQlSZqQi/D6a5u5DSlByj+CWnOCTl1+BV/EX8Rf5BDcoRv75f+CNrQbXfInelHn7nPP1JpKChq3tg1YVqq/a//AIJyhp+Iu3j8GlyeVN3WTUnHkjHejXlP1glBaeo06yasovTjFO6NbUlGMa7DlzO3wnGS0NNr8mtKKlqJvejxFSkuV2tjVhWhpp43NbE5f+34uR6vW5ue8/8ARENScNmS1Jz9zPUavcjrTjFwTwyWvqSgoN4Q9ebw2Q1JQzE5+eS5jxPjJTnzQZDUlDMR6k20T15zilLgm07RPUnOVyY/ExeZRtmpr80UoqqFO3csj8Sm7aJzjJYVGb/YDn76Hg3FkixL7S6dDeLKxY3SfxzvY8qhYNhYNnZVjzwrD/uzUXJ0h6bik+5p6M5+1DTi6Ix5nSJR5Hyv4GXDbh1r+mTi56emlu7PJnz8lZJaU4q2aGi3pynjFdjRmp6yVHlS5eesEdCckmeGg1rqLIOD5VexPTU9WubclUZtLKPAQhPVUprCPFci1HJLDJO3aXwKuD4db/pkHCOlp8/W89jS0H5rjLoJqWhPljWxpX5Gp/oeC/nqzUjHU01KHTccVCMcXZOo+Mvp/wDhoSbhnZM0Fenz/dmhRbdGnKPNGEXiy9JTnGbwzUhGMqi7Xxoh6k3hserqN815PN1H1I62pFUmR1Jxdpi1JpNJi1Zpct4PMkRnKOBzfNzXk1NSeq7k8kJckkycuaTfxzXwl0/onT4f6vikRFkjkTIoT+i+KR1oTtXwYhfxetfDkvah7D2ofuYt2JZE8kXUhLFEdyGwtyCoayxbkNuEtuCwPIsGxLKTR0Qt+L3fYfuYzoLbJBvqfYIghbj97H/4H+Nx7KhkR7NHSiWWx9DqiW6oeyPtO3DqzqjZ4OloYveyCwdPhXp9aVf5rr+wmh4VGwh9zo2T2kIj72yPssZ91C3G8N8HjHxn1N+Cxw3HnjWB5R+TYa6cH/uAavBfXi+DxfB/W/jND4RHtZtFk8pi3PvY+p9wnlm1ULMskMIXuf8AuxVufcLJ1HsdUREdckbbyRfxy88etiVNPsIQiLEv7fOnyH1fF8Vwvb43l7UPYe1D9zFuxLI/eK8WLZ2RVl/qQ7cUP2fH27/Y+eEhIjln54XmuFYX5FlJ9zql3I5ZF2P9LKwX1Lxa4r3tDxwQjqxF8L4dLLEuEXzEc5Ie2xZNLKyLuLY6M60RdoW7XYWXQ9zpYhbX9Hb8j3SFk3eBO1ZfCyWIpkVmi8Xx6EdzTyIbwuF4b4p4Hhj6Ii7tl9+Hf8cXvQsuhDwQQtuEsUxIWaI9uL4drIiyXv8A+nW7pcEqZ+DqVmy+osJCxRWULDEqH+pl4PwVijZ3w/I88FgR1YiuFHWzdUUJ8EqF+lCwq4RXKJYoWx0ovNiVIW7ffg8uz8cOlfR2H0/AsGzEqVFcdyOCsVw6lUqE6I/pfCrS4Vhrith5Z2YlSrgkd/zx62LDsQ8l0dOD6G1CxQuL4dhYFgrf++FqkmPZjw64LhQsnS+PXl+rp8Yy2SO482dGhLhdURwiOFFEFSzw+6+LzQnVGmnHcWxqZuiWbOrOj/bzn7UPbhnnZ9zFvQz8E8JvhZJ1RLBtSE8M6MW7HhHWi8WPg1UmyHsQuDxg/BeLE7Vm1oaokNiHg7knUWV9puh9BbsXCOcG+RizxumkdLFmTReWLqN7sew9/hF/wa4vhebEqVfUsDyPI+DGMfBcFwSF9VZH+wkiLtHV8Oq4vqjrQtyOVwXF4obGMvJ1FlieBnThf0WN0rKzXGWL/HDY2HwbxY9uDNTUWnGzzUjnoT5jzI3R5kboWrFqyWpFNMTv4NRFUdWPoVsdhFZPusXQiNbiFhseUh9OL3Z3/Ihb2JYQ97OjHufdfBDzZsVsXwkSzY0fc2PYupsWCKN4sr9NDwqNSPNChQ3HD9LIKokU3GmRhJytnK0im6ZFVFfG3T9iHfH0X9KVs6/QrLX0vp8U7t2P3Oh9DudGbZK2R+BlcqoREQs8pH3EM8H0FQrIpWK+Y6MjuzuPoJ/t4dUL9wH/2Q==\" alt=\"image\"></p>\n<h2 id=\"图片\"><a href=\"#图片\" class=\"headerlink\" title=\"图片\"></a>图片</h2>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"github\"><a href=\"#github\" class=\"headerlink\" title=\"github\"></a>github</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;github.com&#x2F;yahoo&#x2F;kafka-manager&#x2F;releases</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>kafka-manager是最受欢迎的kafka集群管理工具，有如下功能：</p>\n<ul>\n<li>管理多个集群</li>\n<li>轻松检查群集状态（主题，消费者，偏移，代理，副本分发，分区分发）</li>\n<li>运行首选副本选举</li>\n<li>使用选项生成分区分配以选择要使用的代理</li>\n<li>运行分区重新分配（基于生成的分配）</li>\n<li>使用可选主题配置创建主题（0.8.1.1具有与0.8.2+不同的配置）</li>\n<li>删除主题（仅支持0.8.2+并记住在代理配置中设置delete.topic.enable = true）</li>\n<li>主题列表现在指示标记为删除的主题（仅支持0.8.2+）</li>\n<li>批量生成多个主题的分区分配，并可选择要使用的代理</li>\n<li>批量运行重新分配多个主题的分区</li>\n<li>将分区添加到现有主题</li>\n<li>更新现有主题的配置</li>\n<li>可随意开启对broker级别或者对topic级别的JMX轮询</li>\n<li>可方便的过滤出没有id 、所有者、延迟或目录等的消费者</li>\n</ul>\n<h2 id=\"安装和配置\"><a href=\"#安装和配置\" class=\"headerlink\" title=\"安装和配置\"></a>安装和配置</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl https:&#x2F;&#x2F;github.com&#x2F;yahoo&#x2F;kafka-manager&#x2F;archive&#x2F;2.0.0.2.tar.gz</span><br><span class=\"line\">curl https:&#x2F;&#x2F;bintray.com&#x2F;sbt&#x2F;rpm&#x2F;rpm &gt; bintray-sbt-rpm.repo</span><br><span class=\"line\">mv bintray-sbt-rpm.repo &#x2F;etc&#x2F;yum.repos.d&#x2F;</span><br><span class=\"line\">yum install sbt</span><br><span class=\"line\">sbt -version</span><br><span class=\"line\">tar xf 2.0.0.2.tar.gz</span><br><span class=\"line\">cd kafka-manager-2.0.0.2&#x2F;</span><br><span class=\"line\">.&#x2F;sbt clean dist     # 会编译很久</span><br><span class=\"line\">cd &#x2F;usr&#x2F;local&#x2F;kafka-manager&#x2F;target&#x2F;universal&#x2F;</span><br><span class=\"line\">cp kafka-manager-2.0.0.2.zip &#x2F;usr&#x2F;local&#x2F;</span><br><span class=\"line\">unzip kafka-manager-2.0.0.2.zip </span><br><span class=\"line\">cd kafka-manager-2.0.0.2</span><br><span class=\"line\">########修改kafka-manager.zkhosts</span><br><span class=\"line\">conf&#x2F;application.conf </span><br><span class=\"line\">---------</span><br><span class=\"line\">kafka-manager.zkhosts&#x3D;&quot;172.19.168.92:2181,172.19.152.247:2181,172.19.152.245:2181&quot;</span><br><span class=\"line\">---------</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohub &#x2F;usr&#x2F;local&#x2F;kafka-manager2&#x2F;bin&#x2F;kafka-manager &amp;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"kafka-manager-添加集群\"><a href=\"#kafka-manager-添加集群\" class=\"headerlink\" title=\"kafka-manager 添加集群\"></a>kafka-manager 添加集群</h2><p><img src=\"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAoHCAkIBgoJCAkMCwoMDxoRDw4ODx8WGBMaJSEnJiQhJCMpLjsyKSw4LCMkM0Y0OD0/QkNCKDFITUhATTtBQj//2wBDAQsMDA8NDx4RER4/KiQqPz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz//wgARCAOWBgwDAREAAhEBAxEB/8QAGwABAQADAQEBAAAAAAAAAAAAAAMBBAUCBgf/xAAaAQEBAQEBAQEAAAAAAAAAAAAAAQIDBAUG/9oADAMBAAIQAxAAAAD9mAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANU/Mj7w7RkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEz8iPqTin6iDEa1bQAEKIVChkGAAAZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPlz5Y5h9MXzO9bwU25Onde7n5tr3L2pMbVy0raTPpaWdxRoy6sN4LDMst7eGfXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHMPzEG4v2kmvZ5jaylq7zPi70ErnVemNXGsRG59W9o6oNaNI1bB6l8XP0DWQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAah+Un2Bqn3QAQoCFBHg1K3gZBgQpChkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmfBH25tAAAAAAAAweDAAAAAAAABgsDAMgwAADIMAAAyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADBz+vH8y/Ufn1gAAAAAACO/8AO9/3/wAP7Awamem3rnk1M9NrXPXmsLgLtXnk1JsuxecZqU17s27gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwkqAAAAAAAAAGDm+jh+PftfyavWb0PL6ELJazXl00/Tx2OWvOrO51/RyAGT6f430/0z81+gGnjvzMerb356s83n69/p5ZzpoY79fp4+fj0669HXHn49Uk63Tx6PP16s6dLp5e108QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA2JYpq0AAAAAAAAACc708PyT9p+UV0PJ26Xh9VJvxrGh6uHvl06Pn7eJMVr9scP6vgAGT6T4/0/0f8z+gHK5e3Z1zjNeV9TXm40s+mU1fXLbuOTj0dTfmxLy+ft7Xb52hz9Szo782/vygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADoSxTVs1+mfFm3z34r0ZgpJEzZiNqSJarE4oqxLz/Rw/Mv1X5tQAAAAAAA7/AMz6H335/wC2NXPbwtbkYhWVlNbuuGrOhas+VyzCdKWC95ekAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHQlimrZoejl4NTtzhcmdvHXOW55vRtHJl8WROieDXJFjWt67O5m+V6MAAAAAAADBrEqCkKIlWIUEqki1ICqSFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHQlimrqAAADyegAAAABL5OlKOTHs4Op9ZFVAAAAA1UjqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADoZ1JIUAAAAAAAAAB4N+Ua0a9eU3lqAAAAAayeKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG5KAAAAAAAAAABMoAAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHg8gAAAAAAAAAHk8gAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEwAAAAApAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACJgAAA1jZBom7Lp6zuy6UvjWehKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACJgAxSMg/K5fut8+RnelWzi5689vn0jvHKPqJWWnbzc66HXnr5u3L07nqTQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAImAD533+Wucd3xe3Rzr8/3j1m7e5z8a6tzsbzfl0x0zyS2brs2m/OniZ0tzo5foMpQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABg2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARMAAAkeyJ5PZMqWNEtXqJHk3DXqReLgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGDYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADBsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAiYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABg2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQPIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMG0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUBpGwUCFECie1JlQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQHCNNMnmTw12NZ+dx0pvna2+LfWe9NZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQGkeyRYkbSeFgWPZrm4ZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQ8kzIAQoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGShMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQkVAAAAAAAAAAAAAAABghNi9xgm15iieFtcxmvK7FwMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkVJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKEioAAAAAAAAAAAAAAAPB8vx+l5Xt9PFwOXvwdvp49WblN9rfk+c5+/c1x6WuPQ158qAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJFSZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEyhIqAAAAAAAAAAAAAAADwvB5ezRno7nTwcbn7aXPc34udn0UT3c8Ln7ba5dfXm6u/PkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEipMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQmeTIAAAAAAAAAAAAAAB5NSdPE1gwvpN/XHTz1pczmspFvoa4ZMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwWJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygOObCVNWNq30nMXoAkzZoeT1Ga18M9JWNZd1NhQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQHBNZJm4c+XvazzJqZiM6kZRPVpmdquVyteudeTZm+jrPSlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlDweDIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKkygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlCRQHkweTKeT0vs8nk9kkosyh7PBNC1JFEwuLMygkVyZSqyMG0AAAAADAAAAACFBC+JfDVrzhOiy7IyAAAAAAAAAAAAAAAAAAAAACRUmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoSKnMNCzcKxrzU9Yg12pOJW+Zj0aVtmfUvtdKy0XrEujZvEsa0uvOmN5ufS+5fRKyCd6XRrsSgAAAAYOXntvXmJLqY77e+GSrM2ptbF5zlk1uXBOBy9+jj0d3t87l49fpjs9PLt3nkAAAAAAAAAAAAAAAAAAAAAEipMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQkVNYyUInsHo8HkwejybBIyTPZ5PBskypI9mTyZIHsoZJGDaAAAAAPK/Mcffta5wm/B7m9vXHhY9PR1y2Ly5ePVW46GuE2u508dE4HL36uOvS6eTSz303T7Dt8vJkAAAAAAAAAAAAAAAAAAAAAEipMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQ8kzIAAAAAAAAQFAAAAAAAAAAAA8rxseno64F15qiCduwx4Xkc/X2unj8rBvpXh5WE1z8+mrG7rjz8ejd3w2tcsygAAAAAAAAAAAAAAAAAAAADJQmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKGD423eThsfRZ3sVxrKJuZeLsxvr1FAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoDnkjYTVXfSMsbKLk8ptLdCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygJAAAAAAAAAAAAAAAAAAAAAAAAAAAAwZQFICgAAAAAAAAAAAAAAAAAAAAAAAD2eiZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEyhI9noAAAAAAAAAAAAAAAAAAAAAAAGDIMAyCSzmpTWzrn5lF7kAAAAAAAAAAAAAAAAAAAAAAAARLEygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlCRQ8mimFqZs3JQAAAAAAAAAAAAAAAAAAABg4XP27+vOOTn1Tze108nldPPWE6e7nr78vC5e6959jr5Ls5AAAAAAAAAAAAAAAAAAAAAAAOAdoqTKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUJFCJyrMRVdhOgoAAAAAAAAAAAAAAAAAAAAxZ8p5vq7XTh4z03dcRCahNQdfDOJv6nt83gc/ZCdPo+ng2tc8gAAAAAAAAAAAAAAAAAAAAAAGoWKkygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlCR7PQAAAAAAAAAAAAAAAAAAAAAAB5NSbxKqctmcW5QvpMnmX3cjYuQAAAAAAAAAAAAAAAAAAAAAAABEsTKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUBIAAAAAAAAAAAAAAAAAAAAAAABCkKQpMGVICgAAAAAAAAAAAAAAAAAAAAAAAAAez0TKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUABgyYAkWgAAZhWADIBgyYAhWTBkAGDIABiRaBkGAZABgGQAAYMmDIAAAAAAAAAAAAAAAAAAAAAAAABMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQkaJvHPOohdaRbspy5r3Z6T3Lr1uxr6z0Joa5o2dWWJPNhqRs3Y1pfNJPK2rpAAEzJGFbJqpsrpG6ZBAtEa9FQasbNcw6gAANU2DJkAAAAAAAAAAAAAAAAAAAAAAAAEygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlCJzTpnzSx1IyEpm9jU0M61da23Pq898npiGNU1jwund/Rs6UvNTr3V8OJ0mzJ1jVwxq60m9bbT53Muu7ZsZvz2nUw5m8bOOlNY3LeVIWrWLhnXcs+dTNt8vR6lzrOc60dTYaR0rniyrnptc1Onl2N53JvIAAAAAAAAAAAAAAAAAAAAAAAAJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKAAwAAAAIUAjn1vngoIUBqRWyyhCkKAABCgBCgAAJxram7KAACFEykDNAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKAAAAwZMGQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygPjZqOue5L9EfL11JrkM/Qmtho9c+86zbeNVPVuI+pAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQ8miek9y+aqmnNUudldM9pgpdYkkl1knRUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUBIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHs9EygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlCR7PQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEsTKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUJFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASKkygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlCRUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEipMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQkez0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARLEygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlASAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB7PRMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQGAABCgBkAGBGaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlAciWtz6XZNdN5dA3zjp2Jc0AMGtG1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoeT5ZdbWd7N6xxbmM3Fnumoc2vOV6FJZ6z1cu5dAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygMQAFESqAACFDIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKHg8GQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKEioAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJFSZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEyhIqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACRUmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoSKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkVJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKHg8GQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoADEKAAAAGQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEyhrnLOoamLyesxmdipy6+UOk7OLyK8ZdzedmayAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEyh5NM3DQjT0pJtS6BsJjbaxdOvEu1rHSmgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKAAwAABAUMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoADBkwBItIXIMAyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEyhM1DbOcdRC60i3ZNY2QmsWl0LnptAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEyhA5Z1T5tY6kZElJezqc+dJMae7sc86c1sb5ya+6lyoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoADAAAAOcdAyIVkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEyhggXMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoax8afZnzM1u3Gtp3Ma1LJJOXft57NjR1foMzjWwl37mUeapLrWbUYt3Y4ybEeNXrycqXY1PMvk9JJrCe0Z1qbxu43W409NlbtauZmyR0T5hfqo4unZk11kkmulJztKmpFE6ZoxO3W1e1lrs70vKqSG99nTsvJtzXGSWruR5rdyjb5ufca6XlW7hpphrpJx0NeLjqTXNytpz5errHuXK6B6LxkVqWfTygAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEyh5Nc2TVXTKXN83VqiTl8VVKmvb1JNBcSz1muWdXWih5LVWMJpLU2klLOzwbC+U93UpKRqlLEu0mtVFsc+J2eDsmF8GubRqHuTFs4pXupwTYs951oVVbJFKy6p6s8Nb6ayUT01KTNsS9ecvZGzwvqShqXXu595t7bJpp4asztEpdE2aibSZWYJwL1pp3FAAAAEygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQic86BzSseK2DYiFnhq7OuVXJpHRJg8SZr0vskejyDdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKEjnnQOQsc51da96z1c3myT1vu5zyNTl1283WNiXR1npZuopjztPNtExW0veTKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoeTXNgyAAIUhSFICgAAQoAyYAhQAAQARaEKACApAUAAAMgAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoax8QfcHza2s9RrMF7S/Py9yzkHSmtXeNjGuVqUlqk5d2yRvHLildKX5+a6PTj5zvpHLN+WGpDL3bizzHuNXWrzMLrfzmVm+uti6XSb+bztO3Hzlz3865NnZXWIp4jaNWvUs7naltq9iAAAAAAAAAAAAAAAAAAAAAAAAAABMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQwYPRzS1mvKKlyZIylliUJ2Vl1z0YJ2Xl9ROqRippQuayk8l18plZnuNeqkjeNQ2yMQ1NPOtnWelLk1T2YIGymouY2KROwvs3QAAAAAAAAAAAAAAAAAAAAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUABgyYAjNAYBkGADJgAGTAQuQAYAAAABkGAAAhRkGEKAEBWQAAAAAAAAAAAAAAAAAAAAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUBgAAAyYAAMmDJhCgBCgCFAAAQoAADJgAyYCFAQpChkAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlCJzzdy4e89GUuEybq/OM9iajLXecRuLpnqIaTjYRL7Sy89Kal5cr4PKLdvCWkUsak1v3MV4h2iieFmmZrFxSa8WYWvTnDc2ca2Ma1d4yR1nyteO+jNZoAAAAAAAAAAAAAAAAAAAAAAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUJHPN3LibzmWEuwzo3XZs0Y2YlNa280k7M1wbNy6qm1JzJdWTcrrW8mJaxOa6q6JaZ0r07zHz50JaJzmunc8xrYTWs7OXIWVzTOvepWSi8LT6reI7k03ueuR350zPbW3z3pS9zG8gAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoDAAgKQoAAAAABCkKCAoAAAESqAAAAQpCkBSArIAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygIFojZZRrxizZUaabhhZHoZaWp0VmUiFa9m/KCFgbBgyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygPhbNlZM+s6Ja22WhqbdkSmdeTl6dQ08N7c1E6PPWvtOqRrJtyz3PeWtdfQMdeayAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEygBgyAAADVTZXIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKHkmZAAAAAQoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyUJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKEioMQrIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJFSZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEyhIqc2Xn6x0l6EoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkVJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKEippkTbLgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkVJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKHg8GQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVJlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//EADMQAAEEAgEEAgECBQQCAwEAAAMAAQIEBRMRBhIUMhBgFRY0ByEwMVAgQEFwMzYiIyQ1/9oACAEBAAEIAP8AsXJ2vBxlm2qgurMv06XqeHR+XnnOmKd83/X5hQOGYi3um3p9UB6XqdX3p9HdHVaWCvt1H0UWjftN8O7Mzu9TIUbrM9L/AK6/iJlz4Xo61ap4z+GNC7gIWrnSOCn1hUvVM/Q6AK1+qfNnvGh1lk8VSLCGAwsIY3M5ueZ6DyZqZ8g2Oz47WTPkb4MRC4fAZgeaoTOO9OdH+IdnKLrYs7doFUefzZsM21Ez05mxg8dSy1m1Uussd1ZVOLJPZNnMlVJR821nbUGuHpvmjFyzUKHxlbk6ONNYHGrfqDLZPi8qx6cYmhm4GOANWnnpu2SnefOjFVmQ9+5eBhZW6XRvVd/qZzTn/wBS5/DgzuFsY21o64xV0HSVbLYnLdAYgM8TkQZ7og1DJTPgGv2cs9suMzZXxlq1+AyM8Lnax8tgPyeYhcc+OzRrONvnwGOt0Gvvdnhd+Vy5LY+nLjdOeGU+JyUMrlD08VhrNN8JtyPT1qy+Sdj4S5dPlj5bKflzW8HWvz6XYV+3Nq+OkDPluQ+LtUd2mWsYFPKcTDdfBWh9jUy4ApXx8HtYDywZKuan06wKmn/qjKWno4q1baphszm8HPrKeNEDrzoAH5jHfw8YV8B8t/TJCBRyGShicbjnnLH/APWJRwMKYyF/hoLkoK2Oo18bQDSp/wCxJJ4w5bskuyS7JLXJa5LXJa5LXJa5LXJa5LXJa5LXJa5LXJa5L/5QnBn/AOr86YlfB3Dh/WGfX6wz6/WGfX6wz6/WGfX6wz6/WGfX6wz6/WGfX6wz6/WGfX6wz6/WGfX6wz6/WGfX6wz6/WGfXRueymUzmi9817wbF23Wh8BuCNdsVYKFsErRKzedUVS7VtyNGtZvBr26tcnxeuipQHI0bgpX51Ezs7uzTuVoSeM45KnLQ8atwVotgYv+hSTaEeX8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXUZ+enL7fMISnNoQzOKfFmHFfh7I8ZZt2YYiz+MtXT0aLWAmsHFQr2d71XrWIzJCVbE37BQQhPGXo3S1WHStkhOY/wDT0BPs6ideSvJVvKwq2awHqDPDMZSyfCWax6r3a07wpTk7ULQ2y+TdVMhXjdnXd7UzXWdwHOXM2746dk5ZtYbKQLPO4ibQyN3eCCBaswz8wzy20ubxx7Ips/UVmL4aQYQOWF2w/wCoqUVXdw9NbS4YvBIO3kryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJXkryV5K8leSvJ+LP/ib/bdQf+v3/nCGr1slCzaq5moQIp2x3aNSncZ7dym1PNdlA9cmLsULdKdSi12Cs3seQ+Tusa/R8utaLC7RYF2u+SycLWKON/8AT0H/AOwP85MEzZTHkDtI7D4wIXq4yFMm8v6mas1D/wDsZRYE5rALcjnsTNlsi9opXCfEHBh3A+ZNMBJRLnxu4iQ7MZZcBRl6lK4srAcNVm9T2teuHu0azQNvrM1qfVcCSYlw/S9kpaELTBrSl/0LZ/8AE3xatQrNHmF303IpIhFMpIu0os7fNc0bAIGhauCrEDAqrHhZAxYVjwsickGvtOb6QHgdytBbh79P+jOwmTB3Rj/DZVfhsqvw2VX4bKr8NlV+Gyq/DZVfhsqvw2VX4bKr8NlV+Gyq/DZVfhsqvw2VX4bKr8PlV0ZQu1c487XxWpDr2rNhoYurCmKqzVBNflcadKqSy9gjUKbSlJqNINEUxgDTAC1YsCHjK48pK+yLQqnpkqnejXdqsWauNrb2UOqKBtzjrjHZMeNfFUqtydqsWlXPbhYM1EEMfOkMcGGKI4/9C2f/ABN8Xe4N4FxHL5b05iBs4pVlCoxYXwwt14yhT7K1JntgkfBiiIhmFkpO9dgQhFoQaMbNS1fs2+2f/wB865clXB2VqbXsKOQsa0JUDPUrDpmeBBH3yIPcAsywrs1+qeVCsRv5yxdeFfHAjFS/vD/ZXf7B/wCmrP8A4m/ovCLzaT/1Jf3h89S//wASayJtWRxcFbyeVPgMl3gYzAg1j+nd/sH/AKaNB5w4bSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRaSLSRTFNux3+LtQN6pOtZBiKYexCwlAVY4EAUQAgKH9O3F5amjpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJFpItJP8AcG9G/wBkT3F/01ObQbl9zrc63Otzrc63Otzrc63Otzrc63Otzrc63Otzrc63Otzrc63OpT7mdn7pLumu6a7prumu6a7prumu6a7prumu6a7prumu6a7prumou7OzvudbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udbnW51udMVnfh/ph/7i+6y/wCPpp/7i/oW79KlMcLnxi8vRywzTx8pNGDyfE5WlmKLXMareWxlIrCuZDN43G1A2rn2SX/H00/9xf6Hdos7vF2kzO3x1XTL1bn81o6TyzZjpalfcPWp7xzTxP8ADC0FsHmbbi61PeAa3V/hP/6OJfxCzVjDdOc0cT0BhK1JmyPX+Nq4jpTE0aN3P+J1djsGspn/AAOpcViVf6qO2ZPi8H11lss3QzlD05mjg6Ta3m362tAAO/ez/WAMJlqNUvT2Ts5bGvat/XJf8fTT/wBxf6OsqWTu4zjHdL08rUCX8qs1kYYnC275ej8B1M+Ea/T6RDbxdrqLpE3QXUmIxvSUKN/pMJ7/AEB1QKt0z1Vhg9D1gP8Awn/9HEv4kYezlenGnQxX8QcBboQJb6/yVXL9KYm9R6tOLF/xHwGSu5bLU8p/E7p3wOpAYWGUu5TG5S/ezX8Gj3buaMLOfwo0YkNXpfJYOD3MxTCD+InSVT69L/j6af8AuL/Xaq17gJAtiHAQojE9Go95rrvjaD3vNerTq02m1OOMx8LcrcKlStSBopKxh8VaPvs2KNO0GArNqpWuAcNyOMoQmCcD4fF2LPkWHhGUHhKnQpUGm1FsNimteUxKdUtsVov12X/H00/9xfdZf8fTT/3F91l/x9NsPw4l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9l3su9k8mfhvps/cf3Uvo302fuP7qX0b6bP3H8nymPq24VbIyQI82H/oFZrmgSYRzgQcSD+1F9G+mz9x/PTnjPhiuWraLXyvZAl3I2w22o1O+z1FQuBwl/M29Ns3Tz2i4SrZuAf8AF463kVbvWgYCm1C/fyc4X7NYt3I418n34E2VnZfzPs5fRvps/cfyfFY6xchcOehTsAKCwXEYw1bxjTp1ZlASYsVjg3CWwiHAQojF4wNEwI+JxtpwvZepWeBIvqGxdrUsXj6E5yofZy+jfTZ+4/h3Zmd32yf+2ya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TW2a2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya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sX7jH9yT4L6N9Nn7j+LDc1iszO0m5b7fH+dkjsi+jfTZ+4/lwBf+b6ArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaArQFaAqMYwbiKL6N9Nn7j+6l9G+mz9x/N/O1MeC6Y+Xy1XE4x71kuVqgsWRWaxnPWGV6WTr3blqsFTylZgQNBTzsIWzjf/VUtwtbtf2Ivo302fuP4d+Gd0cJboLdkd3HXp0L9N87Ts5W/DQa9P8ACTvApY3K4q7jTHq7X/DUXrYkA8U9IOEpQoXMmCvVxM7OSyc7TBMTq6raHVqhankRMIVoGNqWaAcXdDWu0alGrU3znhGxtapjMO1npYGijaZvsRfRvps/cf3Uvo302fuP4nJoDlN2Y7suDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4MuDLgy4Mhyl3ShNF9G+mz9x/Fj9sX7jH9yT4L6N9Nn7j+LH7Yv3GP7knwX0b6bP3H8WP2xfuMf3JPgvo302fuP4JHvFOC2T/52TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2TWya2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Xujodjvwe7O4+gtxbcaKKKKKKKKKKKKKKKKSNtvpW/BYMcN19Ofoz8RMXxPRRRRRRRRRRRRRRRRRRRX+Vooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooor+5Xqdfj3YSsvh0svF/G6afBbj3SIf8AKXmjebF7sEb5mWlFyI28smktOTHhJjwkx4waeVk0+x0HsmXmvi3ZHi4ak4f8M8LDUj73wirYnbchfonnqJU3ZHOo2aeGK+ZlJxcSNrDJtPTkiWYInmCGubfc0ncqZp+2iJJVpoXf4+WBf7Hp/Wn8d9T7pHWSJbxQtyDtD9xpr9BB2LoX8eriv7nYwlJNpbDhJJNrhk5HVkoShhiTk6RKDg6lwjBy2RyS5easfG6IUvDtR75NSD8qH+vQ1cTpmnfJF09yFamrKCWH/wDRru3bVM8MlCXNeehpRbk9TV2W5OfPJyI35HupWN80Vprpk1JQcEorPV/Gyo0f1Ly4mulFRUZWkuxN87u8mooeXppfk0IxXiaT7klHozwulCeolNmtrLVdVjsa+moTUYi8Qo6KglaT/wC5GSX6EtkzVguVTXX42/6j1XVLCHrStNdDV1nqdMi12oxj2IazjqeYdTR1XpTU10Od3Zq6z1Z2xalR5SGsoxarLLdZ/Yb61wb24vjeWuL4/dQneT8lC+L2VlsW7KymdSCwMYxrLY+DHw+4isI+39j1fR149f4PS/o6m/8AQKdChJptLbg9OSiptYZGLldL4F6i3Ii7Edh+1i2ELIt2dj7uPVcX1Op1NojXQbwjqIjuRERF/F9Pq1dMUHJ0iUHF00eXOro01GWjNtZVD05Qy0eXKrSIxbdJHlzTprJ5U0raFGUnSPLknT3PJ1L5ayVTpiyyenLyIf6k9JQWotlg1dNQlSZqQi/D6a5u5DSlByj+CWnOCTl1+BV/EX8Rf5BDcoRv75f+CNrQbXfInelHn7nPP1JpKChq3tg1YVqq/a//AIJyhp+Iu3j8GlyeVN3WTUnHkjHejXlP1glBaeo06yasovTjFO6NbUlGMa7DlzO3wnGS0NNr8mtKKlqJvejxFSkuV2tjVhWhpp43NbE5f+34uR6vW5ue8/8ARENScNmS1Jz9zPUavcjrTjFwTwyWvqSgoN4Q9ebw2Q1JQzE5+eS5jxPjJTnzQZDUlDMR6k20T15zilLgm07RPUnOVyY/ExeZRtmpr80UoqqFO3csj8Sm7aJzjJYVGb/YDn76Hg3FkixL7S6dDeLKxY3SfxzvY8qhYNhYNnZVjzwrD/uzUXJ0h6bik+5p6M5+1DTi6Ix5nSJR5Hyv4GXDbh1r+mTi56emlu7PJnz8lZJaU4q2aGi3pynjFdjRmp6yVHlS5eesEdCckmeGg1rqLIOD5VexPTU9WubclUZtLKPAQhPVUprCPFci1HJLDJO3aXwKuD4db/pkHCOlp8/W89jS0H5rjLoJqWhPljWxpX5Gp/oeC/nqzUjHU01KHTccVCMcXZOo+Mvp/wDhoSbhnZM0Fenz/dmhRbdGnKPNGEXiy9JTnGbwzUhGMqi7Xxoh6k3hserqN815PN1H1I62pFUmR1Jxdpi1JpNJi1Zpct4PMkRnKOBzfNzXk1NSeq7k8kJckkycuaTfxzXwl0/onT4f6vikRFkjkTIoT+i+KR1oTtXwYhfxetfDkvah7D2ofuYt2JZE8kXUhLFEdyGwtyCoayxbkNuEtuCwPIsGxLKTR0Qt+L3fYfuYzoLbJBvqfYIghbj97H/4H+Nx7KhkR7NHSiWWx9DqiW6oeyPtO3DqzqjZ4OloYveyCwdPhXp9aVf5rr+wmh4VGwh9zo2T2kIj72yPssZ91C3G8N8HjHxn1N+Cxw3HnjWB5R+TYa6cH/uAavBfXi+DxfB/W/jND4RHtZtFk8pi3PvY+p9wnlm1ULMskMIXuf8AuxVufcLJ1HsdUREdckbbyRfxy88etiVNPsIQiLEv7fOnyH1fF8Vwvb43l7UPYe1D9zFuxLI/eK8WLZ2RVl/qQ7cUP2fH27/Y+eEhIjln54XmuFYX5FlJ9zql3I5ZF2P9LKwX1Lxa4r3tDxwQjqxF8L4dLLEuEXzEc5Ie2xZNLKyLuLY6M60RdoW7XYWXQ9zpYhbX9Hb8j3SFk3eBO1ZfCyWIpkVmi8Xx6EdzTyIbwuF4b4p4Hhj6Ii7tl9+Hf8cXvQsuhDwQQtuEsUxIWaI9uL4drIiyXv8A+nW7pcEqZ+DqVmy+osJCxRWULDEqH+pl4PwVijZ3w/I88FgR1YiuFHWzdUUJ8EqF+lCwq4RXKJYoWx0ovNiVIW7ffg8uz8cOlfR2H0/AsGzEqVFcdyOCsVw6lUqE6I/pfCrS4Vhrith5Z2YlSrgkd/zx62LDsQ8l0dOD6G1CxQuL4dhYFgrf++FqkmPZjw64LhQsnS+PXl+rp8Yy2SO482dGhLhdURwiOFFEFSzw+6+LzQnVGmnHcWxqZuiWbOrOj/bzn7UPbhnnZ9zFvQz8E8JvhZJ1RLBtSE8M6MW7HhHWi8WPg1UmyHsQuDxg/BeLE7Vm1oaokNiHg7knUWV9puh9BbsXCOcG+RizxumkdLFmTReWLqN7sew9/hF/wa4vhebEqVfUsDyPI+DGMfBcFwSF9VZH+wkiLtHV8Oq4vqjrQtyOVwXF4obGMvJ1FlieBnThf0WN0rKzXGWL/HDY2HwbxY9uDNTUWnGzzUjnoT5jzI3R5kboWrFqyWpFNMTv4NRFUdWPoVsdhFZPusXQiNbiFhseUh9OL3Z3/Ihb2JYQ97OjHufdfBDzZsVsXwkSzY0fc2PYupsWCKN4sr9NDwqNSPNChQ3HD9LIKokU3GmRhJytnK0im6ZFVFfG3T9iHfH0X9KVs6/QrLX0vp8U7t2P3Oh9DudGbZK2R+BlcqoREQs8pH3EM8H0FQrIpWK+Y6MjuzuPoJ/t4dUL9wH/2Q==\" alt=\"image\"></p>\n<h2 id=\"图片\"><a href=\"#图片\" class=\"headerlink\" title=\"图片\"></a>图片</h2>"}],"PostAsset":[],"PostCategory":[{"post_id":"ckkgl4h1n0002q0us9nm23t0s","category_id":"ckkgl4h1s0005q0usduf0f0si","_id":"ckkgl4h20000jq0usf4bca212"},{"post_id":"ckkgl4h1q0004q0us4k1c9mgl","category_id":"ckkgl4h1x000dq0ushq5ic4ha","_id":"ckkgl4h24000pq0us1k0f2yal"},{"post_id":"ckkgl4h1u0008q0us79km6rgb","category_id":"ckkgl4h1s0005q0usduf0f0si","_id":"ckkgl4h26000vq0us52xq8mja"},{"post_id":"ckkgl4h1v000aq0us5dvogdh1","category_id":"ckkgl4h1x000dq0ushq5ic4ha","_id":"ckkgl4h280011q0us0v52dxt0"},{"post_id":"ckkgl4h1w000cq0us9joj5lql","category_id":"ckkgl4h26000uq0us88sm9xow","_id":"ckkgl4h2a0016q0us2qfr5tm2"},{"post_id":"ckkgl4h1y000hq0uschg6gnkm","category_id":"ckkgl4h280012q0us27sca3ci","_id":"ckkgl4h2e001cq0us02ixhauj"},{"post_id":"ckkgl4h290015q0usaq8x4ovx","category_id":"ckkgl4h1s0005q0usduf0f0si","_id":"ckkgl4h2f001hq0us0cb7929t"},{"post_id":"ckkgl4h2c0018q0us87eg6xwr","category_id":"ckkgl4h280012q0us27sca3ci","_id":"ckkgl4h2g001kq0usehpxfocf"},{"post_id":"ckkgl4h20000iq0us9rcnea4e","category_id":"ckkgl4h2a0017q0us2gt04bp1","_id":"ckkgl4h2i001oq0us8ifv7ovu"},{"post_id":"ckkgl4h22000mq0us2sh63hvq","category_id":"ckkgl4h280012q0us27sca3ci","_id":"ckkgl4h2k001tq0usbn3uaf30"},{"post_id":"ckkgl4h2i001pq0us2a5ibxmk","category_id":"ckkgl4h280012q0us27sca3ci","_id":"ckkgl4h2m001yq0usadcff3ab"},{"post_id":"ckkgl4h23000nq0us05r6g77b","category_id":"ckkgl4h280012q0us27sca3ci","_id":"ckkgl4h2n0023q0us7nt704w3"},{"post_id":"ckkgl4h26000tq0us34q6b1ms","category_id":"ckkgl4h280012q0us27sca3ci","_id":"ckkgl4h2o0026q0us4hfseba0"},{"post_id":"ckkgl4h27000yq0ushwbl9req","category_id":"ckkgl4h2m001zq0usalyb6sns","_id":"ckkgl4h2r002dq0usf6k7f613"},{"post_id":"ckkgl4h270010q0us3u25ftsz","category_id":"ckkgl4h280012q0us27sca3ci","_id":"ckkgl4h2t002iq0us40dwbzgv"},{"post_id":"ckkgl4h280013q0us72238s9e","category_id":"ckkgl4h2r002cq0us9q8339j1","_id":"ckkgl4h2v002oq0us80os8hb1"},{"post_id":"ckkgl4h2d001bq0usbvfoa99v","category_id":"ckkgl4h2t002jq0us9jeu9bby","_id":"ckkgl4h2x002vq0us4x8fbdnz"},{"post_id":"ckkgl4h2e001eq0us8gpqfxoi","category_id":"ckkgl4h2t002jq0us9jeu9bby","_id":"ckkgl4h2z0031q0us4z1ae14e"},{"post_id":"ckkgl4h2w002sq0us5uyrch03","category_id":"ckkgl4h280012q0us27sca3ci","_id":"ckkgl4h300035q0usdugz2c23"},{"post_id":"ckkgl4h2g001iq0uscxeg9q8d","category_id":"ckkgl4h2x002uq0useg2r18f2","_id":"ckkgl4h31003aq0us3bvlgzpm"},{"post_id":"ckkgl4h2j001rq0usgp5bcun6","category_id":"ckkgl4h2z0033q0us95frgow9","_id":"ckkgl4h34003hq0usfqy13cuy"},{"post_id":"ckkgl4h2k001vq0us6fqu42ke","category_id":"ckkgl4h2z0033q0us95frgow9","_id":"ckkgl4h35003jq0usf72n3t9t"},{"post_id":"ckkgl4h2l001xq0us3jqk4ing","category_id":"ckkgl4h34003gq0usdelfhq18","_id":"ckkgl4h36003mq0us7e4jbtms"},{"post_id":"ckkgl4h2n0022q0us8ldc0taq","category_id":"ckkgl4h35003kq0us7t07atps","_id":"ckkgl4h36003rq0us412f6xp0"},{"post_id":"ckkgl4h2o0025q0us2ps2cgf5","category_id":"ckkgl4h36003oq0us4iyd4anp","_id":"ckkgl4h37003uq0us3irndmgo"},{"post_id":"ckkgl4h2q0029q0usf51f6q1i","category_id":"ckkgl4h36003sq0usgxzja3wo","_id":"ckkgl4h38003xq0usc4j97hgm"},{"post_id":"ckkgl4h2q002bq0uscati3t4e","category_id":"ckkgl4h37003vq0us642kdjev","_id":"ckkgl4h390043q0us86w930nq"},{"post_id":"ckkgl4h2r002eq0usf8rt7khj","category_id":"ckkgl4h38003zq0usanh69r7y","_id":"ckkgl4h390047q0us6i0h2tde"},{"post_id":"ckkgl4h2s002hq0us16821dxs","category_id":"ckkgl4h390044q0usflu241vr","_id":"ckkgl4h3a004bq0us0ikuh1jb"},{"post_id":"ckkgl4h2t002kq0usb0nxhwv2","category_id":"ckkgl4h3a0049q0ush13x6juy","_id":"ckkgl4h3b004fq0ushzmz72an"},{"post_id":"ckkgl4h2u002mq0usblag398f","category_id":"ckkgl4h3a004dq0us4gw78ocf","_id":"ckkgl4h3c004jq0us4b5z97xk"},{"post_id":"ckkgl4h2v002qq0ushg3xhh6p","category_id":"ckkgl4h3b004hq0usb1qweqs8","_id":"ckkgl4h3d004nq0us1axwchts"},{"post_id":"ckkgl4h2x002wq0us1x4dbd4a","category_id":"ckkgl4h3c004lq0us73h19qyy","_id":"ckkgl4h3d004qq0us0q5974jg"},{"post_id":"ckkgl4h2y002zq0us7oem03mx","category_id":"ckkgl4h3d004oq0usgn7scp01","_id":"ckkgl4h3e004wq0usgj938cx1"},{"post_id":"ckkgl4h2z0032q0usa9jqd204","category_id":"ckkgl4h3c004lq0us73h19qyy","_id":"ckkgl4h3g004zq0usay3oamkb"},{"post_id":"ckkgl4h300036q0usbdz942po","category_id":"ckkgl4h3c004lq0us73h19qyy","_id":"ckkgl4h3g0053q0usac3gcu2o"},{"post_id":"ckkgl4h310039q0usei1lakul","category_id":"ckkgl4h3f004yq0us3inogz1z","_id":"ckkgl4h3i0058q0usesp988fi"},{"post_id":"ckkgl4h32003cq0us41w053h2","category_id":"ckkgl4h3f004yq0us3inogz1z","_id":"ckkgl4h3i005bq0us40ki3o94"},{"post_id":"ckkgl4h33003eq0us8f3e64oa","category_id":"ckkgl4h3h0057q0us8gjtheli","_id":"ckkgl4h3j005eq0usg4r7620o"},{"post_id":"ckkgl4h3x0067q0ushcyh5fg9","category_id":"ckkgl4h3f004yq0us3inogz1z","_id":"ckkgl4h40006cq0us9kb359y2"},{"post_id":"ckkgl4h3y0068q0usgc6watjd","category_id":"ckkgl4h40006aq0us49l3d7po","_id":"ckkgl4h41006eq0uscbs02jfg"},{"post_id":"ckkgl4h5j006hq0us9qfl3ldo","category_id":"ckkgl4h2t002jq0us9jeu9bby","_id":"ckkgl4h5l006kq0us5ar591qf"}],"PostTag":[{"post_id":"ckkgl4h1n0002q0us9nm23t0s","tag_id":"ckkgl4h1t0006q0us3f023tz9","_id":"ckkgl4h1x000fq0usc7nq0355"},{"post_id":"ckkgl4h1q0004q0us4k1c9mgl","tag_id":"ckkgl4h1x000eq0usdfcffhx6","_id":"ckkgl4h25000sq0usbra734vc"},{"post_id":"ckkgl4h1q0004q0us4k1c9mgl","tag_id":"ckkgl4h20000lq0ush70c5j4y","_id":"ckkgl4h26000wq0usadbnc2m2"},{"post_id":"ckkgl4h1u0008q0us79km6rgb","tag_id":"ckkgl4h24000qq0us6nesenm0","_id":"ckkgl4h27000zq0us9vtu5o1h"},{"post_id":"ckkgl4h1v000aq0us5dvogdh1","tag_id":"ckkgl4h26000xq0useg2igx0x","_id":"ckkgl4h2d001aq0us0rvx5gxo"},{"post_id":"ckkgl4h1v000aq0us5dvogdh1","tag_id":"ckkgl4h20000lq0ush70c5j4y","_id":"ckkgl4h2e001dq0usd19252tl"},{"post_id":"ckkgl4h1w000cq0us9joj5lql","tag_id":"ckkgl4h2d0019q0us2bdp9nds","_id":"ckkgl4h2g001jq0us4o7l01u8"},{"post_id":"ckkgl4h1y000hq0uschg6gnkm","tag_id":"ckkgl4h2f001gq0us2338fqre","_id":"ckkgl4h2j001qq0us3xc2b5u8"},{"post_id":"ckkgl4h20000iq0us9rcnea4e","tag_id":"ckkgl4h2i001nq0usbn5v234l","_id":"ckkgl4h2l001wq0uscl0uhr2v"},{"post_id":"ckkgl4h20000iq0us9rcnea4e","tag_id":"ckkgl4h1t0006q0us3f023tz9","_id":"ckkgl4h2m0020q0usabnbbi24"},{"post_id":"ckkgl4h22000mq0us2sh63hvq","tag_id":"ckkgl4h2f001gq0us2338fqre","_id":"ckkgl4h2o0024q0us9qg64w90"},{"post_id":"ckkgl4h23000nq0us05r6g77b","tag_id":"ckkgl4h2f001gq0us2338fqre","_id":"ckkgl4h2q002aq0us38rxcovm"},{"post_id":"ckkgl4h26000tq0us34q6b1ms","tag_id":"ckkgl4h2p0028q0us5y5c2kak","_id":"ckkgl4h2s002gq0usc0k99bbq"},{"post_id":"ckkgl4h27000yq0ushwbl9req","tag_id":"ckkgl4h2s002fq0useduo2ons","_id":"ckkgl4h2v002nq0uscyveg1ph"},{"post_id":"ckkgl4h270010q0us3u25ftsz","tag_id":"ckkgl4h2u002lq0usgqrd9856","_id":"ckkgl4h2x002tq0usftuc430a"},{"post_id":"ckkgl4h2w002sq0us5uyrch03","tag_id":"ckkgl4h2f001gq0us2338fqre","_id":"ckkgl4h2y002xq0usavkrblyo"},{"post_id":"ckkgl4h280013q0us72238s9e","tag_id":"ckkgl4h1t0006q0us3f023tz9","_id":"ckkgl4h2z0030q0usefsq5lnv"},{"post_id":"ckkgl4h280013q0us72238s9e","tag_id":"ckkgl4h2w002rq0ush7figqkb","_id":"ckkgl4h300034q0us8mxkdssq"},{"post_id":"ckkgl4h290015q0usaq8x4ovx","tag_id":"ckkgl4h2y002yq0us6ky1gxzo","_id":"ckkgl4h310038q0us3t08a9lw"},{"post_id":"ckkgl4h2c0018q0us87eg6xwr","tag_id":"ckkgl4h300037q0us50w2ft19","_id":"ckkgl4h34003fq0us1pnt3ryj"},{"post_id":"ckkgl4h2d001bq0usbvfoa99v","tag_id":"ckkgl4h33003dq0us8qbs0cwo","_id":"ckkgl4h36003nq0us50c9c6vg"},{"post_id":"ckkgl4h2d001bq0usbvfoa99v","tag_id":"ckkgl4h35003iq0uscvb7biou","_id":"ckkgl4h36003pq0us4y6sck9r"},{"post_id":"ckkgl4h2e001eq0us8gpqfxoi","tag_id":"ckkgl4h35003lq0usfg4tgknm","_id":"ckkgl4h38003yq0usf82925hv"},{"post_id":"ckkgl4h2e001eq0us8gpqfxoi","tag_id":"ckkgl4h36003qq0us83dc55e6","_id":"ckkgl4h380040q0usd9bld8bh"},{"post_id":"ckkgl4h2e001eq0us8gpqfxoi","tag_id":"ckkgl4h37003tq0usbq693nq9","_id":"ckkgl4h390042q0us070th4t1"},{"post_id":"ckkgl4h2g001iq0uscxeg9q8d","tag_id":"ckkgl4h37003wq0us5ftlgovw","_id":"ckkgl4h390045q0us1zlcbzhj"},{"post_id":"ckkgl4h2i001pq0us2a5ibxmk","tag_id":"ckkgl4h380041q0ushlbp35we","_id":"ckkgl4h390048q0us0z25btfy"},{"post_id":"ckkgl4h2j001rq0usgp5bcun6","tag_id":"ckkgl4h390046q0us6dup8lkx","_id":"ckkgl4h3a004cq0ush1zl07h8"},{"post_id":"ckkgl4h2k001vq0us6fqu42ke","tag_id":"ckkgl4h3a004aq0usdnhk1ox2","_id":"ckkgl4h3b004gq0usdtmw9t0x"},{"post_id":"ckkgl4h2l001xq0us3jqk4ing","tag_id":"ckkgl4h3b004eq0us2oo12mcc","_id":"ckkgl4h3c004kq0us9p4j9a35"},{"post_id":"ckkgl4h2n0022q0us8ldc0taq","tag_id":"ckkgl4h3c004iq0us88hc1ofv","_id":"ckkgl4h3d004rq0us3d52c44m"},{"post_id":"ckkgl4h2n0022q0us8ldc0taq","tag_id":"ckkgl4h3c004mq0us6y50bei8","_id":"ckkgl4h3e004tq0usgz1zdtc8"},{"post_id":"ckkgl4h2o0025q0us2ps2cgf5","tag_id":"ckkgl4h35003iq0uscvb7biou","_id":"ckkgl4h3g0050q0us0gkdfo2h"},{"post_id":"ckkgl4h2o0025q0us2ps2cgf5","tag_id":"ckkgl4h3e004uq0us3inj4t0x","_id":"ckkgl4h3g0051q0usdd2qfy48"},{"post_id":"ckkgl4h2q0029q0usf51f6q1i","tag_id":"ckkgl4h35003iq0uscvb7biou","_id":"ckkgl4h3h0054q0uscbnv6y9q"},{"post_id":"ckkgl4h2q002bq0uscati3t4e","tag_id":"ckkgl4h3g0052q0usftewd89t","_id":"ckkgl4h3i0059q0us68lkc33o"},{"post_id":"ckkgl4h2r002eq0usf8rt7khj","tag_id":"ckkgl4h3h0056q0usfew48dje","_id":"ckkgl4h3i005cq0usde2p1w06"},{"post_id":"ckkgl4h2s002hq0us16821dxs","tag_id":"ckkgl4h3i005aq0us62izg110","_id":"ckkgl4h3j005fq0us5szu931a"},{"post_id":"ckkgl4h2t002kq0usb0nxhwv2","tag_id":"ckkgl4h3j005dq0us80p7bxmb","_id":"ckkgl4h3j005hq0us30g51udt"},{"post_id":"ckkgl4h2u002mq0usblag398f","tag_id":"ckkgl4h3j005gq0usdp5bbov1","_id":"ckkgl4h3k005jq0us1ibt14j4"},{"post_id":"ckkgl4h2v002qq0ushg3xhh6p","tag_id":"ckkgl4h3k005iq0ush0d2809p","_id":"ckkgl4h3k005lq0us8dn74iyt"},{"post_id":"ckkgl4h2x002wq0us1x4dbd4a","tag_id":"ckkgl4h3k005kq0ush4bz8keo","_id":"ckkgl4h3l005oq0usafhd85k8"},{"post_id":"ckkgl4h2x002wq0us1x4dbd4a","tag_id":"ckkgl4h3k005mq0us4o761hbp","_id":"ckkgl4h3l005pq0us5cin42fc"},{"post_id":"ckkgl4h2y002zq0us7oem03mx","tag_id":"ckkgl4h3l005nq0uscvduf9vc","_id":"ckkgl4h3m005sq0us30jictbe"},{"post_id":"ckkgl4h2y002zq0us7oem03mx","tag_id":"ckkgl4h3l005qq0us55eeg4jm","_id":"ckkgl4h3m005tq0us9jiy80vq"},{"post_id":"ckkgl4h2z0032q0usa9jqd204","tag_id":"ckkgl4h3k005kq0ush4bz8keo","_id":"ckkgl4h3n005wq0us48cu49qa"},{"post_id":"ckkgl4h2z0032q0usa9jqd204","tag_id":"ckkgl4h3k005mq0us4o761hbp","_id":"ckkgl4h3n005xq0us6y3b5l3y"},{"post_id":"ckkgl4h300036q0usbdz942po","tag_id":"ckkgl4h3k005kq0ush4bz8keo","_id":"ckkgl4h3o0060q0us34ve5msy"},{"post_id":"ckkgl4h300036q0usbdz942po","tag_id":"ckkgl4h3n005yq0us73pla9yv","_id":"ckkgl4h3o0061q0us2vh17v58"},{"post_id":"ckkgl4h310039q0usei1lakul","tag_id":"ckkgl4h3n005zq0us5j8w24jo","_id":"ckkgl4h3o0063q0us4kak9rtv"},{"post_id":"ckkgl4h32003cq0us41w053h2","tag_id":"ckkgl4h3n005zq0us5j8w24jo","_id":"ckkgl4h3q0065q0usc6pohcfn"},{"post_id":"ckkgl4h33003eq0us8f3e64oa","tag_id":"ckkgl4h3o0064q0usgwmg4pr6","_id":"ckkgl4h3q0066q0us63a8g4td"},{"post_id":"ckkgl4h3x0067q0ushcyh5fg9","tag_id":"ckkgl4h3n005zq0us5j8w24jo","_id":"ckkgl4h3y0069q0us5bpr333p"},{"post_id":"ckkgl4h3y0068q0usgc6watjd","tag_id":"ckkgl4h40006bq0usc58sgpv3","_id":"ckkgl4h41006fq0us1gxmblle"},{"post_id":"ckkgl4h3y0068q0usgc6watjd","tag_id":"ckkgl4h41006dq0ushojh13ey","_id":"ckkgl4h41006gq0us8766ghmc"},{"post_id":"ckkgl4h5j006hq0us9qfl3ldo","tag_id":"ckkgl4h33003dq0us8qbs0cwo","_id":"ckkgl4h5k006iq0us2bdr7sb2"},{"post_id":"ckkgl4h5j006hq0us9qfl3ldo","tag_id":"ckkgl4h35003iq0uscvb7biou","_id":"ckkgl4h5l006jq0us4tat4xsq"}],"Tag":[{"name":"linux","_id":"ckkgl4h1t0006q0us3f023tz9"},{"name":"SpringBoot","_id":"ckkgl4h1x000eq0usdfcffhx6"},{"name":"java","_id":"ckkgl4h20000lq0ush70c5j4y"},{"name":"centos7优化","_id":"ckkgl4h24000qq0us6nesenm0"},{"name":"springMVC","_id":"ckkgl4h26000xq0useg2igx0x"},{"name":"test","_id":"ckkgl4h2d0019q0us2bdp9nds"},{"name":"flume","_id":"ckkgl4h2f001gq0us2338fqre"},{"name":"gcc","_id":"ckkgl4h2i001nq0usbn5v234l"},{"name":"hadoop","_id":"ckkgl4h2p0028q0us5y5c2kak"},{"name":"hexo","_id":"ckkgl4h2s002fq0useduo2ons"},{"name":"kafka","_id":"ckkgl4h2u002lq0usgqrd9856"},{"name":"nginx","_id":"ckkgl4h2w002rq0ush7figqkb"},{"name":"proxmox","_id":"ckkgl4h2y002yq0us6ky1gxzo"},{"name":"spark","_id":"ckkgl4h300037q0us50w2ft19"},{"name":"pipenv","_id":"ckkgl4h33003dq0us8qbs0cwo"},{"name":"python","_id":"ckkgl4h35003iq0uscvb7biou"},{"name":"tag","_id":"ckkgl4h35003lq0usfg4tgknm"},{"name":"Kite","_id":"ckkgl4h36003qq0us83dc55e6"},{"name":"tabnine","_id":"ckkgl4h37003tq0usbq693nq9"},{"name":"cmdb","_id":"ckkgl4h37003wq0us5ftlgovw"},{"name":"zookeeper","_id":"ckkgl4h380041q0ushlbp35we"},{"name":"go","_id":"ckkgl4h390046q0us6dup8lkx"},{"name":"go-mod","_id":"ckkgl4h3a004aq0usdnhk1ox2"},{"name":"ansible","_id":"ckkgl4h3b004eq0us2oo12mcc"},{"name":"es","_id":"ckkgl4h3c004iq0us88hc1ofv"},{"name":"elasticsearch","_id":"ckkgl4h3c004mq0us6y50bei8"},{"name":"flask","_id":"ckkgl4h3e004uq0us3inj4t0x"},{"name":"k8s","_id":"ckkgl4h3g0052q0usftewd89t"},{"name":"redis","_id":"ckkgl4h3h0056q0usfew48dje"},{"name":"ldap","_id":"ckkgl4h3i005aq0us62izg110"},{"name":"jenkins","_id":"ckkgl4h3j005dq0us80p7bxmb"},{"name":"minio","_id":"ckkgl4h3j005gq0usdp5bbov1"},{"name":"mysql","_id":"ckkgl4h3k005iq0ush0d2809p"},{"name":"prometheus","_id":"ckkgl4h3k005kq0ush4bz8keo"},{"name":"node_exporter","_id":"ckkgl4h3k005mq0us4o761hbp"},{"name":"mongodb","_id":"ckkgl4h3l005nq0uscvduf9vc"},{"name":"auth","_id":"ckkgl4h3l005qq0us55eeg4jm"},{"name":"dingding","_id":"ckkgl4h3n005yq0us73pla9yv"},{"name":"salt","_id":"ckkgl4h3n005zq0us5j8w24jo"},{"name":"vue3","_id":"ckkgl4h3o0064q0usgwmg4pr6"},{"name":"ca","_id":"ckkgl4h40006bq0usc58sgpv3"},{"name":"ssl","_id":"ckkgl4h41006dq0ushojh13ey"}]}}